!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var c=n[t];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function t(e,t,c){return t&&n(e.prototype,t),c&&n(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{dzKq:function(n,c,r){"use strict";r.r(c),r.d(c,"AdmissionModule",(function(){return fe}));var i=r("2kYt"),a=r("DSWM"),o=r("sEIs"),s=r("unpb"),d=r("RRjC"),u=r("sN6X"),l=r("Fp6c"),g=r("wgY5"),m=r("PIN6"),v=r("cHUu"),p=r("mOXJ"),f=r("EM62"),h=r("K/wI"),w=r("/Ez/"),x=r("s2Ay"),b=r("OSFB"),k=r("NSn/"),O=function(e,n,t,c){return new(t||(t=Promise))((function(r,i){function a(e){try{s(c.next(e))}catch(n){i(n)}}function o(e){try{s(c.throw(e))}catch(n){i(n)}}function s(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}s((c=c.apply(e,n||[])).next())}))};function P(e,n){if(1&e&&(f.Pc(0,"p",12),f.zd(1),f.Zc(2,"changeLanguage"),f.Zc(3,"async"),f.Oc()),2&e){var t,c=f.Yc(2);f.wc(1),f.Ad(f.ad(2,1,null==(t=f.ad(3,3,c.user))||null==t.entranceGate?null:t.entranceGate.name))}}function E(e,n){1&e&&(f.Pc(0,"div",21),f.zd(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Ad(f.ad(2,1,"admission.check.success")))}function y(e,n){1&e&&(f.Pc(0,"div",21),f.zd(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Ad(f.ad(2,1,"admission.check.reEntry")))}var D=function(e){return[e]};function S(e,n){if(1&e&&(f.Pc(0,"tr"),f.Pc(1,"th",20),f.zd(2),f.Zc(3,"translate"),f.Zc(4,"translate"),f.Oc(),f.Pc(5,"td",20),f.Kc(6,"app-item-list",22),f.Oc(),f.Oc()),2&e){var t=f.Yc(4);f.wc(2),f.Cd("",f.ad(3,3,"common.seat")," / ",f.ad(4,5,"common.ticket"),""),f.wc(4),f.ed("authorizeSeatReservations",f.hd(7,D,null==t.qrcodeToken?null:t.qrcodeToken.availableReservation))}}var C=function(e){return{"background-color":e}};function I(e,n){if(1&e&&(f.Pc(0,"div",15),f.Pc(1,"div",16),f.Kc(2,"div",17),f.xd(3,E,3,3,"div",18),f.xd(4,y,3,3,"div",18),f.Pc(5,"table",19),f.Kc(6,"thead"),f.Pc(7,"tbody"),f.xd(8,S,7,9,"tr",10),f.Pc(9,"tr"),f.Pc(10,"th",20),f.zd(11),f.Zc(12,"translate"),f.Oc(),f.Pc(13,"td",20),f.Pc(14,"p"),f.zd(15),f.Oc(),f.Oc(),f.Oc(),f.Oc(),f.Oc(),f.Oc(),f.Oc()),2&e){var t=f.Yc(3);f.wc(2),f.ed("ngStyle",f.hd(8,C,null==t.qrcodeToken?null:t.qrcodeToken.availableReservation.reservedTicket.ticketType.color)),f.wc(1),f.ed("ngIf",0===(null==t.qrcodeToken?null:t.qrcodeToken.checkTokenActions.length)),f.wc(1),f.ed("ngIf",(null==t.qrcodeToken?null:t.qrcodeToken.checkTokenActions.length)>0),f.wc(4),f.ed("ngIf",null==t.qrcodeToken?null:t.qrcodeToken.availableReservation.reservedTicket.ticketedSeat),f.wc(3),f.Ad(f.ad(12,6,"admission.check.entryCount")),f.wc(4),f.Ad(null==t.qrcodeToken?null:t.qrcodeToken.checkTokenActions.length)}}function T(e,n){if(1&e&&(f.Pc(0,"div",23),f.Pc(1,"div",16),f.Pc(2,"div",24),f.zd(3),f.Zc(4,"translate"),f.Oc(),f.Pc(5,"p",25),f.zd(6),f.Zc(7,"translate"),f.Oc(),f.Pc(8,"table",19),f.Kc(9,"thead"),f.Pc(10,"tbody"),f.Pc(11,"tr"),f.Pc(12,"th",20),f.zd(13,"message"),f.Oc(),f.Pc(14,"td",20),f.Pc(15,"p"),f.zd(16),f.Oc(),f.Oc(),f.Oc(),f.Pc(17,"tr"),f.Pc(18,"th",20),f.zd(19,"inputCode"),f.Oc(),f.Pc(20,"td",20),f.Pc(21,"p"),f.zd(22),f.Oc(),f.Oc(),f.Oc(),f.Pc(23,"tr"),f.Pc(24,"th",20),f.zd(25,"statusCode"),f.Oc(),f.Pc(26,"td",20),f.Pc(27,"p"),f.zd(28),f.Oc(),f.Oc(),f.Oc(),f.Oc(),f.Oc(),f.Oc(),f.Oc()),2&e){var t=f.Yc(3);f.wc(3),f.Ad(f.ad(4,5,"admission.check.danger")),f.wc(3),f.Bd(" ",f.ad(7,7,"admission.check.alert.qrcode")," "),f.wc(10),f.Ad(null==t.qrcodeToken||null==t.qrcodeToken.error?null:t.qrcodeToken.error.message),f.wc(6),f.Ad(null==t.qrcodeToken||null==t.qrcodeToken.error?null:t.qrcodeToken.error.inputCode),f.wc(6),f.Ad(null==t.qrcodeToken?null:t.qrcodeToken.statusCode)}}function z(e,n){if(1&e&&(f.Pc(0,"div"),f.xd(1,I,16,10,"div",13),f.xd(2,T,29,9,"div",14),f.Oc()),2&e){var t=f.Yc(2);f.wc(1),f.ed("ngIf",null==t.qrcodeToken?null:t.qrcodeToken.availableReservation),f.wc(1),f.ed("ngIf",!(null!=t.qrcodeToken&&t.qrcodeToken.availableReservation))}}function M(e,n){1&e&&(f.Pc(0,"div",26),f.Pc(1,"div",27),f.Pc(2,"div",28),f.zd(3),f.Zc(4,"translate"),f.Oc(),f.Pc(5,"p"),f.zd(6),f.Zc(7,"translate"),f.Oc(),f.Oc(),f.Oc()),2&e&&(f.wc(3),f.Ad(f.ad(4,2,"admission.check.waiting")),f.wc(3),f.Ad(f.ad(7,4,"admission.check.alert.waiting")))}function Y(e,n){if(1&e&&(f.Pc(0,"div",8),f.xd(1,P,4,5,"p",9),f.Zc(2,"async"),f.xd(3,z,3,2,"div",10),f.xd(4,M,8,6,"div",11),f.Oc()),2&e){var t,c=f.Yc(),r=null==(t=f.ad(2,3,c.user))?null:t.entranceGate;f.wc(1),f.ed("ngIf",r),f.wc(2),f.ed("ngIf",c.qrcodeToken),f.wc(1),f.ed("ngIf",!c.qrcodeToken)}}function Z(e,n){if(1&e&&(f.Pc(0,"div",29),f.Kc(1,"app-item-event",30),f.Pc(2,"div",31),f.Pc(3,"div"),f.Pc(4,"p",32),f.Pc(5,"strong",33),f.zd(6),f.Zc(7,"translate"),f.Oc(),f.zd(8),f.Zc(9,"formatDate"),f.Oc(),f.Pc(10,"p"),f.Pc(11,"strong",33),f.zd(12),f.Zc(13,"translate"),f.Oc(),f.zd(14),f.Zc(15,"formatDate"),f.Zc(16,"formatDate"),f.Oc(),f.Pc(17,"p",32),f.Pc(18,"strong",33),f.zd(19),f.Zc(20,"translate"),f.Oc(),f.zd(21),f.Oc(),f.Pc(22,"p"),f.Pc(23,"strong",33),f.zd(24),f.Zc(25,"translate"),f.Oc(),f.zd(26),f.Oc(),f.Oc(),f.Oc(),f.Oc()),2&e){var t=f.Yc();f.wc(1),f.ed("screeningEvent",t.screeningEvent),f.wc(5),f.Ad(f.ad(7,10,"common.doorTime")),f.wc(2),f.Bd(" ",f.bd(9,12,null==t.screeningEvent?null:t.screeningEvent.doorTime,"MM/DD (ddd) HH:mm")," "),f.wc(4),f.Ad(f.ad(13,15,"common.startDate")),f.wc(2),f.Cd(" ",f.bd(15,17,null==t.screeningEvent?null:t.screeningEvent.startDate,"MM/DD (ddd) HH:mm")," - ",f.bd(16,20,null==t.screeningEvent?null:t.screeningEvent.endDate,"HH:mm")," "),f.wc(5),f.Ad(f.ad(20,23,"common.reservation")),f.wc(2),f.Bd(" ",(null==t.screeningEvent?null:t.screeningEvent.maximumAttendeeCapacity)-(null==t.screeningEvent?null:t.screeningEvent.remainingAttendeeCapacity)," "),f.wc(3),f.Ad(f.ad(25,25,"common.admission")),f.wc(2),f.Bd(" ",null==t.screeningEvent?null:t.screeningEvent.attendeeCount," ")}}var R=function(){function n(t,c,r,i){e(this,n),this.store=t,this.actionService=c,this.qrcodeService=r,this.router=i,this.moment=g,this.environment=Object(m.a)()}return t(n,[{key:"ngOnInit",value:function(){return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.inputCode="",this.isLoading=this.store.pipe(Object(u.m)(p.c)),this.admission=this.store.pipe(Object(u.m)(p.a)),this.user=this.store.pipe(Object(u.m)(p.i)),e.prev=1,e.next=4,this.actionService.admission.getData();case 4:n=e.sent,t=n.screeningEvent,this.screeningEvent=t,void 0!==t&&this.update(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.router.navigate(["/error"]);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})))}},{key:"ngOnDestroy",value:function(){clearInterval(this.updateLoop)}},{key:"handleKeyboardEvent",value:function(e){"Enter"===e.key&&this.inputCode.length>0?(this.check(this.inputCode),this.inputCode=""):"Escape"!==e.key&&(this.inputCode+=e.key)}},{key:"check",value:function(e){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t,c,r,i,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.actionService.admission.getData();case 3:return t=n.sent,c=t.screeningEvent,r=t.scheduleDate,n.next=8,this.actionService.user.getData();case 8:if(i=n.sent,a=i.entranceGate,void 0!==r){n.next=12;break}return n.abrupt("return",void this.router.navigate(["/error"]));case 12:return n.next=14,this.actionService.admission.checkQrcode({code:e,screeningEvent:c,scheduleDate:g(r,"YYYY-MM-DD").toDate(),entranceGate:a});case 14:o=n.sent,this.screeningEvent=o.screeningEvent,this.qrcodeToken=o.qrcodeToken,n.next=21;break;case 18:n.prev=18,n.t0=n.catch(0),console.error(n.t0),this.qrcodeToken={checkTokenActions:[],statusCode:n.t0.code?n.t0.code:l.BAD_REQUEST,error:{inputCode:e,message:n.t0.message}};case 21:case"end":return n.stop()}}),n,this,[[0,18]])})))}},{key:"openQRCodeReader",value:function(){var e=this;this.qrcodeService.openQRCodeReader({cb:function(n){return O(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.check(n);case 2:case"end":return e.stop()}}),e,this)})))}})}},{key:"update",value:function(){var e=this;clearInterval(this.updateLoop),this.updateLoop=setInterval((function(){return O(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actionService.admission.getData();case 2:if(n=e.sent,t=n.screeningEvent,e.t0=void 0!==t,!e.t0){e.next=8;break}return e.next=8,this.actionService.admission.getScreeningEvent(t);case 8:case"end":return e.stop()}}),e,this)})))}),6e5)}}]),n}();R.\u0275fac=function(e){return new(e||R)(f.Jc(u.b),f.Jc(v.a),f.Jc(v.e),f.Jc(o.b))},R.\u0275cmp=f.Dc({type:R,selectors:[["app-admission-check"]],hostBindings:function(e,n){1&e&&f.Wc("keypress",(function(e){return n.handleKeyboardEvent(e)}),!1,f.pd)},decls:13,vars:10,consts:[[1,"contents-width","mx-auto","px-3","pt-4"],[1,"buttons","mx-auto","text-center","mb-4"],["type","button",1,"btn","btn-success","btn-block","py-3",3,"click"],["class","mb-4",4,"ngIf"],[1,"contents-width","mx-auto","px-3","pb-5"],["class","mb-4 bg-white",4,"ngIf"],[1,"buttons","mx-auto","text-center"],["type","button","routerLink","/admission/schedule",1,"btn","btn-outline-primary","btn-block","py-3"],[1,"mb-4"],["class","p-2 bg-white text-center font-weight-bold",4,"ngIf"],[4,"ngIf"],["class","p-4 bg-dark text-white text-center",4,"ngIf"],[1,"p-2","bg-white","text-center","font-weight-bold"],["class","position-relative py-4 bg-success text-white",4,"ngIf"],["class","py-4 bg-danger text-white",4,"ngIf"],[1,"position-relative","py-4","bg-success","text-white"],[1,"contents-width","mx-auto","px-3"],[1,"color","rounded","border","border-white",3,"ngStyle"],["class","flash-text text-xx-large font-weight-bold mb-3 text-center",4,"ngIf"],[1,"table","table-bordered","text-small","mb-0","border-white","text-white"],[1,"align-middle"],[1,"flash-text","text-xx-large","font-weight-bold","mb-3","text-center"],[3,"authorizeSeatReservations"],[1,"py-4","bg-danger","text-white"],[1,"flash-text","text-xx-large","font-weight-bold","mb-2","text-center"],[1,"text-center","mb-3"],[1,"p-4","bg-dark","text-white","text-center"],[1,"contents-width","mx-auto"],[1,"text-xx-large","font-weight-bold","mb-2"],[1,"mb-4","bg-white"],[3,"screeningEvent"],[1,"p-3"],[1,"mr-3"],[1,"mr-2"]],template:function(e,n){1&e&&(f.Pc(0,"div",0),f.Pc(1,"div",1),f.Pc(2,"button",2),f.Wc("click",(function(){return n.openQRCodeReader()})),f.zd(3),f.Zc(4,"translate"),f.Oc(),f.Oc(),f.Oc(),f.xd(5,Y,5,5,"div",3),f.Zc(6,"async"),f.Pc(7,"div",4),f.xd(8,Z,27,27,"div",5),f.Pc(9,"div",6),f.Pc(10,"button",7),f.zd(11),f.Zc(12,"translate"),f.Oc(),f.Oc(),f.Oc()),2&e&&(f.wc(3),f.Ad(f.ad(4,4,"admission.check.camera.start")),f.wc(2),f.ed("ngIf",!f.ad(6,6,n.isLoading)),f.wc(3),f.ed("ngIf",n.screeningEvent),f.wc(3),f.Ad(f.ad(12,8,"admission.schedule.prev")))},directives:[i.l,o.c,i.m,h.a,w.a],pipes:[x.c,i.b,b.a,k.a],styles:[".video-area[_ngcontent-%COMP%]{height:25vh;overflow:hidden}.flash-text[_ngcontent-%COMP%]{-webkit-animation-duration:3s;animation-duration:3s;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:flash-text;animation-name:flash-text}.color[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem;width:1.5rem;height:1.5rem}@-webkit-keyframes flash-text{0%,20%,40%,60%,80%,to{color:#fff}10%,30%,50%,70%,90%{color:transparent}}@keyframes flash-text{0%,20%,40%,60%,80%,to{color:#fff}10%,30%,50%,70%,90%{color:transparent}}"]});var A=r("QN9p"),_=r("x8Mb");function G(e,n){if(1&e&&(f.Pc(0,"p",15),f.zd(1),f.Zc(2,"changeLanguage"),f.Oc()),2&e){var t=f.Yc(2);f.wc(1),f.Bd(" ",f.ad(2,1,t.performance.screeningEvent.location.address),"")}}function q(e,n){if(1&e&&(f.Pc(0,"div",12),f.xd(1,G,3,3,"p",13),f.Zc(2,"changeLanguage"),f.Pc(3,"p",14),f.zd(4),f.Zc(5,"changeLanguage"),f.Oc(),f.Oc()),2&e){var t=f.Yc();f.wc(1),f.ed("ngIf",f.ad(2,2,t.performance.screeningEvent.location.address)),f.wc(3),f.Ad(f.ad(5,4,t.performance.screeningEvent.location.name))}}function L(e,n){if(1&e&&(f.Pc(0,"div",16),f.Pc(1,"p",14),f.zd(2),f.Zc(3,"changeLanguage"),f.Oc(),f.Oc()),2&e){var t=f.Yc();f.wc(2),f.Bd(" ",f.ad(3,1,t.performance.screeningEvent.name),"")}}function H(e,n){1&e&&(f.Pc(0,"div",17),f.zd(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Bd(" ",f.ad(2,1,"admission.schedule.status.opening"),""))}function B(e,n){1&e&&(f.Pc(0,"div",17),f.zd(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Bd(" ",f.ad(2,1,"admission.schedule.status.nowShowing"),""))}function F(e,n){if(1&e&&(f.Pc(0,"div"),f.xd(1,H,3,3,"div",8),f.xd(2,B,3,3,"div",8),f.Oc()),2&e){var t=f.Yc();f.wc(1),f.ed("ngIf",t.performance.isOpenDoor()),f.wc(1),f.ed("ngIf",t.performance.isScreening())}}function j(e,n){1&e&&(f.Pc(0,"div",17),f.zd(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Bd(" ",f.ad(2,1,"admission.schedule.status.beforeOpening"),""))}function U(e,n){1&e&&(f.Pc(0,"div",17),f.zd(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Bd(" ",f.ad(2,1,"admission.schedule.status.filmCompletion"),""))}function J(e,n){if(1&e&&(f.Pc(0,"div",18),f.zd(1),f.Zc(2,"translate"),f.Oc()),2&e){var t=f.Yc();f.wc(1),f.Dd(" ",f.ad(2,3,"common.seat")," ",t.performance.screeningEvent.remainingAttendeeCapacity," / ",t.performance.screeningEvent.maximumAttendeeCapacity," ")}}function K(e,n){1&e&&(f.Pc(0,"div",18),f.zd(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Bd(" ",f.ad(2,1,"admission.schedule.infiniteStock"),""))}var W=function(e,n){return{"bg-white":e,"bg-dark-gray text-light-gray":n}},Q=function(){function n(){e(this,n),this.select=new f.w,this.moment=g,this.environment=Object(m.a)()}return t(n,[{key:"ngOnInit",value:function(){}}]),n}();function N(e,n){if(1&e&&(f.Pc(0,"p"),f.zd(1),f.Zc(2,"changeLanguage"),f.Oc()),2&e){var t=f.Yc(2);f.wc(1),f.Bd(" ",f.ad(2,1,t.screeningEventsGroup.screeningEvent.superEvent.headline),"")}}function $(e,n){if(1&e&&(f.Pc(0,"p"),f.zd(1),f.Zc(2,"changeLanguage"),f.Oc()),2&e){var t=f.Yc(2);f.wc(1),f.Ad(f.ad(2,1,t.screeningEventsGroup.screeningEvent.superEvent.description))}}function V(e,n){if(1&e&&(f.Pc(0,"div",14),f.zd(1),f.Oc()),2&e){var t=f.Yc(2);f.wc(1),f.Ad(null==t.screeningEventsGroup.screeningEvent.workPerformed?null:t.screeningEventsGroup.screeningEvent.workPerformed.contentRating)}}function X(e,n){1&e&&(f.Pc(0,"div",15),f.zd(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Ad(f.ad(2,1,"common.dubbing")))}function ee(e,n){1&e&&(f.Pc(0,"div",16),f.zd(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Ad(f.ad(2,1,"common.subtitles")))}function ne(e,n){if(1&e&&(f.Pc(0,"div",17),f.zd(1),f.Oc()),2&e){var t=n.$implicit;f.wc(1),f.Ad(t.name)}}function te(e,n){if(1&e&&(f.Pc(0,"div",18),f.Pc(1,"span",19),f.zd(2),f.Zc(3,"translate"),f.Oc(),f.zd(4),f.Zc(5,"translate"),f.Oc()),2&e){var t=f.Yc(2);f.wc(2),f.Ad(f.ad(3,3,"common.duration")),f.wc(2),f.Cd("",t.moment.duration(null==t.screeningEventsGroup.screeningEvent.workPerformed?null:t.screeningEventsGroup.screeningEvent.workPerformed.duration).asMinutes(),"",f.ad(5,5,"common.date.minute")," ")}}function ce(e,n){if(1&e&&(f.Pc(0,"div",4),f.Pc(1,"div",5),f.Pc(2,"p",6),f.zd(3),f.Zc(4,"changeLanguage"),f.Oc(),f.xd(5,N,3,3,"p",7),f.Zc(6,"changeLanguage"),f.xd(7,$,3,3,"p",7),f.Zc(8,"changeLanguage"),f.Oc(),f.Pc(9,"div",8),f.xd(10,V,2,1,"div",9),f.xd(11,X,3,3,"div",10),f.xd(12,ee,3,3,"div",11),f.xd(13,ne,2,1,"div",12),f.xd(14,te,6,7,"div",13),f.Oc(),f.Oc()),2&e){var t=f.Yc();f.wc(3),f.Ad(f.ad(4,8,t.screeningEventsGroup.screeningEvent.name)),f.wc(2),f.ed("ngIf",t.screeningEventsGroup.screeningEvent.superEvent.headline&&f.ad(6,10,t.screeningEventsGroup.screeningEvent.superEvent.headline)),f.wc(2),f.ed("ngIf",t.screeningEventsGroup.screeningEvent.superEvent.description&&f.ad(8,12,t.screeningEventsGroup.screeningEvent.superEvent.description)),f.wc(3),f.ed("ngIf",null==t.screeningEventsGroup.screeningEvent.workPerformed?null:t.screeningEventsGroup.screeningEvent.workPerformed.contentRating),f.wc(1),f.ed("ngIf",t.screeningEventsGroup.screeningEvent.superEvent.dubLanguage),f.wc(1),f.ed("ngIf",t.screeningEventsGroup.screeningEvent.superEvent.subtitleLanguage),f.wc(1),f.ed("ngForOf",t.screeningEventsGroup.screeningEvent.superEvent.videoFormat),f.wc(1),f.ed("ngIf",(null==t.screeningEventsGroup.screeningEvent.workPerformed?null:t.screeningEventsGroup.screeningEvent.workPerformed.duration)&&t.moment.duration(null==t.screeningEventsGroup.screeningEvent.workPerformed?null:t.screeningEventsGroup.screeningEvent.workPerformed.duration).asMinutes()>0)}}function re(e,n){if(1&e&&(f.Pc(0,"div",4),f.Pc(1,"p",6),f.zd(2),f.Zc(3,"changeLanguage"),f.Oc(),f.Oc()),2&e){var t=f.Yc();f.wc(2),f.Ad(f.ad(3,1,t.screeningEventsGroup.screeningEvent.location.name))}}function ie(e,n){if(1&e){var t=f.Qc();f.Pc(0,"li",20),f.Pc(1,"app-admission-performance",21),f.Wc("select",(function(e){return f.rd(t),f.Yc().select.emit(e)})),f.Oc(),f.Oc()}if(2&e){var c=n.$implicit;f.wc(1),f.ed("performance",c)}}Q.\u0275fac=function(e){return new(e||Q)},Q.\u0275cmp=f.Dc({type:Q,selectors:[["app-admission-performance"]],inputs:{performance:"performance"},outputs:{select:"select"},decls:24,vars:21,consts:[[1,"row","mx-0","border","boder-gray","rounded","p-3","py-md-3","text-md-center","d-md-block","align-items-center","pointer","h-100",3,"ngClass","click"],[1,"col-md-12","col-8","px-0"],["class","mb-1 text-small screen-name",4,"ngIf"],["class","mb-1 text-small",4,"ngIf"],[1,"text-large"],[1,"border-0","bg-light-gray","my-2"],[1,"col-md-12","col-4","px-0","text-center"],[4,"ngIf"],["class","status mb-2",4,"ngIf"],["class","mb-2 text-small",4,"ngIf"],[1,"text-small","mb-1"],[1,"text-small"],[1,"mb-1","text-small","screen-name"],["class","text-overflow-ellipsis mr-2 d-inline-block d-md-block",4,"ngIf"],[1,"text-overflow-ellipsis","d-inline-block","d-md-block"],[1,"text-overflow-ellipsis","mr-2","d-inline-block","d-md-block"],[1,"mb-1","text-small"],[1,"status","mb-2"],[1,"mb-2","text-small"]],template:function(e,n){1&e&&(f.Pc(0,"div",0),f.Wc("click",(function(){return n.select.emit(n.performance.screeningEvent)})),f.Pc(1,"div",1),f.xd(2,q,6,6,"div",2),f.xd(3,L,4,3,"div",3),f.Pc(4,"div"),f.Pc(5,"strong",4),f.zd(6),f.Oc(),f.Pc(7,"span"),f.zd(8,"-"),f.Oc(),f.Pc(9,"span"),f.zd(10),f.Oc(),f.Oc(),f.Oc(),f.Kc(11,"hr",5),f.Pc(12,"div",6),f.xd(13,F,3,2,"div",7),f.xd(14,j,3,3,"div",8),f.xd(15,U,3,3,"div",8),f.xd(16,J,3,5,"div",9),f.xd(17,K,3,3,"div",9),f.Pc(18,"div",10),f.zd(19),f.Zc(20,"translate"),f.Oc(),f.Pc(21,"div",11),f.zd(22),f.Zc(23,"translate"),f.Oc(),f.Oc(),f.Oc()),2&e&&(f.ed("ngClass",f.id(18,W,n.performance.isOpenDoor()||n.performance.isScreening(),!(n.performance.isOpenDoor()||n.performance.isScreening()))),f.wc(2),f.ed("ngIf","screeningEventSeries"===n.environment.PURCHASE_SCHEDULE_SORT),f.wc(1),f.ed("ngIf","screen"===n.environment.PURCHASE_SCHEDULE_SORT),f.wc(3),f.Ad(n.moment(n.performance.screeningEvent.startDate).format("HH:mm")),f.wc(4),f.Ad(n.moment(n.performance.screeningEvent.endDate).format("HH:mm")),f.wc(3),f.ed("ngIf",n.performance.isOpenDoor()||n.performance.isScreening()),f.wc(1),f.ed("ngIf",n.performance.isOpenDoor("before")),f.wc(1),f.ed("ngIf",n.performance.isScreening("after")),f.wc(1),f.ed("ngIf",!n.performance.isInfinitetock()),f.wc(1),f.ed("ngIf",n.performance.isInfinitetock()),f.wc(2),f.Cd("",f.ad(20,14,"common.ticketing")," ",n.performance.screeningEvent.checkInCount,""),f.wc(3),f.Cd("",f.ad(23,16,"common.admission")," ",n.performance.screeningEvent.attendeeCount,""))},directives:[i.j,i.l],pipes:[x.c,b.a],styles:[".status[_ngcontent-%COMP%]{line-height:30px}.status[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}@media (max-width:767.98px){.text-overflow-ellipsis[_ngcontent-%COMP%]{overflow:auto;width:auto;white-space:normal}}"]});var ae=function(){function n(){e(this,n),this.select=new f.w,this.moment=g,this.environment=Object(m.a)()}return t(n,[{key:"ngOnInit",value:function(){}}]),n}();ae.\u0275fac=function(e){return new(e||ae)},ae.\u0275cmp=f.Dc({type:ae,selectors:[["app-admission-performances"]],inputs:{screeningEventsGroup:"screeningEventsGroup"},outputs:{select:"select"},decls:5,vars:3,consts:[[1,"bg-white"],["class","p-3 bg-gray",4,"ngIf"],[1,"py-2","px-3","px-md-2","d-flex","flex-wrap"],["class","px-md-2 my-2",4,"ngFor","ngForOf"],[1,"p-3","bg-gray"],[1,"mb-2"],[1,"font-weight-bold","text-large"],[4,"ngIf"],[1,"d-flex","align-items-center","flex-wrap"],["class","content-rating text-small bg-dark-gray text-white py-1 px-2 mr-2",4,"ngIf"],["class","dub-language text-small bg-dark-gray text-white py-1 px-2 mr-2",4,"ngIf"],["class","subtitle-language text-small bg-dark-gray text-white py-1 px-2 mr-2",4,"ngIf"],["class","video-format text-small bg-dark-gray text-white py-1 px-2 mr-2",4,"ngFor","ngForOf"],["class","text-small ml-auto",4,"ngIf"],[1,"content-rating","text-small","bg-dark-gray","text-white","py-1","px-2","mr-2"],[1,"dub-language","text-small","bg-dark-gray","text-white","py-1","px-2","mr-2"],[1,"subtitle-language","text-small","bg-dark-gray","text-white","py-1","px-2","mr-2"],[1,"video-format","text-small","bg-dark-gray","text-white","py-1","px-2","mr-2"],[1,"text-small","ml-auto"],[1,"mr-1"],[1,"px-md-2","my-2"],[1,"mb-3",3,"performance","select"]],template:function(e,n){1&e&&(f.Pc(0,"div",0),f.xd(1,ce,15,14,"div",1),f.xd(2,re,4,3,"div",1),f.Pc(3,"ul",2),f.xd(4,ie,2,1,"li",3),f.Oc(),f.Oc()),2&e&&(f.wc(1),f.ed("ngIf","screeningEventSeries"===n.environment.PURCHASE_SCHEDULE_SORT),f.wc(1),f.ed("ngIf","screen"===n.environment.PURCHASE_SCHEDULE_SORT),f.wc(2),f.ed("ngForOf",n.screeningEventsGroup.data))},directives:[i.l,i.k,Q],pipes:[b.a,x.c],styles:["[_nghost-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:20%}@media (max-width:991.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:25%}}@media (max-width:767.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%}}"]});var oe=function(e,n,t,c){return new(t||(t=Promise))((function(r,i){function a(e){try{s(c.next(e))}catch(n){i(n)}}function o(e){try{s(c.throw(e))}catch(n){i(n)}}function s(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,o)}s((c=c.apply(e,n||[])).next())}))},se=["datepicker"];function de(e,n){if(1&e&&(f.Pc(0,"p",16),f.zd(1),f.Zc(2,"formatDate"),f.Zc(3,"async"),f.Oc()),2&e){var t,c=f.Yc();f.wc(1),f.Bd(" ",f.bd(2,1,null==(t=f.ad(3,4,c.admission))?null:t.scheduleDate,"YYYY/MM/DD (ddd)"),"")}}function ue(e,n){1&e&&(f.Kc(0,"p",17),f.Zc(1,"translate")),2&e&&f.ed("innerHTML",f.ad(1,1,"admission.schedule.notfound"),f.sd)}function le(e,n){if(1&e){var t=f.Qc();f.Pc(0,"app-admission-performances",18),f.Wc("select",(function(e){return f.rd(t),f.Yc().selectSchedule(e)})),f.Oc()}if(2&e){var c=n.$implicit;f.ed("screeningEventsGroup",c)}}var ge=function(){return{dateInputFormat:"YYYY/MM/DD",adaptivePosition:!0,showWeekNumbers:!1}},me=function(){function n(t,c,r,i,a,o){e(this,n),this.store=t,this.router=c,this.localeService=r,this.actionService=i,this.masterService=a,this.utilService=o,this.moment=g,this.environment=Object(m.a)()}return t(n,[{key:"ngOnInit",value:function(){return oe(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.admission=this.store.pipe(Object(u.m)(p.a)),this.user=this.store.pipe(Object(u.m)(p.i)),this.isLoading=this.store.pipe(Object(u.m)(p.c)),this.screeningEventsGroup=[],this.scheduleDate=g(g().format("YYYYMMDD"),"YYYYMMDD").toDate();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnDestroy",value:function(){clearTimeout(this.updateTimer)}},{key:"update",value:function(){var e=this;void 0!==this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout((function(){return oe(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getSchedule();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),this.router.navigate(["/error"]);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})))}),6e5)}},{key:"selectDate",value:function(e){return oe(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==e){n.next=13;break}return this.scheduleDate=e,n.prev=2,void 0!==this.scheduleDate&&null!==this.scheduleDate||(this.scheduleDate=g().toDate()),t=g(this.scheduleDate).format("YYYY-MM-DD"),this.actionService.admission.selectScheduleDate(t),n.next=8,this.getSchedule();case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),console.error(n.t0),this.router.navigate(["/error"]);case 13:case"end":return n.stop()}}),n,this,[[2,10]])})))}},{key:"getSchedule",value:function(){return oe(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t,c,r,i,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actionService.user.getData();case 2:if(n=e.sent,void 0!==(t=n.theater)){e.next=6;break}throw new Error("theater undefined");case 6:return c=g(this.scheduleDate).format("YYYY-MM-DD"),e.next=9,this.masterService.searchMovies({offers:{availableFrom:g(c).toDate()}});case 9:if(r=e.sent,"screeningEventSeries"!==this.environment.PURCHASE_SCHEDULE_SORT){e.next=16;break}return e.next=13,this.masterService.searchScreeningEventSeries({location:{branchCode:{$eq:t.branchCode}},workPerformed:{identifiers:r.map((function(e){return e.identifier}))}});case 13:e.t0=e.sent,e.next=17;break;case 16:e.t0=[];case 17:if(i=e.t0,"screen"!==this.environment.PURCHASE_SCHEDULE_SORT){e.next=24;break}return e.next=21,this.masterService.searchScreeningRooms({branchCode:{$eq:t.branchCode}});case 21:e.t1=e.sent,e.next=25;break;case 24:e.t1=[];case 25:return a=e.t1,e.next=28,this.masterService.searchScreeningEvent({superEvent:{locationBranchCodes:[t.branchCode]},startFrom:g(c).toDate(),startThrough:g(c).add(1,"day").add(-1,"millisecond").toDate(),creativeWorks:r,screeningEventSeries:i,screeningRooms:a});case 28:return o=e.sent,e.t2=g,e.next=32,this.utilService.getServerTime();case 32:e.t3=e.sent.date,s=(0,e.t2)(e.t3).toDate(),this.screeningEventsGroup=_.a.Purchase.screeningEvents2ScreeningEventSeries({screeningEvents:o,now:s}),this.update();case 35:case"end":return e.stop()}}),e,this)})))}},{key:"selectSchedule",value:function(e){return oe(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.actionService.admission.getScreeningEvent(e);case 3:this.router.navigate(["/admission/check"]),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.error(n.t0),this.router.navigate(["/error"]);case 9:case"end":return n.stop()}}),n,this,[[0,6]])})))}},{key:"notSpecified",value:function(){this.actionService.admission.delete();var e=g(this.scheduleDate).format("YYYY-MM-DD");this.actionService.admission.selectScheduleDate(e),this.router.navigate(["/admission/check"])}},{key:"setDatePicker",value:function(){var e=this;this.user.subscribe((function(n){e.localeService.use(n.language)})).unsubscribe()}},{key:"toggleDatepicker",value:function(){this.setDatePicker(),this.datepicker.toggle()}},{key:"onShowPicker",value:function(e){_.a.Util.iOSDatepickerTapBugFix(e,[this.datepicker])}}]),n}();me.\u0275fac=function(e){return new(e||me)(f.Jc(u.b),f.Jc(o.b),f.Jc(A.d),f.Jc(v.a),f.Jc(v.d),f.Jc(v.f))},me.\u0275cmp=f.Dc({type:me,selectors:[["app-admission-schedule"]],viewQuery:function(e,n){var t;1&e&&f.vd(se,!0),2&e&&f.nd(t=f.Xc())&&(n.datepicker=t.first)},decls:22,vars:17,consts:[[1,"contents-width","mx-auto","px-3","py-5"],[1,"text-large","mb-4","text-center","font-weight-bold"],[1,"mb-4","text-md-center",3,"innerHTML"],[1,"mb-3"],[1,"input-group"],["type","text","placeholder","Datepicker","bsDatepicker","","readonly","",1,"form-control",3,"bsValue","bsConfig","bsValueChange","click","onShown"],["datepicker","bsDatepicker"],[1,"input-group-append","pointer",3,"click"],[1,"input-group-text"],[1,"fas","fa-caret-down"],["class","text-primary font-weight-bold mb-3",4,"ngIf"],["class","mb-3",3,"innerHTML",4,"ngIf"],[1,"mb-4"],["class","mb-3",3,"screeningEventsGroup","select",4,"ngFor","ngForOf"],[1,"buttons","mx-auto","text-center"],["type","button",1,"btn","btn-primary","btn-block","py-3","mb-3",3,"click"],[1,"text-primary","font-weight-bold","mb-3"],[1,"mb-3",3,"innerHTML"],[1,"mb-3",3,"screeningEventsGroup","select"]],template:function(e,n){if(1&e&&(f.Pc(0,"div",0),f.Pc(1,"h2",1),f.zd(2),f.Zc(3,"translate"),f.Oc(),f.Kc(4,"p",2),f.Zc(5,"translate"),f.Pc(6,"div",3),f.Pc(7,"div",4),f.Pc(8,"input",5,6),f.Wc("bsValueChange",(function(e){return n.selectDate(e)}))("click",(function(){return n.setDatePicker()}))("onShown",(function(e){return n.onShowPicker(e)})),f.Oc(),f.Pc(10,"div",7),f.Wc("click",(function(){return n.toggleDatepicker()})),f.Pc(11,"span",8),f.Kc(12,"i",9),f.Oc(),f.Oc(),f.Oc(),f.Oc(),f.xd(13,de,4,6,"p",10),f.Zc(14,"async"),f.xd(15,ue,2,3,"p",11),f.Pc(16,"div",12),f.xd(17,le,1,1,"app-admission-performances",13),f.Oc(),f.Pc(18,"div",14),f.Pc(19,"button",15),f.Wc("click",(function(){return n.notSpecified()})),f.zd(20),f.Zc(21,"translate"),f.Oc(),f.Oc(),f.Oc()),2&e){var t,c=null==(t=f.ad(14,12,n.admission))?null:t.scheduleDate;f.wc(2),f.Ad(f.ad(3,8,"admission.schedule.title")),f.wc(2),f.ed("innerHTML",f.ad(5,10,"admission.schedule.read"),f.sd),f.wc(4),f.ed("bsValue",n.scheduleDate)("bsConfig",f.gd(16,ge)),f.wc(5),f.ed("ngIf",c),f.wc(2),f.ed("ngIf",0===n.screeningEventsGroup.length),f.wc(2),f.ed("ngForOf",n.screeningEventsGroup),f.wc(3),f.Ad(f.ad(21,14,"admission.schedule.next"))}},directives:[A.b,A.a,i.l,i.k,ae],pipes:[x.c,i.b,k.a],styles:['.condition[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.schedule-slider[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;bottom:0;height:4px;background-color:#000;opacity:.3}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%], .schedule-slider[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]{width:27px;height:27px;background-image:url(/assets/images/icon/slider_arrow.svg);background-size:27px;margin-top:-13px}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%]{right:-38px}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]{left:-38px;transform:rotate(180deg)}']});var ve=[{path:"",component:d.a,canActivate:[s.a,s.c],children:[{path:"schedule",component:me},{path:"check",component:R}]}],pe=function n(){e(this,n)};pe.\u0275mod=f.Hc({type:pe}),pe.\u0275inj=f.Gc({factory:function(e){return new(e||pe)},imports:[[o.d.forChild(ve)],o.d]});var fe=function n(){e(this,n)};fe.\u0275mod=f.Hc({type:fe}),fe.\u0275inj=f.Gc({factory:function(e){return new(e||fe)},imports:[[i.c,pe,a.a]]})}}])}();