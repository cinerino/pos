{"version":3,"sources":["app/canActivates/auth-guard.service.ts","app/canActivates/setting-guard.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;AAUA,QAAa,gBAAb;AAAA;AAAA;AAEI,gCACY,MADZ,EAEY,QAFZ,EAEqC;AAAA;;AADzB,aAAA,MAAA,GAAA,MAAA;AACA,aAAA,QAAA,GAAA,QAAA;AACP;AAEL;;;;;;;AAPJ;AAAA;AAAA,sCAY4B;;;;;;;;;;AAEhB,2BAAM,KAAK,QAAL,CAAc,WAAd,EAAN;;;qDAEO,I;;;;;AAEP,oBAAA,OAAO,CAAC,GAAR,CAAY,aAAZ;AACA,yBAAK,MAAL,CAAY,QAAZ,CAAqB,CAAC,GAAD,CAArB;qDAEO,K;;;;;;;;;AAEd;AAvBL;;AAAA;AAAA,OAAA;;;;cAGwB,4CAAA,CAAA,QAAA;;cACE,uDAAA,CAAA,iBAAA;;;;AAJb,IAAA,gBAAgB,GAAA,UAAA,CAAA,CAH5B,MAAA,CAAA,0CAAA,CAAA,YAAA,CAAA,CAAA,CAAW;AACR,MAAA,UAAU,EAAE;AADJ,KAAX,CAG4B,E,iCAGL,4CAAA,CAAA,QAAA,C,EACE,uDAAA,CAAA,iBAAA,C,EAJG,CAAA,EAAhB,gBAAgB,CAAhB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVb;;;;;AAYA,QAAa,mBAAb;AAAA;AAAA;AAEI,mCACY,MADZ,EAEY,KAFZ,EAEyC;AAAA;;AAD7B,aAAA,MAAA,GAAA,MAAA;AACA,aAAA,KAAA,GAAA,KAAA;AACP;AAEL;;;;;;;AAPJ;AAAA;AAAA,sCAY4B;;;;;;;;;;AAEhB,yBAAK,IAAL,GAAY,KAAK,KAAL,CAAW,IAAX,CAAgB,MAAA,CAAA,wCAAA,CAAA,QAAA,CAAA,CAAA,CAAO,4CAAA,CAAA,SAAA,CAAP,CAAhB,CAAZ;;AACa,2BAAM,KAAK,OAAL,EAAN;;;AAAP,oBAAA,I;;0BACF,IAAI,CAAC,MAAL,KAAgB,S;;;;;0BACV,IAAI,KAAJ,CAAU,0BAAV,C;;;sDAGH,I;;;;;AAEP,oBAAA,OAAO,CAAC,GAAR,CAAY,aAAZ;AACA,yBAAK,MAAL,CAAY,QAAZ,CAAqB,CAAC,UAAD,CAArB;sDAEO,K;;;;;;;;;AAEd;AA3BL;AAAA;AAAA,kCA6ByB;;;;;;;;;;sDACV,IAAI,OAAJ,CAAiC,UAAC,OAAD,EAAY;AAChD,sBAAA,KAAI,CAAC,IAAL,CAAU,SAAV,CAAoB,UAAC,IAAD,EAAS;AACzB,wBAAA,OAAO,CAAC,IAAD,CAAP;AACH,uBAFD,EAEG,WAFH;AAGH,qBAJM,C;;;;;;;;;AAKV;AAnCL;;AAAA;AAAA,OAAA;;;;cAGwB,4CAAA,CAAA,QAAA;;cACD,wCAAA,CAAA,OAAA;;;;AAJV,IAAA,mBAAmB,GAAA,UAAA,CAAA,CAH/B,MAAA,CAAA,0CAAA,CAAA,YAAA,CAAA,CAAA,CAAW;AACR,MAAA,UAAU,EAAE;AADJ,KAAX,CAG+B,E,iCAGR,4CAAA,CAAA,QAAA,C,EACD,wCAAA,CAAA,OAAA,C,EAJS,CAAA,EAAnB,mBAAmB,CAAnB","sourcesContent":["/**\n * AuthGuardService\n */\nimport { Injectable } from '@angular/core';\nimport { CanActivate, Router } from '@angular/router';\nimport { CinerinoService } from '../services/cinerino.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AuthGuardService implements CanActivate {\n\n    constructor(\n        private router: Router,\n        private cinerino: CinerinoService\n    ) { }\n\n    /**\n     * 認証\n     * @method canActivate\n     * @returns {Promise<boolean>}\n     */\n    public async canActivate(): Promise<boolean> {\n        try {\n            await this.cinerino.getServices();\n\n            return true;\n        } catch (error) {\n            console.log('canActivate', error);\n            this.router.navigate(['/']);\n\n            return false;\n        }\n    }\n}\n","/**\n * SettingGuardService\n */\nimport { Injectable } from '@angular/core';\nimport { CanActivate, Router } from '@angular/router';\nimport { select, Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport * as reducers from '../store/reducers';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class SettingGuardService implements CanActivate {\n    public user: Observable<reducers.IUserState>;\n    constructor(\n        private router: Router,\n        private store: Store<reducers.IState>\n    ) { }\n\n    /**\n     * 認証\n     * @method canActivate\n     * @returns {Promise<boolean>}\n     */\n    public async canActivate(): Promise<boolean> {\n        try {\n            this.user = this.store.pipe(select(reducers.getUser));\n            const user = await this.getUser();\n            if (user.seller === undefined) {\n                throw new Error('user.seller is undefined');\n            }\n\n            return true;\n        } catch (error) {\n            console.log('canActivate', error);\n            this.router.navigate(['/setting']);\n\n            return false;\n        }\n    }\n\n    private async getUser() {\n        return new Promise<reducers.IUserState>((resolve) => {\n            this.user.subscribe((user) => {\n                resolve(user);\n            }).unsubscribe();\n        });\n    }\n}\n"],"sourceRoot":"webpack:///","file":"common-es5.js"}