{"version":3,"sources":["app/modules/person/components/pages/person-search/person-search.component.html","app/modules/person/components/pages/person-search/person-search.component.scss","app/modules/person/components/pages/person-search/person-search.component.ts","app/modules/person/person-routing.module.ts","app/modules/person/person.module.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<div class=\\\"contents-width mx-auto px-3 py-5\\\">\\n    <h2 class=\\\"text-large mb-4 text-center font-weight-bold\\\">{{ 'person.search.title' | translate }}</h2>\\n    <p class=\\\"mb-4 text-md-center\\\" [innerHTML]=\\\"'person.search.read' | translate\\\"></p>\\n    <div class=\\\"conditions p-3 bg-white mb-4\\\">\\n        <form (submit)=\\\"personSearch(true)\\\">\\n            <div class=\\\"form-row\\\">\\n                <div class=\\\"form-group col-md-3\\\">\\n                    <label for=\\\"id\\\" class=\\\"mb-2\\\">{{ 'person.search.id' | translate }}</label>\\n                    <input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"id\\\" id=\\\"id\\\"\\n                        [(ngModel)]=\\\"conditions.id\\\"\\n                        placeholder=\\\"{{ 'person.search.id' | translate }}\\\">\\n                </div>\\n                <div class=\\\"form-group col-md-3\\\">\\n                    <label for=\\\"username\\\" class=\\\"mb-2\\\">{{ 'person.search.username' | translate }}</label>\\n                    <input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"username\\\" id=\\\"username\\\"\\n                        [(ngModel)]=\\\"conditions.username\\\" placeholder=\\\"{{ 'person.search.username' | translate }}\\\">\\n                </div>\\n            </div>\\n            <div class=\\\"form-row\\\">\\n                <div class=\\\"form-group col-md-3\\\">\\n                    <label for=\\\"familyName\\\" class=\\\"mb-2\\\">{{ 'common.familyName' | translate }}</label>\\n                    <input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"familyName\\\" id=\\\"familyName\\\"\\n                        [(ngModel)]=\\\"conditions.familyName\\\"\\n                        placeholder=\\\"{{ 'common.familyName' | translate }}\\\">\\n                </div>\\n                <div class=\\\"form-group col-md-3\\\">\\n                    <label for=\\\"givenName\\\" class=\\\"mb-2\\\">{{ 'common.givenName' | translate }}</label>\\n                    <input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"givenName\\\" id=\\\"givenName\\\"\\n                        [(ngModel)]=\\\"conditions.givenName\\\" placeholder=\\\"{{ 'common.givenName' | translate }}\\\">\\n                </div>\\n                <div class=\\\"form-group col-md-3\\\">\\n                    <label for=\\\"email\\\" class=\\\"mb-2\\\">{{ 'common.email' | translate }}</label>\\n                    <input type=\\\"email\\\" class=\\\"form-control\\\" name=\\\"email\\\" id=\\\"email\\\"\\n                        [(ngModel)]=\\\"conditions.email\\\" placeholder=\\\"{{ 'common.email' | translate }}\\\">\\n                </div>\\n                <div class=\\\"form-group col-md-3\\\">\\n                    <label for=\\\"telephone\\\" class=\\\"mb-2\\\">{{ 'common.telephone' | translate }}</label>\\n                    <input type=\\\"telephone\\\" class=\\\"form-control\\\" name=\\\"telephone\\\" id=\\\"telephone\\\"\\n                        [(ngModel)]=\\\"conditions.telephone\\\"\\n                        placeholder=\\\"{{ 'common.telephone' | translate }}\\\">\\n                </div>\\n            </div>\\n            \\n            <div class=\\\"buttons mx-auto text-center\\\">\\n                <button type=\\\"submit\\\" class=\\\"btn btn-primary btn-block py-3 mb-3\\\"\\n                    [disabled]=\\\"isLoading | async\\\">{{ 'person.search.search' | translate }}</button>\\n                <button type=\\\"button\\\" class=\\\"btn btn-outline-primary btn-block py-3\\\"\\n                    (click)=\\\"searchConditionClear()\\\">{{ 'person.search.clear' | translate }}</button>\\n            </div>\\n        </form>\\n    </div>\\n    <p *ngIf=\\\"(person | async).persons.length === 0\\\">{{ 'person.search.notfound' | translate }}</p>\\n\\n    <div *ngIf=\\\"(person | async).persons.length > 0\\\">\\n        <div class=\\\"mb-3 text-md-left text-center\\\">\\n            <button class=\\\"btn btn-primary\\\" (click)=\\\"downloadCsv()\\\"\\n                [disabled]=\\\"isDownload\\\">{{ 'person.search.download' | translate }}</button>\\n        </div>\\n        <div class=\\\"d-md-flex align-items-center justify-content-between mb-4\\\">\\n            <div class=\\\"text-md-right text-center mb-3 mb-md-0 person-2\\\">\\n                <div class=\\\"d-inline-block\\\">\\n                    <pagination [(ngModel)]=\\\"confirmedConditions.page\\\" [totalItems]=\\\"(person | async).pageCount * 10\\\"\\n                        [maxSize]=\\\"5\\\" [boundaryLinks]=\\\"false\\\" previousText=\\\"&lsaquo;\\\" nextText=\\\"&rsaquo;\\\"\\n                        firstText=\\\"&laquo;\\\" lastText=\\\"&raquo;\\\" (pageChanged)=\\\"personSearch(false, $event)\\\"></pagination>\\n                </div>\\n            </div>\\n        </div>\\n\\n        <div class=\\\"scroll-horizontal\\\">\\n            <table class=\\\"table bg-white bperson text-small mb-0 border border-gray\\\">\\n                <thead>\\n                    <tr>\\n                        <th scope=\\\"col\\\">{{ 'person.search.username' | translate }}</th>\\n                        <th scope=\\\"col\\\">{{ 'person.search.name' | translate }}</th>\\n                        <th scope=\\\"col\\\">{{ 'common.email' | translate }}</th>\\n                        <th scope=\\\"col\\\">{{ 'common.telephone' | translate }}</th>\\n                        <!-- <th scope=\\\"col\\\"></th> -->\\n                    </tr>\\n                </thead>\\n                <tbody>\\n                    <tr *ngFor=\\\"let person of (person | async).persons let index = index\\\"\\n                        [class.bg-light-gray]=\\\"index % 2 === 0\\\">\\n                        <td class=\\\"align-middle\\\">{{ ((person.memberOf.membershipNumber !== undefined) ? person.memberOf.membershipNumber : '') }}</td>\\n                        <td class=\\\"align-middle\\\">{{ person.familyName }} {{ person.givenName }}</td>\\n                        <td class=\\\"align-middle\\\">{{ person.email }}</td>\\n                        <td class=\\\"align-middle\\\">{{ person.telephone }}</td>\\n                        <!-- <td class=\\\"align-middle\\\">\\n                            <button class=\\\"btn btn-primary mr-2\\\" (click)=\\\"openDetail(person)\\\"><i\\n                                    class=\\\"fas fa-search-plus\\\"></i></button>\\n                        </td> -->\\n                    </tr>\\n                </tbody>\\n            </table>\\n        </div>\\n\\n\\n    </div>\\n</div>\"","export default \".scroll-horizontal .table {\\n  min-width: 900px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9jbGllbnQvYXBwL21vZHVsZXMvcGVyc29uL2NvbXBvbmVudHMvcGFnZXMvcGVyc29uLXNlYXJjaC9DOlxcVXNlcnNcXGhhdGFndWNoaVxcRGVza3RvcFxcd29ya3NwYWNlXFxDaW5lcmlub1xccG9zL3NyY1xcY2xpZW50XFxhcHBcXG1vZHVsZXNcXHBlcnNvblxcY29tcG9uZW50c1xccGFnZXNcXHBlcnNvbi1zZWFyY2hcXHBlcnNvbi1zZWFyY2guY29tcG9uZW50LnNjc3MiLCJzcmMvY2xpZW50L2FwcC9tb2R1bGVzL3BlcnNvbi9jb21wb25lbnRzL3BhZ2VzL3BlcnNvbi1zZWFyY2gvcGVyc29uLXNlYXJjaC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFLSTtFQUNJLGdCQUFBO0FDSlIiLCJmaWxlIjoic3JjL2NsaWVudC9hcHAvbW9kdWxlcy9wZXJzb24vY29tcG9uZW50cy9wYWdlcy9wZXJzb24tc2VhcmNoL3BlcnNvbi1zZWFyY2guY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwibm9kZV9tb2R1bGVzL2Jvb3RzdHJhcC9zY3NzL2Z1bmN0aW9uc1wiO1xuQGltcG9ydCBcIm5vZGVfbW9kdWxlcy9ib290c3RyYXAvc2Nzcy92YXJpYWJsZXNcIjtcbkBpbXBvcnQgXCJub2RlX21vZHVsZXMvYm9vdHN0cmFwL3Njc3MvbWl4aW5zXCI7XG5cbi5zY3JvbGwtaG9yaXpvbnRhbCB7XG4gICAgLnRhYmxlIHtcbiAgICAgICAgbWluLXdpZHRoOiA5MDBweDtcbiAgICB9XG59XG5cbiIsIi5zY3JvbGwtaG9yaXpvbnRhbCAudGFibGUge1xuICBtaW4td2lkdGg6IDkwMHB4O1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { factory } from '@cinerino/api-javascript-client';\nimport { select, Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as moment from 'moment';\nimport { Observable } from 'rxjs';\nimport { environment } from '../../../../../../environments/environment';\nimport { buildQueryString } from '../../../../../functions';\nimport { IPersonSearchConditions } from '../../../../../models';\nimport { DownloadService, PersonService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n\n@Component({\n    selector: 'app-person-search',\n    templateUrl: './person-search.component.html',\n    styleUrls: ['./person-search.component.scss']\n})\nexport class PersonSearchComponent implements OnInit {\n    public isLoading: Observable<boolean>;\n    public isDownload: boolean;\n    public error: Observable<string | null>;\n    public person: Observable<reducers.IPersonState>;\n    public user: Observable<reducers.IUserState>;\n    public moment: typeof moment = moment;\n    public limit: number;\n    public conditions: IPersonSearchConditions;\n    public confirmedConditions: IPersonSearchConditions;\n    public selectedPersons: factory.person.IPerson[];\n    public buildQueryString = buildQueryString;\n    public environment = environment;\n\n\n    constructor(\n        private store: Store<reducers.IPersonState>,\n        private utilService: UtilService,\n        private personService: PersonService,\n        private translate: TranslateService,\n        private download: DownloadService,\n    ) { }\n\n    public ngOnInit() {\n        this.isDownload = false;\n        this.selectedPersons = [];\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.error = this.store.pipe(select(reducers.getError));\n        this.person = this.store.pipe(select(reducers.getPerson));\n        this.user = this.store.pipe(select(reducers.getUser));\n        this.limit = 20;\n        this.conditions = {\n            id: '',\n            username: '',\n            familyName: '',\n            givenName: '',\n            email: '',\n            telephone: '',\n            page: 1\n        };\n        this.personService.delete();\n    }\n\n    /**\n     * 選択判定\n     */\n    public isSelected(person: factory.person.IPerson) {\n        const findResult = this.selectedPersons.find(p => p.id === person.id);\n        return findResult !== undefined;\n    }\n\n    /**\n     * 選択中へ変更\n     */\n    public addPerson(person: factory.person.IPerson) {\n        this.selectedPersons.push(person);\n    }\n\n    /**\n     * 選択中解除\n     */\n    public removePerson(person: factory.person.IPerson) {\n        const findIndex = this.selectedPersons.findIndex(p => p.id === person.id);\n        this.selectedPersons.splice(findIndex, 1);\n    }\n\n    /**\n     * 検索パラメータへ変換\n     */\n    public convertToSearchParams() {\n        return {\n            id: (this.confirmedConditions.id === '') ? undefined : this.confirmedConditions.id,\n            username: (this.confirmedConditions.username === '') ? undefined : this.confirmedConditions.username,\n            email: (this.confirmedConditions.email === '') ? undefined : this.confirmedConditions.email,\n            telephone: (this.confirmedConditions.telephone === '') ? undefined : this.confirmedConditions.telephone,\n            familyName: (this.confirmedConditions.familyName === '') ? undefined : this.confirmedConditions.familyName,\n            givenName: (this.confirmedConditions.givenName === '') ? undefined : this.confirmedConditions.givenName,\n            limit: this.limit,\n            page: this.confirmedConditions.page\n        };\n    }\n\n    /**\n     * 検索\n     */\n    public async personSearch(changeConditions: boolean, event?: { page: number }) {\n        this.selectedPersons = [];\n        if (event !== undefined) {\n            this.confirmedConditions.page = event.page;\n        }\n        // iOS bugfix\n        this.conditions.id = (<HTMLInputElement>document.getElementById('id')).value;\n        this.conditions.username = (<HTMLInputElement>document.getElementById('username')).value;\n        this.conditions.familyName = (<HTMLInputElement>document.getElementById('familyName')).value;\n        this.conditions.givenName = (<HTMLInputElement>document.getElementById('givenName')).value;\n        this.conditions.email = (<HTMLInputElement>document.getElementById('email')).value;\n        this.conditions.telephone = (<HTMLInputElement>document.getElementById('telephone')).value;\n        if (changeConditions) {\n            this.confirmedConditions = {\n                id: this.conditions.id,\n                username: this.conditions.username,\n                familyName: this.conditions.familyName,\n                givenName: this.conditions.givenName,\n                email: this.conditions.email,\n                telephone: this.conditions.telephone,\n                page: 1\n            };\n        }\n        try {\n            const params = this.convertToSearchParams();\n            await this.personService.search(params);\n        } catch (error) {\n            console.error(error);\n            this.utilService.openAlert({\n                title: this.translate.instant('common.error'),\n                body: this.translate.instant('person.search.alert.search')\n            });\n        }\n    }\n\n    /**\n     * 検索条件クリア\n     */\n    public searchConditionClear() {\n        this.conditions = {\n            id: '',\n            username: '',\n            familyName: '',\n            givenName: '',\n            email: '',\n            telephone: '',\n            page: 1\n        };\n        // iOS bugfix\n        (<HTMLInputElement>document.getElementById('id')).value = '';\n        (<HTMLInputElement>document.getElementById('username')).value = '';\n        (<HTMLInputElement>document.getElementById('familyName')).value = '';\n        (<HTMLInputElement>document.getElementById('givenName')).value = '';\n        (<HTMLInputElement>document.getElementById('email')).value = '';\n        (<HTMLInputElement>document.getElementById('telephone')).value = '';\n    }\n\n\n    /**\n     * 詳細を表示\n     */\n    public openDetail(person: factory.person.IPerson) {\n        console.log(person);\n        // this.modal.show(PersonDetailModalComponent, {\n        //     class: 'modal-dialog-centered modal-lg',\n        //     initialState: { person }\n        // });\n    }\n\n    /**\n     * CSVダウンロード\n     */\n    public async downloadCsv() {\n        this.isDownload = true;\n        try {\n            const params = this.convertToSearchParams();\n            await this.download.person(params);\n        } catch (error) {\n            console.error(error);\n        }\n        this.isDownload = false;\n    }\n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AuthGuardService } from '../../canActivates';\nimport { SettingGuardService } from '../../canActivates/setting-guard.service';\nimport { BaseComponent } from '../shared/components/pages/base/base.component';\nimport { PersonSearchComponent } from './components/pages/person-search/person-search.component';\n\n\nconst routes: Routes = [{\n  path: '',\n  component: BaseComponent,\n  canActivate: [AuthGuardService, SettingGuardService],\n  children: [\n    { path: 'search', component: PersonSearchComponent }\n  ]\n}];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PersonRoutingModule { }\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\nimport { PersonSearchComponent } from './components/pages/person-search/person-search.component';\nimport { PersonRoutingModule } from './person-routing.module';\n\n\n@NgModule({\n  declarations: [\n    PersonSearchComponent\n  ],\n  imports: [\n    CommonModule,\n    PersonRoutingModule,\n    SharedModule,\n  ]\n})\nexport class PersonModule { }\n"],"sourceRoot":"webpack:///"}