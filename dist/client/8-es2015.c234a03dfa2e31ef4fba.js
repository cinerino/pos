(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{dzKq:function(e,n,t){"use strict";t.r(n),t.d(n,"AdmissionModule",(function(){return pe}));var c=t("2kYt"),i=t("DSWM"),r=t("sEIs"),o=t("unpb"),s=t("RRjC"),a=t("sN6X"),d=t("Fp6c"),l=t("wgY5"),u=t("x8Mb"),g=t("PIN6"),m=t("cHUu"),p=t("mOXJ"),h=t("EM62"),v=t("K/wI"),f=t("/Ez/"),w=t("s2Ay"),b=t("OSFB"),O=t("NSn/"),x=function(e,n,t,c){return new(t||(t=Promise))((function(i,r){function o(e){try{a(c.next(e))}catch(n){r(n)}}function s(e){try{a(c.throw(e))}catch(n){r(n)}}function a(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}a((c=c.apply(e,n||[])).next())}))};function P(e,n){if(1&e&&(h.Pc(0,"p",12),h.zd(1),h.Zc(2,"changeLanguage"),h.Zc(3,"async"),h.Oc()),2&e){const e=h.Yc(2);var t;h.wc(1),h.Ad(h.ad(2,1,null==(t=h.ad(3,3,e.user))||null==t.entranceGate?null:t.entranceGate.name))}}function k(e,n){1&e&&(h.Pc(0,"div",22),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&e&&(h.wc(1),h.Bd(" ",h.ad(2,1,"admission.check.success")," "))}function E(e,n){1&e&&(h.Pc(0,"div",22),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&e&&(h.wc(1),h.Bd(" ",h.ad(2,1,"admission.check.reEntry")," "))}function y(e,n){1&e&&(h.Pc(0,"p"),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&e&&(h.wc(1),h.Bd(" ",h.ad(2,1,"admission.check.warning.overtime")," "))}const D=function(e){return{"background-color":e}},S=function(e){return[e]};function C(e,n){if(1&e&&(h.Pc(0,"div",15),h.Pc(1,"div",16),h.Kc(2,"div",17),h.xd(3,k,3,3,"div",18),h.xd(4,E,3,3,"div",18),h.Pc(5,"table",19),h.Kc(6,"thead"),h.Pc(7,"tbody"),h.Pc(8,"tr"),h.Pc(9,"th",20),h.zd(10),h.Zc(11,"translate"),h.Zc(12,"translate"),h.Oc(),h.Pc(13,"td",20),h.Kc(14,"app-item-list",21),h.Oc(),h.Oc(),h.Pc(15,"tr"),h.Pc(16,"th",20),h.zd(17),h.Zc(18,"translate"),h.Oc(),h.Pc(19,"td",20),h.Pc(20,"p"),h.zd(21),h.Oc(),h.Oc(),h.Oc(),h.Pc(22,"tr"),h.Pc(23,"th",20),h.zd(24),h.Zc(25,"translate"),h.Oc(),h.Pc(26,"td",20),h.xd(27,y,3,3,"p",10),h.Oc(),h.Oc(),h.Oc(),h.Oc(),h.Oc(),h.Oc()),2&e){const e=h.Yc(3);h.wc(2),h.ed("ngStyle",h.hd(18,D,null==e.qrcodeToken?null:e.qrcodeToken.availableReservation.reservedTicket.ticketType.color)),h.wc(1),h.ed("ngIf",0===(null==e.qrcodeToken?null:e.qrcodeToken.checkTokenActions.length)),h.wc(1),h.ed("ngIf",(null==e.qrcodeToken?null:e.qrcodeToken.checkTokenActions.length)>0),h.wc(6),h.Cd(" ",h.ad(11,10,"common.seat")," / ",h.ad(12,12,"common.ticket")," "),h.wc(4),h.ed("authorizeSeatReservations",h.hd(20,S,null==e.qrcodeToken?null:e.qrcodeToken.availableReservation)),h.wc(3),h.Bd(" ",h.ad(18,14,"admission.check.entryCount")," "),h.wc(4),h.Ad(null==e.qrcodeToken?null:e.qrcodeToken.checkTokenActions.length),h.wc(3),h.Bd(" ",h.ad(25,16,"common.warning")," "),h.wc(3),h.ed("ngIf",!(null!=e.performance&&e.performance.isOpenDoor()||null!=e.performance&&e.performance.isScreening()))}}function I(e,n){if(1&e&&(h.Pc(0,"div",23),h.Pc(1,"div",16),h.Pc(2,"div",24),h.zd(3),h.Zc(4,"translate"),h.Oc(),h.Pc(5,"p",25),h.zd(6),h.Zc(7,"translate"),h.Oc(),h.Pc(8,"table",19),h.Kc(9,"thead"),h.Pc(10,"tbody"),h.Pc(11,"tr"),h.Pc(12,"th",20),h.zd(13,"message"),h.Oc(),h.Pc(14,"td",20),h.Pc(15,"p"),h.zd(16),h.Oc(),h.Oc(),h.Oc(),h.Pc(17,"tr"),h.Pc(18,"th",20),h.zd(19,"inputCode"),h.Oc(),h.Pc(20,"td",20),h.Pc(21,"p"),h.zd(22),h.Oc(),h.Oc(),h.Oc(),h.Pc(23,"tr"),h.Pc(24,"th",20),h.zd(25,"statusCode"),h.Oc(),h.Pc(26,"td",20),h.Pc(27,"p"),h.zd(28),h.Oc(),h.Oc(),h.Oc(),h.Oc(),h.Oc(),h.Oc(),h.Oc()),2&e){const e=h.Yc(3);h.wc(3),h.Bd(" ",h.ad(4,5,"admission.check.danger"),""),h.wc(3),h.Bd(" ",h.ad(7,7,"admission.check.alert.qrcode")," "),h.wc(10),h.Ad(null==e.qrcodeToken||null==e.qrcodeToken.error?null:e.qrcodeToken.error.message),h.wc(6),h.Ad(null==e.qrcodeToken||null==e.qrcodeToken.error?null:e.qrcodeToken.error.inputCode),h.wc(6),h.Ad(null==e.qrcodeToken?null:e.qrcodeToken.statusCode)}}function z(e,n){if(1&e&&(h.Pc(0,"div"),h.xd(1,C,28,22,"div",13),h.xd(2,I,29,9,"div",14),h.Oc()),2&e){const e=h.Yc(2);h.wc(1),h.ed("ngIf",null==e.qrcodeToken?null:e.qrcodeToken.availableReservation),h.wc(1),h.ed("ngIf",!(null!=e.qrcodeToken&&e.qrcodeToken.availableReservation))}}function M(e,n){1&e&&(h.Pc(0,"div",26),h.Pc(1,"div",27),h.Pc(2,"div",28),h.zd(3),h.Zc(4,"translate"),h.Oc(),h.Pc(5,"p"),h.zd(6),h.Zc(7,"translate"),h.Oc(),h.Oc(),h.Oc()),2&e&&(h.wc(3),h.Bd(" ",h.ad(4,2,"admission.check.waiting")," "),h.wc(3),h.Ad(h.ad(7,4,"admission.check.alert.waiting")))}function T(e,n){if(1&e&&(h.Pc(0,"div",8),h.xd(1,P,4,5,"p",9),h.Zc(2,"async"),h.xd(3,z,3,2,"div",10),h.xd(4,M,8,6,"div",11),h.Oc()),2&e){const e=h.Yc();var t;const n=null==(t=h.ad(2,3,e.user))?null:t.entranceGate;h.wc(1),h.ed("ngIf",n),h.wc(2),h.ed("ngIf",e.qrcodeToken),h.wc(1),h.ed("ngIf",!e.qrcodeToken)}}function Y(e,n){if(1&e&&(h.Pc(0,"div",29),h.Kc(1,"app-item-event",30),h.Pc(2,"div",31),h.Pc(3,"div"),h.Pc(4,"p",32),h.Pc(5,"strong",33),h.zd(6),h.Zc(7,"translate"),h.Oc(),h.zd(8),h.Zc(9,"formatDate"),h.Oc(),h.Pc(10,"p"),h.Pc(11,"strong",33),h.zd(12),h.Zc(13,"translate"),h.Oc(),h.zd(14),h.Zc(15,"formatDate"),h.Zc(16,"formatDate"),h.Oc(),h.Pc(17,"p",32),h.Pc(18,"strong",33),h.zd(19),h.Zc(20,"translate"),h.Oc(),h.zd(21),h.Oc(),h.Pc(22,"p"),h.Pc(23,"strong",33),h.zd(24),h.Zc(25,"translate"),h.Oc(),h.zd(26),h.Oc(),h.Oc(),h.Oc(),h.Oc()),2&e){const e=h.Yc();h.wc(1),h.ed("screeningEvent",e.screeningEvent),h.wc(5),h.Ad(h.ad(7,10,"common.doorTime")),h.wc(2),h.Bd(" ",h.bd(9,12,null==e.screeningEvent?null:e.screeningEvent.doorTime,"MM/DD (ddd) HH:mm")," "),h.wc(4),h.Ad(h.ad(13,15,"common.startDate")),h.wc(2),h.Cd(" ",h.bd(15,17,null==e.screeningEvent?null:e.screeningEvent.startDate,"MM/DD (ddd) HH:mm")," - ",h.bd(16,20,null==e.screeningEvent?null:e.screeningEvent.endDate,"HH:mm")," "),h.wc(5),h.Ad(h.ad(20,23,"common.reservation")),h.wc(2),h.Bd(" ",(null==e.screeningEvent?null:e.screeningEvent.maximumAttendeeCapacity)-(null==e.screeningEvent?null:e.screeningEvent.remainingAttendeeCapacity)," "),h.wc(3),h.Ad(h.ad(25,25,"common.admission")),h.wc(2),h.Bd(" ",null==e.screeningEvent?null:e.screeningEvent.attendeeCount," ")}}class Z{constructor(e,n,t,c){this.store=e,this.actionService=n,this.qrcodeService=t,this.router=c,this.moment=l,this.environment=Object(g.a)()}ngOnInit(){return x(this,void 0,void 0,(function*(){this.inputCode="",this.isLoading=this.store.pipe(Object(a.m)(p.c)),this.admission=this.store.pipe(Object(a.m)(p.a)),this.user=this.store.pipe(Object(a.m)(p.i));try{const{screeningEvent:e}=yield this.actionService.admission.getData();this.screeningEvent=e,void 0!==e&&this.update()}catch(e){this.router.navigate(["/error"])}}))}ngOnDestroy(){clearInterval(this.updateLoop)}handleKeyboardEvent(e){"Enter"===e.key&&this.inputCode.length>0?(this.check(this.inputCode),this.inputCode=""):"Escape"!==e.key&&(this.inputCode+=e.key)}check(e){return x(this,void 0,void 0,(function*(){e="CIN285665475047928-0@462bacce-7d6c-4421-aca4-7feab6fd7c30",this.performance=void 0;try{const{screeningEvent:n,scheduleDate:t}=yield this.actionService.admission.getData(),{entranceGate:c}=yield this.actionService.user.getData();if(void 0===t)return void this.router.navigate(["/error"]);const i=yield this.actionService.admission.checkQrcode({code:e,screeningEvent:n,scheduleDate:l(t,"YYYY-MM-DD").toDate(),entranceGate:c});void 0!==n&&(this.performance=new u.b.Purchase.Performance({screeningEvent:n})),this.screeningEvent=i.screeningEvent,this.qrcodeToken=i.qrcodeToken}catch(n){console.error(n),this.qrcodeToken={checkTokenActions:[],statusCode:n.code?n.code:d.BAD_REQUEST,error:{inputCode:e,message:n.message}}}}))}openQRCodeReader(){this.qrcodeService.openQRCodeReader({cb:e=>x(this,void 0,void 0,(function*(){yield this.check(e)}))})}update(){clearInterval(this.updateLoop),this.updateLoop=setInterval(()=>x(this,void 0,void 0,(function*(){const{screeningEvent:e}=yield this.actionService.admission.getData();void 0!==e&&(yield this.actionService.admission.getScreeningEvent(e))})),6e5)}}Z.\u0275fac=function(e){return new(e||Z)(h.Jc(a.b),h.Jc(m.a),h.Jc(m.e),h.Jc(r.b))},Z.\u0275cmp=h.Dc({type:Z,selectors:[["app-admission-check"]],hostBindings:function(e,n){1&e&&h.Wc("keypress",(function(e){return n.handleKeyboardEvent(e)}),!1,h.pd)},decls:13,vars:10,consts:[[1,"contents-width","mx-auto","px-3","pt-4"],[1,"buttons","mx-auto","text-center","mb-4"],["type","button",1,"btn","btn-success","btn-block","py-3",3,"click"],["class","mb-4",4,"ngIf"],[1,"contents-width","mx-auto","px-3","pb-5"],["class","mb-4 bg-white",4,"ngIf"],[1,"buttons","mx-auto","text-center"],["type","button","routerLink","/admission/schedule",1,"btn","btn-outline-primary","btn-block","py-3"],[1,"mb-4"],["class","p-2 bg-white text-center font-weight-bold",4,"ngIf"],[4,"ngIf"],["class","p-4 bg-dark text-white text-center",4,"ngIf"],[1,"p-2","bg-white","text-center","font-weight-bold"],["class","position-relative py-4 bg-success text-white",4,"ngIf"],["class","py-4 bg-danger text-white",4,"ngIf"],[1,"position-relative","py-4","bg-success","text-white"],[1,"contents-width","mx-auto","px-3"],[1,"color","rounded","border","border-white",3,"ngStyle"],["class","flash-text text-xx-large font-weight-bold mb-3 text-center",4,"ngIf"],[1,"table","table-bordered","text-small","mb-0","border-white","text-white"],[1,"align-middle"],[3,"authorizeSeatReservations"],[1,"flash-text","text-xx-large","font-weight-bold","mb-3","text-center"],[1,"py-4","bg-danger","text-white"],[1,"flash-text","text-xx-large","font-weight-bold","mb-2","text-center"],[1,"text-center","mb-3"],[1,"p-4","bg-dark","text-white","text-center"],[1,"contents-width","mx-auto"],[1,"text-xx-large","font-weight-bold","mb-2"],[1,"mb-4","bg-white"],[3,"screeningEvent"],[1,"p-3"],[1,"mr-3"],[1,"mr-2"]],template:function(e,n){1&e&&(h.Pc(0,"div",0),h.Pc(1,"div",1),h.Pc(2,"button",2),h.Wc("click",(function(){return n.openQRCodeReader()})),h.zd(3),h.Zc(4,"translate"),h.Oc(),h.Oc(),h.Oc(),h.xd(5,T,5,5,"div",3),h.Zc(6,"async"),h.Pc(7,"div",4),h.xd(8,Y,27,27,"div",5),h.Pc(9,"div",6),h.Pc(10,"button",7),h.zd(11),h.Zc(12,"translate"),h.Oc(),h.Oc(),h.Oc()),2&e&&(h.wc(3),h.Ad(h.ad(4,4,"admission.check.camera.start")),h.wc(2),h.ed("ngIf",!h.ad(6,6,n.isLoading)),h.wc(3),h.ed("ngIf",n.screeningEvent),h.wc(3),h.Ad(h.ad(12,8,"admission.schedule.prev")))},directives:[c.l,r.c,c.m,v.a,f.a],pipes:[w.c,c.b,b.a,O.a],styles:[".video-area[_ngcontent-%COMP%]{height:25vh;overflow:hidden}.flash-text[_ngcontent-%COMP%]{-webkit-animation-duration:3s;animation-duration:3s;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:flash-text;animation-name:flash-text}.color[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem;width:1.5rem;height:1.5rem}@-webkit-keyframes flash-text{0%,20%,40%,60%,80%,to{color:#fff}10%,30%,50%,70%,90%{color:transparent}}@keyframes flash-text{0%,20%,40%,60%,80%,to{color:#fff}10%,30%,50%,70%,90%{color:transparent}}"]});var A=t("QN9p");function _(e,n){if(1&e&&(h.Pc(0,"p",15),h.zd(1),h.Zc(2,"changeLanguage"),h.Oc()),2&e){const e=h.Yc(2);h.wc(1),h.Bd(" ",h.ad(2,1,e.performance.screeningEvent.location.address),"")}}function G(e,n){if(1&e&&(h.Pc(0,"div",12),h.xd(1,_,3,3,"p",13),h.Zc(2,"changeLanguage"),h.Pc(3,"p",14),h.zd(4),h.Zc(5,"changeLanguage"),h.Oc(),h.Oc()),2&e){const e=h.Yc();h.wc(1),h.ed("ngIf",h.ad(2,2,e.performance.screeningEvent.location.address)),h.wc(3),h.Ad(h.ad(5,4,e.performance.screeningEvent.location.name))}}function q(e,n){if(1&e&&(h.Pc(0,"div",16),h.Pc(1,"p",14),h.zd(2),h.Zc(3,"changeLanguage"),h.Oc(),h.Oc()),2&e){const e=h.Yc();h.wc(2),h.Bd(" ",h.ad(3,1,e.performance.screeningEvent.name),"")}}function L(e,n){1&e&&(h.Pc(0,"div",17),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&e&&(h.wc(1),h.Bd(" ",h.ad(2,1,"admission.schedule.status.opening"),""))}function R(e,n){1&e&&(h.Pc(0,"div",17),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&e&&(h.wc(1),h.Bd(" ",h.ad(2,1,"admission.schedule.status.nowShowing"),""))}function H(e,n){if(1&e&&(h.Pc(0,"div"),h.xd(1,L,3,3,"div",8),h.xd(2,R,3,3,"div",8),h.Oc()),2&e){const e=h.Yc();h.wc(1),h.ed("ngIf",e.performance.isOpenDoor()),h.wc(1),h.ed("ngIf",e.performance.isScreening())}}function B(e,n){1&e&&(h.Pc(0,"div",17),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&e&&(h.wc(1),h.Bd(" ",h.ad(2,1,"admission.schedule.status.beforeOpening"),""))}function F(e,n){1&e&&(h.Pc(0,"div",17),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&e&&(h.wc(1),h.Bd(" ",h.ad(2,1,"admission.schedule.status.filmCompletion"),""))}function U(e,n){if(1&e&&(h.Pc(0,"div",18),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&e){const e=h.Yc();h.wc(1),h.Dd(" ",h.ad(2,3,"common.seat")," ",e.performance.screeningEvent.remainingAttendeeCapacity," / ",e.performance.screeningEvent.maximumAttendeeCapacity," ")}}function j(e,n){1&e&&(h.Pc(0,"div",18),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&e&&(h.wc(1),h.Bd(" ",h.ad(2,1,"admission.schedule.infiniteStock"),""))}const J=function(e,n){return{"bg-white":e,"bg-dark-gray text-light-gray":n}};class K{constructor(){this.select=new h.w,this.moment=l,this.environment=Object(g.a)()}ngOnInit(){}}function W(e,n){if(1&e&&(h.Pc(0,"p"),h.zd(1),h.Zc(2,"changeLanguage"),h.Oc()),2&e){const e=h.Yc(2);h.wc(1),h.Bd(" ",h.ad(2,1,e.screeningEventsGroup.screeningEvent.superEvent.headline),"")}}function Q(e,n){if(1&e&&(h.Pc(0,"p"),h.zd(1),h.Zc(2,"changeLanguage"),h.Oc()),2&e){const e=h.Yc(2);h.wc(1),h.Bd(" ",h.ad(2,1,e.screeningEventsGroup.screeningEvent.superEvent.description),"")}}function N(e,n){if(1&e&&(h.Pc(0,"div",14),h.zd(1),h.Oc()),2&e){const e=h.Yc(2);h.wc(1),h.Ad(null==e.screeningEventsGroup.screeningEvent.workPerformed?null:e.screeningEventsGroup.screeningEvent.workPerformed.contentRating)}}function $(e,n){1&e&&(h.Pc(0,"div",15),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&e&&(h.wc(1),h.Ad(h.ad(2,1,"common.dubbing")))}function V(e,n){1&e&&(h.Pc(0,"div",16),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&e&&(h.wc(1),h.Ad(h.ad(2,1,"common.subtitles")))}function X(e,n){if(1&e&&(h.Pc(0,"div",17),h.zd(1),h.Oc()),2&e){const e=n.$implicit;h.wc(1),h.Ad(e.name)}}function ee(e,n){if(1&e&&(h.Pc(0,"div",18),h.Pc(1,"span",19),h.zd(2),h.Zc(3,"translate"),h.Oc(),h.zd(4),h.Zc(5,"translate"),h.Oc()),2&e){const e=h.Yc(2);h.wc(2),h.Ad(h.ad(3,3,"common.duration")),h.wc(2),h.Cd("",e.moment.duration(null==e.screeningEventsGroup.screeningEvent.workPerformed?null:e.screeningEventsGroup.screeningEvent.workPerformed.duration).asMinutes(),"",h.ad(5,5,"common.date.minute")," ")}}function ne(e,n){if(1&e&&(h.Pc(0,"div",4),h.Pc(1,"div",5),h.Pc(2,"p",6),h.zd(3),h.Zc(4,"changeLanguage"),h.Oc(),h.xd(5,W,3,3,"p",7),h.Zc(6,"changeLanguage"),h.xd(7,Q,3,3,"p",7),h.Zc(8,"changeLanguage"),h.Oc(),h.Pc(9,"div",8),h.xd(10,N,2,1,"div",9),h.xd(11,$,3,3,"div",10),h.xd(12,V,3,3,"div",11),h.xd(13,X,2,1,"div",12),h.xd(14,ee,6,7,"div",13),h.Oc(),h.Oc()),2&e){const e=h.Yc();h.wc(3),h.Ad(h.ad(4,8,e.screeningEventsGroup.screeningEvent.name)),h.wc(2),h.ed("ngIf",e.screeningEventsGroup.screeningEvent.superEvent.headline&&h.ad(6,10,e.screeningEventsGroup.screeningEvent.superEvent.headline)),h.wc(2),h.ed("ngIf",e.screeningEventsGroup.screeningEvent.superEvent.description&&h.ad(8,12,e.screeningEventsGroup.screeningEvent.superEvent.description)),h.wc(3),h.ed("ngIf",null==e.screeningEventsGroup.screeningEvent.workPerformed?null:e.screeningEventsGroup.screeningEvent.workPerformed.contentRating),h.wc(1),h.ed("ngIf",e.screeningEventsGroup.screeningEvent.superEvent.dubLanguage),h.wc(1),h.ed("ngIf",e.screeningEventsGroup.screeningEvent.superEvent.subtitleLanguage),h.wc(1),h.ed("ngForOf",e.screeningEventsGroup.screeningEvent.superEvent.videoFormat),h.wc(1),h.ed("ngIf",(null==e.screeningEventsGroup.screeningEvent.workPerformed?null:e.screeningEventsGroup.screeningEvent.workPerformed.duration)&&e.moment.duration(null==e.screeningEventsGroup.screeningEvent.workPerformed?null:e.screeningEventsGroup.screeningEvent.workPerformed.duration).asMinutes()>0)}}function te(e,n){if(1&e&&(h.Pc(0,"div",4),h.Pc(1,"p",6),h.zd(2),h.Zc(3,"changeLanguage"),h.Oc(),h.Oc()),2&e){const e=h.Yc();h.wc(2),h.Bd("",h.ad(3,1,e.screeningEventsGroup.screeningEvent.location.name)," ")}}function ce(e,n){if(1&e){const e=h.Qc();h.Pc(0,"li",20),h.Pc(1,"app-admission-performance",21),h.Wc("select",(function(n){h.rd(e);return h.Yc().select.emit(n)})),h.Oc(),h.Oc()}if(2&e){const e=n.$implicit;h.wc(1),h.ed("performance",e)}}K.\u0275fac=function(e){return new(e||K)},K.\u0275cmp=h.Dc({type:K,selectors:[["app-admission-performance"]],inputs:{performance:"performance"},outputs:{select:"select"},decls:24,vars:21,consts:[[1,"row","mx-0","border","boder-gray","rounded","p-3","py-md-3","text-md-center","d-md-block","align-items-center","pointer","h-100",3,"ngClass","click"],[1,"col-md-12","col-8","px-0"],["class","mb-1 text-small screen-name",4,"ngIf"],["class","mb-1 text-small",4,"ngIf"],[1,"text-large"],[1,"border-0","bg-light-gray","my-2"],[1,"col-md-12","col-4","px-0","text-center"],[4,"ngIf"],["class","status mb-2",4,"ngIf"],["class","mb-2 text-small",4,"ngIf"],[1,"text-small","mb-1"],[1,"text-small"],[1,"mb-1","text-small","screen-name"],["class","text-overflow-ellipsis mr-2 d-inline-block d-md-block",4,"ngIf"],[1,"text-overflow-ellipsis","d-inline-block","d-md-block"],[1,"text-overflow-ellipsis","mr-2","d-inline-block","d-md-block"],[1,"mb-1","text-small"],[1,"status","mb-2"],[1,"mb-2","text-small"]],template:function(e,n){1&e&&(h.Pc(0,"div",0),h.Wc("click",(function(){return n.select.emit(n.performance.screeningEvent)})),h.Pc(1,"div",1),h.xd(2,G,6,6,"div",2),h.xd(3,q,4,3,"div",3),h.Pc(4,"div"),h.Pc(5,"strong",4),h.zd(6),h.Oc(),h.Pc(7,"span"),h.zd(8,"-"),h.Oc(),h.Pc(9,"span"),h.zd(10),h.Oc(),h.Oc(),h.Oc(),h.Kc(11,"hr",5),h.Pc(12,"div",6),h.xd(13,H,3,2,"div",7),h.xd(14,B,3,3,"div",8),h.xd(15,F,3,3,"div",8),h.xd(16,U,3,5,"div",9),h.xd(17,j,3,3,"div",9),h.Pc(18,"div",10),h.zd(19),h.Zc(20,"translate"),h.Oc(),h.Pc(21,"div",11),h.zd(22),h.Zc(23,"translate"),h.Oc(),h.Oc(),h.Oc()),2&e&&(h.ed("ngClass",h.id(18,J,n.performance.isOpenDoor()||n.performance.isScreening(),!(n.performance.isOpenDoor()||n.performance.isScreening()))),h.wc(2),h.ed("ngIf","screeningEventSeries"===n.environment.PURCHASE_SCHEDULE_SORT),h.wc(1),h.ed("ngIf","screen"===n.environment.PURCHASE_SCHEDULE_SORT),h.wc(3),h.Ad(n.moment(n.performance.screeningEvent.startDate).format("HH:mm")),h.wc(4),h.Ad(n.moment(n.performance.screeningEvent.endDate).format("HH:mm")),h.wc(3),h.ed("ngIf",n.performance.isOpenDoor()||n.performance.isScreening()),h.wc(1),h.ed("ngIf",n.performance.isOpenDoor("before")),h.wc(1),h.ed("ngIf",n.performance.isScreening("after")),h.wc(1),h.ed("ngIf",!n.performance.isInfinitetock()),h.wc(1),h.ed("ngIf",n.performance.isInfinitetock()),h.wc(2),h.Cd("",h.ad(20,14,"common.ticketing")," ",n.performance.screeningEvent.checkInCount,""),h.wc(3),h.Cd("",h.ad(23,16,"common.admission")," ",n.performance.screeningEvent.attendeeCount,""))},directives:[c.j,c.l],pipes:[w.c,b.a],styles:[".status[_ngcontent-%COMP%]{line-height:30px}.status[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}@media (max-width:767.98px){.text-overflow-ellipsis[_ngcontent-%COMP%]{overflow:auto;width:auto;white-space:normal}}"]});class ie{constructor(){this.select=new h.w,this.moment=l,this.environment=Object(g.a)()}ngOnInit(){}}ie.\u0275fac=function(e){return new(e||ie)},ie.\u0275cmp=h.Dc({type:ie,selectors:[["app-admission-performances"]],inputs:{screeningEventsGroup:"screeningEventsGroup"},outputs:{select:"select"},decls:5,vars:3,consts:[[1,""],["class","p-3 bg-gray",4,"ngIf"],[1,"py-2","px-md-2","d-flex","flex-wrap"],["class","px-md-2 my-2",4,"ngFor","ngForOf"],[1,"p-3","bg-gray"],[1,"mb-2"],[1,"font-weight-bold","text-large"],[4,"ngIf"],[1,"d-flex","align-items-center","flex-wrap"],["class","content-rating text-small bg-dark-gray text-white py-1 px-2 mr-2",4,"ngIf"],["class","dub-language text-small bg-dark-gray text-white py-1 px-2 mr-2",4,"ngIf"],["class","subtitle-language text-small bg-dark-gray text-white py-1 px-2 mr-2",4,"ngIf"],["class","video-format text-small bg-dark-gray text-white py-1 px-2 mr-2",4,"ngFor","ngForOf"],["class","text-small ml-auto",4,"ngIf"],[1,"content-rating","text-small","bg-dark-gray","text-white","py-1","px-2","mr-2"],[1,"dub-language","text-small","bg-dark-gray","text-white","py-1","px-2","mr-2"],[1,"subtitle-language","text-small","bg-dark-gray","text-white","py-1","px-2","mr-2"],[1,"video-format","text-small","bg-dark-gray","text-white","py-1","px-2","mr-2"],[1,"text-small","ml-auto"],[1,"mr-1"],[1,"px-md-2","my-2"],[1,"mb-3",3,"performance","select"]],template:function(e,n){1&e&&(h.Pc(0,"div",0),h.xd(1,ne,15,14,"div",1),h.xd(2,te,4,3,"div",1),h.Pc(3,"ul",2),h.xd(4,ce,2,1,"li",3),h.Oc(),h.Oc()),2&e&&(h.wc(1),h.ed("ngIf","screeningEventSeries"===n.environment.PURCHASE_SCHEDULE_SORT),h.wc(1),h.ed("ngIf","screen"===n.environment.PURCHASE_SCHEDULE_SORT),h.wc(2),h.ed("ngForOf",n.screeningEventsGroup.data))},directives:[c.l,c.k,K],pipes:[b.a,w.c],styles:["[_nghost-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:20%}@media (max-width:991.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:25%}}@media (max-width:767.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%}}"]});var re=function(e,n,t,c){return new(t||(t=Promise))((function(i,r){function o(e){try{a(c.next(e))}catch(n){r(n)}}function s(e){try{a(c.throw(e))}catch(n){r(n)}}function a(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}a((c=c.apply(e,n||[])).next())}))};const oe=["datepicker"];function se(e,n){if(1&e&&(h.Pc(0,"p",16),h.zd(1),h.Zc(2,"formatDate"),h.Zc(3,"async"),h.Oc()),2&e){const e=h.Yc();var t;h.wc(1),h.Bd(" ",h.bd(2,1,null==(t=h.ad(3,4,e.admission))?null:t.scheduleDate,"YYYY/MM/DD (ddd)"),"")}}function ae(e,n){1&e&&(h.Kc(0,"p",17),h.Zc(1,"translate")),2&e&&h.ed("innerHTML",h.ad(1,1,"admission.schedule.notfound"),h.sd)}function de(e,n){if(1&e){const e=h.Qc();h.Pc(0,"app-admission-performances",18),h.Wc("select",(function(n){h.rd(e);return h.Yc().selectSchedule(n)})),h.Oc()}if(2&e){const e=n.$implicit;h.ed("screeningEventsGroup",e)}}const le=function(){return{dateInputFormat:"YYYY/MM/DD",adaptivePosition:!0,showWeekNumbers:!1}};class ue{constructor(e,n,t,c,i,r){this.store=e,this.router=n,this.localeService=t,this.actionService=c,this.masterService=i,this.utilService=r,this.moment=l,this.environment=Object(g.a)()}ngOnInit(){return re(this,void 0,void 0,(function*(){this.admission=this.store.pipe(Object(a.m)(p.a)),this.user=this.store.pipe(Object(a.m)(p.i)),this.isLoading=this.store.pipe(Object(a.m)(p.c)),this.screeningEventsGroup=[],this.scheduleDate=l(l().format("YYYYMMDD"),"YYYYMMDD").toDate()}))}ngOnDestroy(){clearTimeout(this.updateTimer)}update(){void 0!==this.updateTimer&&clearTimeout(this.updateTimer);this.updateTimer=setTimeout(()=>re(this,void 0,void 0,(function*(){try{yield this.getSchedule()}catch(e){console.error(e),this.router.navigate(["/error"])}})),6e5)}selectDate(e){return re(this,void 0,void 0,(function*(){if(null!=e){this.scheduleDate=e;try{void 0!==this.scheduleDate&&null!==this.scheduleDate||(this.scheduleDate=l().toDate());const e=l(this.scheduleDate).format("YYYY-MM-DD");this.actionService.admission.selectScheduleDate(e),yield this.getSchedule()}catch(n){console.error(n),this.router.navigate(["/error"])}}}))}getSchedule(){return re(this,void 0,void 0,(function*(){const{theater:e}=yield this.actionService.user.getData();if(void 0===e)throw new Error("theater undefined");const n=l(this.scheduleDate).format("YYYY-MM-DD"),t=yield this.masterService.searchMovies({offers:{availableFrom:l(n).toDate()}}),c="screeningEventSeries"===this.environment.PURCHASE_SCHEDULE_SORT?yield this.masterService.searchScreeningEventSeries({location:{branchCode:{$eq:e.branchCode}},workPerformed:{identifiers:t.map(e=>e.identifier)}}):[],i="screen"===this.environment.PURCHASE_SCHEDULE_SORT?yield this.masterService.searchScreeningRooms({branchCode:{$eq:e.branchCode}}):[],r=yield this.masterService.searchScreeningEvent({superEvent:{locationBranchCodes:[e.branchCode]},startFrom:l(n).toDate(),startThrough:l(n).add(1,"day").add(-1,"millisecond").toDate(),screeningEventSeries:c,screeningRooms:i}),o=l((yield this.utilService.getServerTime()).date).toDate();this.screeningEventsGroup=u.a.Purchase.screeningEvents2ScreeningEventSeries({screeningEvents:r,now:o}),this.update()}))}selectSchedule(e){return re(this,void 0,void 0,(function*(){try{yield this.actionService.admission.getScreeningEvent(e),this.router.navigate(["/admission/check"])}catch(n){console.error(n),this.router.navigate(["/error"])}}))}notSpecified(){this.actionService.admission.delete();const e=l(this.scheduleDate).format("YYYY-MM-DD");this.actionService.admission.selectScheduleDate(e),this.router.navigate(["/admission/check"])}setDatePicker(){this.user.subscribe(e=>{this.localeService.use(e.language)}).unsubscribe()}toggleDatepicker(){this.setDatePicker(),this.datepicker.toggle()}onShowPicker(e){u.a.Util.iOSDatepickerTapBugFix(e,[this.datepicker])}}ue.\u0275fac=function(e){return new(e||ue)(h.Jc(a.b),h.Jc(r.b),h.Jc(A.d),h.Jc(m.a),h.Jc(m.d),h.Jc(m.f))},ue.\u0275cmp=h.Dc({type:ue,selectors:[["app-admission-schedule"]],viewQuery:function(e,n){var t;(1&e&&h.vd(oe,!0),2&e)&&(h.nd(t=h.Xc())&&(n.datepicker=t.first))},decls:22,vars:17,consts:[[1,"contents-width","mx-auto","px-3","py-5"],[1,"text-large","mb-4","text-center","font-weight-bold"],[1,"mb-4","text-md-center",3,"innerHTML"],[1,"mb-3"],[1,"input-group"],["type","text","placeholder","Datepicker","bsDatepicker","","readonly","",1,"form-control",3,"bsValue","bsConfig","bsValueChange","click","onShown"],["datepicker","bsDatepicker"],[1,"input-group-append","pointer",3,"click"],[1,"input-group-text"],[1,"fas","fa-caret-down"],["class","text-primary font-weight-bold mb-3",4,"ngIf"],["class","mb-3",3,"innerHTML",4,"ngIf"],[1,"mb-4"],["class","mb-3",3,"screeningEventsGroup","select",4,"ngFor","ngForOf"],[1,"buttons","mx-auto","text-center"],["type","button",1,"btn","btn-primary","btn-block","py-3","mb-3",3,"click"],[1,"text-primary","font-weight-bold","mb-3"],[1,"mb-3",3,"innerHTML"],[1,"mb-3",3,"screeningEventsGroup","select"]],template:function(e,n){if(1&e&&(h.Pc(0,"div",0),h.Pc(1,"h2",1),h.zd(2),h.Zc(3,"translate"),h.Oc(),h.Kc(4,"p",2),h.Zc(5,"translate"),h.Pc(6,"div",3),h.Pc(7,"div",4),h.Pc(8,"input",5,6),h.Wc("bsValueChange",(function(e){return n.selectDate(e)}))("click",(function(){return n.setDatePicker()}))("onShown",(function(e){return n.onShowPicker(e)})),h.Oc(),h.Pc(10,"div",7),h.Wc("click",(function(){return n.toggleDatepicker()})),h.Pc(11,"span",8),h.Kc(12,"i",9),h.Oc(),h.Oc(),h.Oc(),h.Oc(),h.xd(13,se,4,6,"p",10),h.Zc(14,"async"),h.xd(15,ae,2,3,"p",11),h.Pc(16,"div",12),h.xd(17,de,1,1,"app-admission-performances",13),h.Oc(),h.Pc(18,"div",14),h.Pc(19,"button",15),h.Wc("click",(function(){return n.notSpecified()})),h.zd(20),h.Zc(21,"translate"),h.Oc(),h.Oc(),h.Oc()),2&e){var t;const e=null==(t=h.ad(14,12,n.admission))?null:t.scheduleDate;h.wc(2),h.Ad(h.ad(3,8,"admission.schedule.title")),h.wc(2),h.ed("innerHTML",h.ad(5,10,"admission.schedule.read"),h.sd),h.wc(4),h.ed("bsValue",n.scheduleDate)("bsConfig",h.gd(16,le)),h.wc(5),h.ed("ngIf",e),h.wc(2),h.ed("ngIf",0===n.screeningEventsGroup.length),h.wc(2),h.ed("ngForOf",n.screeningEventsGroup),h.wc(3),h.Ad(h.ad(21,14,"admission.schedule.next"))}},directives:[A.b,A.a,c.l,c.k,ie],pipes:[w.c,c.b,O.a],styles:['.condition[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.schedule-slider[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;bottom:0;height:4px;background-color:#000;opacity:.3}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%], .schedule-slider[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]{width:27px;height:27px;background-image:url(/assets/images/icon/slider_arrow.svg);background-size:27px;margin-top:-13px}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%]{right:-38px}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]{left:-38px;transform:rotate(180deg)}']});const ge=[{path:"",component:s.a,canActivate:[o.a,o.c],children:[{path:"schedule",component:ue},{path:"check",component:Z}]}];class me{}me.\u0275mod=h.Hc({type:me}),me.\u0275inj=h.Gc({factory:function(e){return new(e||me)},imports:[[r.d.forChild(ge)],r.d]});class pe{}pe.\u0275mod=h.Hc({type:pe}),pe.\u0275inj=h.Gc({factory:function(e){return new(e||pe)},imports:[[c.c,me,i.a]]})}}]);