var StarWebPrintTrader=function(t){this.papertype=this.checkedblock=this.url=null,this.timeout=9e4,this.onTimeout=this.onError=this.onReceive=null,this.holdprint_timeout=void 0,this._json=this._url=null,null!=t&&(null!=t.url&&(this.url=t.url),null!=t.checkedblock&&(this.checkedblock=t.checkedblock),null!=t.papertype&&(this.papertype=t.papertype),null!=t.timeout&&(this.timeout=t.timeout),null!=t.holdprint_timeout&&(this.holdprint_timeout=t.holdprint_timeout))},_handlerCallback={};function _onFinish(t){var e=_handlerCallback[t.url],i=t.response;_handlerCallback[t.url]=null,200==t.htmlCode?e.onReceive({traderSuccess:i.slice(i.indexOf("&lt;success&gt;")+15,i.indexOf("&lt;/success&gt;")),traderCode:i.slice(i.indexOf("&lt;code&gt;")+12,i.indexOf("&lt;/code&gt;")),traderStatus:i.slice(i.indexOf("&lt;status&gt;")+14,i.indexOf("&lt;/status&gt;")),status:t.htmlCode,responseText:i}):e.onError({status:t.htmlCode,responseText:i})}StarWebPrintTrader.prototype._callMessageHandler=function(){var t=this;null==_handlerCallback[t._url]?(_handlerCallback[t._url]=t,webkit.messageHandlers.sendMessageHandler.postMessage(t._json)):setTimeout((function(){t._callMessageHandler()}),500)},StarWebPrintTrader.prototype.sendMessage=function(t){var e="<root";null!=t.checkedblock?0==t.checkedblock&&(e+=' checkedblock="false"'):0==this.checkedblock&&(e+=' checkedblock="false"'),null!=t.papertype?"normal"==t.papertype?e+=' papertype="normal"':"black_mark"==t.papertype?e+=' papertype="black_mark"':"black_mark_and_detect_at_power_on"==t.papertype&&(e+=' papertype="black_mark_and_detect_at_power_on"'):"normal"==this.papertype?e+=' papertype="normal"':"black_mark"==this.papertype?e+=' papertype="black_mark"':"black_mark_and_detect_at_power_on"==this.papertype&&(e+=' papertype="black_mark_and_detect_at_power_on"'),null!=t.holdprint_timeout?e+=' holdprint_timeout="'+t.holdprint_timeout+'"':null!=this.holdprint_timeout&&(e+=' holdprint_timeout="'+this.holdprint_timeout+'"');var i;e=e+">"+t.request+"</root>";if(i='<StarWebPrint xmlns="http://www.star-m.jp" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Request>',i+=this._encodeEscapeSequence(e),i+="</Request>",i+="</StarWebPrint>",e="",e=null!=t.url?t.url:this.url,/^https?:\/\/(localhost|127\.0\.0\.1):8001\//.test(e.toLowerCase())&&-1!=navigator.userAgent.indexOf("webPRNTSupportMessageHandler"))this._json=JSON.stringify({url:e,body:i}),this._url=e,this._callMessageHandler();else{var s=null;if(window.XMLHttpRequest)s=new XMLHttpRequest;else{if(!window.ActiveXObject)return void(this.onError&&this.onError({status:10001,responseText:"XMLHttpRequest is not supported."}));s=new ActiveXObject("Microsoft.XMLHTTP")}-1==navigator.userAgent.indexOf("iPad;")&&-1==navigator.userAgent.indexOf("iPhone;")&&-1==navigator.userAgent.indexOf("iPod touch;")&&-1==navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("WebPRNTSupportHTTPS")||0!=e.toLowerCase().indexOf("https://localhost")&&0!=e.toLowerCase().indexOf("https://127.0.0.1")||(e="http://"+e.substring(8));try{s.open("POST",e,!0)}catch(r){return void(this.onError&&this.onError({status:10002,responseText:r.message}))}try{null!=t.timeout?s.timeout=t.timeout:this.timeout&&(s.timeout=this.timeout)}catch(a){}s.setRequestHeader("Content-Type","text/xml; charset=UTF-8");var n=this;s.onreadystatechange=function(){if(4==s.readyState)try{if(200==s.status){var t=s.responseXML.getElementsByTagName("Response");if(0<t.length){if(n.onReceive){var e=t[0].childNodes[0].nodeValue;n.onReceive({traderSuccess:e.slice(e.indexOf("<success>")+9,e.indexOf("</success>")),traderCode:e.slice(e.indexOf("<code>")+6,e.indexOf("</code>")),traderStatus:e.slice(e.indexOf("<status>")+8,e.indexOf("</status>")),status:s.status,responseText:s.responseText})}}else n.onError&&n.onError({status:s.status,responseText:s.responseText})}else n.onError&&n.onError({status:s.status,responseText:s.responseText})}catch(i){n.onError&&n.onError({status:0,responseText:"Connection timeout occurred."})}};try{s.ontimeout=function(){n.onTimeout&&n.onTimeout()}}catch(k){}try{s.send(i)}catch(o){this.onError&&this.onError({status:10003,responseText:o.message})}}},StarWebPrintTrader.prototype._onHandlerSuccess=function(t){trader.onReceive&&trader.onReceive(t)},StarWebPrintTrader.prototype._onHandlerError=function(t){trader.onError&&trader.onError(t)},StarWebPrintTrader.prototype.isCoverOpen=function(t){return!!(32&parseInt(t.traderStatus.substr(4,2),16))},StarWebPrintTrader.prototype.isOffLine=function(t){return!!(8&parseInt(t.traderStatus.substr(4,2),16))},StarWebPrintTrader.prototype.isCompulsionSwitchClose=function(t){return!!(4&parseInt(t.traderStatus.substr(4,2),16))},StarWebPrintTrader.prototype.isEtbCommandExecute=function(t){return!!(2&parseInt(t.traderStatus.substr(4,2),16))},StarWebPrintTrader.prototype.isHighTemperatureStop=function(t){return!!(64&parseInt(t.traderStatus.substr(6,2),16))},StarWebPrintTrader.prototype.isNonRecoverableError=function(t){return!!(32&parseInt(t.traderStatus.substr(6,2),16))},StarWebPrintTrader.prototype.isAutoCutterError=function(t){return!!(8&parseInt(t.traderStatus.substr(6,2),16))},StarWebPrintTrader.prototype.isBlackMarkError=function(t){return!!(8&parseInt(t.traderStatus.substr(8,2),16))},StarWebPrintTrader.prototype.isPaperEnd=function(t){return!!(8&parseInt(t.traderStatus.substr(10,2),16))},StarWebPrintTrader.prototype.isPaperNearEnd=function(t){return!!(4&parseInt(t.traderStatus.substr(10,2),16))},StarWebPrintTrader.prototype.isPaperPresent=function(t){return!!(2&parseInt(t.traderStatus.substr(12,2),16))},StarWebPrintTrader.prototype.extractionEtbCounter=function(t){var e=0;return 64&parseInt(t.traderStatus.substr(14,2),16)&&(e|=16),32&parseInt(t.traderStatus.substr(14,2),16)&&(e|=8),8&parseInt(t.traderStatus.substr(14,2),16)&&(e|=4),4&parseInt(t.traderStatus.substr(14,2),16)&&(e|=2),2&parseInt(t.traderStatus.substr(14,2),16)&&(e|=1),e},StarWebPrintTrader.prototype._encodeEscapeSequence=function(t){var e=/[<>&]/g;return e.test(t)&&(t=t.replace(e,(function(t){switch(t){case"<":return"&lt;";case">":return"&gt;"}return"&amp;"}))),t};var StarWebPrintBuilder=function(){};StarWebPrintBuilder.prototype.createAlignmentElement=function(t){var e="<alignment";return null!=t&&(e+=this._analysisEnumAttribute("position",t.position,/^(left|center|right)$/)),e+"/>"},StarWebPrintBuilder.prototype.createBarcodeElement=function(t){var e;if(null==t)throw Error("Argument is undefined.");if(e="<barcode"+this._analysisEnumAttribute("symbology",t.symbology,/^(UPCE|UPCA|JAN8|JAN13|Code39|ITF|Code128|Code93|NW7)$/),e+=this._analysisEnumAttribute("width",t.width,/^(width[2-4]|width_mode[1-9])$/),e+=this._analysisEnumAttribute("hri",t.hri,/^(false|true)$/),e+=this._analysisValueAttribute("height",t.height,1,255),null==t.data)throw Error('Argument "data" is undefined.');return(e=e+">"+this._encodeEscapeSequenceBinary(t.data))+"</barcode>"},StarWebPrintBuilder.prototype.createBitImageElement=function(t){var e="<bitimage";if(null==t)throw Error("Argument is undefined.");var i=0,s=0,n=0,r=0;if(null!=t.x&&(i=t.x),null!=t.y&&(s=t.y),null!=t.width&&(n=t.width),null!=t.height&&(r=t.height),this._analysisValueAttribute("x",i,0,65535),this._analysisValueAttribute("y",s,0,65535),e+=this._analysisValueAttribute("width",n,0,65535),e+=this._analysisValueAttribute("height",r,0,65535),null==t.context)throw Error('Argument "context" is undefined.');return(e=e+">"+this._encodeRasterImage(t.context.getImageData(i,s,n,r).data,n,r))+"</bitimage>"},StarWebPrintBuilder.prototype.createCutPaperElement=function(t){var e="<cutpaper";return null!=t&&(e+=this._analysisEnumAttribute("feed",t.feed,/^(false|true)$/),e+=this._analysisEnumAttribute("type",t.type,/^(full|partial)$/)),e+"/>"},StarWebPrintBuilder.prototype.createFeedElement=function(t){var e;if(null==t)throw Error("Argument is undefined.");if(null==t.line&&null==t.unit)throw Error('Argument "line / unit" is undefined.');return e="<feed"+this._analysisValueAttribute("line",t.line,1,255),(e+=this._analysisValueAttribute("unit",t.unit,1,255))+"/>"},StarWebPrintBuilder.prototype.createInitializationElement=function(t){var e="<initialization";return null!=t&&(e+=this._analysisEnumAttribute("reset",t.reset,/^(false|true)$/),e+=this._analysisEnumAttribute("print",t.print,/^(false|true)$/)),e+"/>"},StarWebPrintBuilder.prototype.createLogoElement=function(t){var e="<logo";return null!=t&&(e+=this._analysisEnumAttribute("width",t.width,/^(single|double)$/),e+=this._analysisEnumAttribute("height",t.height,/^(single|double)$/),e+=this._analysisValueAttribute("number",t.number,1,255)),e+"/>"},StarWebPrintBuilder.prototype.createPdf417Element=function(t){var e;if(null==t)throw Error("Argument is undefined.");if(e="<pdf417"+this._analysisEnumAttribute("level",t.level,/^(level[0-8])$/),null!=t.line&&(e=0!=t.line?e+this._analysisValueAttribute("line",t.line,3,90):e+' line="0"'),e+=this._analysisValueAttribute("column",t.column,0,30),e+=this._analysisValueAttribute("module",t.module,1,8),e+=this._analysisValueAttribute("aspect",t.aspect,1,8),null==t.data)throw Error('Argument "data" is undefined.');return(e=e+">"+this._encodeEscapeSequenceBinary(t.data))+"</pdf417>"},StarWebPrintBuilder.prototype.createPeripheralElement=function(t){var e="<peripheral";return null!=t&&(e+=this._analysisValueAttribute("channel",t.channel,1,2),e+=this._analysisValueAttribute("on",t.on,1,65535),e+=this._analysisValueAttribute("off",t.off,1,65535)),e+"/>"},StarWebPrintBuilder.prototype.createQrCodeElement=function(t){var e;if(null==t)throw Error("Argument is undefined.");if(e="<qrcode"+this._analysisEnumAttribute("model",t.model,/^(model[12])$/),e+=this._analysisEnumAttribute("level",t.level,/^(level_[lmqh])$/),e+=this._analysisValueAttribute("cell",t.cell,1,8),null==t.data)throw Error('Argument "data" is undefined.');return(e=e+">"+this._encodeEscapeSequenceBinary(t.data))+"</qrcode>"},StarWebPrintBuilder.prototype.createRawDataElement=function(t){if(null==t)throw Error("Argument is undefined.");if(null==t.data)throw Error('Argument "data" is undefined.');return(t="<rawdata>"+this._encodeBase64Binary(t.data))+"</rawdata>"},StarWebPrintBuilder.prototype.createRuledLineElement=function(t){var e="<ruledline";return null!=t&&(e+=this._analysisEnumAttribute("thickness",t.thickness,/^(thin|medium|thick|double_(thin|medium|thick))$/),e+=this._analysisValueAttribute("width",t.width,1,65535)),e+"/>"},StarWebPrintBuilder.prototype.createSoundElement=function(t){var e="<sound";return null!=t&&(e+=this._analysisValueAttribute("channel",t.channel,1,2),e+=this._analysisValueAttribute("repeat",t.repeat,1,20)),e+"/>"},StarWebPrintBuilder.prototype.createTextElement=function(t){var e;if(null==t)throw Error("Argument is undefined.");return e="<text"+this._analysisEnumAttribute("emphasis",t.emphasis,/^(false|true)$/),e+=this._analysisEnumAttribute("invert",t.invert,/^(false|true)$/),e+=this._analysisEnumAttribute("linespace",t.linespace,/^(24|32)$/),e+=this._analysisEnumAttribute("font",t.font,/^(font_[ab])$/),e+=this._analysisEnumAttribute("underline",t.underline,/^(false|true)$/),e+=this._analysisValueAttribute("characterspace",t.characterspace,0,7),e+=this._analysisValueAttribute("width",t.width,1,6),e+=this._analysisValueAttribute("height",t.height,1,6),e+=this._analysisEnumAttribute("codepage",t.codepage,/^(cp(437|737|772|774|851|852|855|857|858|860|861|862|863|864|865|866|869|874|928|932|998|999|1001|1250|1251|1252|2001|3001|3002|3011|3012|3021|3041|3840|3841|3843|3844|3845|3846|3847|3848)|utf8|blank|utf8|shift_jis|gb18030|gb2312|big5|korea)$/),e+=this._analysisEnumAttribute("international",t.international,/^(usa|france|germany|uk|denmark|sweden|italy|spain|japan|norway|denmark2|spain2|latin_america|korea|ireland|legal)$/),null!=t.data?(e+=">",e=1==t.binary?e+this._encodeEscapeSequenceBinary(t.data):e+this._encodeEscapeSequence(t.data),e+="</text>"):e+="/>",e},StarWebPrintBuilder.prototype.createHoldPrintElement=function(t){var e="<holdprint";return null!=t&&(e+=this._analysisEnumAttribute("type",t.type,/^(valid|invalid|default)$/)),e+"/>"},StarWebPrintBuilder.prototype._analysisEnumAttribute=function(t,e,i){if(null!=e){if(!i.test(e))throw Error('Argument "'+t+'" is invalid.');return" "+t+'="'+e+'"'}return""},StarWebPrintBuilder.prototype._analysisValueAttribute=function(t,e,i,s){if(null!=e){if(e<i||e>s)throw Error('Argument "'+t+'" is invalid.');return" "+t+'="'+e+'"'}return""},StarWebPrintBuilder.prototype._encodeEscapeSequence=function(t){var e=/[\\\x00-\x20\x26\x3c\x3e\x7f]/g;return e.test(t)&&(t=t.replace(e,(function(t){return"\\"==t?"\\\\":"\\x"+("0"+t.charCodeAt(0).toString(16)).slice(-2)}))),t},StarWebPrintBuilder.prototype._encodeEscapeSequenceBinary=function(t){var e=/[\\\x00-\x20\x26\x3c\x3e\x7f-\xff]/g;return e.test(t)&&(t=t.replace(e,(function(t){return"\\"==t?"\\\\":"\\x"+("0"+t.charCodeAt(0).toString(16)).slice(-2)}))),t},StarWebPrintBuilder.prototype._encodeBase64Binary=function(t){var e="",i=t.length;t+="\0\0";for(var s=0;s<i;s+=3){var n=t.charCodeAt(s)<<16|t.charCodeAt(s+1)<<8|t.charCodeAt(s+2);e=e+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&n))}switch(i%3){case 1:return e.slice(0,-2)+"==";case 2:return e.slice(0,-1)+"="}return e},StarWebPrintBuilder.prototype._encodeRasterImage=function(t,e,i){for(var s=[[-254,-126,-222,-94,-246,-118,-214,-86],[-62,-190,-30,-158,-54,-182,-22,-150],[-206,-78,-238,-110,-198,-70,-230,-102],[-14,-142,-46,-174,-6,-134,-38,-166],[-242,-114,-210,-82,-250,-122,-218,-90],[-50,-178,-18,-146,-58,-186,-26,-154],[-194,-66,-226,-98,-202,-74,-234,-106],[-2,-130,-34,-162,-10,-138,-42,-170]],n="",r=0,a=0;a<i;a++){for(var o=0,l=128,c=0;c<e;c++)((30*t[r]+59*t[r+1]+11*t[r+2])*t[r+3]+12800)/25500-t[r+3]<s[7&a][7&c]&&(o|=l),r+=4,0==(l>>=1)&&(n+=String.fromCharCode(o),o=0,l=128);128!=l&&(n+=String.fromCharCode(o))}for(t=n,n="",e=t.length,t+="\0\0",a=0;a<e;a+=3)i=t.charCodeAt(a)<<16|t.charCodeAt(a+1)<<8|t.charCodeAt(a+2),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&i);switch(e%3){case 1:return n.slice(0,-2)+"==";case 2:return n.slice(0,-1)+"="}return n},function(window,undefined){function callbackInfo(){this.callbackInfoList=new Object}function CommBox(t,e,i){this.ERROR_OK="OK",this.ERROR_NOT_OPENED="NOT_OPENED",this.ERROR_MEMBER_NOT_FOUND="MEMBER_NOT_FOUND",this.ERROR_SYSTEM_ERROR="SYSTEM_ERROR",this.boxID=t,this.commBoxManager=e,this.callbackInfo=i,this.onreceive=null,this.connectionObj=this.commBoxManager.connectionObj}function CommBoxManager(){this.ERROR_OK="OK",this.ERROR_BOX_COUNT_OVER="BOX_COUNT_OVER",this.ERROR_BOX_CLIENT_OVER="BOX_CLIENT_OVER",this.ERROR_MEMBERID_ALREADY_USED="MEMBERID_ALREADY_USED",this.ERROR_ALREADY_OPENED="ALREADY_OPENED",this.ERROR_NOT_OPENED="NOT_OPENED",this.ERROR_PARAMETER_ERROR="PARAMETER_ERROR",this.ERROR_SYSTEM_ERROR="SYSTEM_ERROR",this.callbackInfo=new callbackInfo,this.commBoxList=new Array,this.connectionObj=null}function DeviceObjectSelector(){this.type2objectMap={type_scanner:"Scanner",type_keyboard:"Keyboard",type_poskeyboard:"POSKeyboard",type_msr:"MSR",type_cat:"CAT",type_cash_changer:"CashChanger",type_printer:"Printer",type_display:"Display",type_simple_serial:"SimpleSerial",type_hybrid_printer:"HybridPrinter",type_hybrid_printer2:"HybridPrinter2",type_dt:"DeviceTerminal",type_other_peripheral:"OtherPeripheral",type_storage:"GermanyFiscalElement"},this.connectionObj=null}function CashChanger(t,e){this.CONFIG_LEFT_CASH="CONFIG_LEFT_CASH",this.CONFIG_COUNT_MODE="CONFIG_COUNT_MODE",this.MODE_MANUAL_INPUT="MODE_MANUAL_INPUT",this.MODE_AUTOCOUNT="MODE_AUTO_COUNT",this.DEPOSIT_CHANGE="DEPOSIT_CHANGE",this.DEPOSIT_NOCHANGE="DEPOSIT_NOCHANGE",this.DEPOSIT_REPAY="DEPOSIT_REPAY",this.COLLECT_ALL_CASH="ALL_CASH",this.COLLECT_PART_OF_CASH="PART_OF_CASH",this.SUE_POWER_ONLINE=2001,this.SUE_POWER_OFF=2002,this.SUE_POWER_OFFLINE=2003,this.SUE_POWER_OFF_OFFLINE=2004,this.SUE_STATUS_EMPTY=11,this.SUE_STATUS_NEAREMPTY=12,this.SUE_STATUS_EMPTYOK=13,this.SUE_STATUS_FULL=21,this.SUE_STATUS_NEARFULL=22,this.SUE_STATUS_FULLOK=23,this.SUE_STATUS_JAM=31,this.SUE_STATUS_JAMOK=32,this.deviceID=t,this.isCrypto=e,this.connectionObj=null}function CAT(t,e){this.SUE_LOGSTATUS_OK=0,this.SUE_LOGSTATUS_NEARFULL=1,this.SUE_LOGSTATUS_FULL=2,this.SUE_POWER_ONLINE=2001,this.SUE_POWER_OFF_OFFLINE=2004,this.deviceID=t,this.isCrypto=e,this.timeout=0,this.trainingMode=!1,this.connectionObj=null}function DeviceTerminal(t,e){this.deviceID=t,this.isCrypto=e,this.onshutdown=null,this.onrestart=null,this.connectionObj=null}function Display(t,e,i){this.message="",this.deviceID=t,this.isCrypto=e,this.ePosDev=i,this.timeout=1e4,this.onreceive=null,this.onerror=null,this.ASB_NO_RESPONSE=1,this.ASB_DISPLAY_SUCCESS=2,this.SCROLL_OVERWRITE="overwrite",this.SCROLL_VERTICAL="v_scroll",this.SCROLL_HORIZONTAL="h_scroll",this.MOVE_TOP_LEFT="top_left",this.MOVE_TOP_RIGHT="top_right",this.MOVE_BOTTOM_LEFT="bottom_left",this.MOVE_BOTTOM_RIGHT="bottom_right",this.CURSOR_NONE="none",this.CURSOR_UNDERLINE="underline",this.BRIGHTNESS_20=20,this.BRIGHTNESS_40=40,this.BRIGHTNESS_60=60,this.BRIGHTNESS_100=100,this.MARQUEE_WALK="walk",this.MARQUEE_PLACE="place",this.connectionObj=null}callbackInfo.prototype={addCallback:function(t,e){this.callbackInfoList[e]=t},removeCallback:function(t){for(var e in this.callbackInfoList)if(e==t)return void delete this.callbackInfoList[e]},getCallback:function(t){return null!=this.callbackInfoList[t]?this.callbackInfoList[t]:null}},CommBox.prototype={getCommHistory:function(t,e){var i="function"==typeof t?null:t,s="function"==typeof t?t:e,n=null!=i&&null!=i.allHistory&&t.allHistory,r={type:"getcommhistory",box_id:this.boxID,all_history:n},a=MessageFactory.getCommBoxDataMessage(r);return this.commBoxManager.isOpened(this.getBoxId())?(this.callbackInfo.addCallback(s,a.sequence),this.connectionObj.emit(a),a.sequence):(null!=s&&s(this.ERROR_NOT_OPENED,null,a.sequence),a.sequence)},send:function(t,e,i){var s={type:"send",box_id:this.boxID,message:t,member_id:e},n=MessageFactory.getCommBoxDataMessage(s);return this.commBoxManager.isOpened(this.getBoxId())?(this.callbackInfo.addCallback(i,n.sequence),this.connectionObj.emit(n),n.sequence):(null!=i&&i(this.ERROR_NOT_OPENED,0,n.sequence),n.sequence)},client_getcommhistory:function(t,e){var i=t.code,s=t.history_list,n=this.callbackInfo.getCallback(e);this.callbackInfo.removeCallback(e),null!=n&&n(i,s,e)},client_send:function(t,e){var i=t.code,s=t.count,n=this.callbackInfo.getCallback(e);this.callbackInfo.removeCallback(e),null!=n&&n(i,s,e)},client_onreceive:function(t,e){var i=new Object;i.senderId=t.sender_id,i.receiverId=t.receiver_id,i.message=t.message,null!=this.onreceive&&this.onreceive(i)},getBoxId:function(){return this.boxID}},CommBoxManager.prototype={setConnectionObject:function(t){this.connectionObj=t},openCommBox:function(t,e,i){var s="";null!=e&&null!=e.memberID&&(s=e.memberID);var n={box_id:t,member_id:s},r=MessageFactory.getOpenCommBoxMessage(n);return this.connectionObj.isUsableDeviceIF()?(this.connectionObj.emit(r),this.callbackInfo.addCallback(i,r.sequence),r.sequence):(i(null,this.ERROR_SYSTEM_ERROR,r.sequence),r.sequence)},closeCommBox:function(t,e){var i={box_id:n},s=MessageFactory.getCloseCommBoxMessage(i);try{var n=t.getBoxId();if(i.box_id=n,s=MessageFactory.getCloseCommBoxMessage(i),!this.isOpened(n))return null!=e&&e(this.ERROR_NOT_OPENED,s.sequence),s.sequence;this.connectionObj.emit(s)}catch(r){null!=e&&e(this.ERROR_PARAMETER_ERROR,s.sequence)}return this.callbackInfo.addCallback(e,s.sequence),s.sequence},client_opencommbox:function(t,e){var i=t.box_id,s=t.code,n=null;s==this.ERROR_OK&&null==this.getCommBox(i)&&(n=new CommBox(i,this,this.callbackInfo)),null!=n&&this.commBoxList.push(n);var r=this.callbackInfo.getCallback(e);this.callbackInfo.removeCallback(e),null!=r&&r(n,s,e)},client_closecommbox:function(t,e){var i=t.box_id,s=t.code;this.removeCommBox(i);var n=this.callbackInfo.getCallback(e);this.callbackInfo.removeCallback(e),null!=n&&n(s,e)},executeCommDataCallback:function(data,sq){var boxID=data.box_id,commBoxObj=this.getCommBox(boxID),method="client_"+data.type;try{eval("commBoxObj."+method+"(data, sq)")}catch(e){throw new Error("")}},getCommBox:function(t){for(var e=null,i=0;i<this.commBoxList.length;i++)if(this.commBoxList[i].getBoxId()==t){e=this.commBoxList[i];break}return e},removeCommBox:function(t){for(var e=!1,i=0;i<this.commBoxList.length;i++)if(this.commBoxList[i].getBoxId()==t){this.commBoxList.splice(i,1),e=!0;break}return e},isOpened:function(t){for(var e=!1,i=0;i<this.commBoxList.length;i++)if(this.commBoxList[i].getBoxId()==t){e=!0;break}return e}},DeviceObjectSelector.prototype={setConnectionObject:function(t){this.connectionObj=t},isSelectable:function(t){return!!this.connectionObj.isUsableDeviceIF()||(!("type_printer"!=t||!this.connectionObj.isUsablePrintIF())||!("type_display"!=t||!this.connectionObj.isUsableDisplayIF()))},select:function(deviceId,deviceType,specificDevice,isCrypto,ePOSDeviceContext){var deviceObjectName="";deviceObjectName="string"==typeof specificDevice?specificDevice:this.type2objectMap[deviceType];var templateObject=null;try{templateObject=eval(deviceObjectName)}catch(e){throw new Error("ERROR_PARAMETER")}if("function"!=typeof templateObject)throw new Error("ERROR_PARAMETER");return"Printer"==deviceObjectName||"Display"==deviceObjectName||"HybridPrinter"==deviceObjectName||"HybridPrinter2"==deviceObjectName?new templateObject(deviceId,isCrypto,ePOSDeviceContext):new templateObject(deviceId,isCrypto)}},CashChanger.prototype={setConnectionObject:function(t){this.connectionObj=t},client_oncashcounts:function(t){try{if(null==this.oncashcounts)return;this.oncashcounts(t)}catch(e){}},client_onstatuschange:function(t){try{if(null==this.onstatuschange)return;this.onstatuschange(t)}catch(e){}},client_ondeposit:function(t){try{if(null==this.ondeposit)return;this.ondeposit(t)}catch(e){}},client_ondispense:function(t){try{if(null==this.ondispense)return;this.ondispense(t)}catch(e){}},client_oncollect:function(t){try{if(null==this.oncollect)return;this.oncollect(t)}catch(e){}},client_onconfigchange:function(t){try{if(null==this.onconfigchange)return;this.onconfigchange(t)}catch(e){}},client_oncommandreply:function(t){try{if(null==this.oncommandreply)return;if(""!=typeof t.command);else{var e=t.data;e=e.replace(/[0-9a-fA-F]{2}/g,(function(t){var e=parseInt(t,16);return String.fromCharCode(e)})),t.data=e}this.oncommandreply(t)}catch(i){}},client_ondirectio:function(t){try{if(null==this.ondirectio)return;this.ondirectio(t)}catch(e){}},client_onstatusupdate:function(t){try{if(null==this.onstatusupdate)return;this.onstatusupdate(t)}catch(e){}},readCashCounts:function(){return this.send({type:"readcashcounts"})},beginDeposit:function(){return this.send({type:"begindeposit"})},pauseDeposit:function(){return this.send({type:"pausedeposit"})},restartDeposit:function(){return this.send({type:"restartdeposit"})},endDeposit:function(t){var e={type:"enddeposit",cmd:t};return this.send(e)},dispenseCash:function(t){var e;return"object"==typeof t?(e=t).type="dispensecash":e={type:"dispensecash",cash:t},this.send(e)},dispenseChange:function(t){var e;return"object"==typeof t?(e=t).type="dispensechange":e={type:"dispensechange",cash:t},this.send(e)},openDrawer:function(){return this.send({type:"opendrawer"})},collectCash:function(t){var e={type:"collectcash",collectmode:t};return this.send(e)},setConfig:function(t,e){var i=null;switch(t){case this.CONFIG_COUNT_MODE:i={type:"setconfig",config:t,mode:e.mode};break;case this.CONFIG_LEFT_CASH:null!=e.bills&&""!=e.bills||(e.bills="0"),null!=e.coins&&""!=e.coins||(e.coins="0"),i={type:"setconfig",config:t,bills:e.bills,coins:e.coins}}var s=-1;return null!=i&&(s=this.send(i)),s},sendCommand:function(t){var e;return"object"==typeof t?(e=t).type="sendcommand":e={type:"sendcommand",command:toHexBinary(t)},this.send(e)},callEvent:function(t,e){var i=e;return i.type=t,this.send(i)},send:function(t){var e=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),i=-1;try{this.connectionObj.emit(e),i=e.sequence}catch(s){}return i}},CAT.prototype={setConnectionObject:function(t){this.connectionObj=t},authorizeSales:function(t){var e={service:t.service,total_amount:t.totalAmount,sequence:t.sequence,type:"authorizesales"};return e.training=this.trainingMode,e.timeout=this.timeout,this.send(e)},authorizeVoid:function(t){var e={service:t.service,total_amount:t.totalAmount,sequence:t.sequence,type:"authorizevoid"};return e.training=this.trainingMode,e.timeout=this.timeout,this.send(e)},authorizeRefund:function(t){var e={service:t.service,total_amount:t.totalAmount,sequence:t.sequence,type:"authorizerefund"};return e.training=this.trainingMode,e.timeout=this.timeout,this.send(e)},authorizeCompletion:function(t){var e={service:t.service,total_amount:t.totalAmount,sequence:t.sequence,type:"authorizecompletion"};return e.training=this.trainingMode,e.timeout=this.timeout,this.send(e)},accessDailyLog:function(t){var e={service:t.service,total_amount:t.totalAmount,sequence:t.sequence,type:"accessdailylog"};return e.training=this.trainingMode,e.timeout=this.timeout,this.send(e)},sendCommand:function(t){var e={service:t.service,command:t.command,data:t.data,string:t.string,type:"sendcommand"};return e.training=this.trainingMode,this.send(e)},send:function(t){this.deviceID;var e=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),i=-1;try{this.connectionObj.emit(e),i=e.sequence}catch(s){}return i},client_onauthorizesales:function(t){try{if(null==this.onauthorizesales)return;this.onauthorizesales(this.getResultObject(t))}catch(e){}},client_onauthorizevoid:function(t){try{if(null==this.onauthorizevoid)return;this.onauthorizevoid(this.getResultObject(t))}catch(e){}},client_onauthorizerefund:function(t){try{if(null==this.onauthorizerefund)return;this.onauthorizerefund(this.getResultObject(t))}catch(e){}},client_onauthorizecompletion:function(t){try{if(null==this.onauthorizecompletion)return;this.onauthorizecompletion(this.getResultObject(t))}catch(e){}},client_onaccessdailylog:function(t){try{if(null==this.onaccessdailylog)return;this.onaccessdailylog(this.getDailyLogObject(t))}catch(e){}},client_oncommandreply:function(t){try{if(null==this.oncommandreply)return;this.oncommandreply(this.getCommandReplyObject(t))}catch(e){}},client_onstatusupdate:function(t){try{if(null==this.onstatusupdate)return;this.onstatusupdate(t)}catch(e){}},getResultObject:function(t){return{status:t.status,sequence:t.sequence,service:t.service,accountNumber:t.account_number,settledAmount:t.settled_amount,slipNumber:t.slip_number,kid:t.kid,approvalCode:t.approval_code,transactionNumber:t.transaction_number,paymentCondition:t.payment_condition,voidSlipNumber:t.void_slip_number,balance:t.balance}},getDailyLogObject:function(t){var e={};e.status=t.status,e.service=t.service,e.sequence=t.sequence;var i=[];try{t.daily_log.forEach((function(t){var e={};if(0===t)throw i;e.kid=t.kid,e.salesCount=t.sales_count,e.salesAmount=t.sales_amount,e.voidCount=t.void_count,e.voidAmount=t.void_amount,i.push(e)}))}catch(s){}return e.dailyLog=i,e},getCommandReplyObject:function(t){return{status:t.status,command:t.command,data:t.data,string:t.string,service:t.service,sequence:t.sequence,accountNumber:t.account_number,settledAmount:t.settled_amount,slipNumber:t.slip_number,transactionNumber:t.transaction_number,paymentCondition:t.payment_condition,balance:t.balance,additionalSecurityInformation:t.additional_security_information}},callEvent:function(t,e){var i=e;return i.type=t,this.send(i)}},DeviceTerminal.prototype={setConnectionObject:function(t){this.connectionObj=t},shutdown:function(t,e){this.onshutdown=e;var i={type:"shutdown",password:t};return this.send(i)},client_onshutdown:function(t){try{if("function"!=typeof this.onshutdown)return;this.onshutdown(t)}catch(e){}},restart:function(t,e){this.onrestart=e;var i={type:"restart",password:t};return this.send(i)},client_onrestart:function(t){try{if("function"!=typeof this.onrestart)return;this.onrestart(t)}catch(e){}},send:function(t){var e=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),i=-1;try{this.connectionObj.emit(e),i=e.sequence}catch(s){}return i}},Display.prototype.setConnectionObject=function(t){this.connectionObj=t},Display.prototype.reset=function(){try{this.message+="<reset />"}catch(t){throw t}return this},Display.prototype.createWindow=function(t,e,i,s,n,r){try{var a="";a+=getIntAttr("number",t,1,4),a+=getIntAttr("x",e,1,20),a+=getIntAttr("y",i,1,2),a+=getIntAttr("width",s,1,21-e),a+=getIntAttr("height",n,1,3-i),a+=getEnumAttr("scrollmode",r,regexScrollMode),this.message+="<window"+a+"/>"}catch(o){throw o}return this},Display.prototype.destroyWindow=function(t){try{var e="";e+=getIntAttr("number",t,1,4),this.message+="<window"+e+' destroy="true"/>'}catch(i){throw i}return this},Display.prototype.setCurrentWindow=function(t){try{var e="";e+=getIntAttr("number",t,1,4),this.message+="<window"+e+"/>"}catch(i){throw i}return this},Display.prototype.setCursorPosition=function(){try{var t="";t+=getIntAttr("x",arguments[0],1,20),t+=getIntAttr("y",arguments[1],1,2),this.message+="<cursor"+t+"/>"}catch(e){throw e}return this},Display.prototype.moveCursorPosition=function(){try{var t="";t+=getEnumAttr("moveto",arguments[0],regexMoveto),this.message+="<cursor"+t+"/>"}catch(e){throw e}return this},Display.prototype.setCursorType=function(t){try{var e="";e+=getEnumAttr("type",t,regexUnderline),this.message+="<cursor"+e+"/>"}catch(i){throw i}return this},Display.prototype.addText=function(){try{var t="";switch(arguments.length){case 1:break;case 2:t+=' lang="'+arguments[1]+'"';break;case 3:t+=getIntAttr("x",arguments[1],1,20),t+=getIntAttr("y",arguments[2],1,2);break;case 4:t+=getIntAttr("x",arguments[1],1,20),t+=getIntAttr("y",arguments[2],1,2),t+=' lang="'+arguments[3]+'"';break;default:throw new Error("Parameters are invalid")}this.message+="<text"+t+">"+escapeMarkup(arguments[0])+"</text>"}catch(e){throw e}return this},Display.prototype.addReverseText=function(){try{var t="";switch(arguments.length){case 1:t+=getBoolAttr("reverse",!0);break;case 2:t+=' lang="'+arguments[1]+'"',t+=getBoolAttr("reverse",!0);break;case 3:t+=getIntAttr("x",arguments[1],1,20),t+=getIntAttr("y",arguments[2],1,2),t+=getBoolAttr("reverse",!0);break;case 4:t+=getIntAttr("x",arguments[1],1,20),t+=getIntAttr("y",arguments[2],1,2),t+=' lang="'+arguments[3]+'"',t+=getBoolAttr("reverse",!0);break;default:throw new Error("Parameters are invalid")}this.message+="<text"+t+">"+escapeMarkup(arguments[0])+"</text>"}catch(e){throw e}return this},Display.prototype.clearWindow=function(){try{this.message+="<clear/>"}catch(t){throw t}return this},Display.prototype.setBlink=function(t){try{var e="";e+=getUShortAttr("interval",t),this.message+="<blink"+e+"/>"}catch(i){throw i}return this},Display.prototype.setBrightness=function(t){try{var e="";e+=getEnumAttr("value",t,regexBrightness),this.message+="<brightness"+e+"/>"}catch(i){throw i}return this},Display.prototype.addMarquee=function(t,e,i,s,n,r){try{var a="";a+=getEnumAttr("format",e,regexMarquee),a+=getIntAttr("uwait",i,0,2e3),a+=getIntAttr("rwait",s,100,2e3),a+=getIntAttr("repeat",n,0,127),void 0!==r&&(a+=' lang="'+r+'"'),this.message+="<marquee"+a+">"+escapeMarkup(t)+"</marquee>"}catch(o){throw o}return this},Display.prototype.showClock=function(){try{this.message+="<clock/>"}catch(t){throw t}return this},Display.prototype.addCommand=function(t){try{this.message+="<command>"+toHexBinary(t)+"</command>"}catch(e){throw e}return this},Display.prototype.send=function(){var t=-1;if(!this.ePosDev.eposprint&&this.connectionObj.isUsableDeviceIF())try{var e=this.toString(),i={type:"display",timeout:this.timeout,displaydata:e},s=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto);this.connectionObj.emit(s),t=s.sequence,this.message=""}catch(p){t=-1}else{var n,r,a,o,l,c,h,d=this,u=this.connectionObj.getAddressWithProtocol()+"/cgi-bin/eposDisp/service.cgi?devid="+this.deviceID+"&timeout="+this.timeout;if(o={},n='<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">',n+="<s:Body>"+this.toString()+"</s:Body></s:Envelope>",!window.XMLHttpRequest)throw new Error("XMLHttpRequest is not supported");!("withCredentials"in(r=new XMLHttpRequest))&&window.XDomainRequest?((r=new XDomainRequest).open("POST",u,!0),r.onload=function(){o=r.responseText,/response/.test(o)?(l=/success\s*=\s*"\s*(1|true)\s*"/.test(o),c=o.match(/code\s*=\s*"\s*(\S*)\s*"/)?RegExp.$1:"",h=o.match(/status\s*=\s*"\s*(\d+)\s*"/)?parseInt(RegExp.$1):0,d.fireReceiveEvent(l,c,h,0)):d.fireErrorEvent(0,r.responseText,0)},r.onerror=function(){d.fireErrorEvent(0,r.responseText,0)},r.onprogress=function(){},r.ontimeout=r.onerror,r.timeout=d.timeout,r.send(n)):(r.open("POST",u,!0),r.setRequestHeader("Content-Type","text/xml; charset=utf-8"),r.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),r.setRequestHeader("SOAPAction",'""'),r.onreadystatechange=function(){4==r.readyState&&(clearTimeout(a),200==r.status&&r.responseXML&&(o=r.responseXML.getElementsByTagName("response")).length>0?(l=/^(1|true)$/.test(o[0].getAttribute("success")),c=o[0].hasAttribute("code")?o[0].getAttribute("code"):"",h=o[0].hasAttribute("status")?parseInt(o[0].getAttribute("status")):0,d.fireReceiveEvent(l,c,h,0)):d.fireErrorEvent(r.status,r.responseText,0))},a=setTimeout((function(){r.abort()}),this.timeout),r.send(n)),this.message="",t=0}return t},Display.prototype.fireReceiveEvent=function(t,e,i,s){"EX_ENPC_TIMEOUT"==e&&(e="ERROR_DEVICE_BUSY"),this.onreceive&&this.onreceive({success:t,code:e,status:i},s)},Display.prototype.fireErrorEvent=function(t,e,i){this.onerror&&this.onerror({status:0,responseText:this.ASB_NO_RESPONSE},i),this.ePosDev.cleanup()},Display.prototype.client_onxmlresult=function(t,e){if(t){var i=t.resultdata,s=/success\s*=\s*"\s*(1|true)\s*"/.test(i);i.match(/code\s*=\s*"\s*(\S*)\s*"/);var n=RegExp.$1;i.match(/status\s*=\s*"\s*(\d+)\s*"/);var r=parseInt(RegExp.$1);this.onreceive&&this.onreceive({success:s,code:n,status:r},e)}else this.onerror&&this.onerror({status:0,responseText:this.ASB_NO_RESPONSE},e),this.ePosDev.cleanup()},Display.prototype.toString=function(){return'<epos-display xmlns="http://www.epson-pos.com/schemas/2012/09/epos-display">'+this.message+"</epos-display>"},Display.prototype.setXmlString=function(t){this.message=t},Display.prototype.getXmlString=function(){return this.message},Display.prototype.callEvent=function(t,e){var i=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),s=-1;try{this.connectionObj.emit(i),s=i.sequence}catch(n){}return s};var regexBrightness=/^(20|40|60|100)$/,regexScrollMode=/^(overwrite|v_scroll|h_scroll)$/,regexMoveto=/^(top_left|top_right|bottom_left|bottom_right)$/,regexUnderline=/^(none|underline)$/,regexMarquee=/^(walk|place)$/;function OtherPeripheral(t,e){this.deviceID=t,this.isCrypto=e,this.connectionObj=null}function Keyboard(t,e){this.VK_CANCEL=3,this.VK_BACK=8,this.VK_TAB=9,this.VK_RETURN=13,this.VK_SHIFT=16,this.VK_CONTROL=17,this.VK_MENU=18,this.VK_PAUSE=19,this.VK_CAPITAL=20,this.VK_KANA=21,this.VK_ESCAPE=27,this.VK_CONVERT=28,this.VK_NONCONVERT=29,this.VK_SPACE=32,this.VK_PRIOR=33,this.VK_NEXT=34,this.VK_END=35,this.VK_HOME=36,this.VK_LEFT=37,this.VK_UP=38,this.VK_RIGHT=39,this.VK_DOWN=40,this.VK_INSERT=45,this.VK_DELETE=46,this.VK_0=48,this.VK_1=49,this.VK_2=50,this.VK_3=51,this.VK_4=52,this.VK_5=53,this.VK_6=54,this.VK_7=55,this.VK_8=56,this.VK_9=57,this.VK_A=65,this.VK_B=66,this.VK_C=67,this.VK_D=68,this.VK_E=69,this.VK_F=70,this.VK_G=71,this.VK_H=72,this.VK_I=73,this.VK_J=74,this.VK_K=75,this.VK_L=76,this.VK_M=77,this.VK_N=78,this.VK_O=79,this.VK_P=80,this.VK_Q=81,this.VK_R=82,this.VK_S=83,this.VK_T=84,this.VK_U=85,this.VK_V=86,this.VK_W=87,this.VK_X=88,this.VK_Y=89,this.VK_Z=90,this.VK_LWIN=91,this.VK_RWIN=92,this.VK_APPS=93,this.VK_NUMPAD0=96,this.VK_NUMPAD1=97,this.VK_NUMPAD2=98,this.VK_NUMPAD3=99,this.VK_NUMPAD4=100,this.VK_NUMPAD5=101,this.VK_NUMPAD6=102,this.VK_NUMPAD7=103,this.VK_NUMPAD8=104,this.VK_NUMPAD9=105,this.VK_MULTIPLY=106,this.VK_ADD=107,this.VK_SEPARATOR=108,this.VK_SUBTRACT=109,this.VK_DECIMAL=110,this.VK_DIVIDE=111,this.VK_F1=112,this.VK_F2=113,this.VK_F3=114,this.VK_F4=115,this.VK_F5=116,this.VK_F6=117,this.VK_F7=118,this.VK_F8=119,this.VK_F9=120,this.VK_F10=121,this.VK_F11=122,this.VK_F12=123,this.VK_NUMLOCK=144,this.VK_SCROLL=145,this.VK_LSHIFT=160,this.VK_RSHIFT=161,this.VK_LCONTROL=162,this.VK_RCONTROL=163,this.VK_LMENU=164,this.VK_RMENU=165,this.VK_OEM_1=186,this.VK_OEM_PLUS=187,this.VK_OEM_COMMA=188,this.VK_OEM_MINUS=189,this.VK_OEM_PERIOD=190,this.VK_OEM_2=191,this.VK_OEM_3=192,this.VK_OEM_4=219,this.VK_OEM_5=220,this.VK_OEM_6=221,this.VK_OEM_7=222,this.VK_OEM_102=226,this.VK_OEM_ATTN=240,this.deviceID=t,this.isCrypto=e,this.connectionObj=null}function MSR(t,e){this.deviceID=t,this.isCrypto=e,this.connectionObj=null}function ePOSBuilder(){this.message="",this.halftone=0,this.brightness=1,this.force=!1,this.FONT_A="font_a",this.FONT_B="font_b",this.FONT_C="font_c",this.FONT_D="font_d",this.FONT_E="font_e",this.FONT_SPECIAL_A="special_a",this.FONT_SPECIAL_B="special_b",this.ALIGN_LEFT="left",this.ALIGN_CENTER="center",this.ALIGN_RIGHT="right",this.COLOR_NONE="none",this.COLOR_1="color_1",this.COLOR_2="color_2",this.COLOR_3="color_3",this.COLOR_4="color_4",this.FEED_PEELING="peeling",this.FEED_CUTTING="cutting",this.FEED_CURRENT_TOF="current_tof",this.FEED_NEXT_TOF="next_tof",this.MODE_MONO="mono",this.MODE_GRAY16="gray16",this.BARCODE_UPC_A="upc_a",this.BARCODE_UPC_E="upc_e",this.BARCODE_EAN13="ean13",this.BARCODE_JAN13="jan13",this.BARCODE_EAN8="ean8",this.BARCODE_JAN8="jan8",this.BARCODE_CODE39="code39",this.BARCODE_ITF="itf",this.BARCODE_CODABAR="codabar",this.BARCODE_CODE93="code93",this.BARCODE_CODE128="code128",this.BARCODE_GS1_128="gs1_128",this.BARCODE_GS1_DATABAR_OMNIDIRECTIONAL="gs1_databar_omnidirectional",this.BARCODE_GS1_DATABAR_TRUNCATED="gs1_databar_truncated",this.BARCODE_GS1_DATABAR_LIMITED="gs1_databar_limited",this.BARCODE_GS1_DATABAR_EXPANDED="gs1_databar_expanded",this.HRI_NONE="none",this.HRI_ABOVE="above",this.HRI_BELOW="below",this.HRI_BOTH="both",this.SYMBOL_PDF417_STANDARD="pdf417_standard",this.SYMBOL_PDF417_TRUNCATED="pdf417_truncated",this.SYMBOL_QRCODE_MODEL_1="qrcode_model_1",this.SYMBOL_QRCODE_MODEL_2="qrcode_model_2",this.SYMBOL_QRCODE_MICRO="qrcode_micro",this.SYMBOL_MAXICODE_MODE_2="maxicode_mode_2",this.SYMBOL_MAXICODE_MODE_3="maxicode_mode_3",this.SYMBOL_MAXICODE_MODE_4="maxicode_mode_4",this.SYMBOL_MAXICODE_MODE_5="maxicode_mode_5",this.SYMBOL_MAXICODE_MODE_6="maxicode_mode_6",this.SYMBOL_GS1_DATABAR_STACKED="gs1_databar_stacked",this.SYMBOL_GS1_DATABAR_STACKED_OMNIDIRECTIONAL="gs1_databar_stacked_omnidirectional",this.SYMBOL_GS1_DATABAR_EXPANDED_STACKED="gs1_databar_expanded_stacked",this.SYMBOL_AZTECCODE_FULLRANGE="azteccode_fullrange",this.SYMBOL_AZTECCODE_COMPACT="azteccode_compact",this.SYMBOL_DATAMATRIX_SQUARE="datamatrix_square",this.SYMBOL_DATAMATRIX_RECTANGLE_8="datamatrix_rectangle_8",this.SYMBOL_DATAMATRIX_RECTANGLE_12="datamatrix_rectangle_12",this.SYMBOL_DATAMATRIX_RECTANGLE_16="datamatrix_rectangle_16",this.LEVEL_0="level_0",this.LEVEL_1="level_1",this.LEVEL_2="level_2",this.LEVEL_3="level_3",this.LEVEL_4="level_4",this.LEVEL_5="level_5",this.LEVEL_6="level_6",this.LEVEL_7="level_7",this.LEVEL_8="level_8",this.LEVEL_L="level_l",this.LEVEL_M="level_m",this.LEVEL_Q="level_q",this.LEVEL_H="level_h",this.LEVEL_DEFAULT="default",this.LINE_THIN="thin",this.LINE_MEDIUM="medium",this.LINE_THICK="thick",this.LINE_THIN_DOUBLE="thin_double",this.LINE_MEDIUM_DOUBLE="medium_double",this.LINE_THICK_DOUBLE="thick_double",this.DIRECTION_LEFT_TO_RIGHT="left_to_right",this.DIRECTION_BOTTOM_TO_TOP="bottom_to_top",this.DIRECTION_RIGHT_TO_LEFT="right_to_left",this.DIRECTION_TOP_TO_BOTTOM="top_to_bottom",this.CUT_NO_FEED="no_feed",this.CUT_FEED="feed",this.CUT_RESERVE="reserve",this.DRAWER_1="drawer_1",this.DRAWER_2="drawer_2",this.PULSE_100="pulse_100",this.PULSE_200="pulse_200",this.PULSE_300="pulse_300",this.PULSE_400="pulse_400",this.PULSE_500="pulse_500",this.PATTERN_NONE="none",this.PATTERN_0="pattern_0",this.PATTERN_1="pattern_1",this.PATTERN_2="pattern_2",this.PATTERN_3="pattern_3",this.PATTERN_4="pattern_4",this.PATTERN_5="pattern_5",this.PATTERN_6="pattern_6",this.PATTERN_7="pattern_7",this.PATTERN_8="pattern_8",this.PATTERN_9="pattern_9",this.PATTERN_10="pattern_10",this.PATTERN_A="pattern_a",this.PATTERN_B="pattern_b",this.PATTERN_C="pattern_c",this.PATTERN_D="pattern_d",this.PATTERN_E="pattern_e",this.PATTERN_ERROR="error",this.PATTERN_PAPER_END="paper_end",this.LAYOUT_RECEIPT="receipt",this.LAYOUT_RECEIPT_BM="receipt_bm",this.LAYOUT_LABEL="label",this.LAYOUT_LABEL_BM="label_bm",this.HALFTONE_DITHER=0,this.HALFTONE_ERROR_DIFFUSION=1,this.HALFTONE_THRESHOLD=2}function toHexBinary(t){var e,i=t.length,s=new Array(i);for(e=0;e<i;e++)s[e]=("0"+t.charCodeAt(e).toString(16)).slice(-2);return s.join("")}function toBase64Binary(t){var e,i=t.length,s=new Array((i+2)/3<<2),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=(3-i%3)%3,a=0,o=0;for(t+="\0\0";o<i;)e=t.charCodeAt(o++)<<16|t.charCodeAt(o++)<<8|t.charCodeAt(o++),s[a++]=n.charAt(e>>18&63),s[a++]=n.charAt(e>>12&63),s[a++]=n.charAt(e>>6&63),s[a++]=n.charAt(63&e);for(;r--;)s[--a]="=";return s.join("")}function toMonoImage(t,e,i){var s,n,r,a,o,l,c,h=String.fromCharCode,d=[[2,130,34,162,10,138,42,170],[194,66,226,98,202,74,234,106],[50,178,18,146,58,186,26,154],[242,114,210,82,250,122,218,90],[14,142,46,174,6,134,38,166],[206,78,238,110,198,70,230,102],[62,190,30,158,54,182,22,150],[254,126,222,94,246,118,214,86]],u=t.data,p=t.width,f=t.height,m=new Array((p+7>>3)*f),v=0,E=0,g=0,_=128,y=new Array;if(1==e)for(l=p;l--;)y.push(0);for(c=0;c<f;c++)for(s=0,n=0,l=0;l<p;)r=7&l,0==e&&(_=d[7&c][r]),a=255*Math.pow(((.29891*u[E++]+.58661*u[E++]+.11448*u[E++])*u[E]/255+255-u[E++])/255,1/i)|0,1==e&&(o=(a+=y[l]+s>>4)-(a<_?0:255),l>0&&(y[l-1]+=o),y[l]=7*o+n,s=5*o,n=3*o),a<_&&(v|=128>>r),l++,7!=r&&l!=p||(m[g++]=h(16==v?32:v),v=0);return m.join("")}function toGrayImage(t,e){var i,s,n,r,a,o=String.fromCharCode,l=[[0,9,2,11],[13,4,15,6],[3,12,1,10],[16,7,14,5]],c=[0,7,13,19,23,27,31,35,40,44,49,52,54,55,57,59,61,62,64,66,67,69,70,70,71,72,73,74,75,76,77,78,79,80,81,82,83,83,84,85,86,86,87,88,88,89,90,90,91,91,92,93,93,94,94,95,96,96,97,98,98,99,99,100,101,101,102,102,103,103,104,104,105,105,106,106,107,107,108,108,109,109,110,110,111,111,112,112,112,113,113,114,114,115,115,116,116,117,117,118,118,119,119,120,120,120,121,121,122,122,123,123,123,124,124,125,125,125,126,126,127,127,127,128,128,129,129,130,130,130,131,131,132,132,132,133,133,134,134,135,135,135,136,136,137,137,137,138,138,139,139,139,140,140,141,141,141,142,142,143,143,143,144,144,145,145,146,146,146,147,147,148,148,148,149,149,150,150,150,151,151,152,152,152,153,153,154,154,155,155,155,156,156,157,157,158,158,159,159,160,160,161,161,161,162,162,163,163,164,164,165,165,166,166,166,167,167,168,168,169,169,170,170,171,171,172,173,173,174,175,175,176,177,178,178,179,180,180,181,182,182,183,184,184,185,186,186,187,189,191,193,195,198,200,202,255],h=t.data,d=t.width,u=t.height,p=new Array((d+1>>1)*u),f=0,m=0,v=0;for(a=0;a<u;a++)for(r=0;r<d;)i=1&r,n=(s=c[255*Math.pow(((.29891*h[m++]+.58661*h[m++]+.11448*h[m++])*h[m]/255+255-h[m++])/255,1/e)|0])/17|0,l[3&a][3&r]<s%17&&n++,f|=n<<(1-i<<2),r++,1!=i&&r!=d||(p[v++]=o(f),f=0);return p.join("")}function escapeMarkup(t){var e=/[<>&'"\t\n\r]/g;return e.test(t)&&(t=t.replace(e,(function(t){var e="";switch(t){case"<":e="&lt;";break;case">":e="&gt;";break;case"&":e="&amp;";break;case"'":e="&apos;";break;case'"':e="&quot;";break;case"\t":e="&#9;";break;case"\n":e="&#10;";break;case"\r":e="&#13;"}return e}))),t}function escapeControl(t){var e=/[\\\x00-\x1f\x7f-\xff]/g;return e.test(t)&&(t=t.replace(e,(function(t){return"\\"==t?"\\\\":"\\x"+("0"+t.charCodeAt(0).toString(16)).slice(-2)}))),t}OtherPeripheral.prototype={setConnectionObject:function(t){this.connectionObj=t},send:function(t,e){var i={};for(var s in e)i[s]=e[s];i.type=t;var n=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),r=-1;try{this.connectionObj.emit(n),r=n.sequence}catch(a){}return r},client_onreceive:function(t){try{var e=t;delete e.type,this.onreceive(t.type,e)}catch(i){}},callEvent:function(t,e){var i=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),s=-1;try{this.connectionObj.emit(i),s=i.sequence}catch(n){}return s}},Keyboard.prototype={setConnectionObject:function(t){this.connectionObj=t},client_onkeypress:function(t){try{if(null==this.onkeypress)return;this.onkeypress(t)}catch(e){}},client_onstring:function(t){try{if(null==this.onstring)return;this.onstring(t)}catch(e){}},setPrefix:function(t){var e={type:"setprefix"};if("object"==typeof t){if(0==t.length)return-1;e.keycodes=t}else{if(null==t||""==t)return-1;e.keycodes=[t]}var i=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),s=-1;try{this.connectionObj.emit(i),s=i.sequence}catch(n){}return s},callEvent:function(t,e){var i=e;i.type=t;var s=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),n=-1;try{this.connectionObj.emit(s),n=s.sequence}catch(r){}return n}},MSR.prototype={setConnectionObject:function(t){this.connectionObj=t},client_ondata:function(t){try{if(null==this.ondata)return;this.ondata(t)}catch(e){}},callEvent:function(t,e){var i=e;i.type=t;var s=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),n=-1;try{this.connectionObj.emit(s),n=s.sequence}catch(r){}return n}},ePOSBuilder.prototype.addText=function(t){return this.message+="<text>"+escapeMarkup(t)+"</text>",this},ePOSBuilder.prototype.addTextLang=function(t){return this.message+='<text lang="'+t+'"/>',this},ePOSBuilder.prototype.addTextAlign=function(t){var e="";return e+=getEnumAttr("align",t,regexAlign),this.message+="<text"+e+"/>",this},ePOSBuilder.prototype.addTextRotate=function(t){var e="";return e+=getBoolAttr("rotate",t),this.message+="<text"+e+"/>",this},ePOSBuilder.prototype.addTextLineSpace=function(t){var e="";return e+=getUByteAttr("linespc",t),this.message+="<text"+e+"/>",this},ePOSBuilder.prototype.addTextFont=function(t){var e="";return e+=getEnumAttr("font",t,regexFont),this.message+="<text"+e+"/>",this},ePOSBuilder.prototype.addTextSmooth=function(t){var e="";return e+=getBoolAttr("smooth",t),this.message+="<text"+e+"/>",this},ePOSBuilder.prototype.addTextDouble=function(t,e){var i="";return t!==undefined&&(i+=getBoolAttr("dw",t)),e!==undefined&&(i+=getBoolAttr("dh",e)),this.message+="<text"+i+"/>",this},ePOSBuilder.prototype.addTextSize=function(t,e){var i="";return t!==undefined&&(i+=getIntAttr("width",t,1,8)),e!==undefined&&(i+=getIntAttr("height",e,1,8)),this.message+="<text"+i+"/>",this},ePOSBuilder.prototype.addTextStyle=function(t,e,i,s){var n="";return t!==undefined&&(n+=getBoolAttr("reverse",t)),e!==undefined&&(n+=getBoolAttr("ul",e)),i!==undefined&&(n+=getBoolAttr("em",i)),s!==undefined&&(n+=getEnumAttr("color",s,regexColor)),this.message+="<text"+n+"/>",this},ePOSBuilder.prototype.addTextPosition=function(t){var e="";return e+=getUShortAttr("x",t),this.message+="<text"+e+"/>",this},ePOSBuilder.prototype.addTextVPosition=function(t){var e="";return e+=getUShortAttr("y",t),this.message+="<text"+e+"/>",this},ePOSBuilder.prototype.addFeedUnit=function(t){var e="";return e+=getUByteAttr("unit",t),this.message+="<feed"+e+"/>",this},ePOSBuilder.prototype.addFeedLine=function(t){var e="";return e+=getUByteAttr("line",t),this.message+="<feed"+e+"/>",this},ePOSBuilder.prototype.addFeed=function(){return this.message+="<feed/>",this},ePOSBuilder.prototype.addFeedPosition=function(t){var e="";return e+=getEnumAttr("pos",t,regexFeed),this.message+="<feed"+e+"/>",this},ePOSBuilder.prototype.addImage=function(t,e,i,s,n,r,a){var o,l,c="",h=this.halftone,d=this.brightness;if(getUShortAttr("x",e),getUShortAttr("y",i),c+=getUShortAttr("width",s),c+=getUShortAttr("height",n),r!==undefined&&(c+=getEnumAttr("color",r,regexColor)),a!==undefined&&(c+=getEnumAttr("mode",a,regexMode)),isNaN(h)||h<0||h>2)throw new Error('Property "halftone" is invalid');if(isNaN(d)||d<.1||d>10)throw new Error('Property "brightness" is invalid');return o=t.getImageData(e,i,s,n),l=a==this.MODE_GRAY16?toGrayImage(o,d):toMonoImage(o,h,d),this.message+="<image"+c+">"+toBase64Binary(l)+"</image>",this},ePOSBuilder.prototype.addLogo=function(t,e){var i="";return i+=getUByteAttr("key1",t),i+=getUByteAttr("key2",e),this.message+="<logo"+i+"/>",this},ePOSBuilder.prototype.addBarcode=function(t,e,i,s,n,r){var a="";return a+=getEnumAttr("type",e,regexBarcode),i!==undefined&&(a+=getEnumAttr("hri",i,regexHri)),s!==undefined&&(a+=getEnumAttr("font",s,regexFont)),n!==undefined&&(a+=getUByteAttr("width",n)),r!==undefined&&(a+=getUByteAttr("height",r)),this.message+="<barcode"+a+">"+escapeControl(escapeMarkup(t))+"</barcode>",this},ePOSBuilder.prototype.addSymbol=function(t,e,i,s,n,r){var a="";return a+=getEnumAttr("type",e,regexSymbol),i!==undefined&&(a+=getEnumIntAttr("level",i,regexLevel,0,255)),s!==undefined&&(a+=getUByteAttr("width",s)),n!==undefined&&(a+=getUByteAttr("height",n)),r!==undefined&&(a+=getUShortAttr("size",r)),this.message+="<symbol"+a+">"+escapeControl(escapeMarkup(t))+"</symbol>",this},ePOSBuilder.prototype.addHLine=function(t,e,i){var s="";return s+=getUShortAttr("x1",t),s+=getUShortAttr("x2",e),i!==undefined&&(s+=getEnumAttr("style",i,regexLine)),this.message+="<hline"+s+"/>",this},ePOSBuilder.prototype.addVLineBegin=function(t,e){var i="";return i+=getUShortAttr("x",t),e!==undefined&&(i+=getEnumAttr("style",e,regexLine)),this.message+="<vline-begin"+i+"/>",this},ePOSBuilder.prototype.addVLineEnd=function(t,e){var i="";return i+=getUShortAttr("x",t),e!==undefined&&(i+=getEnumAttr("style",e,regexLine)),this.message+="<vline-end"+i+"/>",this},ePOSBuilder.prototype.addPageBegin=function(){return this.message+="<page>",this},ePOSBuilder.prototype.addPageEnd=function(){return this.message+="</page>",this},ePOSBuilder.prototype.addPageArea=function(t,e,i,s){var n="";return n+=getUShortAttr("x",t),n+=getUShortAttr("y",e),n+=getUShortAttr("width",i),n+=getUShortAttr("height",s),this.message+="<area"+n+"/>",this},ePOSBuilder.prototype.addPageDirection=function(t){var e="";return e+=getEnumAttr("dir",t,regexDirection),this.message+="<direction"+e+"/>",this},ePOSBuilder.prototype.addPagePosition=function(t,e){var i="";return i+=getUShortAttr("x",t),i+=getUShortAttr("y",e),this.message+="<position"+i+"/>",this},ePOSBuilder.prototype.addPageLine=function(t,e,i,s,n){var r="";return r+=getUShortAttr("x1",t),r+=getUShortAttr("y1",e),r+=getUShortAttr("x2",i),r+=getUShortAttr("y2",s),n!==undefined&&(r+=getEnumAttr("style",n,regexLine)),this.message+="<line"+r+"/>",this},ePOSBuilder.prototype.addPageRectangle=function(t,e,i,s,n){var r="";return r+=getUShortAttr("x1",t),r+=getUShortAttr("y1",e),r+=getUShortAttr("x2",i),r+=getUShortAttr("y2",s),n!==undefined&&(r+=getEnumAttr("style",n,regexLine)),this.message+="<rectangle"+r+"/>",this},ePOSBuilder.prototype.addRotateBegin=function(){return this.message+="<rotate-begin/>",this},ePOSBuilder.prototype.addRotateEnd=function(){return this.message+="<rotate-end/>",this},ePOSBuilder.prototype.addCut=function(t){var e="";return t!==undefined&&(e+=getEnumAttr("type",t,regexCut)),this.message+="<cut"+e+"/>",this},ePOSBuilder.prototype.addPulse=function(t,e){var i="";return t!==undefined&&(i+=getEnumAttr("drawer",t,regexDrawer)),e!==undefined&&(i+=getEnumAttr("time",e,regexPulse)),this.message+="<pulse"+i+"/>",this},ePOSBuilder.prototype.addSound=function(t,e,i){var s="";return t!==undefined&&(s+=getEnumAttr("pattern",t,regexPattern)),e!==undefined&&(s+=getUByteAttr("repeat",e)),i!==undefined&&(s+=getUShortAttr("cycle",i)),this.message+="<sound"+s+"/>",this},ePOSBuilder.prototype.addLayout=function(t,e,i,s,n,r,a){var o="";return o+=getEnumAttr("type",t,regexLayout),e!==undefined&&(o+=getUShortAttr("width",e)),i!==undefined&&(o+=getUShortAttr("height",i)),s!==undefined&&(o+=getShortAttr("margin-top",s)),n!==undefined&&(o+=getShortAttr("margin-bottom",n)),r!==undefined&&(o+=getShortAttr("offset-cut",r)),a!==undefined&&(o+=getShortAttr("offset-label",a)),this.message+="<layout"+o+"/>",this},ePOSBuilder.prototype.addRecovery=function(){return this.message+="<recovery/>",this},ePOSBuilder.prototype.addReset=function(){return this.message+="<reset/>",this},ePOSBuilder.prototype.addCommand=function(t){return this.message+="<command>"+toHexBinary(t)+"</command>",this},ePOSBuilder.prototype.toString=function(){var t="";return this.force&&(t+=getBoolAttr("force",!0)),'<epos-print xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print"'+t+">"+this.message+"</epos-print>"};var regexFont=/^(font_[a-e]|special_[ab])$/,regexAlign=/^(left|center|right)$/,regexColor=/^(none|color_[1-4])$/,regexFeed=/^(peeling|cutting|current_tof|next_tof)$/,regexMode=/^(mono|gray16)$/,regexBarcode=/^(upc_[ae]|[ej]an13|[ej]an8|code(39|93|128)|itf|codabar|gs1_128|gs1_databar_(omnidirectional|truncated|limited|expanded))$/,regexHri=/^(none|above|below|both)$/,regexSymbol=/^(pdf417_(standard|truncated)|qrcode_(model_[12]|micro)|maxicode_mode_[2-6]|gs1_databar_(stacked(_omnidirectional)?|expanded_stacked)|azteccode_(fullrange|compact)|datamatrix_(square|rectangle_(8|12|16)))$/,regexLevel=/^(level_[0-8lmqh]|default)$/,regexLine=/^(thin|medium|thick)(_double)?$/,regexDirection=/^(left_to_right|bottom_to_top|right_to_left|top_to_bottom)$/,regexCut=/^(no_feed|feed|reserve)$/,regexDrawer=/^drawer_[12]$/,regexPulse=/^pulse_[1-5]00$/,regexPattern=/^(none|pattern_(10|[0-9a-e])|error|paper_end)$/,regexLayout=/^(receipt|label)(_bm)?$/;function getEnumAttr(t,e,i){if(!i.test(e))throw new Error('Parameter "'+t+'" is invalid');return" "+t+'="'+e+'"'}function getBoolAttr(t,e){return" "+t+'="'+!!e+'"'}function getIntAttr(t,e,i,s){if(isNaN(e)||e<i||e>s)throw new Error('Parameter "'+t+'" is invalid');return" "+t+'="'+e+'"'}function getUByteAttr(t,e){return getIntAttr(t,e,0,255)}function getUShortAttr(t,e){return getIntAttr(t,e,0,65535)}function getShortAttr(t,e){return getIntAttr(t,e,-32768,32767)}function getEnumIntAttr(t,e,i,s,n){if(!i.test(e)&&(isNaN(e)||e<s||e>n))throw new Error('Parameter "'+t+'" is invalid');return" "+t+'="'+e+'"'}function ePOSPrint(t){this.address=t,this.enabled=!1,this.interval=3e3,this.timeout=3e5,this.status=0,this.battery=0,this.drawerOpenLevel=0,this.onreceive=null,this.onerror=null,this.onstatuschange=null,this.ononline=null,this.onoffline=null,this.onpoweroff=null,this.oncoverok=null,this.oncoveropen=null,this.onpaperok=null,this.onpaperend=null,this.onpapernearend=null,this.ondrawerclosed=null,this.ondraweropen=null,this.onbatterylow=null,this.onbatteryok=null,this.onbatterystatuschange=null,this.ASB_NO_RESPONSE=1,this.ASB_PRINT_SUCCESS=2,this.ASB_DRAWER_KICK=4,this.ASB_BATTERY_OFFLINE=4,this.ASB_OFF_LINE=8,this.ASB_COVER_OPEN=32,this.ASB_PAPER_FEED=64,this.ASB_WAIT_ON_LINE=256,this.ASB_PANEL_SWITCH=512,this.ASB_MECHANICAL_ERR=1024,this.ASB_AUTOCUTTER_ERR=2048,this.ASB_UNRECOVER_ERR=8192,this.ASB_AUTORECOVER_ERR=16384,this.ASB_RECEIPT_NEAR_END=131072,this.ASB_RECEIPT_END=524288,this.ASB_BUZZER=16777216,this.ASB_WAIT_REMOVE_LABEL=16777216,this.ASB_NO_LABEL=67108864,this.ASB_SPOOLER_IS_STOPPED=2147483648,this.DRAWER_OPEN_LEVEL_LOW=0,this.DRAWER_OPEN_LEVEL_HIGH=1}function fireReceiveEvent(t,e,i,s,n,r){"EX_ENPC_TIMEOUT"==i&&(i="ERROR_DEVICE_BUSY"),t.onreceive&&t.onreceive({success:e,code:i,status:s,battery:n,printjobid:r})}function fireStatusEvent(t,e,i){var s,n;0!=e&&e!=t.ASB_NO_RESPONSE||(e=t.status|t.ASB_NO_RESPONSE),s=0==t.status?-1:t.status^e,n=0==t.status?-1:t.battery^i,t.status=e,t.battery=i,s&&t.onstatuschange&&t.onstatuschange(e),n&&t.onbatterystatuschange&&t.onbatterystatuschange(i),s&(t.ASB_NO_RESPONSE|t.ASB_OFF_LINE)&&(e&t.ASB_NO_RESPONSE?t.onpoweroff&&t.onpoweroff():e&t.ASB_OFF_LINE?t.onoffline&&t.onoffline():t.ononline&&t.ononline()),s&t.ASB_COVER_OPEN&&(e&t.ASB_NO_RESPONSE||(e&t.ASB_COVER_OPEN?t.oncoveropen&&t.oncoveropen():t.oncoverok&&t.oncoverok())),s&(t.ASB_RECEIPT_END|t.ASB_RECEIPT_NEAR_END)&&(e&t.ASB_NO_RESPONSE||(e&t.ASB_RECEIPT_END?t.onpaperend&&t.onpaperend():e&t.ASB_RECEIPT_NEAR_END?t.onpapernearend&&t.onpapernearend():t.onpaperok&&t.onpaperok())),s&t.ASB_DRAWER_KICK&&(e&t.ASB_NO_RESPONSE||(e&t.ASB_DRAWER_KICK?(t.drawerOpenLevel==t.DRAWER_OPEN_LEVEL_HIGH?t.ondraweropen&&t.ondraweropen():t.ondrawerclosed&&t.ondrawerclosed(),t.onbatterylow&&t.onbatterylow()):(t.drawerOpenLevel==t.DRAWER_OPEN_LEVEL_HIGH?t.ondrawerclosed&&t.ondrawerclosed():t.ondraweropen&&t.ondraweropen(),t.onbatteryok&&t.onbatteryok())))}function fireErrorEvent(t,e,i){t.onerror&&t.onerror({status:e,responseText:i})}function updateStatus(t){var e=t.interval;t.enabled&&((isNaN(e)||e<1e3)&&(e=3e3),t.intervalid=setTimeout((function(){delete t.intervalid,t.enabled&&t.send()}),e)),delete t.intervalxhr}function CanvasPrint(t){this.address=t,this.mode="mono",this.halftone=0,this.brightness=1,this.align="left",this.color="color_1",this.paper="receipt",this.feed="current_tof",this.cut=!1,this.layout=null,this.ALIGN_LEFT="left",this.ALIGN_CENTER="center",this.ALIGN_RIGHT="right",this.COLOR_NONE="none",this.COLOR_1="color_1",this.COLOR_2="color_2",this.COLOR_3="color_3",this.COLOR_4="color_4",this.FEED_PEELING="peeling",this.FEED_CUTTING="cutting",this.FEED_CURRENT_TOF="current_tof",this.FEED_NEXT_TOF="next_tof",this.HALFTONE_DITHER=0,this.HALFTONE_ERROR_DIFFUSION=1,this.HALFTONE_THRESHOLD=2,this.MODE_MONO="mono",this.MODE_GRAY16="gray16",this.PAPER_RECEIPT="receipt",this.PAPER_RECEIPT_BM="receipt_bm",this.PAPER_LABEL="label",this.PAPER_LABEL_BM="label_bm",this.connectionObj=null}function POSKeyboard(t,e){this.deviceID=t,this.isCrypto=e,this.connectionObj=null}function Printer(t,e,i){this.deviceID=t,this.isCrypto=e,this.ePosDev=i,this.timeout=1e4}function HybridPrinter(t,e,i){this.deviceID=t,this.isCrypto=e,this.ePosDev=i,this.connectionObj=null,this.ReceiptPrinter,this.SlipPrinter,this.EndorsePrinter,this.MICRReader,this.force=!1,this.onstatuschange,this.ononline,this.onoffline,this.onpoweroff,this.oncoveropen,this.onpaperok,this.onpapernearend,this.onpaperend,this.ondrawerclosed,this.ondraweropen,this.ASB_NO_RESPONSE=1,this.ASB_PRINT_SUCCESS=2,this.ASB_DRAWER_KICK=4,this.ASB_OFF_LINE=8,this.ASB_COVER_OPEN=32,this.ASB_PAPER_FEED=64,this.ASB_WAIT_ON_LINE=256,this.ASB_PANEL_SWITCH=512,this.ASB_MECHANICAL_ERR=1024,this.ASB_AUTOCUTTER_ERR=2048,this.ASB_UNRECOVER_ERR=8192,this.ASB_AUTORECOVER_ERR=16384,this.ASB_RECEIPT_NEAR_END=131072,this.ASB_RECEIPT_END=524288,this.ASB_TOF_NOPAPER=2097152,this.ASB_BOF_NOPAPER=4194304,this.ASB_SLIP_NO_SELECT=16777216,this.ASB_SLIP_IMPOSSIBLE_PRINT=33554432,this.ASB_SPOOLER_IS_STOPPED=2147483648,this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="ERROR_DEVICE_NOT_FOUND",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="ERROR_COVER_OPEN",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_AUTOMATICAL="ERROR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="ERROR_UNRECOVERABLE",this.ERROR_BADPORT="ERROR_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.init(t)}function ReceiptPrinter(t){this.parent=t,this.methodName="",this.deviceID=this.parent.deviceID,this.ePosDev=this.parent.ePosDev,this.connectionObj=null,this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="DeviceNotFound",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="EPTR_COVER_OPEN",this.ERROR_TIMEOUT="EX_TIMEOUT",this.ERROR_AUTOMATICAL="EPTR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="EPTR_UNRECOVERABLE",this.ERROR_BADPORT="EX_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.EPTR_CUTTER="EPTR_CUTTER",this.EPTR_MECHANICAL="EPTR_MECHANICAL",this.EPTR_REC_EMPTY="EPTR_REC_EMPTY",this.EPTR_SCHEMAERROR="SchemaError",this.EPTR_PRINT_SYSTEM_ERROR="PrintSystemError"}function SlipPrinter(t){this.parent=t,this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="ERROR_DEVICE_NOT_FOUND",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="ERROR_COVER_OPEN",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_AUTOMATICAL="ERROR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="ERROR_UNRECOVERABLE",this.ERROR_BADPORT="ERROR_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.EPTR_CUTTER="EPTR_CUTTER",this.EPTR_MECHANICAL="EPTR_MECHANICAL",this.EPTR_REC_EMPTY="EPTR_REC_EMPTY",this.EPTR_SCHEMAERROR="EPTR_SCHEMAERROR",this.EPTR_PRINT_SYSTEM_ERROR="EPTR_PRINT_SYSTEM_ERROR"}function EndorsePrinter(t){this.parent=t,this.mode40cpl=!1,this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="ERROR_DEVICE_NOT_FOUND",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="ERROR_COVER_OPEN",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_AUTOMATICAL="ERROR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="ERROR_UNRECOVERABLE",this.ERROR_BADPORT="ERROR_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.EPTR_CUTTER="EPTR_CUTTER",this.EPTR_MECHANICAL="EPTR_MECHANICAL",this.EPTR_REC_EMPTY="EPTR_REC_EMPTY",this.EPTR_SCHEMAERROR="EPTR_SCHEMAERROR",this.EPTR_PRINT_SYSTEM_ERROR="EPTR_PRINT_SYSTEM_ERROR"}function MICRReader(t){this.parent=t,this.timeout=6e4,this.FONT_E13B="MICR_E13B",this.FONT_CMC7="MICR_CMC7",this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="ERROR_DEVICE_NOT_FOUND",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="ERROR_COVER_OPEN",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_AUTOMATICAL="ERROR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="ERROR_UNRECOVERABLE",this.ERROR_BADPORT="ERROR_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.EMICR_ILLEGAL_LENGTH="EMICR_ILLEGAL_LENGTH",this.EMICR_NO_MICR="EMICR_NO_MICR",this.EMICR_RECOGNITION="EMICR_RECOGNITION",this.EMICR_READ="EMICR_READ",this.EMICR_NOISE_DETECTED="EMICR_NOISE_DETECTED",this.EMICR_COVER_OPENED="EMICR_COVER_OPENED",this.EMICR_PAPER_JAM="EMICR_PAPER_JAM"}function HybridPrinter2(t,e,i){this.deviceID=t,this.isCrypto=e,this.ePosDev=i,this.connectionObj=null,this.ReceiptPrinter=null,this.SlipPrinter2=null,this.ValidationPrinter=null,this.EndorsePrinter2=null,this.MICRReader2=null,this.currentPrinter=null,this.isMicrMode=!1,this.FONT_A="font_a",this.FONT_B="font_b",this.FONT_C="font_c",this.FONT_D="font_d",this.FONT_E="font_e",this.FONT_SPECIAL_A="special_a",this.FONT_SPECIAL_B="special_b",this.ALIGN_LEFT="left",this.ALIGN_CENTER="center",this.ALIGN_RIGHT="right",this.COLOR_NONE="none",this.COLOR_1="color_1",this.COLOR_2="color_2",this.COLOR_3="color_3",this.COLOR_4="color_4",this.FEED_PEELING="peeling",this.FEED_CUTTING="cutting",this.FEED_CURRENT_TOF="current_tof",this.FEED_NEXT_TOF="next_tof",this.MODE_MONO="mono",this.MODE_GRAY16="gray16",this.BARCODE_UPC_A="upc_a",this.BARCODE_UPC_E="upc_e",this.BARCODE_EAN13="ean13",this.BARCODE_JAN13="jan13",this.BARCODE_EAN8="ean8",this.BARCODE_JAN8="jan8",this.BARCODE_CODE39="code39",this.BARCODE_ITF="itf",this.BARCODE_CODABAR="codabar",this.BARCODE_CODE93="code93",this.BARCODE_CODE128="code128",this.BARCODE_GS1_128="gs1_128",this.BARCODE_GS1_DATABAR_OMNIDIRECTIONAL="gs1_databar_omnidirectional",this.BARCODE_GS1_DATABAR_TRUNCATED="gs1_databar_truncated",this.BARCODE_GS1_DATABAR_LIMITED="gs1_databar_limited",this.BARCODE_GS1_DATABAR_EXPANDED="gs1_databar_expanded",this.HRI_NONE="none",this.HRI_ABOVE="above",this.HRI_BELOW="below",this.HRI_BOTH="both",this.SYMBOL_PDF417_STANDARD="pdf417_standard",this.SYMBOL_PDF417_TRUNCATED="pdf417_truncated",this.SYMBOL_QRCODE_MODEL_1="qrcode_model_1",this.SYMBOL_QRCODE_MODEL_2="qrcode_model_2",this.SYMBOL_QRCODE_MICRO="qrcode_micro",this.SYMBOL_MAXICODE_MODE_2="maxicode_mode_2",this.SYMBOL_MAXICODE_MODE_3="maxicode_mode_3",this.SYMBOL_MAXICODE_MODE_4="maxicode_mode_4",this.SYMBOL_MAXICODE_MODE_5="maxicode_mode_5",this.SYMBOL_MAXICODE_MODE_6="maxicode_mode_6",this.SYMBOL_GS1_DATABAR_STACKED="gs1_databar_stacked",this.SYMBOL_GS1_DATABAR_STACKED_OMNIDIRECTIONAL="gs1_databar_stacked_omnidirectional",this.SYMBOL_GS1_DATABAR_EXPANDED_STACKED="gs1_databar_expanded_stacked",this.SYMBOL_AZTECCODE_FULLRANGE="azteccode_fullrange",this.SYMBOL_AZTECCODE_COMPACT="azteccode_compact",this.SYMBOL_DATAMATRIX_SQUARE="datamatrix_square",this.SYMBOL_DATAMATRIX_RECTANGLE_8="datamatrix_rectangle_8",this.SYMBOL_DATAMATRIX_RECTANGLE_12="datamatrix_rectangle_12",this.SYMBOL_DATAMATRIX_RECTANGLE_16="datamatrix_rectangle_16",this.LEVEL_0="level_0",this.LEVEL_1="level_1",this.LEVEL_2="level_2",this.LEVEL_3="level_3",this.LEVEL_4="level_4",this.LEVEL_5="level_5",this.LEVEL_6="level_6",this.LEVEL_7="level_7",this.LEVEL_8="level_8",this.LEVEL_L="level_l",this.LEVEL_M="level_m",this.LEVEL_Q="level_q",this.LEVEL_H="level_h",this.LEVEL_DEFAULT="default",this.LINE_THIN="thin",this.LINE_MEDIUM="medium",this.LINE_THICK="thick",this.LINE_THIN_DOUBLE="thin_double",this.LINE_MEDIUM_DOUBLE="medium_double",this.LINE_THICK_DOUBLE="thick_double",this.DIRECTION_LEFT_TO_RIGHT="left_to_right",this.DIRECTION_BOTTOM_TO_TOP="bottom_to_top",this.DIRECTION_RIGHT_TO_LEFT="right_to_left",this.DIRECTION_TOP_TO_BOTTOM="top_to_bottom",this.CUT_NO_FEED="no_feed",this.CUT_FEED="feed",this.CUT_RESERVE="reserve",this.DRAWER_1="drawer_1",this.DRAWER_2="drawer_2",this.PULSE_100="pulse_100",this.PULSE_200="pulse_200",this.PULSE_300="pulse_300",this.PULSE_400="pulse_400",this.PULSE_500="pulse_500",this.PATTERN_NONE="none",this.PATTERN_0="pattern_0",this.PATTERN_1="pattern_1",this.PATTERN_2="pattern_2",this.PATTERN_3="pattern_3",this.PATTERN_4="pattern_4",this.PATTERN_5="pattern_5",this.PATTERN_6="pattern_6",this.PATTERN_7="pattern_7",this.PATTERN_8="pattern_8",this.PATTERN_9="pattern_9",this.PATTERN_10="pattern_10",this.PATTERN_A="pattern_a",this.PATTERN_B="pattern_b",this.PATTERN_C="pattern_c",this.PATTERN_D="pattern_d",this.PATTERN_E="pattern_e",this.PATTERN_ERROR="error",this.PATTERN_PAPER_END="paper_end",this.LAYOUT_RECEIPT="receipt",this.LAYOUT_RECEIPT_BM="receipt_bm",this.LAYOUT_LABEL="label",this.LAYOUT_LABEL_BM="label_bm",this.HALFTONE_DITHER=0,this.HALFTONE_ERROR_DIFFUSION=1,this.HALFTONE_THRESHOLD=2,this.ASB_NO_RESPONSE=1,this.ASB_PRINT_SUCCESS=2,this.ASB_DRAWER_KICK=4,this.ASB_OFF_LINE=8,this.ASB_COVER_OPEN=32,this.ASB_PAPER_FEED=64,this.ASB_WAIT_ON_LINE=256,this.ASB_PANEL_SWITCH=512,this.ASB_MECHANICAL_ERR=1024,this.ASB_AUTOCUTTER_ERR=2048,this.ASB_UNRECOVER_ERR=8192,this.ASB_AUTORECOVER_ERR=16384,this.ASB_INSERTION_WAIT_PAPER=65536,this.ASB_RECEIPT_NEAR_END=131072,this.ASB_REMOVAL_WAIT_PAPER=262144,this.ASB_RECEIPT_END=524288,this.ASB_TOF_NOPAPER=2097152,this.ASB_BOF_NOPAPER=4194304,this.ASB_SLIP_NO_SELECT=16777216,this.ASB_SLIP_IMPOSSIBLE_PRINT=33554432,this.ASB_EJD_NOPAPER=1073741824,this.ASB_VALIDATION_NO_SELECT=67108864,this.ASB_VALIDATION_IMPOSSIBLE_PRINT=134217728,this.ASB_SPOOLER_IS_STOPPED=2147483648,this.DRAWER_OPEN_LEVEL_LOW=0,this.DRAWER_OPEN_LEVEL_HIGH=1,this.SUCCESS="SUCCESS",this.CANCEL="CANCEL",this.ERROR_CANCEL_FAILED="ERROR_CANCEL_FAILED",this.ERROR_PARAMMETER="ERROR_PARAMMETER",this.ERROR_COMMAND="ERROR_COMMAND",this.ERROR_DEVICE_NOT_FOUND="ERROR_DEVICE_NOT_FOUND",this.ERROR_DEVICE_BUSY="ERROR_DEVICE_BUSY",this.ERROR_NOT_SUPPORTED="ERROR_NOT_SUPPORTED",this.ERROR_COVER_OPEN="ERROR_COVER_OPEN",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_AUTOMATICAL="ERROR_AUTOMATICAL",this.ERROR_UNRECOVERABLE="ERROR_UNRECOVERABLE",this.ERROR_BADPORT="ERROR_BADPORT",this.SYSTEM_ERROR="SYSTEM_ERROR",this.EPTR_AUTOMATICAL="EPTR_AUTOMATICAL",this.EPTR_COVER_OPEN="EPTR_COVER_OPEN",this.EPTR_CUTTER="EPTR_CUTTER",this.EPTR_MECHANICAL="EPTR_MECHANICAL",this.EPTR_REC_EMPTY="EPTR_REC_EMPTY",this.EPTR_UNRECOVERABLE="EPTR_UNRECOVERABLE",this.EPTR_SCHEMAERROR="EPTR_SCHEMAERROR",this.EPTR_PRINT_SYSTEM_ERROR="EPTR_PRINT_SYSTEM_ERROR",this.EPTR_PAPER_PULLED_OUT="EPTR_PAPER_PULLED_OUT",this.EMICR_ILLEGAL_LENGTH="EMICR_ILLEGAL_LENGTH",this.EMICR_NO_MICR="EMICR_NO_MICR",this.EMICR_RECOGNITION="EMICR_RECOGNITION",this.EMICR_READ="EMICR_READ",this.EMICR_NOISE_DETECTED="EMICR_NOISE_DETECTED",this.EMICR_COVER_OPENED="EMICR_COVER_OPENED",this.EMICR_PAPER_JAM="EMICR_PAPER_JAM",this.EMICR_PAPER_PULLED_OUT="EMICR_PAPER_PULLED_OUT",this.DeviceNotFound="DeviceNotFound",this.EX_TIMEOUT="EX_TIMEOUT",this.EX_BADPORT="EX_BADPORT",this.SchemaError="SchemaError",this.PrintSystemError="PrintSystemError",this.PAPERTYPE_RECEIPT=0,this.PAPERTYPE_SLIP=1,this.PAPERTYPE_ENDORSE=2,this.PAPERTYPE_VALIDATION=3,this.FONT_E13B="MICR_E13B",this.FONT_CMC7="MICR_CMC7",this.halftone=this.HALFTONE_DITHER,this.brightness=1,this.force=!1,this.drawerOpenLevel=this.DRAWER_OPEN_LEVEL_LOW,this.paperType=this.PAPERTYPE_RECEIPT,this.interval=3e3,this.waitTime=500,this.enable40cplMode=!0,this.onstatuschange=null,this.ononline=null,this.onoffline=null,this.onpoweroff=null,this.oncoveropen=null,this.onpaperok=null,this.onpapernearend=null,this.onpaperend=null,this.ondrawerclosed=null,this.ondraweropen=null,this.init(t)}function SlipPrinter2(t){this.parent=t}function EndorsePrinter2(t){this.parent=t,this.mode40cpl=!1}function MICRReader2(t){this.parent=t}function ValidationPrinter(t){this.parent=t}function Scanner(t,e){this.deviceID=t,this.isCrypto=e,this.connectionObj=null}function SimpleSerial(t,e){this.deviceID=t,this.isCrypto=e,this.connectionObj=null}function GermanyFiscalElement(t,e){this.deviceID=t,this.isCrypto=e,this.connectionObj=null,this.ongfereceive=null,this.onerror=null}function Ofsc(){this.SERVICE_ID="OFSC",this.callback=null,this.connectionObj=null}function CookieIO(){this.KEY="EPSON_EPOSDEVICE_CLIENTID",this.EXPIRES_MINUTES=5}function DeviceObjElement(t,e,i,s){this.deviceId=t,this.isCrypto=e,this.deviceObject=i,this.callback=s}function DeviceObjElementMap(){this.elementList=new Array}function ePOSDevice(){this.DEVICE_TYPE_SCANNER="type_scanner",this.DEVICE_TYPE_KEYBOARD="type_keyboard",this.DEVICE_TYPE_POSKEYBOARD="type_poskeyboard",this.DEVICE_TYPE_MSR="type_msr",this.DEVICE_TYPE_CAT="type_cat",this.DEVICE_TYPE_CASH_CHANGER="type_cash_changer",this.DEVICE_TYPE_PRINTER="type_printer",this.DEVICE_TYPE_DISPLAY="type_display",this.DEVICE_TYPE_SIMPLE_SERIAL="type_simple_serial",this.DEVICE_TYPE_HYBRID_PRINTER="type_hybrid_printer",this.DEVICE_TYPE_HYBRID_PRINTER2="type_hybrid_printer2",this.DEVICE_TYPE_DT="type_dt",this.DEVICE_TYPE_OTHER_PERIPHERAL="type_other_peripheral",this.DEVICE_TYPE_GFE="type_storage",this.RESULT_OK="OK",this.ERROR_SYSTEM="SYSTEM_ERROR",this.ERROR_DEVICE_IN_USE="DEVICE_IN_USE",this.ERROR_DEVICE_OPEN="DEVICE_OPEN_ERROR",this.ERROR_DEVICE_CLOSE="DEVICE_CLOSE_ERROR",this.ERROR_DEVICE_NOT_OPEN="DEVICE_NOT_OPEN",this.ERROR_DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",this.ERROR_PARAMETER="ERROR_PARAMETER",this.IFPORT_EPOSDEVICE=8008,this.IFPORT_EPOSDEVICE_S=8043,this.CONNECT_TIMEOUT=15e3,this.RECONNECT_TIMEOUT=3e3,this.MAX_RECONNECT_RETRY=5,this.socket=null,this.connectionId=null,this.reconnectTimerId=null,this.reconnectTryCount=0,this.admin="",this.location="",this.recievedDataId=0,this.connectStartTime=0,this.waitRetryConnectId=0,this.conectionObj=new Connection,this.commBoxManager=new CommBoxManager,this.commBoxManager.setConnectionObject(this.conectionObj),this.devObjSelector=new DeviceObjectSelector,this.devObjSelector.setConnectionObject(this.conectionObj),this.devObjElmMap=new DeviceObjElementMap,this.ofsc=new Ofsc,this.ofsc.setConnectionObject(this.conectionObj),this.cookieIo=new CookieIO,this.gbox=new SocketGarbageBox,this.eposprint=!1;var t=this;window.onbeforeunload=function(){t.disconnect()},window.onpagehide=function(){t.disconnect()}}function SocketGarbageBox(){this.box=new Array}function Connection(){this.OK="OK",this.SSL_CONNECT_OK="SSL_CONNECT_OK",this.ERROR_TIMEOUT="ERROR_TIMEOUT",this.ERROR_PARAMETER="ERROR_PARAMETER",this.ERROR_SYSTEM="SYSTEM_ERROR",this.socket_p=null,this.address_p="",this.protocol_p="",this.port_p="",this.callback_p=null,this.usableIF_p=0,this.ws_status_p=2,this.dev_status_p=2,this.IF_EPOSDEVICE=1,this.IF_EPOSPRINT=2,this.IF_EPOSDISPLAY=4,this.IF_ALL=7,this.ACCESS_OK="OK",this.ACCESS_ERROR="ERROR",this.ACCESS_TIMEOUT="TIMEOUT",this.ACCESS_NONE="NONE",this.CONNECT=1,this.DISCONNECT=2,this.RECONNECTING=4}function ePosCrypto(){this.pubkey_c="",this.secretKey=""}function ePosDeviceMessage(){this.REQUEST={CONNECT:"connect",PUBKEY:"pubkey",ADMININFO:"admin_info",RECONNECT:"reconnect",DISCONNECT:"disconnect",OPENDEVICE:"open_device",CLOSEDEVICE:"close_device",DEVICEDATA:"device_data",SERVICEDATA:"service_data",ERROR:"error",OPENCOMMBOX:"open_commbox",CLOSECOMMBOX:"close_commbox",COMMDATA:"commbox_data"},this.request=null,this.sequence=0,this.deviceId="",this.serviceId="",this.data={},this.isCrypto="0",this.code="",this.data_id=0}ePOSPrint.prototype=new ePOSBuilder,ePOSPrint.prototype.constructor=ePOSPrint,ePOSPrint.prototype.open=function(){this.enabled||(this.enabled=!0,this.status=0,this.battery=0,this.send())},ePOSPrint.prototype.close=function(){this.enabled=!1,this.intervalid&&(clearTimeout(this.intervalid),delete this.intervalid),this.intervalxhr&&(this.intervalxhr.abort(),delete this.intervalxhr)},ePOSPrint.prototype.getPrintJobStatus=function(t){this.send(t)},ePOSPrint.prototype.send=function(t,e){var i,s,n,r,a,o,l,c,h=arguments.length,d=this,u=d.address;if(/^<epos/.test(t)||(h<2?(e=t,t=(new ePOSBuilder).toString()):(u=t,t=e,e=arguments[2])),i='<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">',e&&(i+='<s:Header><parameter xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print"><printjobid>'+e+"</printjobid></parameter></s:Header>"),i+="<s:Body>"+t+"</s:Body></s:Envelope>",!window.XMLHttpRequest)throw new Error("XMLHttpRequest is not supported");!("withCredentials"in(s=new XMLHttpRequest))&&window.XDomainRequest?((s=new XDomainRequest).open("POST",u,!0),s.onload=function(){r=s.responseText,/response/.test(r)?(a=/success\s*=\s*"\s*(1|true)\s*"/.test(r),o=r.match(/code\s*=\s*"\s*(\S*)\s*"/)?RegExp.$1:"",l=r.match(/status\s*=\s*"\s*(\d+)\s*"/)?parseInt(RegExp.$1):0,c=r.match(/battery\s*=\s*"\s*(\d+)\s*"/)?parseInt(RegExp.$1):0,e=r.match(/<printjobid>\s*(\S*)\s*<\/printjobid>/)?RegExp.$1:"",h>0?fireReceiveEvent(d,a,o,l,c,e):fireStatusEvent(d,l,c)):h>0?fireErrorEvent(d,0,s.responseText):fireStatusEvent(d,d.ASB_NO_RESPONSE,0),h<1&&updateStatus(d)},s.onerror=function(){h>0?fireErrorEvent(d,0,s.responseText):(fireStatusEvent(d,d.ASB_NO_RESPONSE,0),updateStatus(d))},s.onprogress=function(){},s.ontimeout=s.onerror,s.timeout=d.timeout,s.send(i)):(s.open("POST",u,!0),s.setRequestHeader("Content-Type","text/xml; charset=utf-8"),s.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),s.setRequestHeader("SOAPAction",'""'),s.onreadystatechange=function(){4==s.readyState&&(clearTimeout(n),200==s.status&&s.responseXML&&(r=s.responseXML.getElementsByTagName("response")).length>0?(a=/^(1|true)$/.test(r[0].getAttribute("success")),o=r[0].hasAttribute("code")?r[0].getAttribute("code"):"",l=r[0].hasAttribute("status")?parseInt(r[0].getAttribute("status")):0,c=r[0].hasAttribute("battery")?parseInt(r[0].getAttribute("battery")):0,r=s.responseXML.getElementsByTagName("printjobid"),e=r.length>0?r[0].textContent:"",h>0?fireReceiveEvent(d,a,o,l,c,e):fireStatusEvent(d,l,c)):h>0?fireErrorEvent(d,s.status,s.responseText):fireStatusEvent(d,d.ASB_NO_RESPONSE,0),h<1&&updateStatus(d))},n=setTimeout((function(){s.abort()}),d.timeout),s.send(i)),h<1&&(d.intervalxhr=s)},CanvasPrint.prototype=new ePOSPrint,CanvasPrint.prototype.constructor=CanvasPrint,CanvasPrint.prototype.setConnectionObject=function(t){this.connectionObj=t},CanvasPrint.prototype.print=function(){var t=arguments.length,e=this.address,i=this.layout,s=this.paper,n=arguments[0],r=this.cut,a=this.mode,o=undefined;switch(t){case 2:o=arguments[1];break;case 4:o=arguments[3];case 3:r=arguments[1],a=arguments[2]}if(void 0===n||null==n)throw new Error("Canvas is not supported");if(!n.getContext)throw new Error("Canvas is not supported");i&&this.addLayout(s,i.width,i.height,i.margin_top,i.margin_bottom,i.offset_cut,i.offset_label),s!=this.PAPER_RECEIPT&&(this.addFeedPosition(this.FEED_CURRENT_TOF),i&&this.addFeedPosition(this.FEED_NEXT_TOF)),this.addTextAlign(this.align),this.addImage(n.getContext("2d"),0,0,n.width,n.height,this.color,a),s!=this.PAPER_RECEIPT?(this.addFeedPosition(this.feed),r&&this.addCut(this.CUT_NO_FEED)):r&&this.addCut(this.CUT_FEED),this.send(e,this.toString(),o)},CanvasPrint.prototype.recover=function(){this.force=!0,this.addRecovery(),this.send(this.address,this.toString())},CanvasPrint.prototype.reset=function(){this.addReset(),this.send(this.address,this.toString())},window.epson||(window.epson={}),window.epson.ePOSBuilder=ePOSBuilder,window.epson.ePOSPrint=ePOSPrint,window.epson.CanvasPrint=CanvasPrint,POSKeyboard.prototype={setConnectionObject:function(t){this.connectionObj=t},client_onkeypress:function(t){try{if(null==this.onkeypress)return;this.onkeypress(t)}catch(e){}},callEvent:function(t,e){var i=e;i.type=t;var s=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),n=-1;try{this.connectionObj.emit(s),n=s.sequence}catch(r){}return n}},Printer.prototype=new CanvasPrint,Printer.prototype.finalize=function(){this.stopMonitor()},Printer.prototype.toString=function(){return ePOSBuilder.prototype.toString.apply(this)},Printer.prototype.addFeedUnit=function(t){try{ePOSBuilder.prototype.addFeedUnit.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addFeedLine=function(t){try{ePOSBuilder.prototype.addFeedLine.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addFeed=function(t){try{ePOSBuilder.prototype.addFeed.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addFeedPosition=function(t){try{ePOSBuilder.prototype.addFeedPosition.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addText=function(t){try{ePOSBuilder.prototype.addText.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addTextLang=function(t){try{ePOSBuilder.prototype.addTextLang.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addTextAlign=function(t){try{ePOSBuilder.prototype.addTextAlign.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addTextRotate=function(t){try{ePOSBuilder.prototype.addTextRotate.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addTextLineSpace=function(t){try{ePOSBuilder.prototype.addTextLineSpace.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addTextFont=function(t){try{ePOSBuilder.prototype.addTextFont.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addTextSmooth=function(t){try{ePOSBuilder.prototype.addTextSmooth.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addTextDouble=function(t,e){try{ePOSBuilder.prototype.addTextDouble.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addTextSize=function(t,e){try{ePOSBuilder.prototype.addTextSize.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addTextStyle=function(t,e,i,s){try{ePOSBuilder.prototype.addTextStyle.apply(this,arguments)}catch(n){throw n}return this},Printer.prototype.addTextPosition=function(t){try{ePOSBuilder.prototype.addTextPosition.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addTextVPosition=function(t){try{ePOSBuilder.prototype.addTextVPosition.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addImage=function(t,e,i,s,n,r,a){try{ePOSBuilder.prototype.addImage.apply(this,arguments)}catch(o){throw o}return this},Printer.prototype.addLogo=function(t,e){try{ePOSBuilder.prototype.addLogo.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addBarcode=function(t,e,i,s,n,r){try{ePOSBuilder.prototype.addBarcode.apply(this,arguments)}catch(a){throw a}return this},Printer.prototype.addSymbol=function(t,e,i,s,n,r){try{ePOSBuilder.prototype.addSymbol.apply(this,arguments)}catch(a){throw a}return this},Printer.prototype.addCommand=function(t){try{ePOSBuilder.prototype.addCommand.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addHLine=function(t,e,i){try{ePOSBuilder.prototype.addHLine.apply(this,arguments)}catch(s){throw s}return this},Printer.prototype.addVLineBegin=function(t,e){try{ePOSBuilder.prototype.addVLineBegin.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addVLineEnd=function(t,e){try{ePOSBuilder.prototype.addVLineEnd.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addPageBegin=function(){try{ePOSBuilder.prototype.addPageBegin.apply(this)}catch(t){throw t}return this},Printer.prototype.addPageEnd=function(){try{ePOSBuilder.prototype.addPageEnd.apply(this)}catch(t){throw t}return this},Printer.prototype.addPageArea=function(t,e,i,s){try{ePOSBuilder.prototype.addPageArea.apply(this,arguments)}catch(n){throw n}return this},Printer.prototype.addPageDirection=function(t){try{ePOSBuilder.prototype.addPageDirection.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addPagePosition=function(t,e){try{ePOSBuilder.prototype.addPagePosition.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addPageLine=function(t,e,i,s,n){try{ePOSBuilder.prototype.addPageLine.apply(this,arguments)}catch(r){throw r}return this},Printer.prototype.addPageRectangle=function(t,e,i,s,n){try{ePOSBuilder.prototype.addPageRectangle.apply(this,arguments)}catch(r){throw r}return this},Printer.prototype.addRotateBegin=function(){try{ePOSBuilder.prototype.addRotateBegin.apply(this)}catch(t){throw t}return this},Printer.prototype.addRotateEnd=function(){try{ePOSBuilder.prototype.addRotateEnd.apply(this)}catch(t){throw t}return this},Printer.prototype.addCut=function(t){try{ePOSBuilder.prototype.addCut.apply(this,arguments)}catch(e){throw e}return this},Printer.prototype.addPulse=function(t,e){try{ePOSBuilder.prototype.addPulse.apply(this,arguments)}catch(i){throw i}return this},Printer.prototype.addSound=function(t,e,i){try{ePOSBuilder.prototype.addSound.apply(this,arguments)}catch(s){throw s}return this},Printer.prototype.addLayout=function(t,e,i,s,n,r,a){try{ePOSBuilder.prototype.addLayout.apply(this,arguments)}catch(o){throw o}return this},Printer.prototype.setXmlString=function(t){this.message=t},Printer.prototype.getXmlString=function(){return this.message},Printer.prototype.getPrintJobStatus=function(t){this.setXmlString(""),this.send(t)},Printer.prototype.send=function(t){var e=-1;if(!this.ePosDev.eposprint&&this.connectionObj.isUsableDeviceIF())try{var i={type:"print",timeout:this.timeout,printdata:this.toString()};switch(arguments.length){case 0:i.printdata=this.toString();break;case 1:i.printdata=this.toString(),i.printjobid=t;break;case 2:case 3:i.printdata=arguments[1],i.printjobid=arguments[2]}var s=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto);try{this.connectionObj.emit(s),s.sequence}catch(f){}this.force=!1,this.setXmlString("")}catch(f){e=-1}else{var n,r,a,o,l,c,h,d,u=this,p=this.connectionObj.getAddressWithProtocol()+"/cgi-bin/epos/service.cgi?devid="+this.deviceID+"&timeout="+this.timeout;if(n='<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">',t&&(n+='<s:Header><parameter xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print"><printjobid>'+t+"</printjobid></parameter></s:Header>"),n+="<s:Body>"+this.toString()+"</s:Body></s:Envelope>",!window.XMLHttpRequest)throw new Error("XMLHttpRequest is not supported");!("withCredentials"in(r=new XMLHttpRequest))&&window.XDomainRequest?((r=new XDomainRequest).open("POST",p,!0),r.onload=function(){o=r.responseText,/response/.test(o)?(l=/success\s*=\s*"\s*(1|true)\s*"/.test(o),c=o.match(/code\s*=\s*"\s*(\S*)\s*"/)?RegExp.$1:"",h=o.match(/status\s*=\s*"\s*(\d+)\s*"/)?parseInt(RegExp.$1):0,d=o.match(/battery\s*=\s*"\s*(\d+)\s*"/)?parseInt(RegExp.$1):0,t=o.match(/<printjobid>\s*(\S*)\s*<\/printjobid>/)?RegExp.$1:"",u.fireReceiveEvent(l,c,h,d,t,0)):u.fireErrorEvent(0,r.responseText,0)},r.onerror=function(){u.fireErrorEvent(0,r.responseText,0)},r.onprogress=function(){},r.ontimeout=r.onerror,r.timeout=u.timeout,r.send(n)):(r.open("POST",p,!0),r.setRequestHeader("Content-Type","text/xml; charset=utf-8"),r.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),r.setRequestHeader("SOAPAction",'""'),r.onreadystatechange=function(){4==r.readyState&&(clearTimeout(a),200==r.status&&r.responseXML&&(o=r.responseXML.getElementsByTagName("response")).length>0?(l=/^(1|true)$/.test(o[0].getAttribute("success")),c=o[0].hasAttribute("code")?o[0].getAttribute("code"):"",h=o[0].hasAttribute("status")?parseInt(o[0].getAttribute("status")):0,d=o[0].hasAttribute("battery")?parseInt(o[0].getAttribute("battery")):0,o=r.responseXML.getElementsByTagName("printjobid"),t=o.length>0?o[0].textContent:"",u.fireReceiveEvent(l,c,h,d,t,0)):u.fireErrorEvent(r.status,r.responseText,0))},a=setTimeout((function(){r.abort()}),this.timeout),r.send(n)),this.setXmlString(""),e=0}return e},Printer.prototype.client_onxmlresult=function(t,e){if(t){var i=t.resultdata,s=/success\s*=\s*"\s*(1|true)\s*"/.test(i);i.match(/code\s*=\s*"\s*(\S*)\s*"/);var n=RegExp.$1;i.match(/status\s*=\s*"\s*(\d+)\s*"/);var r=parseInt(RegExp.$1);i.match(/battery\s*=\s*"\s*(\d+)\s*"/);var a=parseInt(RegExp.$1);this.fireReceiveEvent(s,n,r,a,t.printjobid,e)}else this.fireErrorEvent(0,this.ASB_NO_RESPONSE,e)},Printer.prototype.startMonitor=function(){var t=!1,e=this.connectionObj.getAddressWithProtocol()+"/cgi-bin/epos/service.cgi?devid="+this.deviceID+"&timeout=10000";try{this.enabled||(this.address=e,this.enabled=!0,this.status=this.ASB_DRAWER_KICK,this.sendStartMonitorCommand()),t=!0}catch(i){throw i}return t},Printer.prototype.sendStartMonitorCommand=function(){var t=this,e=this.address,i='<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body>'+(new ePOSBuilder).toString()+"</s:Body></s:Envelope>",s=this;if(window.XDomainRequest){var n=new XDomainRequest;n.open("POST",e,!0),n.onload=function(){var e=n.responseText;if(/response/.test(e)){/success\s*=\s*"\s*(1|true)\s*"/.test(e);e.match(/code\s*=\s*"\s*(\S*)\s*"/);RegExp.$1;e.match(/status\s*=\s*"\s*(\d+)\s*"/);var i=parseInt(RegExp.$1);e.match(/battery\s*=\s*"\s*(\d+)\s*"/);var r=parseInt(RegExp.$1);t.fireStatusEvent(s,i,r)}else t.fireStatusEvent(s,s.ASB_NO_RESPONSE,0);t.updateStatus(s)},n.onerror=function(){t.fireStatusEvent(s,s.ASB_NO_RESPONSE),t.updateStatus(s)},n.onprogress=function(){},n.ontimeout=n.onerror,n.send(i)}else{if(!window.XMLHttpRequest)throw new Error("XMLHttpRequest is not supported");var r=new XMLHttpRequest;r.open("POST",e,!0),r.setRequestHeader("Content-Type","text/xml; charset=utf-8"),r.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),r.setRequestHeader("SOAPAction",'""'),r.onreadystatechange=function(){if(4==r.readyState){if(200==r.status&&r.responseXML){var e=r.responseXML.getElementsByTagName("response");if(e.length>0){/^(1|true)$/.test(e[0].getAttribute("success")),e[0].getAttribute("code");var i=parseInt(e[0].getAttribute("status")),n=e[0].hasAttribute("battery")?parseInt(e[0].getAttribute("battery")):0;t.fireStatusEvent(s,i,n)}else t.fireStatusEvent(s,s.ASB_NO_RESPONSE,0)}else t.fireStatusEvent(s,s.ASB_NO_RESPONSE,0);t.updateStatus(s)}},r.send(i)}},Printer.prototype.stopMonitor=function(){var t=!1;try{this.enabled=!1,this.timeoutid&&(clearTimeout(this.timeoutid),delete this.timeoutid),t=!0}catch(e){throw e}return t},Printer.prototype.fireReceiveEvent=function(t,e,i,s,n,r){delete this.isPrint,"EX_ENPC_TIMEOUT"==e&&(e="ERROR_DEVICE_BUSY"),this.onreceive&&this.onreceive({success:t,code:e,status:i,battery:s,printjobid:n},r)},Printer.prototype.fireErrorEvent=function(t,e,i){this.onerror&&this.onerror({status:t,responseText:e},i),this.ePosDev.cleanup()},Printer.prototype.fireStatusEvent=function(t,e,i){0!=e&&e!=this.ASB_NO_RESPONSE||(e=this.status|this.ASB_NO_RESPONSE);var s=this.status==this.ASB_DRAWER_KICK?-1:this.status^e,n=0==this.status?-1:this.battery^i;this.status=e,this.battery=i,s&&this.onstatuschange&&this.onstatuschange(e),n&&this.onbatterystatuschange&&this.onbatterystatuschange(i),s&(this.ASB_NO_RESPONSE|this.ASB_OFF_LINE)&&(e&this.ASB_NO_RESPONSE?this.onpoweroff&&this.onpoweroff():e&this.ASB_OFF_LINE?this.onoffline&&this.onoffline():this.ononline&&this.ononline()),s&this.ASB_COVER_OPEN&&(e&this.ASB_NO_RESPONSE||(e&this.ASB_COVER_OPEN?this.oncoveropen&&this.oncoveropen():this.oncoverok&&this.oncoverok())),s&(this.ASB_RECEIPT_END|this.ASB_RECEIPT_NEAR_END)&&(e&this.ASB_NO_RESPONSE||(e&this.ASB_RECEIPT_END?this.onpaperend&&this.onpaperend():e&this.ASB_RECEIPT_NEAR_END?this.onpapernearend&&this.onpapernearend():this.onpaperok&&this.onpaperok())),s&this.ASB_DRAWER_KICK&&(e&this.ASB_NO_RESPONSE||(e&this.ASB_DRAWER_KICK?(this.drawerOpenLevel==this.DRAWER_OPEN_LEVEL_HIGH?this.ondraweropen&&this.ondraweropen():this.ondrawerclosed&&this.ondrawerclosed(),this.onbatterylow&&this.onbatterylow()):(this.drawerOpenLevel==this.DRAWER_OPEN_LEVEL_HIGH?this.ondrawerclosed&&this.ondrawerclosed():this.ondraweropen&&this.ondraweropen(),this.onbatteryok&&this.onbatteryok())))},Printer.prototype.updateStatus=function(){var t=this;if(this.enabled){var e=this.interval;(isNaN(e)||e<1e3)&&(e=3e3),this.timeoutid=setTimeout((function(){delete t.timeoutid,t.enabled&&t.sendStartMonitorCommand()}),e)}},Printer.prototype.print=function(t,e,i,s){try{CanvasPrint.prototype.print.apply(this,arguments)}catch(n){throw n}},Printer.prototype.reset=function(){try{CanvasPrint.prototype.reset.apply(this,arguments)}catch(t){throw t}},Printer.prototype.recover=function(){try{CanvasPrint.prototype.recover.apply(this,arguments)}catch(t){throw t}},HybridPrinter.prototype={init:function(t){var e=this;e.deviceID=t,e.ReceiptPrinter=new ReceiptPrinter(this),e.SlipPrinter=new SlipPrinter(this),e.EndorsePrinter=new EndorsePrinter(this),e.MICRReader=new MICRReader(this),e.ReceiptPrinter.onstatuschange=function(t){null!=e.onstatuschange&&e.onstatuschange(t)},e.ReceiptPrinter.ononline=function(){null!=e.ononline&&e.ononline()},e.ReceiptPrinter.onoffline=function(){null!=e.onoffline&&e.onoffline()},e.ReceiptPrinter.onpoweroff=function(){null!=e.onpoweroff&&e.onpoweroff()},e.ReceiptPrinter.oncoveropen=function(){null!=e.oncoveropen&&e.oncoveropen()},e.ReceiptPrinter.onpaperok=function(){null!=e.onpaperok&&e.onpaperok()},e.ReceiptPrinter.onpapernearend=function(){null!=e.onpapernearend&&e.onpapernearend()},e.ReceiptPrinter.onpaperend=function(){null!=e.onpaperend&&e.onpaperend()},e.ReceiptPrinter.ondrawerclosed=function(){null!=e.ondrawerclosed&&e.ondrawerclosed()},e.ReceiptPrinter.ondraweropen=function(){null!=e.ondraweropen&&e.ondraweropen()}},setConnectionObject:function(t){this.connectionObj=t,this.ReceiptPrinter.setConnectionObject(this.connectionObj)},lock:function(){return this.send({type:"lock"})},unlock:function(){return this.send({type:"unlock"})},eject:function(){return this.send({type:"eject"})},recover:function(){return this.ReceiptPrinter.recover()},reset:function(){this.ReceiptPrinter.force=this.force;var t=this.ReceiptPrinter.reset();return this.force=!1,t},startMonitor:function(){return this.ReceiptPrinter.startMonitor()},stopMonitor:function(){return this.ReceiptPrinter.stopMonitor()},client_onreceive:function(t,e){switch(t.eventtype){case"slipprint":case"slipcancel":this.SlipPrinter.fireOnReceive(t,e);break;case"endorseprint":case"endorsecancel":this.EndorsePrinter.fireOnReceive(t,e);break;case"micrread":case"micrcleaning":case"micrcancel":this.MICRReader.fireOnReceive(t,e);break;case"print":var i=t;i.eventtype=this.ReceiptPrinter.methodName,this.fireOnReceive(i,e);break;default:this.fireOnReceive(t,e)}},client_onxmlresult:function(t,e){this.ReceiptPrinter.fireOnReceive(t,e)},fireOnReceive:function(t,e){null!=this.onreceive&&null!=t&&this.onreceive({eventtype:t.eventtype,success:t.success,code:t.code,status:t.status},e)},callEvent:function(t,e){var i=e;return i.type=t,this.send(i)},send:function(t){var e=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),i=-1;try{this.connectionObj.emit(e),i=e.sequence}catch(s){}return i}},ReceiptPrinter.prototype.setConnectionObject=function(t){this.connectionObj=t},ReceiptPrinter.prototype=new Printer,ReceiptPrinter.prototype.send=function(){return""==this.methodName&&(this.methodName="send"),Printer.prototype.send.apply(this,arguments)},ReceiptPrinter.prototype.print=function(t,e,i){return this.methodName="print",Printer.prototype.print.apply(this,arguments)},ReceiptPrinter.prototype.recover=function(){return this.methodName="recover",Printer.prototype.recover.apply(this,arguments)},ReceiptPrinter.prototype.reset=function(){return this.methodName="reset",Printer.prototype.reset.apply(this,arguments)},ReceiptPrinter.prototype.fireOnReceive=function(t,e){if(null!=this.onreceive){var i=this.methodName,s="false",n="",r=this.ASB_NO_RESPONSE;if(t){var a=t.resultdata;s=/success\s*=\s*"\s*(1|true)\s*"/.test(a),a.match(/code\s*=\s*"\s*(\S*)\s*"/),""==(n=RegExp.$1)&&(n=s?"SUCCESS":"ERROR_DEVICE_NOT_FOUND"),a.match(/status\s*=\s*"\s*(\d+)\s*"/),r=parseInt(RegExp.$1)}"EX_ENPC_TIMEOUT"==n&&(n="ERROR_DEVICE_BUSY"),this.onreceive({eventtype:i,success:s,code:n,status:r},e),this.methodName=""}},SlipPrinter.prototype=new ePOSBuilder,SlipPrinter.prototype.timeout=6e4,SlipPrinter.prototype.send=function(){var t=arguments.length<1?this.toString():arguments[1],e={type:"slipprint",timeout:this.timeout,printdata:t},i=this.parent.send(e);return this.setXmlString(""),i},SlipPrinter.prototype.setXmlString=function(t){this.message=t},SlipPrinter.prototype.getXmlString=function(){return this.message},SlipPrinter.prototype.cancel=function(){return this.parent.send({type:"slipcancel"})},SlipPrinter.prototype.fireOnReceive=function(t,e){if(null!=this.onreceive&&null!=t){var i="";switch(t.eventtype){case"slipprint":i="send";break;case"slipcancel":i="cancel"}var s=t.code;"EX_ENPC_TIMEOUT"==s&&(s="ERROR_DEVICE_BUSY"),this.onreceive({eventtype:i,success:t.success,code:s,status:t.status},e)}},EndorsePrinter.prototype=new ePOSBuilder,EndorsePrinter.prototype.timeout=6e4,EndorsePrinter.prototype.send=function(){var t=arguments.length<1?this.toString():arguments[1],e={type:"endorseprint",is40cplmode:this.mode40cpl,timeout:this.timeout,printdata:t},i=this.parent.send(e);return this.setXmlString(""),i},EndorsePrinter.prototype.setXmlString=function(t){this.message=t},EndorsePrinter.prototype.getXmlString=function(){return this.message},EndorsePrinter.prototype.cancel=function(){return this.parent.send({type:"endorsecancel"})},EndorsePrinter.prototype.enable40cplmode=function(t){this.mode40cpl=t},EndorsePrinter.prototype.fireOnReceive=function(t,e){if(null!=this.onreceive&&null!=t){var i="";switch(t.eventtype){case"endorseprint":i="send";break;case"endorsecancel":i="cancel"}var s=t.code;"EX_ENPC_TIMEOUT"==s&&(s="ERROR_DEVICE_BUSY"),this.onreceive({eventtype:i,success:t.success,code:s,status:t.status},e)}},MICRReader.prototype.read=function(t,e){var i={type:"micrread",ignoreerror:t,font:e,timeout:this.timeout};return this.parent.send(i)},MICRReader.prototype.cleaning=function(){var t={type:"micrcleaning",timeout:this.timeout};return this.parent.send(t)},MICRReader.prototype.cancel=function(){return this.parent.send({type:"micrcancel"})},MICRReader.prototype.fireOnReceive=function(t,e){if(null!=this.onreceive&&null!=t){var i="";switch(t.eventtype){case"micrread":i="read";break;case"micrcleaning":i="cleaning";break;case"micrcancel":i="cancel"}var s=t.code;"EX_ENPC_TIMEOUT"==s&&(s="ERROR_DEVICE_BUSY"),this.onreceive({eventtype:i,success:t.success,code:s,status:t.status,data:t.data},e)}},HybridPrinter2.prototype.init=function(t){this.deviceID=t,this.ReceiptPrinter=new ReceiptPrinter(this),this.SlipPrinter2=new SlipPrinter2(this),this.ValidationPrinter=new ValidationPrinter(this),this.EndorsePrinter2=new EndorsePrinter2(this),this.MICRReader2=new MICRReader2(this),this.currentPrinter=this.ReceiptPrinter,this.ReceiptPrinter.onstatuschange=function(t){null!=this.parent.onstatuschange&&this.parent.onstatuschange(t)},this.ReceiptPrinter.ononline=function(){null!=this.parent.ononline&&this.parent.ononline()},this.ReceiptPrinter.onoffline=function(){null!=this.parent.onoffline&&this.parent.onoffline()},this.ReceiptPrinter.onpoweroff=function(){null!=this.parent.onpoweroff&&this.parent.onpoweroff()},this.ReceiptPrinter.oncoveropen=function(){null!=this.parent.oncoveropen&&this.parent.oncoveropen()},this.ReceiptPrinter.oncoverok=function(){null!=this.parent.oncoverok&&this.parent.oncoverok()},this.ReceiptPrinter.onpaperok=function(){null!=this.parent.onpaperok&&this.parent.onpaperok()},this.ReceiptPrinter.onpapernearend=function(){null!=this.parent.onpapernearend&&this.parent.onpapernearend()},this.ReceiptPrinter.onpaperend=function(){null!=this.parent.onpaperend&&this.parent.onpaperend()},this.ReceiptPrinter.ondrawerclosed=function(){null!=this.parent.ondrawerclosed&&this.parent.ondrawerclosed()},this.ReceiptPrinter.ondraweropen=function(){this.parent.ondraweropen!=undefined&&this.parent.ondraweropen()},this.ReceiptPrinter.onreceive=function(t,e){this.parent.fireOnReceive(t,e)},this.SlipPrinter2.onreceive=function(t,e){this.parent.fireOnReceive(t,e)},this.EndorsePrinter2.onreceive=function(t,e){this.parent.fireOnReceive(t,e)},this.ValidationPrinter.onreceive=function(t,e){this.parent.fireOnReceive(t,e)},this.MICRReader2.onreceive=function(t,e){this.parent.fireOnReceive(t,e)}},HybridPrinter2.prototype.setConnectionObject=function(t){this.connectionObj=t,this.ReceiptPrinter.setConnectionObject(this.connectionObj)},HybridPrinter2.prototype.isValidFunction=function(t,e){var i=!1,s=0;if(0!=e.length)for(s=0;s<e.length;s++)if(t==e[s]){i=!0;break}return i},HybridPrinter2.prototype.addText=function(t){return this.currentPrinter.addText.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextLang=function(t){return this.currentPrinter.addTextLang.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextAlign=function(t){return this.currentPrinter.addTextAlign.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextRotate=function(t){return this.currentPrinter.addTextRotate.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextLineSpace=function(t){return this.currentPrinter.addTextLineSpace.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextFont=function(t){return this.currentPrinter.addTextFont.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextSmooth=function(t){return this.currentPrinter.addTextSmooth.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextDouble=function(t,e){return this.currentPrinter.addTextDouble.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextSize=function(t,e){return this.currentPrinter.addTextSize.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextStyle=function(t,e,i,s){return this.currentPrinter.addTextStyle.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextPosition=function(t){return this.currentPrinter.addTextPosition.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addTextVPosition=function(t){return this.currentPrinter.addTextVPosition.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addFeedUnit=function(t){return this.currentPrinter.addFeedUnit.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addFeedLine=function(t){return this.currentPrinter.addFeedLine.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addFeed=function(){return this.currentPrinter.addFeed.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addFeedPosition=function(t){return this.currentPrinter.addFeedPosition.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addImage=function(t,e,i,s,n,r,a){return this.currentPrinter.halftone=this.halftone,this.currentPrinter.brightness=this.brightness,this.currentPrinter.addImage.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addLogo=function(t,e){return this.currentPrinter.addLogo.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addBarcode=function(t,e,i,s,n,r){return this.currentPrinter.addBarcode.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addSymbol=function(t,e,i,s,n,r){return this.currentPrinter.addSymbol.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addHLine=function(t,e,i){return this.currentPrinter.addHLine.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addVLineBegin=function(t,e){return this.currentPrinter.addVLineBegin.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addVLineEnd=function(t,e){return this.currentPrinter.addVLineEnd.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageBegin=function(){return this.currentPrinter.addPageBegin.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageEnd=function(){return this.currentPrinter.addPageEnd.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageArea=function(t,e,i,s){return this.currentPrinter.addPageArea.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageDirection=function(t){return this.currentPrinter.addPageDirection.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPagePosition=function(t,e){return this.currentPrinter.addPagePosition.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageLine=function(t,e,i,s,n){return this.currentPrinter.addPageLine.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addPageRectangle=function(t,e,i,s,n){return this.currentPrinter.addPageRectangle.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addCut=function(t){return this.ReceiptPrinter.addCut.apply(this.ReceiptPrinter,arguments),this},HybridPrinter2.prototype.addPulse=function(t,e){return this.currentPrinter.addPulse.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addSound=function(t,e,i){return this.currentPrinter.addSound.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.addLayout=function(t,e,i,s,n,r,a){return this.ReceiptPrinter.addLayout.apply(this.ReceiptPrinter,arguments),this},HybridPrinter2.prototype.addRecovery=function(){return this.ReceiptPrinter.addRecovery.apply(this.ReceiptPrinter,arguments),this},HybridPrinter2.prototype.addReset=function(){return this.ReceiptPrinter.addReset.apply(this.ReceiptPrinter,arguments),this},HybridPrinter2.prototype.addCommand=function(t){return this.currentPrinter.addCommand.apply(this.currentPrinter,arguments),this},HybridPrinter2.prototype.recover=function(){return this.ReceiptPrinter.recover.apply(this.ReceiptPrinter,arguments),this},HybridPrinter2.prototype.reset=function(){this.ReceiptPrinter.force=this.force;var t=this.ReceiptPrinter.reset.apply(this.ReceiptPrinter,arguments);return this.force=!1,t},HybridPrinter2.prototype.setMessage=function(t){this.currentPrinter.message=t},HybridPrinter2.prototype.getMessage=function(){return this.currentPrinter.message},HybridPrinter2.prototype.startMonitor=function(){var t=this.interval;return("number"!=typeof this.interval||t<1e3||6e3<t)&&(t=3e3),this.ReceiptPrinter.interval=t,this.ReceiptPrinter.startMonitor()},HybridPrinter2.prototype.stopMonitor=function(){return this.ReceiptPrinter.stopMonitor()},HybridPrinter2.prototype.lock=function(){return this.send({type:"lock"})},HybridPrinter2.prototype.unlock=function(){return this.send({type:"unlock"})},HybridPrinter2.prototype.selectPaperType=function(t){if(1!=this.isValidFunction(t,[this.PAPERTYPE_RECEIPT,this.PAPERTYPE_SLIP,this.PAPERTYPE_ENDORSE,this.PAPERTYPE_VALIDATION]))throw new Error('Property "paperType" is invalid');switch(t){case this.PAPERTYPE_RECEIPT:this.currentPrinter=this.ReceiptPrinter;break;case this.PAPERTYPE_SLIP:this.currentPrinter=this.SlipPrinter2;break;case this.PAPERTYPE_ENDORSE:this.currentPrinter=this.EndorsePrinter2;break;case this.PAPERTYPE_VALIDATION:this.currentPrinter=this.ValidationPrinter;break;default:this.currentPrinter=this.ReceiptPrinter}return this.paperType=t,this},HybridPrinter2.prototype.waitInsertion=function(t){if(1!=this.isValidFunction(this.paperType,[this.PAPERTYPE_SLIP,this.PAPERTYPE_ENDORSE,this.PAPERTYPE_VALIDATION]))throw new Error('Property "paperType" is invalid');this.currentPrinter.waitTime=this.waitTime;var e=this.currentPrinter.waitInsertion.apply(this.currentPrinter,arguments);return e},HybridPrinter2.prototype.cancelInsertion=function(){var t=null;if(this.isMicrMode)t=this.MICRReader2.cancel.apply(this.MICRReader2,arguments);else{if(1!=this.isValidFunction(this.paperType,[this.PAPERTYPE_SLIP,this.PAPERTYPE_ENDORSE,this.PAPERTYPE_VALIDATION]))throw new Error('Property "paperType" is invalid');t=this.currentPrinter.cancel.apply(this.currentPrinter,arguments)}return t},HybridPrinter2.prototype.ejectPaper=function(){return this.send({type:"eject"})},HybridPrinter2.prototype.sendData=function(t){this.currentPrinter.isCrypto=this.isCrypto,this.currentPrinter.timeout="number"!=typeof t||t<1||t>1e6?0:t,this.EndorsePrinter2.enable40cplmode(this.enable40cplMode),this.currentPrinter.force=this.force;var e=this.currentPrinter.send();return this.force=!1,e},HybridPrinter2.prototype.print=function(t,e,i,s){return this.ReceiptPrinter.timeout="number"!=typeof s||s<1||s>1e6?0:s,this.ReceiptPrinter.print.apply(this.ReceiptPrinter,[t,e,i]),this},HybridPrinter2.prototype.readMicrData=function(t,e,i){var s=t,n=e;return void 0===t&&(s=!0),void 0===e&&(n=this.FONT_E13B),this.MICRReader2.timeout=i,this.MICRReader2.waitTime=this.waitTime,this.MICRReader2.read.apply(this.MICRReader2,[s,n]),this.isMicrMode=!0,this},HybridPrinter2.prototype.cleanMicrReader=function(t){return this.MICRReader2.timeout=t,this.MICRReader2.cleaning.apply(this.MICRReader2,[]),this.isMicrMode=!0,this},HybridPrinter2.prototype.client_onreceive=function(t,e){switch(t.eventtype){case"slipprint2":case"slipcancel":case"slipwaitinsertion":this.SlipPrinter2.fireOnReceive(t,e);break;case"endorseprint2":case"endorsecancel":case"endorsewaitinsertion":this.EndorsePrinter2.fireOnReceive(t,e);break;case"validationprint2":case"validationcancel":case"validationwaitinsertion":this.ValidationPrinter.fireOnReceive(t,e);break;case"micrread":case"micrcleaning":case"micrcancel":this.MICRReader2.fireOnReceive(t,e);break;case"print":var i=t;i.eventtype=this.ReceiptPrinter.methodName,this.fireOnReceive(i,e);break;default:this.fireOnReceive(t,e)}},HybridPrinter2.prototype.client_onxmlresult=function(t,e){this.ReceiptPrinter.fireOnReceive(t,e)},HybridPrinter2.prototype.fireOnReceive=function(t,e){if(typeof this.onreceive!=undefined&&null!=t){var i=t.eventtype,s=t.success,n=t.code,r=t.status,a=t.data;switch(t.eventtype){case"send":i="sendData",n==this.SUCCESS&&(this.isMicrMode=!1);break;case"waitinsertion":i="waitInsertion",n==this.SUCCESS&&(this.isMicrMode=!1);break;case"read":i="readMicrData",n==this.SUCCESS&&(this.isMicrMode=!0);break;case"cleaning":i="cleanMicrReader",n==this.SUCCESS&&(this.isMicrMode=!0);break;case"cancel":i="cancelInsertion";break;case"eject":i="ejectPaper",n==this.SUCCESS&&(this.isMicrMode=!1)}switch(n){case"EX_ENPC_TIMEOUT":n="ERROR_DEVICE_BUSY";break;case"CANCEL":this.isMicrMode=!1}this.onreceive({method:i,success:s,code:n,status:r,data:a},e)}},HybridPrinter2.prototype.callEvent=function(t,e){var i=e;return i.type=t,this.send(i)},HybridPrinter2.prototype.send=function(t){var e=MessageFactory.getDeviceDataMessage(this.deviceID,t,this.isCrypto),i=-1;try{this.connectionObj.emit(e),i=e.sequence}catch(s){}return i},SlipPrinter2.prototype=new SlipPrinter,SlipPrinter2.prototype.timeout=6e4,SlipPrinter2.prototype.waitTime=500,SlipPrinter2.prototype.send=function(){var t=null;t=arguments.length<1?this.toString():arguments[1],("number"!=typeof this.timeout||this.timeout<5e3||this.timeout>1e6)&&(this.timeout=1e4);var e={type:"slipprint2",timeout:this.timeout,printdata:t},i=this.parent.send(e);return this.setXmlString(""),i},SlipPrinter2.prototype.setXmlString=function(t){this.message=t},SlipPrinter2.prototype.getXmlString=function(){return this.message},SlipPrinter2.prototype.waitInsertion=function(t){this.timeout="number"!=typeof t||t<5e3||t>9e5?6e4:t;var e=this.waitTime;("number"!=typeof this.waitTime||this.waitTime<0||this.waitTime>6400)&&(e=500);var i={type:"slipwaitinsertion",timeout:this.timeout,waittime:e};return this.parent.send(i)},SlipPrinter2.prototype.cancel=function(){return this.parent.send({type:"slipcancel"})},SlipPrinter2.prototype.fireOnReceive=function(t,e){if(null!=this.onreceive&&null!=t){var i="";switch(t.eventtype){case"slipprint2":i="send";break;case"slipcancel":i="cancel";break;case"slipwaitinsertion":i="waitinsertion"}this.onreceive({eventtype:i,success:t.success,code:t.code,status:t.status},e)}},EndorsePrinter2.prototype=new EndorsePrinter,EndorsePrinter2.prototype.timeout=6e4,EndorsePrinter2.prototype.waitTime=500,EndorsePrinter2.prototype.send=function(){var t=null;t=arguments.length<1?this.toString():arguments[1],("number"!=typeof this.timeout||this.timeout<6e4||this.timeout>9e5)&&(this.timeout=6e4);var e={type:"endorseprint2",is40cplmode:this.mode40cpl,timeout:this.timeout,printdata:t},i=this.parent.send(e);return this.setXmlString(""),i},EndorsePrinter2.prototype.setXmlString=function(t){this.message=t},EndorsePrinter2.prototype.getXmlString=function(){return this.message},EndorsePrinter2.prototype.waitInsertion=function(t){this.timeout="number"!=typeof t||t<5e3||t>9e5?6e4:t;var e=this.waitTime;("number"!=typeof this.waitTime||this.waitTime<0||this.waitTime>6400)&&(e=500);var i={type:"endorsewaitinsertion",timeout:this.timeout,waittime:e};return this.parent.send(i)},EndorsePrinter2.prototype.cancel=function(){return this.parent.send({type:"endorsecancel"})},EndorsePrinter2.prototype.enable40cplmode=function(t){this.mode40cpl=t},EndorsePrinter2.prototype.fireOnReceive=function(t,e){if(null!=this.onreceive&&null!=t){var i="";switch(t.eventtype){case"endorseprint2":i="send";break;case"endorsecancel":i="cancel";break;case"endorsewaitinsertion":i="waitinsertion"}this.onreceive({eventtype:i,success:t.success,code:t.code,status:t.status},e)}},MICRReader2.prototype=new MICRReader,MICRReader2.prototype.waitTime=500,MICRReader2.prototype.read=function(t,e){("number"!=typeof this.timeout||this.timeout<5e3||this.timeout>9e5)&&(this.timeout=6e4);var i=this.waitTime;("number"!=typeof this.waitTime||this.waitTime<0||this.waitTime>6400)&&(i=500);var s={type:"micrread",ignoreerror:t,font:e,timeout:this.timeout,waittime:i};return this.parent.send(s)},MICRReader2.prototype.cleaning=function(){var t=this.waitTime;this.timeout=6e4,("number"!=typeof this.waitTime||this.waitTime<0||this.waitTime>6400)&&(t=500);var e={type:"micrcleaning",timeout:this.timeout,waittime:t};return this.parent.send(e)},ValidationPrinter.prototype=new ePOSBuilder,ValidationPrinter.prototype.timeout=1e4,ValidationPrinter.prototype.waitTime=500,ValidationPrinter.prototype.send=function(){var t=null;t=arguments.length<1?this.toString():arguments[1],("number"!=typeof this.timeout||this.timeout<5e3||this.timeout>1e6)&&(this.timeout=1e4);var e={type:"validationprint2",timeout:this.timeout,printdata:t},i=this.parent.send(e);return this.setXmlString(""),i},ValidationPrinter.prototype.setXmlString=function(t){this.message=t},ValidationPrinter.prototype.getXmlString=function(){return this.message},ValidationPrinter.prototype.waitInsertion=function(t){this.timeout="number"!=typeof t||t<5e3||t>9e5?6e4:t;var e=this.waitTime;("number"!=typeof this.waitTime||this.waitTime<0||this.waitTime>6400)&&(e=500);var i={type:"validationwaitinsertion",timeout:this.timeout,waittime:e};return this.parent.send(i)},ValidationPrinter.prototype.cancel=function(){return this.parent.send({type:"validationcancel"})},ValidationPrinter.prototype.fireOnReceive=function(t,e){if(null!=this.onreceive&&null!=t){var i="";switch(t.eventtype){case"validationprint2":i="send";break;case"validationcancel":i="cancel";break;case"validationwaitinsertion":i="waitinsertion"}this.onreceive({eventtype:i,success:t.success,code:t.code,status:t.status},e)}},Scanner.prototype={setConnectionObject:function(t){this.connectionObj=t},client_ondata:function(t){try{if(null==this.ondata)return;this.ondata(t)}catch(e){}},client_onbinarydata:function(t){try{if(null==this.onbinarydata)return;this.onbinarydata(t)}catch(e){}},client_setbinarymode:function(t){try{if(null==this.onbinarymode)return;this.onbinarymode(t)}catch(e){}},setBinaryMode:function(t){var e={type:"setbinarymode",binarymode:1==t?"true":"false"},i=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),s=-1;try{this.connectionObj.emit(i),s=i.sequence}catch(n){}return s},callEvent:function(t,e){var i=e;i.type=t;var s=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),n=-1;try{this.connectionObj.emit(s),n=s.sequence}catch(r){}return n}},SimpleSerial.prototype={setConnectionObject:function(t){this.connectionObj=t},sendCommand:function(t){var e={type:"sendcommand",command:toHexBinary(t)},i=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),s=-1;try{this.connectionObj.emit(i),s=i.sequence}catch(n){}return s},client_oncommandreply:function(t){try{if(null==this.oncommandreply)return;var e=t.data;e=e.replace(/[0-9a-fA-F]{2}/g,(function(t){var e=parseInt(t,16);return String.fromCharCode(e)})),t.data=e,this.oncommandreply(t)}catch(i){}}},GermanyFiscalElement.prototype={setConnectionObject:function(t){this.connectionObj=t},operate:function(t,e){var i={type:"operate",timeout:e,requestdata:t},s=MessageFactory.getDeviceDataMessage(this.deviceID,i,this.isCrypto),n=-1;try{this.connectionObj.emit(s),n=s.sequence}catch(r){throw r}return n},client_operateresult:function(t){if(null!=this.ongfereceive){if("Base64-encoded"==t.resultformat)try{t.resultdata=window.atob(t.resultdata);for(var e=new Uint8Array(t.resultdata.length),i=0;i<t.resultdata.length;i++)e[i]=t.resultdata.charCodeAt(i);var s=new Zlib.Inflate(e).decompress();t.resultdata=[];for(var n=0;n<s.length;n++)t.resultdata=t.resultdata+String.fromCharCode(s[n])}catch(r){return void(this.onerror&&this.onerror(r))}try{this.ongfereceive(this.getResultObject(t))}catch(r){this.onerror&&this.onerror(r)}}},getResultObject:function(t){return{success:t.success,code:t.code,resultdata:t.resultdata}},callEvent:function(t,e){var i=MessageFactory.getDeviceDataMessage(this.deviceID,e,this.isCrypto),s=-1;try{this.connectionObj.emit(i),s=i.sequence}catch(n){}return s}},Ofsc.prototype={setConnectionObject:function(t){this.connectionObj=t},send:function(t,e,i,s){this.callback=s;try{if(this.connectionObj.isUsableDeviceIF()){var n={type:"print",timeout:e,printdata:t},r=MessageFactory.getServiceMessage(this.SERVICE_ID,i,n);this.connectionObj.emit(r)}}catch(a){return}},notify:function(t){var e=null;e="1"==t.isCrypto?MessageFactory.decrypt(t.data):t.data,null!=this.callback&&this.callback(e.resultdata)},onxmlresult:function(t){null!=this.callback&&this.callback(t)}},CookieIO.prototype={writeId:function(t){var e=location.pathname;"/"==e.slice(-1)&&(e+="index.html");var i=location.hostname,s=this.getExpiredDate();document.cookie=this.KEY+"_"+i+e+"="+escape(t)+"; expires="+s},readId:function(){var t="",e=document.cookie+";",i=location.pathname;"/"==i.slice(-1)&&(i+="index.html");var s=location.hostname,n=this.KEY+"_"+s+i+"=",r=e.indexOf(n);if(-1!=r){r+=n.length;var a=e.indexOf(";",r);t=unescape(e.substring(r,a))}return t},getExpiredDate:function(){var t=new Date,e=t.getTime();return t.setTime(e+6e4*this.EXPIRE_MINUTES),t.toUTCString()}},DeviceObjElementMap.prototype={add:function(t){this.elementList.push(t)},get:function(t){for(var e=null,i=0;i<this.elementList.length;i++)if(this.elementList[i].deviceId==t){e=this.elementList[i];break}return e},getByObj:function(t){for(var e=null,i=0;i<this.elementList.length;i++)if(this.elementList[i].deviceObject==t){e=this.elementList[i];break}return e},remove:function(t){for(var e=0;e<this.elementList.length;e++)if(this.elementList[e].deviceId==t){this.elementList.splice(e,1);break}},removeAll:function(){this.elementList=[]},getElementList:function(){return this.elementList}},ePOSDevice.prototype={connect:function(t,e,i,s){this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)==this.conectionObj.DISCONNECT&&this.conectionObj.status(this.conectionObj.IF_EPOSPRINT)==this.conectionObj.DISCONNECT||this.disconnect(),this.connectStartTime=(new Date).getTime();var n=e==this.IFPORT_EPOSDEVICE?"http":"https";this.conectionObj.setAddress(n,t,e),this.conectionObj.registCallback(i),arguments.length>=4?this.eposprint=s.eposprint:this.eposprint=!1;var r=this;if(this.eposprint){var a=this.conectionObj;this.conectionObj.probeWebServiceIF((function(t){var e=r.ERROR_PARAMETER;a.isUsablePrintIF()&&(e=r.RESULT_OK),i(e)}))}else this.connectBySocketIo(this.CONNECT_TIMEOUT,n)},isConnected:function(){var t=!1,e=!1;switch(this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)){case this.conectionObj.CONNECT:case this.conectionObj.RECONNECTING:t=!0;break;case this.conectionObj.DISCONNECT:}return this.conectionObj.status(this.conectionObj.IF_EPOSPRINT)==this.conectionObj.CONNECT&&(e=!0),t|e},disconnect:function(){var t=MessageFactory.getDisconnectMessage(this.connectionId);this.conectionObj.emit(t),this.cleanup()},createDevice:function(t,e,i,s){try{if(!this.isConnected())throw new Error(this.ERROR_SYSTEM);if(null!=this.devObjElmMap.get(t))throw new Error(this.ERROR_DEVICE_IN_USE);if(!this.devObjSelector.isSelectable(e))throw new Error(this.ERROR_DEVICE_NOT_FOUND);var n=!1,r=!1;"boolean"==typeof i?n=i:("boolean"==typeof i.crypto&&(n=i.crypto),"boolean"==typeof i.buffer&&(r=i.buffer)),e==this.DEVICE_TYPE_DT&&(n=!0,t="local_dt");var a=this.devObjSelector.select(t,e,i.driver,n,this);a.setConnectionObject(this.conectionObj);var o=new DeviceObjElement(t,n,a,s);if(this.devObjElmMap.add(o),this.conectionObj.isUsableDeviceIF()){var l=MessageFactory.getOpenDeviceMessage(t,e,n,r);this.conectionObj.emit(l)}else{var c=this;this.checkEposPrintService(t,e,(function(t){t==c.RESULT_OK?s(a,c.RESULT_OK):s(null,c.ERROR_DEVICE_NOT_FOUND)}))}}catch(d){var h=d.message;null!=h&&""!=h||(h=this.ERROR_DEVICE_OPEN),null!=s&&s(null,h)}},deleteDevice:function(t,e){try{var i=this.devObjElmMap.getByObj(t);if(null==i)throw new Error(this.ERROR_DEVICE_NOT_OPEN);if(this.conectionObj.isUsableDeviceIF()){i.callback=e;var s=MessageFactory.getCloseDeviceMessage(i.deviceId);this.conectionObj.emit(s)}else{try{t.finalize()}catch(r){}this.devObjElmMap.remove(i.deviceId),e(this.RESULT_OK)}}catch(r){var n=r.message;null!=n&&""!=n||(n=this.ERROR_DEVICE_CLOSE),null!=e&&e(n)}},getAdmin:function(){return this.admin},getLocation:function(){return this.location},sendOfscXml:function(t,e,i,s){this.ofsc.send(t,e,i,s)},getCommBoxManager:function(){return this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)!=this.conectionObj.CONNECT?null:this.commBoxManager},cleanup:function(){0!=this.waitRetryConnectId&&(clearTimeout(this.waitRetryConnectId),this.waitRetryConnectId=0),this.connectStartTime=0,this.gbox.stock(this.socket),this.gbox.dispose();var t=this.devObjElmMap.getElementList();t.forEach((function(t){try{t.deviceObject.finalize()}catch(e){}})),t=null,this.devObjElmMap.removeAll(),null==this.ondisconnect||this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)==this.conectionObj.DISCONNECT&&this.conectionObj.status(this.conectionObj.IF_EPOSPRINT)==this.conectionObj.DISCONNECT||this.ondisconnect(),this.cookieIo.writeId(""),this.conectionObj.changeStatus(this.conectionObj.IF_ALL,this.conectionObj.DISCONNECT),this.socket=null,this.conectionObj.setSocket(null),this.connectionId=null,this.conectionObj.setAddress("","",""),null!=this.reconnectTimerId&&clearInterval(this.reconnectTimerId),this.reconnectTimerId=null,this.reconnectTryCount=0,this.admin="",this.location="",this.recievedDataId=0,this.eposprint=!1},connectBySocketIo:function(t){var e=this.conectionObj,i=e.getSocketIoURL();this.socket=io.connect(i,{reconnect:!1,"connect timeout":t,"force new connection":!0}),this.conectionObj.setSocket(this.socket);var s=this;this.socket.on("connect",(function(t){try{s.gbox.dispose()}catch(e){}})),this.socket.on("close",(function(){e.changeStatus(e.IF_EPOSDEVICE,tselfofProb.DISCONNECT)})),this.socket.on("disconnect",(function(t){try{if(e.status(e.IF_EPOSDEVICE)==e.RECONNECTING)return;""==s.cookieIo.readId()&&null==s.connectionId?s.cleanup():s.startReconnectAction()}catch(i){}})),this.socket.on("error",(function(){try{e.probeWebServiceIF((function(t){e.isUsablePrintIF()?(s.eposprint=!0,e.registIFAccessResult(e.IF_EPOSDEVICE,e.ACCESS_NONE)):(e.changeStatus(e.IF_EPOSDEVICE,e.DISCONNECT),e.registIFAccessResult(e.IF_EPOSDEVICE,e.ACCESS_TIMEOUT))}))}catch(t){}})),this.socket.on("connect_failed",(function(){try{e.probeWebServiceIF((function(t){e.isUsablePrintIF()?(s.eposprint=!0,e.registIFAccessResult(e.IF_EPOSDEVICE,e.ACCESS_NONE)):(e.changeStatus(e.IF_EPOSDEVICE,e.DISCONNECT),e.registIFAccessResult(e.IF_EPOSDEVICE,e.ACCESS_TIMEOUT))}))}catch(t){}})),this.socket.on("message",(function(t){try{var e=MessageFactory.parseRequestMessage(t);switch(""!=e.data_id&&(s.recievedDataId=e.data_id),e.request){case e.REQUEST.CONNECT:s.procConnect(e);break;case e.REQUEST.PUBKEY:s.procPubkey(e);break;case e.REQUEST.ADMININFO:s.procAdminInfo(e);break;case e.REQUEST.RECONNECT:s.procReconnect(e);break;case e.REQUEST.DISCONNECT:s.procDisconnect(e);break;case e.REQUEST.OPENDEVICE:s.procOpenDevice(e);break;case e.REQUEST.CLOSEDEVICE:s.procCloseDevice(e);break;case e.REQUEST.DEVICEDATA:s.procDeviceData(e);break;case e.REQUEST.SERVICEDATA:s.procServiceData(e);break;case e.REQUEST.OPENCOMMBOX:s.procOpenCommBox(e);break;case e.REQUEST.CLOSECOMMBOX:s.procCloseCommBox(e);break;case e.REQUEST.COMMDATA:s.procCommBoxData(e);break;case e.REQUEST.ERROR:s.procError(e);break;default:return}}catch(i){}}))},procConnect:function(t){try{null!=this.reconnectTimerId&&(clearInterval(this.reconnectTimerId),this.reconnectTimerId=null);var e=null,i=this.cookieIo.readId();t.data.protocol_version<2?(e=MessageFactory.getPubkeyMessage(t.data.prime,t.data.key),this.conectionObj.emit(e)):null!=this.connectionId?(e=MessageFactory.getReconnectMessage(this.connectionId,t.data.client_id,this.recievedDataId),this.conectionObj.emit(e)):""!=i?(e=MessageFactory.getDisconnectMessage(i),this.conectionObj.emit(e),e=MessageFactory.getPubkeyMessage(t.data.prime,t.data.key),this.conectionObj.emit(e)):(e=MessageFactory.getPubkeyMessage(t.data.prime,t.data.key),this.conectionObj.emit(e)),this.cookieIo.writeId(t.data.client_id),this.connectionId=t.data.client_id}catch(s){this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_ERROR),this.cleanup()}},procPubkey:function(t){try{if("SHARED_KEY_MISMATCH_ERROR"==t.code){var e=(new Date).getTime(),i=0;if(0!=this.connectStartTime)if((i=e-this.connectStartTime)<this.CONNECT_TIMEOUT){var s=this;this.gbox.stock(this.socket),this.connectionId=null,this.waitRetryConnectId=setTimeout((function(){s.connectBySocketIo(s.CONNECT_TIMEOUT-i)}),100)}else this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_TIMEOUT),this.cleanup();else this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_TIMEOUT),this.cleanup()}else if("PARAM_ERROR"==t.code)this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_ERROR),this.cleanup();else{var n=MessageFactory.getAdminInfoMessage();this.conectionObj.emit(n)}}catch(r){this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_ERROR),this.cleanup()}},procAdminInfo:function(t){this.eposprint||(t.code==this.RESULT_OK?(this.admin=t.data.admin_name,this.location=t.data.location,this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_OK)):this.conectionObj.registIFAccessResult(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.ACCESS_ERROR))},procReconnect:function(t){this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)==this.conectionObj.RECONNECTING&&(t.code==this.RESULT_OK?(this.conectionObj.changeStatus(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.CONNECT),null!=this.onreconnect&&this.onreconnect()):this.cleanup())},procDisconnect:function(t){},procOpenDevice:function(t){var e=t.deviceId;try{var i=this.devObjElmMap.get(e);t.code==this.RESULT_OK?null!=i.callback&&i.callback(i.deviceObject,t.code):(null!=i.callback&&i.callback(null,t.code),this.devObjElmMap.remove(e))}catch(s){null!=this.onerror&&this.onerror("0",e,this.ERROR_SYSTEM,null)}},procCloseDevice:function(t){var e=t.deviceId;try{if(t.code==this.RESULT_OK){var i=this.devObjElmMap.get(e);null!=i.callback&&i.callback(t.code);try{i.deviceObject.finalize()}catch(s){}this.devObjElmMap.remove(e)}}catch(s){null!=this.onerror&&this.onerror("0",e,this.ERROR_SYSTEM,null)}},procDeviceData:function(eposmsg){var deviceId=eposmsg.deviceId,sequence=eposmsg.sequence,data=eposmsg.data;try{var devObjElm=this.devObjElmMap.get(deviceId);devObjElm.isCrypto&&(data=MessageFactory.decrypt(data));var deviceObject=devObjElm.deviceObject,method="client_"+data.type;try{deviceObject instanceof OtherPeripheral?deviceObject.client_onreceive(data,sequence):eval("deviceObject."+method+"(data, sequence)")}catch(e){eval("deviceObject."+data.type+"(data, sequence)")}}catch(e){null!=this.onerror&&this.onerror(sequence,deviceId,this.ERROR_SYSTEM,null)}},procServiceData:function(t){try{switch(t.serviceId){case"OFSC":this.ofsc.notify(t)}}catch(e){null!=this.onerror&&this.onerror(t.sequence,t.serviceId,this.ERROR_SYSTEM,null)}},procOpenCommBox:function(t){var e=t.sequence;try{this.commBoxManager.client_opencommbox(t.data,e)}catch(i){null!=this.onerror&&this.onerror(e,"",this.ERROR_SYSTEM,null)}},procCloseCommBox:function(t){var e=t.sequence;try{this.commBoxManager.client_closecommbox(t.data,e)}catch(i){null!=this.onerror&&this.onerror(e,"",this.ERROR_SYSTEM,null)}},procCommBoxData:function(t){var e=t.sequence;try{this.commBoxManager.executeCommDataCallback(t.data,e)}catch(i){null!=this.onerror&&this.onerror(e,"",this.ERROR_SYSTEM,null)}},procError:function(t){try{null!=this.onerror&&this.onerror(t.sequence,t.deviceId,t.code,t.data)}catch(e){}},startReconnectAction:function(){if(this.conectionObj.status(this.conectionObj.IF_EPOSDEVICE)!=this.conectionObj.RECONNECTING){this.conectionObj.changeStatus(this.conectionObj.IF_EPOSDEVICE,this.conectionObj.RECONNECTING),this.reconnectTryCount=0;var t=this;this.reconnectTimerId=setInterval((function(){if(null!=t.socket&&t.gbox.stock(t.socket),t.reconnectTryCount==t.MAX_RECONNECT_RETRY)return clearInterval(t.reconnectTimerId),void t.cleanup();t.conectionObj.status(t.conectionObj.IF_EPOSDEVICE)==t.conectionObj.RECONNECTING&&t.connectBySocketIo(t.RECONNECT_TIMEOUT),t.reconnectTryCount++}),t.RECONNECT_TIMEOUT),0==this.reconnectTryCount&&null!=this.onreconnecting&&this.onreconnecting()}},checkEposPrintService:function(t,e,i){var s,n,r=null,a=this.conectionObj.getAddressWithProtocol()+"/cgi-bin/epos/service.cgi?devid="+t+"&timeout=10000",o=this.conectionObj.getAddressWithProtocol()+"/cgi-bin/eposDisp/service.cgi?devid="+t+"&timeout=10000",l=null,c=null;if(e==this.DEVICE_TYPE_DISPLAY?(r=o,l='<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><epos-display xmlns="http://www.epson-pos.com/schemas/2012/09/epos-display"></epos-display></s:Body></s:Envelope>'):(r=a,l='<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><epos-print xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print"></epos-print></s:Body></s:Envelope>'),window.XDomainRequest)try{(c=new XDomainRequest).open("POST",r),c.onload=function(){/response/.test(c.responseText)?(n=/success\s*=\s*"\s*(1|true)\s*"/.test(c.responseText),i(n?"OK":"ERROR_PARAMETER")):i("ERROR_PARAMETER")},c.onerror=function(){i("ERROR_PARAMETER")},c.ontimeout=function(){i("ERROR_TIMEOUT")},c.onprogress=function(){},c.send(l)}catch(h){i("ERROR_PARAMETER")}else try{(c=new XMLHttpRequest).open("POST",r,!0),c.setRequestHeader("Content-Type","text/xml; charset=utf-8"),c.setRequestHeader("If-Modified-Since","Thu, 01 Jun 1970 00:00:00 GMT"),c.setRequestHeader("SOAPAction",'""'),c.onreadystatechange=function(){if(4==c.readyState)if(clearTimeout(s),200==c.status&&c.responseXML){var t=c.responseXML.getElementsByTagName("response");n=!(t.length<=0)&&/^(1|true)$/.test(t[0].getAttribute("success")),i(n?"OK":"ERROR_PARAMETER")}else i("ERROR_PARAMETER")},s=setTimeout((function(){c.abort(),i("ERROR_TIMEOUT")}),5e3),c.timeout=1e4,c.send(l)}catch(h){i("ERROR_PARAMETER")}}},SocketGarbageBox.prototype={stock:function(t){if(null!=t){t.removeAllListeners("connect"),t.removeAllListeners("close"),t.removeAllListeners("disconnect"),t.removeAllListeners("error"),t.removeAllListeners("connect_failed"),t.removeAllListeners("message");var e=function(){};e.prototype=t,this.box.push(e)}},dispose:function(){for(;0<this.box.length;){var t=this.box.pop();try{t.disconnect(),delete t}catch(e){}}}},Connection.prototype.probe=function(t,e,i){var s,n=this,r=null;if(window.XDomainRequest)try{(r=new XDomainRequest).open("POST",t),r.onload=function(){i(n.OK)},r.onerror=function(){i(n.ERROR_PARAMETER)},r.ontimeout=function(){i(n.ERROR_TIMEOUT)},r.onprogress=function(){},r.send(e)}catch(a){i(this.ERROR_PARAMETER)}else try{(r=new XMLHttpRequest).open("POST",t,!0),r.setRequestHeader("Content-Type","text/xml; charset=utf-8"),r.setRequestHeader("If-Modified-Since","Thu, 01 Jun 1970 00:00:00 GMT"),r.setRequestHeader("SOAPAction",'""'),r.onreadystatechange=function(){4==r.readyState&&(clearTimeout(s),200==r.status?i(n.OK):i(n.ERROR_PARAMETER))},s=setTimeout((function(){r.abort(),i(n.ERROR_TIMEOUT)}),5e3),r.timeout=1e4,r.send(e)}catch(a){i(this.ERROR_PARAMETER)}},Connection.prototype.probeWebServiceIF=function(t){var e=(new Date).getTime(),i=!1,s=this,n=this.getAddressWithProtocol()+"/cgi-bin/epos/service.cgi?devid=local_printer&timeout=10000";this.probe(n,'<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><epos-print xmlns="http://www.epson-pos.com/schemas/2011/03/epos-print"></epos-print></s:Body></s:Envelope>',(function(n){var r=s.ACCESS_ERROR;n==s.OK&&(r=s.ACCESS_OK),s.registIFAccessResult(s.IF_EPOSPRINT,r),i&&t((new Date).getTime()-e),i=!i}));var r=this.getAddressWithProtocol()+"/cgi-bin/eposDisp/service.cgi?devid=local_display&timeout=10000";this.probe(r,'<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><epos-display xmlns="http://www.epson-pos.com/schemas/2012/09/epos-display"></epos-display></s:Body></s:Envelope>',(function(n){var r=s.ACCESS_ERROR;n==s.OK&&(r=s.ACCESS_OK),s.registIFAccessResult(s.IF_EPOSDISPLAY,r),i&&t((new Date).getTime()-e),i=!i}))},Connection.prototype.setSocket=function(t){this.socket_p=t},Connection.prototype.emit=function(t){try{if(null==this.socket_p)return;this.socket_p.emit("message",t.toTransmissionForm())}catch(e){throw new Error(this.ERROR_SYSTEM)}},Connection.prototype.setAddress=function(t,e,i){this.protocol_p=t,this.address_p=e,this.port_p=i,this.usableIF_p=0},Connection.prototype.getAddressWithProtocol=function(){return this.protocol_p+"://"+this.address_p},Connection.prototype.getSocketIoURL=function(){return this.getAddressWithProtocol()+":"+this.port_p},Connection.prototype.registCallback=function(t){"function"==typeof t&&(this.callback_p=t)},Connection.prototype.changeStatus=function(t,e){switch(t){case this.IF_ALL:this.dev_status_p=e,this.ws_status_p=e;break;case this.IF_EPOSDEVICE:this.dev_status_p=e;break;default:this.ws_status_p=e}},Connection.prototype.status=function(t){return t==this.IF_EPOSDEVICE?this.dev_status_p:this.ws_status_p},Connection.prototype.isUsableDeviceIF=function(){return(this.usableIF_p&this.IF_EPOSDEVICE)==this.IF_EPOSDEVICE},Connection.prototype.isUsablePrintIF=function(){return!!this.isUsableDeviceIF()||(this.usableIF_p&this.IF_EPOSPRINT)==this.IF_EPOSPRINT},Connection.prototype.isUsableDisplayIF=function(){return!!this.isUsableDeviceIF()||(this.usableIF_p&this.IF_EPOSDISPLAY)==this.IF_EPOSDISPLAY},Connection.prototype.registIFAccessResult=function(t,e){if(e==this.ACCESS_OK&&(this.changeStatus(t,this.CONNECT),this.usableIF_p|=t),t==this.IF_EPOSDEVICE){var i=this.ERROR_PARAMETER;if(this.usableIF_p&this.IF_ALL&&(i="http"==this.protocol_p?this.OK:this.SSL_CONNECT_OK),e==this.ACCESS_TIMEOUT&&(i=this.ERROR_TIMEOUT),null!=this.callback_p){try{this.callback_p(i)}catch(s){}this.callback_p=null}}},ePosCrypto.prototype={genClientKeys:function(t,e){var i=str2bigInt("2",10),s=str2bigInt(t,16),n=randBigInt(64,0);this.pubkey_c=powMod(i,n,s);for(var r=bigInt2str(powMod(str2bigInt(e,16),n,s),16).toLowerCase();r.length<192;)r="0"+r;this.secretKey=md5.bin(r)},bfEncrypt:function(t){try{var e={data:t,key:this.secretKey,mode:"cbc",round:16,iv:blowfish.mkIV()},i=blowfish.encrypt(e),s=base64.encode(i)}catch(n){return""}return s},bfDecrypt:function(t){try{var e={data:base64.decode(t),key:this.secretKey,mode:"cbc"},i=blowfish.decrypt(e)}catch(s){return""}return i}},ePosDeviceMessage.prototype={toTransmissionForm:function(){var t=null;switch(this.request){case this.REQUEST.PUBKEY:case this.REQUEST.ADMININFO:case this.REQUEST.RECONNECT:case this.REQUEST.DISCONNECT:t=[this.request,this.data];break;case this.REQUEST.OPENDEVICE:case this.REQUEST.CLOSEDEVICE:t=[this.request,this.deviceId,this.data,this.data_id];break;case this.REQUEST.DEVICEDATA:t=[this.request,this.sequence,this.deviceId,this.data,this.data_id];break;case this.REQUEST.SERVICEDATA:t=[this.request,this.sequence,this.serviceId,this.isCrypto,this.data,this.data_id];break;case this.REQUEST.OPENCOMMBOX:case this.REQUEST.CLOSECOMMBOX:case this.REQUEST.COMMDATA:t=[this.request,this.sequence,this.data,this.data_id];break;default:t=null}return t}};var MessageFactory=(sequence=0,cipher=new ePosCrypto,getNextSequence=function(){return sequence++,Number.MAX_VALUE==sequence&&(sequence=1),String(sequence)},{parseRequestMessage:function(t){var e=new ePosDeviceMessage;switch(e.request=t[0],e.request){case e.REQUEST.CONNECT:e.data=t[1];break;case e.REQUEST.PUBKEY:case e.REQUEST.ADMININFO:case e.REQUEST.RECONNECT:case e.REQUEST.DISCONNECT:e.code=t[1],e.data=t[2];break;case e.REQUEST.OPENDEVICE:case e.REQUEST.CLOSEDEVICE:e.deviceId=t[1],e.code=t[2],e.data=t[3],e.data_id=t[4];break;case e.REQUEST.DEVICEDATA:e.sequence=t[1],e.deviceId=t[2],e.data=t[3],e.data_id=t[4];break;case e.REQUEST.SERVICEDATA:e.sequence=t[1],e.serviceId=t[2],e.isCrypto=t[3],e.data=t[4],e.data_id=t[5];break;case e.REQUEST.OPENCOMMBOX:case e.REQUEST.CLOSECOMMBOX:case e.REQUEST.COMMDATA:e.sequence=t[1],e.data=t[2],e.data_id=t[3];break;case e.REQUEST.ERROR:e.sequence=t[1],e.deviceId=t[2],e.code=t[3],e.data=t[4],e.data_id=t[5];break;default:e=null}return e},getPubkeyMessage:function(t,e){var i=new ePosDeviceMessage;i.request=i.REQUEST.PUBKEY,cipher.genClientKeys(t,e);for(var s=cipher.bfEncrypt("hello"),n=bigInt2str(cipher.pubkey_c,16);n.length<192;)n="0"+n;return i.data={key:n,testData:s},i},getAdminInfoMessage:function(){var t=new ePosDeviceMessage;return t.request=t.REQUEST.ADMININFO,t.data={},t},getReconnectMessage:function(t,e,i){var s=new ePosDeviceMessage;return s.request=s.REQUEST.RECONNECT,s.data={old_client_id:t,new_client_id:e,received_id:i},s},getDisconnectMessage:function(t){var e=new ePosDeviceMessage;return e.request=e.REQUEST.DISCONNECT,e.data={client_id:t},e},getOpenDeviceMessage:function(t,e,i,s){var n=new ePosDeviceMessage,r=e;return"type_hybrid_printer2"==r&&(r="type_hybrid_printer"),n.request=n.REQUEST.OPENDEVICE,n.deviceId=t,n.data={type:r,crypto:i,buffer:s},n},getCloseDeviceMessage:function(t){var e=new ePosDeviceMessage;return e.request=e.REQUEST.CLOSEDEVICE,e.deviceId=t,e.data={},e},getDeviceDataMessage:function(t,e,i){var s=new ePosDeviceMessage;return s.request=s.REQUEST.DEVICEDATA,s.sequence=getNextSequence(),s.deviceId=t,s.data=i?cipher.bfEncrypt(JSON.stringify(e)):e,s},getServiceMessage:function(t,e,i){var s=new ePosDeviceMessage;return s.request=s.REQUEST.SERVICEDATA,s.sequence=getNextSequence(),s.serviceId=t,s.isCrypto=e,s.data=e?cipher.bfEncrypt(JSON.stringify(i)):i,s},getOpenCommBoxMessage:function(t){var e=new ePosDeviceMessage;return e.request=e.REQUEST.OPENCOMMBOX,e.sequence=getNextSequence(),e.data=t,e},getCloseCommBoxMessage:function(t){var e=new ePosDeviceMessage;return e.request=e.REQUEST.CLOSECOMMBOX,e.sequence=getNextSequence(),e.data=t,e},getCommBoxDataMessage:function(t){var e=new ePosDeviceMessage;return e.request=e.REQUEST.COMMDATA,e.sequence=getNextSequence(),e.data=t,e},decrypt:function(t){var e=cipher.bfDecrypt(t);return JSON.parse(e)}}),sequence,cipher,JSON;function ePOSDeviceConfiguration(t){this.DEVICE_GROUP_ALL="group_all",this.DEVICE_GROUP_PRINTER="group_printer",this.DEVICE_GROUP_DISPLAY="group_display",this.DEVICE_GROUP_HID="group_hid",this.DEVICE_GROUP_SERIAL="group_serial",this.DEVICE_GROUP_OTHER="group_other",this.DEVICE_TYPE_PRINTER="type_printer",this.DEVICE_TYPE_HYBRID_PRINTER="type_hybrid_printer",this.DEVICE_TYPE_DISPLAY="type_display",this.DEVICE_TYPE_KEYBOARD="type_keyboard",this.DEVICE_TYPE_SCANNER="type_scanner",this.DEVICE_TYPE_MSR="type_msr",this.DEVICE_TYPE_CASH_CHANGER="type_cash_changer",this.DEVICE_TYPE_SIMPLE_SERIAL="type_simple_serial",this.DEVICE_TYPE_CASH_DRAWER="type_cash_drawer",this.DEVICE_TYPE_PIN_PAD="type_pin_pad",this.DEVICE_TYPE_CAT="type_cat",this.DEVICE_TYPE_SMARTCARD_RW="type_smartcard_rw",this.CGI_PATH="/epson_eposdevice/getDeviceList.cgi",this.RESULT_OK="OK",this.UNKNOWN="unknown",this.ONLINE="online",this.OFFLINE="offline",this.INTERVAL=500,this.TIMEOUT=6e4,this.address=t,this.cb=null,this.message=null,this.WEBSOCKET_PORT=8008,this.SSLWEBSOCKET_PORT=8043}if(ePOSDeviceConfiguration.prototype.getRegisterdDevices=function(t,e){this.cb=e;var i=this,s=null,n="?group="+t,r=window.location.protocol+"//"+this.address+this.CGI_PATH+n;window.XDomainRequest?((s=new XDomainRequest).open("GET",r),s.onload=function(){i.message=i.RESULT_OK;var t=JSON.parse(s.responseText);i.checkDevice(t,(function(e){for(var s in e)for(var n=0;n<t.length;n++)t[n].deviceId==s&&(t[n].status=e[s]);null!=i.cb&&(i.cb(i,t),i.cb=null)}))},s.onerror=function(){i.message="Failed to get device list.",null!=i.cb&&(i.cb(i,null),i.cb=null)}):((s=new XMLHttpRequest).open("GET",r,!0),s.setRequestHeader("Pragma","no-cache"),s.setRequestHeader("Cache-Control","no-cache"),s.setRequestHeader("If-Modified-Since","Thu, 01 Jun 1970 00:00:00 GMT"),s.onreadystatechange=function(){if(4==s.readyState)if(200==s.status){i.message=i.RESULT_OK;var t=JSON.parse(s.responseText);i.checkDevice(t,(function(e){for(var s in e)for(var n=0;n<t.length;n++)t[n].deviceId==s&&(t[n].status=e[s]);null!=i.cb&&(i.cb(i,t),i.cb=null)}))}else i.message="Failed to get device list.",null!=i.cb&&(i.cb(i,null),i.cb=null)}),s.send(null)},ePOSDeviceConfiguration.prototype.checkDevice=function(t,e){for(var i,s=this,n=window.location.protocol.match(/^(https:)/)?this.SSLWEBSOCKET_PORT:this.WEBSOCKET_PORT,r=new epson.ePOSDevice,a=new Array,o=0;o<t.length;o++)a[t[o].deviceId]=s.UNKNOWN;r.onerror=function(t,e,i){""!=e&&(a[e]=s.OFFLINE)},r.connect(this.address,n,(function(e){if("OK"==e||"SSL_CONNECT_OK"==e)for(var i=0;i<t.length;i++)r.createDevice(t[i].deviceId,t[i].deviceType,{},(function(t,e){a[t.deviceID]="OK"==e?s.ONLINE:s.OFFLINE,r.deleteDevice(t,null)}))})),i=window.setInterval((function(){for(var t in a)if(a[t]==s.UNKNOWN)return;clearInterval(i),null!=e&&e(a)}),s.INTERVAL),window.setTimeout((function(){clearInterval(i),null!=e&&e(a)}),s.TIMEOUT)},"object"!=typeof JSON&&(JSON={}),function(){function f(t){return t<10?"0"+t:t}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,(function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}function str(t,e){var i,s,n,r,a,o=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,i=0;i<r;i+=1)a[i]=str(i,l)||"null";return n=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,n}if(rep&&"object"==typeof rep)for(r=rep.length,i=0;i<r;i+=1)"string"==typeof rep[i]&&(n=str(s=rep[i],l))&&a.push(quote(s)+(gap?": ":":")+n);else for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(n=str(s,l))&&a.push(quote(s)+(gap?": ":":")+n);return n=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,n}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var s;if(gap="",indent="","number"==typeof i)for(s=0;s<i;s+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var i,s,n=t[e];if(n&&"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&((s=walk(n,i))!==undefined?n[i]=s:delete n[i]);return reviver.call(t,e,n)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t,e){var i=t;i.version="0.8.7",i.protocol=1,i.transports=[],i.j=[],i.sockets={},i.connect=function(t,s){var n,r,a=i.util.parseUri(t);e&&e.location&&(a.protocol=a.protocol||e.location.protocol.slice(0,-1),a.host=a.host||(e.document?e.document.domain:e.location.hostname),a.port=a.port||e.location.port),n=i.util.uniqueUri(a);var o={host:a.host,secure:"https"==a.protocol,port:a.port||("https"==a.protocol?443:80),query:a.query||""};return i.util.merge(o,s),!o["force new connection"]&&i.sockets[n]||(r=new i.Socket(o)),!o["force new connection"]&&r&&(i.sockets[n]=r),(r=r||i.sockets[n]).of(a.path.length>1?a.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(t,e){var i=t.util={},s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];i.parseUri=function(t){for(var e=s.exec(t||""),i={},r=14;r--;)i[n[r]]=e[r]||"";return i},i.uniqueUri=function(t){var i=t.protocol,s=t.host,n=t.port;return"document"in e?(s=s||document.domain,n=n||("https"==i&&"https:"!==document.location.protocol?443:document.location.port)):(s=s||"localhost",n||"https"!=i||(n=443)),(i||"http")+"://"+s+":"+(n||80)},i.query=function(t,e){var s=i.chunkQuery(t||""),n=[];for(var r in i.merge(s,i.chunkQuery(e||"")),s)s.hasOwnProperty(r)&&n.push(r+"="+s[r]);return n.length?"?"+n.join("&"):""},i.chunkQuery=function(t){for(var e,i={},s=t.split("&"),n=0,r=s.length;n<r;++n)(e=s[n].split("="))[0]&&(i[e[0]]=decodeURIComponent(e[1]));return i};var r=!1;i.load=function(t){if("document"in e&&"complete"===document.readyState||r)return t();i.on(e,"load",t,!1)},i.on=function(t,e,i,s){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener&&t.addEventListener(e,i,s)},i.request=function(t){if(t&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!t||i.ua.hasCORS))return new XMLHttpRequest;if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}return null},void 0!==window&&i.load((function(){r=!0})),i.defer=function(t){if(!i.ua.webkit||"undefined"!=typeof importScripts)return t();i.load((function(){setTimeout(t,100)}))},i.merge=function(t,e,s,n){var r,a=n||[],o=void 0===s?2:s;for(r in e)e.hasOwnProperty(r)&&i.indexOf(a,r)<0&&("object"==typeof t[r]&&o?i.merge(t[r],e[r],o-1,a):(t[r]=e[r],a.push(e[r])));return t},i.mixin=function(t,e){i.merge(t.prototype,e.prototype)},i.inherit=function(t,e){function i(){}i.prototype=e.prototype,t.prototype=new i},i.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i.intersect=function(t,e){for(var s=[],n=t.length>e.length?t:e,r=t.length>e.length?e:t,a=0,o=r.length;a<o;a++)~i.indexOf(n,r[a])&&s.push(r[a]);return s},i.indexOf=function(t,e,i){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e,i);var s=t.length;for(i=i<0?i+s<0?0:i+s:i||0;i<s&&t[i]!==e;i++);return s<=i?-1:i},i.toArray=function(t){for(var e=[],i=0,s=t.length;i<s;i++)e.push(t[i]);return e},i.ua={},i.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var t=new XMLHttpRequest}catch(e){return!1}return t.withCredentials!=undefined}(),i.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(t,e){function i(){}t.EventEmitter=i,i.prototype.on=function(t,i){return this.$events||(this.$events={}),this.$events[t]?e.util.isArray(this.$events[t])?this.$events[t].push(i):this.$events[t]=[this.$events[t],i]:this.$events[t]=i,this},i.prototype.addListener=i.prototype.on,i.prototype.once=function(t,e){var i=this;function s(){i.removeListener(t,s),e.apply(this,arguments)}return s.listener=e,this.on(t,s),this},i.prototype.removeListener=function(t,i){if(this.$events&&this.$events[t]){var s=this.$events[t];if(e.util.isArray(s)){for(var n=-1,r=0,a=s.length;r<a;r++)if(s[r]===i||s[r].listener&&s[r].listener===i){n=r;break}if(n<0)return this;s.splice(n,1),s.length||delete this.$events[t]}else(s===i||s.listener&&s.listener===i)&&delete this.$events[t]}return this},i.prototype.removeAllListeners=function(t){return this.$events&&this.$events[t]&&(this.$events[t]=null),this},i.prototype.listeners=function(t){return this.$events||(this.$events={}),this.$events[t]||(this.$events[t]=[]),e.util.isArray(this.$events[t])||(this.$events[t]=[this.$events[t]]),this.$events[t]},i.prototype.emit=function(t){if(!this.$events)return!1;var i=this.$events[t];if(!i)return!1;var s=Array.prototype.slice.call(arguments,1);if("function"==typeof i)i.apply(this,s);else{if(!e.util.isArray(i))return!1;for(var n=i.slice(),r=0,a=n.length;r<a;r++)n[r].apply(this,s)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={};function f(t){return t<10?"0"+t:t}function date(t,e){return isFinite(t.valueOf())?t.getUTCFullYear()+"-"+f(t.getUTCMonth()+1)+"-"+f(t.getUTCDate())+"T"+f(t.getUTCHours())+":"+f(t.getUTCMinutes())+":"+f(t.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,(function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}function str(t,e){var i,s,n,r,a,o=gap,l=e[t];switch(l instanceof Date&&(l=date(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,i=0;i<r;i+=1)a[i]=str(i,l)||"null";return n=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,n}if(rep&&"object"==typeof rep)for(r=rep.length,i=0;i<r;i+=1)"string"==typeof rep[i]&&(n=str(s=rep[i],l))&&a.push(quote(s)+(gap?": ":":")+n);else for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(n=str(s,l))&&a.push(quote(s)+(gap?": ":":")+n);return n=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,n}}JSON.stringify=function(t,e,i){var s;if(gap="",indent="","number"==typeof i)for(s=0;s<i;s+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})},JSON.parse=function(text,reviver){var j;function walk(t,e){var i,s,n=t[e];if(n&&"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&((s=walk(n,i))!==undefined?n[i]=s:delete n[i]);return reviver.call(t,e,n)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,void 0!==JSON?JSON:undefined),function(t,e){var i=t.parser={},s=i.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],n=i.reasons=["transport not supported","client not handshaken","unauthorized"],r=i.advice=["reconnect"],a=e.JSON,o=e.util.indexOf;i.encodePacket=function(t){var e=o(s,t.type),i=t.id||"",l=t.endpoint||"",c=t.ack,h=null;switch(t.type){case"error":var d=t.reason?o(n,t.reason):"",u=t.advice?o(r,t.advice):"";""===d&&""===u||(h=d+(""!==u?"+"+u:""));break;case"message":""!==t.data&&(h=t.data);break;case"event":var p={name:t.name};t.args&&t.args.length&&(p.args=t.args),h=a.stringify(p);break;case"json":h=a.stringify(t.data);break;case"connect":t.qs&&(h=t.qs);break;case"ack":h=t.ackId+(t.args&&t.args.length?"+"+a.stringify(t.args):"")}var f=[e,i+("data"==c?"+":""),l];return null!==h&&h!==undefined&&f.push(h),f.join(":")},i.encodePayload=function(t){var e="";if(1==t.length)return t[0];for(var i=0,s=t.length;i<s;i++){e+="�"+t[i].length+"�"+t[i]}return e};var l=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;i.decodePacket=function(t){if(!(o=t.match(l)))return{};var e=o[2]||"",i=(t=o[5]||"",{type:s[o[1]],endpoint:o[4]||""});switch(e&&(i.id=e,o[3]?i.ack="data":i.ack=!0),i.type){case"error":var o=t.split("+");i.reason=n[o[0]]||"",i.advice=r[o[1]]||"";break;case"message":i.data=t||"";break;case"event":try{var c=a.parse(t);i.name=c.name,i.args=c.args}catch(h){}i.args=i.args||[];break;case"json":try{i.data=a.parse(t)}catch(h){}break;case"connect":i.qs=t||"";break;case"ack":if((o=t.match(/^([0-9]+)(\+)?(.*)/))&&(i.ackId=o[1],i.args=[],o[3]))try{i.args=o[3]?a.parse(o[3]):[]}catch(h){}}return i},i.decodePayload=function(t){if("�"==t.charAt(0)){for(var e=[],s=1,n="";s<t.length;s++)"�"==t.charAt(s)?(e.push(i.decodePacket(t.substr(s+1).substr(0,n))),s+=Number(n)+1,n=""):n+=t.charAt(s);return e}return[i.decodePacket(t)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(t,e){function i(t,e){this.socket=t,this.sessid=e}t.Transport=i,e.util.mixin(i,e.EventEmitter),i.prototype.onData=function(t){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==t){var i=e.parser.decodePayload(t);if(i&&i.length)for(var s=0,n=i.length;s<n;s++)this.onPacket(i[s])}return this},i.prototype.onPacket=function(t){return"heartbeat"==t.type?this.onHeartbeat():("connect"==t.type&&""==t.endpoint&&this.onConnect(),this.socket.onPacket(t),this)},i.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var t=this;this.closeTimeout=setTimeout((function(){t.onDisconnect()}),this.socket.closeTimeout)}},i.prototype.onDisconnect=function(){return this.close&&this.open&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},i.prototype.onConnect=function(){return this.socket.onConnect(),this},i.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},i.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},i.prototype.packet=function(t){this.send(e.parser.encodePacket(t))},i.prototype.onHeartbeat=function(t){this.packet({type:"heartbeat"})},i.prototype.onOpen=function(){this.open=!0,this.clearCloseTimeout(),this.socket.onOpen()},i.prototype.onClose=function(){this.open=!1,this.socket.onClose(),this.onDisconnect()},i.prototype.prepareUrl=function(){var t=this.socket.options;return this.scheme()+"://"+t.host+":"+t.port+"/"+t.resource+"/"+e.protocol+"/"+this.name+"/"+this.sessid},i.prototype.ready=function(t,e){e.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(t,e,i){function s(t){if(this.options={port:80,secure:!1,document:"document"in i&&document,resource:"socket.io",transports:e.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},e.util.merge(this.options,t),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||e.util.ua.hasCORS)){var s=this;e.util.on(i,"beforeunload",(function(){s.disconnectSync()}),!1)}this.options["auto connect"]&&this.connect()}function n(){}t.Socket=s,e.util.mixin(s,e.EventEmitter),s.prototype.of=function(t){return this.namespaces[t]||(this.namespaces[t]=new e.SocketNamespace(this,t),""!==t&&this.namespaces[t].packet({type:"connect"})),this.namespaces[t]},s.prototype.publish=function(){var t;for(var e in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(e)&&(t=this.of(e)).$emit.apply(t,arguments)},s.prototype.handshake=function(t){var i=this,s=this.options;function r(e){e instanceof Error?i.onError(e.message):t.apply(null,e.split(":"))}var a=["http"+(s.secure?"s":"")+":/",s.host+":"+s.port,s.resource,e.protocol,e.util.query(this.options.query,"t="+ +new Date)].join("/"),o=setTimeout((function(){if(void 0!==c)try{var t=c.src.lastIndexOf("=")+1,s=c.src.substring(t);e.j[s]=function(t){c.parentNode.removeChild(c)}}catch(n){}i.publish("connect_failed")}),this.options["connect timeout"]);if(this.isXDomain()&&!e.util.ua.hasCORS){var l=document.getElementsByTagName("script")[0],c=document.createElement("script");c.src=a+"&jsonp="+e.j.length,l.parentNode.insertBefore(c,l),e.j.push((function(t){clearTimeout(o),r(t),c.parentNode.removeChild(c)}))}else{var h=e.util.request();h.open("GET",a,!0),h.onreadystatechange=function(){4==h.readyState&&(h.onreadystatechange=n,clearTimeout(o),200==h.status?r(h.responseText):!i.reconnecting&&i.onError(h.responseText))},h.timeout=this.options["connect timeout"],h.send(null)}},s.prototype.getTransport=function(t){for(var i,s=t||this.transports,n=0;i=s[n];n++)if(e.Transport[i]&&e.Transport[i].check(this)&&(!this.isXDomain()||e.Transport[i].xdomainCheck()))return new e.Transport[i](this,this.sessionid);return null},s.prototype.connect=function(t){if(this.connecting)return this;var i=this;return this.handshake((function(s,n,r,a){i.sessionid=s,i.closeTimeout=1e3*r,i.heartbeatTimeout=1e3*n,i.transports=e.util.intersect(a.split(","),i.options.transports),function t(e){if(i.transport&&i.transport.clearTimeouts(),i.transport=i.getTransport(e),!i.transport)return i.publish("connect_failed");i.transport.ready(i,(function(){i.connecting=!0,i.publish("connecting",i.transport.name),i.transport.open(),i.options["connect timeout"]&&(i.connectTimeoutTimer=setTimeout((function(){if(!i.connected&&(i.connecting=!1,i.options["try multiple transports"])){i.remainingTransports||(i.remainingTransports=i.transports.slice(0));for(var e=i.remainingTransports;e.length>0&&e.splice(0,1)[0]!=i.transport.name;);e.length?t(e):i.publish("connect_failed")}}),i.options["connect timeout"]))}))}(),i.once("connect",(function(){clearTimeout(i.connectTimeoutTimer),t&&"function"==typeof t&&t()}))})),this},s.prototype.packet=function(t){return this.connected&&!this.doBuffer?this.transport.packet(t):this.buffer.push(t),this},s.prototype.setBuffer=function(t){this.doBuffer=t,!t&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},s.prototype.disconnect=function(){return this.connected&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},s.prototype.disconnectSync=function(){var t=e.util.request(),i=this.resource+"/"+e.protocol+"/"+this.sessionid;t.open("GET",i,!0),this.onDisconnect("booted")},s.prototype.isXDomain=function(){var t=i.location.port||("https:"==i.location.protocol?443:80);return this.options.host!==i.location.hostname||this.options.port!=t},s.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},s.prototype.onOpen=function(){this.open=!0},s.prototype.onClose=function(){this.open=!1},s.prototype.onPacket=function(t){this.of(t.endpoint).onPacket(t)},s.prototype.onError=function(t){t&&t.advice&&"reconnect"===t.advice&&this.connected&&(this.disconnect(),this.reconnect()),this.publish("error",t&&t.reason?t.reason:t)},s.prototype.onDisconnect=function(t){var e=this.connected;this.connected=!1,this.connecting=!1,this.open=!1,e&&(this.transport.close(),this.transport.clearTimeouts(),this.publish("disconnect",t),"booted"!=t&&this.options.reconnect&&!this.reconnecting&&this.reconnect())},s.prototype.reconnect=function(){this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var t=this,e=this.options["max reconnection attempts"],i=this.options["try multiple transports"],s=this.options["reconnection limit"];function n(){if(t.connected){for(var e in t.namespaces)t.namespaces.hasOwnProperty(e)&&""!==e&&t.namespaces[e].packet({type:"connect"});t.publish("reconnect",t.transport.name,t.reconnectionAttempts)}t.removeListener("connect_failed",r),t.removeListener("connect",r),t.reconnecting=!1,delete t.reconnectionAttempts,delete t.reconnectionDelay,delete t.reconnectionTimer,delete t.redoTransports,t.options["try multiple transports"]=i}function r(){if(t.reconnecting)return t.connected?n():t.connecting&&t.reconnecting?t.reconnectionTimer=setTimeout(r,1e3):void(t.reconnectionAttempts++>=e?t.redoTransports?(t.publish("reconnect_failed"),n()):(t.on("connect_failed",r),t.options["try multiple transports"]=!0,t.transport=t.getTransport(),t.redoTransports=!0,t.connect()):(t.reconnectionDelay<s&&(t.reconnectionDelay*=2),t.connect(),t.publish("reconnecting",t.reconnectionDelay,t.reconnectionAttempts),t.reconnectionTimer=setTimeout(r,t.reconnectionDelay)))}this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(r,this.reconnectionDelay),this.on("connect",r)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(t,e){function i(t,e){this.socket=t,this.name=e||"",this.flags={},this.json=new s(this,"json"),this.ackPackets=0,this.acks={}}function s(t,e){this.namespace=t,this.name=e}t.SocketNamespace=i,e.util.mixin(i,e.EventEmitter),i.prototype.$emit=e.EventEmitter.prototype.emit,i.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},i.prototype.packet=function(t){return t.endpoint=this.name,this.socket.packet(t),this.flags={},this},i.prototype.send=function(t,e){var i={type:this.flags.json?"json":"message",data:t};return"function"==typeof e&&(i.id=++this.ackPackets,i.ack=!0,this.acks[i.id]=e),this.packet(i)},i.prototype.emit=function(t){var e=Array.prototype.slice.call(arguments,1),i=e[e.length-1],s={type:"event",name:t};return"function"==typeof i&&(s.id=++this.ackPackets,s.ack="data",this.acks[s.id]=i,e=e.slice(0,e.length-1)),s.args=e,this.packet(s)},i.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},i.prototype.onPacket=function(t){var i=this;function s(){i.packet({type:"ack",args:e.util.toArray(arguments),ackId:t.id})}switch(t.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(t.reason||"booted"):this.$emit("disconnect",t.reason);break;case"message":case"json":var n=["message",t.data];"data"==t.ack?n.push(s):t.ack&&this.packet({type:"ack",ackId:t.id}),this.$emit.apply(this,n);break;case"event":n=[t.name].concat(t.args);"data"==t.ack&&n.push(s),this.$emit.apply(this,n);break;case"ack":this.acks[t.ackId]&&(this.acks[t.ackId].apply(this,t.args),delete this.acks[t.ackId]);break;case"error":t.advice?this.socket.onError(t):"unauthorized"==t.reason?this.$emit("connect_failed",t.reason):this.$emit("error",t.reason)}},s.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},s.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(t,e,i){function s(t){e.Transport.apply(this,arguments)}t.websocket=s,e.util.inherit(s,e.Transport),s.prototype.name="websocket",s.prototype.open=function(){var t,s=e.util.query(this.socket.options.query),n=this;return t||(t=i.MozWebSocket||i.WebSocket),this.websocket=new t(this.prepareUrl()+s),this.websocket.onopen=function(){n.onOpen(),n.socket.setBuffer(!1)},this.websocket.onmessage=function(t){n.onData(t.data)},this.websocket.onclose=function(){n.onClose(),n.socket.setBuffer(!0)},this.websocket.onerror=function(t){n.onError(t)},this},s.prototype.send=function(t){return this.websocket.send(t),this},s.prototype.payload=function(t){for(var e=0,i=t.length;e<i;e++)this.packet(t[e]);return this},s.prototype.close=function(){return this.websocket.close(),this},s.prototype.onError=function(t){this.socket.onError(t)},s.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},s.check=function(){return"WebSocket"in i&&!("__addTask"in WebSocket)||"MozWebSocket"in i},s.xdomainCheck=function(){return!0},e.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(t,e){function i(){e.Transport.websocket.apply(this,arguments)}t.flashsocket=i,e.util.inherit(i,e.Transport.websocket),i.prototype.name="flashsocket",i.prototype.open=function(){var t=this,i=arguments;return WebSocket.__addTask((function(){e.Transport.websocket.prototype.open.apply(t,i)})),this},i.prototype.send=function(){var t=this,i=arguments;return WebSocket.__addTask((function(){e.Transport.websocket.prototype.send.apply(t,i)})),this},i.prototype.close=function(){return WebSocket.__tasks.length=0,e.Transport.websocket.prototype.close.call(this),this},i.prototype.ready=function(t,s){function n(){var e=t.options,n=e["flash policy port"],a=["http"+(e.secure?"s":"")+":/",e.host+":"+e.port,e.resource,"static/flashsocket","WebSocketMain"+(t.isXDomain()?"Insecure":"")+".swf"];i.loaded||("undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=a.join("/")),843!==n&&WebSocket.loadFlashPolicyFile("xmlsocket://"+e.host+":"+n),WebSocket.__initialize(),i.loaded=!0),s.call(r)}var r=this;if(document.body)return n();e.util.load(n)},i.check=function(){return!("undefined"==typeof WebSocket||!("__initialize"in WebSocket)||!swfobject)&&swfobject.getFlashPlayerVersion().major>=10},i.xdomainCheck=function(){return!0},void 0!==window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),e.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),void 0!==window)var swfobject=function(){var t,e,i,s,n,r,a="undefined",o="object",l="Shockwave Flash",c="application/x-shockwave-flash",h="SWFObjectExprInst",d="onreadystatechange",u=window,p=document,f=navigator,m=!1,v=[function(){m?function(){var t=p.getElementsByTagName("body")[0],e=V(o);e.setAttribute("type",c);var i=t.appendChild(e);if(i){var s=0;!function(){if(typeof i.GetVariable!=a){var n=i.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),T.pv=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}else if(s<10)return s++,void setTimeout(arguments.callee,10);t.removeChild(e),i=null,P()}()}else P()}():P()}],E=[],g=[],_=[],y=!1,b=!1,S=!0,T=function(){var t=typeof p.getElementById!=a&&typeof p.getElementsByTagName!=a&&typeof p.createElement!=a,e=f.userAgent.toLowerCase(),i=f.platform.toLowerCase(),s=i?/win/.test(i):/win/.test(e),n=i?/mac/.test(i):/mac/.test(e),r=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),h=!1,d=[0,0,0],v=null;if(typeof f.plugins!=a&&typeof f.plugins[l]==o)!(v=f.plugins[l].description)||typeof f.mimeTypes!=a&&f.mimeTypes[c]&&!f.mimeTypes[c].enabledPlugin||(m=!0,h=!1,v=v.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),d[0]=parseInt(v.replace(/^(.*)\..*$/,"$1"),10),d[1]=parseInt(v.replace(/^.*\.(.*)\s.*$/,"$1"),10),d[2]=/[a-zA-Z]/.test(v)?parseInt(v.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u.ActiveXObject!=a)try{var E=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");E&&(v=E.GetVariable("$version"))&&(h=!0,v=v.split(" ")[1].split(","),d=[parseInt(v[0],10),parseInt(v[1],10),parseInt(v[2],10)])}catch(g){}return{w3:t,pv:d,wk:r,ie:h,win:s,mac:n}}();T.w3&&((typeof p.readyState!=a&&"complete"==p.readyState||typeof p.readyState==a&&(p.getElementsByTagName("body")[0]||p.body))&&R(),y||(typeof p.addEventListener!=a&&p.addEventListener("DOMContentLoaded",R,!1),T.ie&&T.win&&(p.attachEvent(d,(function(){"complete"==p.readyState&&(p.detachEvent(d,arguments.callee),R())})),u==top&&function(){if(!y){try{p.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}R()}}()),T.wk&&function(){y||(/loaded|complete/.test(p.readyState)?R():setTimeout(arguments.callee,0))}(),C(R)));function R(){if(!y){try{var t=p.getElementsByTagName("body")[0].appendChild(V("span"));t.parentNode.removeChild(t)}catch(s){return}y=!0;for(var e=v.length,i=0;i<e;i++)v[i]()}}function O(t){y?t():v[v.length]=t}function C(t){if(typeof u.addEventListener!=a)u.addEventListener("load",t,!1);else if(typeof p.addEventListener!=a)p.addEventListener("load",t,!1);else if(typeof u.attachEvent!=a)!function(t,e,i){t.attachEvent(e,i),_[_.length]=[t,e,i]}(u,"onload",t);else if("function"==typeof u.onload){var e=u.onload;u.onload=function(){e(),t()}}else u.onload=t}function P(){var t=E.length;if(t>0)for(var e=0;e<t;e++){var i=E[e].id,s=E[e].callbackFn,n={success:!1,id:i};if(T.pv[0]>0){var r=B(i);if(r)if(!U(E[e].swfVersion)||T.wk&&T.wk<312)if(E[e].expressInstall&&A()){var o={};o.data=E[e].expressInstall,o.width=r.getAttribute("width")||"0",o.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(o.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(o.align=r.getAttribute("align"));for(var l={},c=r.getElementsByTagName("param"),h=c.length,d=0;d<h;d++)"movie"!=c[d].getAttribute("name").toLowerCase()&&(l[c[d].getAttribute("name")]=c[d].getAttribute("value"));I(o,l,i,s)}else x(r),s&&s(n);else j(i,!0),s&&(n.success=!0,n.ref=w(i),s(n))}else if(j(i,!0),s){var u=w(i);u&&typeof u.SetVariable!=a&&(n.success=!0,n.ref=u),s(n)}}}function w(t){var e=null,i=B(t);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=a)e=i;else{var s=i.getElementsByTagName(o)[0];s&&(e=s)}return e}function A(){return!b&&U("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function I(n,r,o,l){b=!0,i=l||null,s={success:!1,id:o};var c=B(o);if(c){"OBJECT"==c.nodeName?(t=M(c),e=null):(t=c,e=o),n.id=h,(typeof n.width==a||!/%$/.test(n.width)&&parseInt(n.width,10)<310)&&(n.width="310"),(typeof n.height==a||!/%$/.test(n.height)&&parseInt(n.height,10)<137)&&(n.height="137"),p.title=p.title.slice(0,47)+" - Flash Player Installation";var d=T.ie&&T.win?"ActiveX":"PlugIn",f="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+p.title;if(typeof r.flashvars!=a?r.flashvars+="&"+f:r.flashvars=f,T.ie&&T.win&&4!=c.readyState){var m=V("div");o+="SWFObjectNew",m.setAttribute("id",o),c.parentNode.insertBefore(m,c),c.style.display="none",function(){4==c.readyState?c.parentNode.removeChild(c):setTimeout(arguments.callee,10)}()}D(n,r,o)}}function x(t){if(T.ie&&T.win&&4!=t.readyState){var e=V("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(M(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(M(t),t)}function M(t){var e=V("div");if(T.win&&T.ie)e.innerHTML=t.innerHTML;else{var i=t.getElementsByTagName(o)[0];if(i){var s=i.childNodes;if(s)for(var n=s.length,r=0;r<n;r++)1==s[r].nodeType&&"PARAM"==s[r].nodeName||8==s[r].nodeType||e.appendChild(s[r].cloneNode(!0))}}return e}function D(t,e,i){var s,n=B(i);if(T.wk&&T.wk<312)return s;if(n)if(typeof t.id==a&&(t.id=i),T.ie&&T.win){var r="";for(var l in t)t[l]!=Object.prototype[l]&&("data"==l.toLowerCase()?e.movie=t[l]:"styleclass"==l.toLowerCase()?r+=' class="'+t[l]+'"':"classid"!=l.toLowerCase()&&(r+=" "+l+'="'+t[l]+'"'));var h="";for(var d in e)e[d]!=Object.prototype[d]&&(h+='<param name="'+d+'" value="'+e[d]+'" />');n.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+h+"</object>",g[g.length]=t.id,s=B(t.id)}else{var u=V(o);for(var p in u.setAttribute("type",c),t)t[p]!=Object.prototype[p]&&("styleclass"==p.toLowerCase()?u.setAttribute("class",t[p]):"classid"!=p.toLowerCase()&&u.setAttribute(p,t[p]));for(var f in e)e[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&N(u,f,e[f]);n.parentNode.replaceChild(u,n),s=u}return s}function N(t,e,i){var s=V("param");s.setAttribute("name",e),s.setAttribute("value",i),t.appendChild(s)}function k(t){var e=B(t);e&&"OBJECT"==e.nodeName&&(T.ie&&T.win?(e.style.display="none",function(){4==e.readyState?L(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function L(t){var e=B(t);if(e){for(var i in e)"function"==typeof e[i]&&(e[i]=null);e.parentNode.removeChild(e)}}function B(t){var e=null;try{e=p.getElementById(t)}catch(i){}return e}function V(t){return p.createElement(t)}function U(t){var e=T.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,e[0]>i[0]||e[0]==i[0]&&e[1]>i[1]||e[0]==i[0]&&e[1]==i[1]&&e[2]>=i[2]}function F(t,e,i,s){if(!T.ie||!T.mac){var l=p.getElementsByTagName("head")[0];if(l){var c=i&&"string"==typeof i?i:"screen";if(s&&(n=null,r=null),!n||r!=c){var h=V("style");h.setAttribute("type","text/css"),h.setAttribute("media",c),n=l.appendChild(h),T.ie&&T.win&&typeof p.styleSheets!=a&&p.styleSheets.length>0&&(n=p.styleSheets[p.styleSheets.length-1]),r=c}T.ie&&T.win?n&&typeof n.addRule==o&&n.addRule(t,e):n&&typeof p.createTextNode!=a&&n.appendChild(p.createTextNode(t+" {"+e+"}"))}}}function j(t,e){if(S){var i=e?"visible":"hidden";y&&B(t)?B(t).style.visibility=i:F("#"+t,"visibility:"+i)}}function H(t){return null!=/[\\\"<>\.;]/.exec(t)&&typeof encodeURIComponent!=a?encodeURIComponent(t):t}T.ie&&T.win&&window.attachEvent("onunload",(function(){for(var t=_.length,e=0;e<t;e++)_[e][0].detachEvent(_[e][1],_[e][2]);for(var i=g.length,s=0;s<i;s++)k(g[s]);for(var n in T)T[n]=null;for(var r in T=null,swfobject)swfobject[r]=null;swfobject=null}));return{registerObject:function(t,e,i,s){if(T.w3&&t&&e){var n={};n.id=t,n.swfVersion=e,n.expressInstall=i,n.callbackFn=s,E[E.length]=n,j(t,!1)}else s&&s({success:!1,id:t})},getObjectById:function(t){if(T.w3)return w(t)},embedSWF:function(t,e,i,s,n,r,l,c,h,d){var u={success:!1,id:e};T.w3&&!(T.wk&&T.wk<312)&&t&&e&&i&&s&&n?(j(e,!1),O((function(){i+="",s+="";var p={};if(h&&typeof h===o)for(var f in h)p[f]=h[f];p.data=t,p.width=i,p.height=s;var m={};if(c&&typeof c===o)for(var v in c)m[v]=c[v];if(l&&typeof l===o)for(var E in l)typeof m.flashvars!=a?m.flashvars+="&"+E+"="+l[E]:m.flashvars=E+"="+l[E];if(U(n)){var g=D(p,m,e);p.id==e&&j(e,!0),u.success=!0,u.ref=g}else{if(r&&A())return p.data=r,void I(p,m,e,d);j(e,!0)}d&&d(u)}))):d&&d(u)},switchOffAutoHideShow:function(){S=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:U,createSWF:function(t,e,i){return T.w3?D(t,e,i):undefined},showExpressInstall:function(t,e,i,s){T.w3&&A()&&I(t,e,i,s)},removeSWF:function(t){T.w3&&k(t)},createCSS:function(t,e,i,s){T.w3&&F(t,e,i,s)},addDomLoadEvent:O,addLoadEvent:C,getQueryParamValue:function(t){var e=p.location.search||p.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return H(e);for(var i=e.split("&"),s=0;s<i.length;s++)if(i[s].substring(0,i[s].indexOf("="))==t)return H(i[s].substring(i[s].indexOf("=")+1))}return""},expressInstallCallback:function(){if(b){var n=B(h);n&&t&&(n.parentNode.replaceChild(t,n),e&&(j(e,!0),T.ie&&T.win&&(t.style.display="block")),i&&i(s)),b=!1}}}}();!function(){if(void 0!==window&&!window.WebSocket){var t=window.console;t&&t.log&&t.error||(t={log:function(){},error:function(){}}),swfobject.hasFlashPlayerVersion("10.0.0")?("file:"==location.protocol&&t.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(t,e,i,s,n){var r=this;r.__id=WebSocket.__nextId++,WebSocket.__instances[r.__id]=r,r.readyState=WebSocket.CONNECTING,r.bufferedAmount=0,r.__events={},e?"string"==typeof e&&(e=[e]):e=[],setTimeout((function(){WebSocket.__addTask((function(){WebSocket.__flash.create(r.__id,t,e,i||null,s||0,n||null)}))}),0)},WebSocket.prototype.send=function(t){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var e=WebSocket.__flash.send(this.__id,encodeURIComponent(t));return e<0||(this.bufferedAmount+=e,!1)},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(t,e,i){t in this.__events||(this.__events[t]=[]),this.__events[t].push(e)},WebSocket.prototype.removeEventListener=function(t,e,i){if(t in this.__events)for(var s=this.__events[t],n=s.length-1;n>=0;--n)if(s[n]===e){s.splice(n,1);break}},WebSocket.prototype.dispatchEvent=function(t){for(var e=this.__events[t.type]||[],i=0;i<e.length;++i)e[i](t);var s=this["on"+t.type];s&&s(t)},WebSocket.prototype.__handleEvent=function(t){var e;if("readyState"in t&&(this.readyState=t.readyState),"protocol"in t&&(this.protocol=t.protocol),"open"==t.type||"error"==t.type)e=this.__createSimpleEvent(t.type);else if("close"==t.type)e=this.__createSimpleEvent("close");else{if("message"!=t.type)throw"unknown event type: "+t.type;var i=decodeURIComponent(t.message);e=this.__createMessageEvent("message",i)}this.dispatchEvent(e)},WebSocket.prototype.__createSimpleEvent=function(t){if(document.createEvent&&window.Event){var e=document.createEvent("Event");return e.initEvent(t,!1,!1),e}return{type:t,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(t,e){if(document.createEvent&&window.MessageEvent&&!window.opera){var i=document.createEvent("MessageEvent");return i.initMessageEvent("message",!1,!1,e,null,null,window,null),i}return{type:t,data:e,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(t){WebSocket.__addTask((function(){WebSocket.__flash.loadManualPolicyFile(t)}))},WebSocket.__initialize=function(){if(!WebSocket.__flash)if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),window.WEB_SOCKET_SWF_LOCATION){var e=document.createElement("div");e.id="webSocketContainer",e.style.position="absolute",WebSocket.__isFlashLite()?(e.style.left="0px",e.style.top="0px"):(e.style.left="-100px",e.style.top="-100px");var i=document.createElement("div");i.id="webSocketFlash",e.appendChild(i),document.body.appendChild(e),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,(function(e){e.success||t.error("[WebSocket] swfobject.embedSWF failed")}))}else t.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")},WebSocket.__onFlashInitialized=function(){setTimeout((function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var t=0;t<WebSocket.__tasks.length;++t)WebSocket.__tasks[t]();WebSocket.__tasks=[]}),0)},WebSocket.__onFlashEvent=function(){return setTimeout((function(){try{for(var e=WebSocket.__flash.receiveEvents(),i=0;i<e.length;++i)WebSocket.__instances[e[i].webSocketId].__handleEvent(e[i])}catch(s){t.error(s)}}),0),!0},WebSocket.__log=function(e){t.log(decodeURIComponent(e))},WebSocket.__error=function(e){t.error(decodeURIComponent(e))},WebSocket.__addTask=function(t){WebSocket.__flash?t():WebSocket.__tasks.push(t)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var t=window.navigator.mimeTypes["application/x-shockwave-flash"];return!!(t&&t.enabledPlugin&&t.enabledPlugin.filename)&&!!t.enabledPlugin.filename.match(/flashlite/i)},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",(function(){WebSocket.__initialize()}),!1):window.attachEvent("onload",(function(){WebSocket.__initialize()})))):t.error("Flash Player >= 10.0.0 is required.")}}(),function(t,e,i){function s(t){t&&(e.Transport.apply(this,arguments),this.sendBuffer=[])}function n(){}t.XHR=s,e.util.inherit(s,e.Transport),s.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},s.prototype.payload=function(t){for(var i=[],s=0,n=t.length;s<n;s++)i.push(e.parser.encodePacket(t[s]));this.send(e.parser.encodePayload(i))},s.prototype.send=function(t){return this.post(t),this},s.prototype.post=function(t){var e=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),i.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function(){this.onload=n,e.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=n,e.posting=!1,200==this.status?e.socket.setBuffer(!1):e.onClose())},this.sendXHR.send(t)},s.prototype.close=function(){return this.onClose(),this},s.prototype.request=function(t){var i=e.util.request(this.socket.isXDomain()),s=e.util.query(this.socket.options.query,"t="+ +new Date);if(i.open(t||"GET",this.prepareUrl()+s,!0),"POST"==t)try{i.setRequestHeader?i.setRequestHeader("Content-type","text/plain;charset=UTF-8"):i.contentType="text/plain"}catch(n){}return i},s.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},s.check=function(t,i){try{if(e.util.request(i))return!0}catch(s){}return!1},s.xdomainCheck=function(){return s.check(null,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(t,e){function i(t){e.Transport.XHR.apply(this,arguments)}t.htmlfile=i,e.util.inherit(i,e.Transport.XHR),i.prototype.name="htmlfile",i.prototype.get=function(){this.doc=new ActiveXObject("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var t=this.doc.createElement("div");t.className="socketio",this.doc.body.appendChild(t),this.iframe=this.doc.createElement("iframe"),t.appendChild(this.iframe);var i=this,s=e.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+s,e.util.on(window,"unload",(function(){i.destroy()}))},i.prototype._=function(t,e){this.onData(t);try{var i=e.getElementsByTagName("script")[0];i.parentNode.removeChild(i)}catch(s){}},i.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(t){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},i.prototype.close=function(){return this.destroy(),e.Transport.XHR.prototype.close.call(this)},i.check=function(){if("ActiveXObject"in window)try{return new ActiveXObject("htmlfile")&&e.Transport.XHR.check()}catch(t){}return!1},i.xdomainCheck=function(){return!1},e.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(t,e,i){function s(){e.Transport.XHR.apply(this,arguments)}function n(){}t["xhr-polling"]=s,e.util.inherit(s,e.Transport.XHR),e.util.merge(s,e.Transport.XHR),s.prototype.name="xhr-polling",s.prototype.open=function(){return e.Transport.XHR.prototype.open.call(this),!1},s.prototype.get=function(){if(this.open){var t=this;this.xhr=this.request(),i.XDomainRequest&&this.xhr instanceof XDomainRequest?this.xhr.onload=this.xhr.onerror=function(){this.onload=n,t.onData(this.responseText),t.get()}:this.xhr.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=n,200==this.status?(t.onData(this.responseText),t.get()):t.onClose())},this.xhr.send(null)}},s.prototype.onClose=function(){if(e.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=n;try{this.xhr.abort()}catch(t){}this.xhr=null}},s.prototype.ready=function(t,i){var s=this;e.util.defer((function(){i.call(s)}))},e.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(t,e,i){var s=i.document&&"MozAppearance"in i.document.documentElement.style;function n(t){e.Transport["xhr-polling"].apply(this,arguments),this.index=e.j.length;var i=this;e.j.push((function(t){i._(t)}))}t["jsonp-polling"]=n,e.util.inherit(n,e.Transport["xhr-polling"]),n.prototype.name="jsonp-polling",n.prototype.post=function(t){var i=this,s=e.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var n,r=document.createElement("form"),a=document.createElement("textarea"),o=this.iframeId="socketio_iframe_"+this.index;r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=o,r.method="POST",r.setAttribute("accept-charset","utf-8"),a.name="d",r.appendChild(a),document.body.appendChild(r),this.form=r,this.area=a}function l(){c(),i.socket.setBuffer(!1)}function c(){i.iframe&&i.form.removeChild(i.iframe);try{n=document.createElement('<iframe name="'+i.iframeId+'">')}catch(t){(n=document.createElement("iframe")).name=i.iframeId}n.id=i.iframeId,i.form.appendChild(n),i.iframe=n}this.form.action=this.prepareUrl()+s,c(),this.area.value=e.JSON.stringify(t);try{this.form.submit()}catch(h){}this.iframe.attachEvent?n.onreadystatechange=function(){"complete"==i.iframe.readyState&&l()}:this.iframe.onload=l,this.socket.setBuffer(!0)},n.prototype.get=function(){var t=this,i=document.createElement("script"),n=e.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),i.async=!0,i.src=this.prepareUrl()+n,i.onerror=function(){t.onClose()};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(i,r),this.script=i,s&&setTimeout((function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)},n.prototype._=function(t){return this.onData(t),this.open&&this.get(),this},n.prototype.ready=function(t,i){var n=this;if(!s)return i.call(this);e.util.load((function(){i.call(n)}))},n.check=function(){return"document"in i},n.xdomainCheck=function(){return!0},e.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),JSON||(JSON={}),function(){function f(t){return t<10?"0"+t:t}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,(function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}function str(t,e){var i,s,n,r,a,o=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,i=0;i<r;i+=1)a[i]=str(i,l)||"null";return n=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,n}if(rep&&"object"==typeof rep)for(r=rep.length,i=0;i<r;i+=1)"string"==typeof rep[i]&&(n=str(s=rep[i],l))&&a.push(quote(s)+(gap?": ":":")+n);else for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(n=str(s,l))&&a.push(quote(s)+(gap?": ":":")+n);return n=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,n}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var s;if(gap="",indent="","number"==typeof i)for(s=0;s<i;s+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var i,s,n=t[e];if(n&&"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&((s=walk(n,i))!==undefined?n[i]=s:delete n[i]);return reviver.call(t,e,n)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var base64=function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={},s=0;s<64;)i[e.charAt(s)]=s,s++;return{encode:function(t){for(var i,s=0,n=0,r=t+"\0\0",a=r.length-2,o=new Array((a+2)/3<<2);s<a;)i=(255&r.charCodeAt(s++))<<16|(255&r.charCodeAt(s++))<<8|255&r.charCodeAt(s++),o[n++]=e.charAt(i>>18&63),o[n++]=e.charAt(i>>12&63),o[n++]=e.charAt(i>>6&63),o[n++]=e.charAt(63&i);for(;s>a;)o[--n]="=",s--;return o.join("")},decode:function(t){for(var e,s=0,n=0,r=t.replace(/[^A-Za-z0-9\+\/]/g,"")+"AAA",a=r.length-3,o=new Array(3*(a+3>>2)),l=String.fromCharCode;s<a;)e=i[r.charAt(s++)]<<18|i[r.charAt(s++)]<<12|i[r.charAt(s++)]<<6|i[r.charAt(s++)],o[n++]=l(e>>16&255),o[n++]=l(e>>8&255),o[n++]=l(255&e);return o.length=n-s+a,o.join("")}}}();for(bpe=0,mask=0,radix=mask+1,digitsStr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_=!@#$%^&*()[]{}|;:,.<>/?`~ \\'\"+-",bpe=0;1<<bpe+1>1<<bpe;bpe++);function findPrimes(t){var e,i,s,n;for(i=new Array(t),e=0;e<t;e++)i[e]=0;for(i[0]=2,s=0;i[s]<t;){for(e=i[s]*i[s];e<t;e+=i[s])i[e]=1;for(i[++s]=i[s-1]+1;i[s]<t&&i[i[s]];i[s]++);}for(n=new Array(s),e=0;e<s;e++)n[e]=i[e];return n}function millerRabinInt(t,e){return mr_x1.length!=t.length&&(mr_x1=dup(t),mr_r=dup(t),mr_a=dup(t)),copyInt_(mr_a,e),millerRabin(t,mr_a)}function millerRabin(t,e){var i,s,n,r;for(mr_x1.length!=t.length&&(mr_x1=dup(t),mr_r=dup(t),mr_a=dup(t)),copy_(mr_a,e),copy_(mr_r,t),copy_(mr_x1,t),addInt_(mr_r,-1),addInt_(mr_x1,-1),n=0,i=0;i<mr_r.length;i++)for(s=1;s<mask;s<<=1)t[i]&s?(r=n<mr_r.length+bpe?n:0,i=mr_r.length,s=mask):n++;if(r&&rightShift_(mr_r,r),powMod_(mr_a,mr_r,t),!equalsInt(mr_a,1)&&!equals(mr_a,mr_x1)){for(s=1;s<=r-1&&!equals(mr_a,mr_x1);){if(squareMod_(mr_a,t),equalsInt(mr_a,1))return 0;s++}if(!equals(mr_a,mr_x1))return 0}return 1}function bitSize(t){var e,i,s;for(e=t.length-1;0==t[e]&&e>0;e--);for(i=0,s=t[e];s;s>>=1,i++);return i+=bpe*e}function expand(t,e){var i=int2bigInt(0,(t.length>e?t.length:e)*bpe,0);return copy_(i,t),i}function randTruePrime(t){var e=int2bigInt(0,t,0);return randTruePrime_(e,t),trim(e,1)}function randProbPrime(t){return randProbPrimeRounds(t,t>=600?2:t>=550?4:t>=500?5:t>=400?6:t>=350?7:t>=300?9:t>=250?12:t>=200?15:t>=150?18:t>=100?27:40)}function randProbPrimeRounds(t,e){var i,s,n;for(3e4,i=int2bigInt(0,t,0),0==primes.length&&(primes=findPrimes(3e4)),rpprb.length!=i.length&&(rpprb=dup(i));;){for(randBigInt_(i,t,0),i[0]|=1,n=0,s=0;s<primes.length&&primes[s]<=3e4;s++)if(0==modInt(i,primes[s])&&!equalsInt(i,primes[s])){n=1;break}for(s=0;s<e&&!n;s++){for(randBigInt_(rpprb,t,0);!greater(i,rpprb);)randBigInt_(rpprb,t,0);millerRabin(i,rpprb)||(n=1)}if(!n)return i}}function mod(t,e){var i=dup(t);return mod_(i,e),trim(i,1)}function addInt(t,e){var i=expand(t,t.length+1);return addInt_(i,e),trim(i,1)}function mult(t,e){var i=expand(t,t.length+e.length);return mult_(i,e),trim(i,1)}function powMod(t,e,i){var s=expand(t,i.length);return powMod_(s,trim(e,2),trim(i,2),0),trim(s,1)}function sub(t,e){var i=expand(t,t.length>e.length?t.length+1:e.length+1);return sub_(i,e),trim(i,1)}function add(t,e){var i=expand(t,t.length>e.length?t.length+1:e.length+1);return add_(i,e),trim(i,1)}function inverseMod(t,e){var i=expand(t,e.length);return inverseMod_(i,e)?trim(i,1):null}function multMod(t,e,i){var s=expand(t,i.length);return multMod_(s,e,i),trim(s,1)}function randTruePrime_(t,e){var i,s,n,r,a,o,l,c,h;if(0==primes.length&&(primes=findPrimes(3e4)),0==pows.length)for(pows=new Array(512),n=0;n<512;n++)pows[n]=Math.pow(2,n/511-1);if(.1,20,recLimit=20,s_i2.length!=t.length&&(s_i2=dup(t),s_R=dup(t),s_n1=dup(t),s_r2=dup(t),s_d=dup(t),s_x1=dup(t),s_x2=dup(t),s_b=dup(t),s_n=dup(t),s_i=dup(t),s_rm=dup(t),s_q=dup(t),s_a=dup(t),s_aa=dup(t)),e<=recLimit){for(i=(1<<(e+2>>1))-1,copyInt_(t,0),s=1;s;)for(s=0,t[0]=1|1<<e-1|Math.floor(Math.random()*(1<<e)),n=1;n<primes.length&&(primes[n]&i)==primes[n];n++)if(0==t[0]%primes[n]){s=1;break}carry_(t)}else{if(a=.1*e*e,e>40)for(r=1;e-e*r<=20;)r=pows[Math.floor(512*Math.random())];else r=.5;for(h=Math.floor(r*e)+1,randTruePrime_(s_q,h),copyInt_(s_i2,0),s_i2[Math.floor((e-2)/bpe)]|=1<<(e-2)%bpe,divide_(s_i2,s_q,s_i,s_rm),l=bitSize(s_i);;){for(;randBigInt_(s_R,l,0),!greater(s_i,s_R););for(addInt_(s_R,1),add_(s_R,s_i),copy_(s_n,s_q),mult_(s_n,s_R),multInt_(s_n,2),addInt_(s_n,1),copy_(s_r2,s_R),multInt_(s_r2,2),o=0,n=0;n<primes.length&&primes[n]<a;n++)if(0==modInt(s_n,primes[n])&&!equalsInt(s_n,primes[n])){o=1;break}if(o||millerRabinInt(s_n,2)||(o=1),!o){for(addInt_(s_n,-3),n=s_n.length-1;0==s_n[n]&&n>0;n--);for(c=0,w=s_n[n];w;w>>=1,c++);for(c+=bpe*n;randBigInt_(s_a,c,0),!greater(s_n,s_a););if(addInt_(s_n,3),addInt_(s_a,2),copy_(s_b,s_a),copy_(s_n1,s_n),addInt_(s_n1,-1),powMod_(s_b,s_n1,s_n),addInt_(s_b,-1),isZero(s_b)&&(copy_(s_b,s_a),powMod_(s_b,s_r2,s_n),addInt_(s_b,-1),copy_(s_aa,s_n),copy_(s_d,s_b),GCD_(s_d,s_n),equalsInt(s_d,1)))return void copy_(t,s_aa)}}}}function randBigInt(t,e){var i;return randBigInt_(i=int2bigInt(0,0,Math.floor((t-1)/bpe)+2),t,e),i}function randBigInt_(t,e,i){var s,n;for(s=0;s<t.length;s++)t[s]=0;for(n=Math.floor((e-1)/bpe)+1,s=0;s<n;s++)t[s]=Math.floor(Math.random()*(1<<bpe-1));t[n-1]&=(2<<(e-1)%bpe)-1,1==i&&(t[n-1]|=1<<(e-1)%bpe)}function GCD(t,e){var i;return GCD_(i=dup(t),dup(e)),i}function GCD_(e,i){var s,n,r,a,o,l,c,h,d;for(T.length!=e.length&&(T=dup(e)),d=1;d;){for(d=0,s=1;s<i.length;s++)if(i[s]){d=1;break}if(!d)break;for(s=e.length;!e[s]&&s>=0;s--);for(n=e[s],r=i[s],a=1,o=0,l=0,c=1;r+l&&r+c&&(h=Math.floor((n+a)/(r+l)),qp=Math.floor((n+o)/(r+c)),h==qp);)t=a-h*l,a=l,l=t,t=o-h*c,o=c,c=t,t=n-h*r,n=r,r=t;o?(copy_(T,e),linComb_(e,i,a,o),linComb_(i,T,c,l)):(mod_(e,i),copy_(T,e),copy_(e,i),copy_(i,T))}if(0!=i[0])for(t=modInt(e,i[0]),copyInt_(e,i[0]),i[0]=t;i[0];)e[0]%=i[0],t=e[0],e[0]=i[0],i[0]=t}function inverseMod_(t,e){var i=1+2*Math.max(t.length,e.length);if(!(1&t[0]||1&e[0]))return copyInt_(t,0),0;for(eg_u.length!=i&&(eg_u=new Array(i),eg_v=new Array(i),eg_A=new Array(i),eg_B=new Array(i),eg_C=new Array(i),eg_D=new Array(i)),copy_(eg_u,t),copy_(eg_v,e),copyInt_(eg_A,1),copyInt_(eg_B,0),copyInt_(eg_C,0),copyInt_(eg_D,1);;){for(;!(1&eg_u[0]);)halve_(eg_u),1&eg_A[0]||1&eg_B[0]?(add_(eg_A,e),halve_(eg_A),sub_(eg_B,t),halve_(eg_B)):(halve_(eg_A),halve_(eg_B));for(;!(1&eg_v[0]);)halve_(eg_v),1&eg_C[0]||1&eg_D[0]?(add_(eg_C,e),halve_(eg_C),sub_(eg_D,t),halve_(eg_D)):(halve_(eg_C),halve_(eg_D));if(greater(eg_v,eg_u)?(sub_(eg_v,eg_u),sub_(eg_C,eg_A),sub_(eg_D,eg_B)):(sub_(eg_u,eg_v),sub_(eg_A,eg_C),sub_(eg_B,eg_D)),equalsInt(eg_u,0))return negative(eg_C)&&add_(eg_C,e),copy_(t,eg_C),equalsInt(eg_v,1)?1:(copyInt_(t,0),0)}}function inverseModInt(t,e){for(var i=1,s=0;;){if(1==t)return i;if(0==t)return 0;if(s-=i*Math.floor(e/t),1==(e%=t))return s;if(0==e)return 0;i-=s*Math.floor(t/e),t%=e}}function inverseModInt_(t,e){return inverseModInt(t,e)}function eGCD_(t,e,i,s,n){var r=0,a=Math.max(t.length,e.length);for(eg_u.length!=a&&(eg_u=new Array(a),eg_A=new Array(a),eg_B=new Array(a),eg_C=new Array(a),eg_D=new Array(a));!(1&t[0]||1&e[0]);)halve_(t),halve_(e),r++;for(copy_(eg_u,t),copy_(i,e),copyInt_(eg_A,1),copyInt_(eg_B,0),copyInt_(eg_C,0),copyInt_(eg_D,1);;){for(;!(1&eg_u[0]);)halve_(eg_u),1&eg_A[0]||1&eg_B[0]?(add_(eg_A,e),halve_(eg_A),sub_(eg_B,t),halve_(eg_B)):(halve_(eg_A),halve_(eg_B));for(;!(1&i[0]);)halve_(i),1&eg_C[0]||1&eg_D[0]?(add_(eg_C,e),halve_(eg_C),sub_(eg_D,t),halve_(eg_D)):(halve_(eg_C),halve_(eg_D));if(greater(i,eg_u)?(sub_(i,eg_u),sub_(eg_C,eg_A),sub_(eg_D,eg_B)):(sub_(eg_u,i),sub_(eg_A,eg_C),sub_(eg_B,eg_D)),equalsInt(eg_u,0))return negative(eg_C)&&(add_(eg_C,e),sub_(eg_D,t)),multInt_(eg_D,-1),copy_(s,eg_C),copy_(n,eg_D),void leftShift_(i,r)}}function negative(t){return t[t.length-1]>>bpe-1&1}function greaterShift(t,e,i){var s,n=t.length,r=e.length;for(k=n+i<r?n+i:r,s=r-1-i;s<n&&s>=0;s++)if(t[s]>0)return 1;for(s=n-1+i;s<r;s++)if(e[s]>0)return 0;for(s=k-1;s>=i;s--){if(t[s-i]>e[s])return 1;if(t[s-i]<e[s])return 0}return 0}function greater(t,e){var i,s=t.length<e.length?t.length:e.length;for(i=t.length;i<e.length;i++)if(e[i])return 0;for(i=e.length;i<t.length;i++)if(t[i])return 1;for(i=s-1;i>=0;i--){if(t[i]>e[i])return 1;if(t[i]<e[i])return 0}return 0}function divide_(t,e,i,s){var n,r,a,o,l,c,h,d;for(copy_(s,t),r=e.length;0==e[r-1];r--);for(d=e[r-1],h=0;d;h++)d>>=1;for(leftShift_(e,h=bpe-h),leftShift_(s,h),n=s.length;0==s[n-1]&&n>r;n--);for(copyInt_(i,0);!greaterShift(e,s,n-r);)subShift_(s,e,n-r),i[n-r]++;for(a=n-1;a>=r;a--){for(s[a]==e[r-1]?i[a-r]=mask:i[a-r]=Math.floor((s[a]*radix+s[a-1])/e[r-1]);c=(l=(r>1?e[r-2]:0)*i[a-r])>>bpe,l&=mask,c=(o=c+i[a-r]*e[r-1])>>bpe,o&=mask,c==s[a]?o==s[a-1]?l>(a>1?s[a-2]:0):o>s[a-1]:c>s[a];)i[a-r]--;linCombShift_(s,e,-i[a-r],a-r),negative(s)&&(addShift_(s,e,a-r),i[a-r]--)}rightShift_(e,h),rightShift_(s,h)}function carry_(t){var e,i,s,n;for(i=t.length,s=0,e=0;e<i;e++)n=0,(s+=t[e])<0&&(s+=(n=-(s>>bpe))*radix),t[e]=s&mask,s=(s>>bpe)-n}function modInt(t,e){var i,s=0;for(i=t.length-1;i>=0;i--)s=(s*radix+t[i])%e;return s}function int2bigInt(t,e,i){var s;return s=i>(s=Math.ceil(e/bpe)+1)?i:s,buff=new Array(s),copyInt_(buff,t),buff}function str2bigInt(t,e,i){var s,n,r,a,o,l=t.length;if(-1==e){for(r=new Array(0);;){for(a=new Array(r.length+1),n=0;n<r.length;n++)a[n+1]=r[n];if(a[0]=parseInt(t,10),r=a,(s=t.indexOf(",",0))<1)break;if(0==(t=t.substring(s+1)).length)break}return r.length<i?(copy_(a=new Array(i),r),a):r}for(r=int2bigInt(0,e*l,0),n=0;n<l&&(s=digitsStr.indexOf(t.substring(n,n+1),0),e<=36&&s>=36&&(s-=26),!(s>=e||s<0));n++)multInt_(r,e),addInt_(r,s);for(l=r.length;l>0&&!r[l-1];l--);for(l=i>l+1?i:l+1,a=new Array(l),o=l<r.length?l:r.length,n=0;n<o;n++)a[n]=r[n];for(;n<l;n++)a[n]=0;return a}function equalsInt(t,e){var i;if(t[0]!=e)return 0;for(i=1;i<t.length;i++)if(t[i])return 0;return 1}function equals(t,e){var i,s=t.length<e.length?t.length:e.length;for(i=0;i<s;i++)if(t[i]!=e[i])return 0;if(t.length>e.length){for(;i<t.length;i++)if(t[i])return 0}else for(;i<e.length;i++)if(e[i])return 0;return 1}function isZero(t){var e;for(e=0;e<t.length;e++)if(t[e])return 0;return 1}function bigInt2str(t,e){var i,s,n="";if(s6.length!=t.length?s6=dup(t):copy_(s6,t),-1==e){for(i=t.length-1;i>0;i--)n+=t[i]+",";n+=t[0]}else for(;!isZero(s6);)s=divInt_(s6,e),n=digitsStr.substring(s,s+1)+n;return 0==n.length&&(n="0"),n}function dup(t){return buff=new Array(t.length),copy_(buff,t),buff}function copy_(t,e){var i,s=t.length<e.length?t.length:e.length;for(i=0;i<s;i++)t[i]=e[i];for(i=s;i<t.length;i++)t[i]=0}function copyInt_(t,e){var i,s;for(s=e,i=0;i<t.length;i++)t[i]=s&mask,s>>=bpe}function addInt_(t,e){var i,s,n,r;for(t[0]+=e,s=t.length,n=0,i=0;i<s;i++)if(r=0,(n+=t[i])<0&&(n+=(r=-(n>>bpe))*radix),t[i]=n&mask,!(n=(n>>bpe)-r))return}function rightShift_(t,e){var i,s=Math.floor(e/bpe);if(s){for(i=0;i<t.length-s;i++)t[i]=t[i+s];for(;i<t.length;i++)t[i]=0;e%=bpe}for(i=0;i<t.length-1;i++)t[i]=mask&(t[i+1]<<bpe-e|t[i]>>e);t[i]>>=e}function halve_(t){var e;for(e=0;e<t.length-1;e++)t[e]=mask&(t[e+1]<<bpe-1|t[e]>>1);t[e]=t[e]>>1|t[e]&radix>>1}function leftShift_(t,e){var i,s=Math.floor(e/bpe);if(s){for(i=t.length;i>=s;i--)t[i]=t[i-s];for(;i>=0;i--)t[i]=0;e%=bpe}if(e){for(i=t.length-1;i>0;i--)t[i]=mask&(t[i]<<e|t[i-1]>>bpe-e);t[i]=mask&t[i]<<e}}function multInt_(t,e){var i,s,n,r;if(e)for(s=t.length,n=0,i=0;i<s;i++)r=0,(n+=t[i]*e)<0&&(n+=(r=-(n>>bpe))*radix),t[i]=n&mask,n=(n>>bpe)-r}function divInt_(t,e){var i,s,n=0;for(i=t.length-1;i>=0;i--)s=n*radix+t[i],t[i]=Math.floor(s/e),n=s%e;return n}function linComb_(t,e,i,s){var n,r,a,o;for(a=t.length<e.length?t.length:e.length,o=t.length,r=0,n=0;n<a;n++)r+=i*t[n]+s*e[n],t[n]=r&mask,r>>=bpe;for(n=a;n<o;n++)r+=i*t[n],t[n]=r&mask,r>>=bpe}function linCombShift_(t,e,i,s){var n,r,a,o;for(a=t.length<s+e.length?t.length:s+e.length,o=t.length,r=0,n=s;n<a;n++)r+=t[n]+i*e[n-s],t[n]=r&mask,r>>=bpe;for(n=a;r&&n<o;n++)r+=t[n],t[n]=r&mask,r>>=bpe}function addShift_(t,e,i){var s,n,r,a;for(r=t.length<i+e.length?t.length:i+e.length,a=t.length,n=0,s=i;s<r;s++)n+=t[s]+e[s-i],t[s]=n&mask,n>>=bpe;for(s=r;n&&s<a;s++)n+=t[s],t[s]=n&mask,n>>=bpe}function subShift_(t,e,i){var s,n,r,a;for(r=t.length<i+e.length?t.length:i+e.length,a=t.length,n=0,s=i;s<r;s++)n+=t[s]-e[s-i],t[s]=n&mask,n>>=bpe;for(s=r;n&&s<a;s++)n+=t[s],t[s]=n&mask,n>>=bpe}function sub_(t,e){var i,s,n;for(n=t.length<e.length?t.length:e.length,s=0,i=0;i<n;i++)s+=t[i]-e[i],t[i]=s&mask,s>>=bpe;for(i=n;s&&i<t.length;i++)s+=t[i],t[i]=s&mask,s>>=bpe}function add_(t,e){var i,s,n;for(n=t.length<e.length?t.length:e.length,s=0,i=0;i<n;i++)s+=t[i]+e[i],t[i]=s&mask,s>>=bpe;for(i=n;s&&i<t.length;i++)s+=t[i],t[i]=s&mask,s>>=bpe}function mult_(t,e){var i;for(ss.length!=2*t.length&&(ss=new Array(2*t.length)),copyInt_(ss,0),i=0;i<e.length;i++)e[i]&&linCombShift_(ss,t,e[i],i);copy_(t,ss)}function mod_(t,e){s4.length!=t.length?s4=dup(t):copy_(s4,t),s5.length!=t.length&&(s5=dup(t)),divide_(s4,e,s5,t)}function multMod_(t,e,i){var s;for(s0.length!=2*t.length&&(s0=new Array(2*t.length)),copyInt_(s0,0),s=0;s<e.length;s++)e[s]&&linCombShift_(s0,t,e[s],s);mod_(s0,i),copy_(t,s0)}function squareMod_(t,e){var i,s,n,r,a;for(r=t.length;r>0&&!t[r-1];r--);for(a=r>e.length?2*r:2*e.length,s0.length!=a&&(s0=new Array(a)),copyInt_(s0,0),i=0;i<r;i++){for(n=s0[2*i]+t[i]*t[i],s0[2*i]=n&mask,n>>=bpe,s=i+1;s<r;s++)n=s0[i+s]+2*t[i]*t[s]+n,s0[i+s]=n&mask,n>>=bpe;s0[i+r]=n}mod_(s0,e),copy_(t,s0)}function trim(t,e){var i,s;for(i=t.length;i>0&&!t[i-1];i--);return copy_(s=new Array(i+e),t),s}function powMod_(t,e,i){var s,n,r,a;if(s7.length!=i.length&&(s7=dup(i)),0!=(1&i[0])){for(copyInt_(s7,0),r=i.length;r>0&&!i[r-1];r--);for(a=radix-inverseModInt(modInt(i,radix),radix),s7[r]=1,multMod_(t,s7,i),s3.length!=t.length?s3=dup(t):copy_(s3,t),s=e.length-1;s>0&!e[s];s--);if(0!=e[s]){for(n=1<<bpe-1;n&&!(e[s]&n);n>>=1);for(;;){if(!(n>>=1)){if(--s<0)return void mont_(t,one,i,a);n=1<<bpe-1}mont_(t,t,i,a),n&e[s]&&mont_(t,s3,i,a)}}else copyInt_(t,1)}else for(copy_(s7,t),copyInt_(t,1);!equalsInt(e,0);)1&e[0]&&multMod_(t,s7,i),divInt_(e,2),squareMod_(s7,i)}function mont_(t,e,i,s){var n,r,a,o,l,c,h=i.length,d=e.length;for(sa.length!=h&&(sa=new Array(h)),copyInt_(sa,0);h>0&&0==i[h-1];h--);for(;d>0&&0==e[d-1];d--);for(c=sa.length-1,n=0;n<h;n++){for(a=(l=sa[0]+t[n]*e[0])+(o=(l&mask)*s&mask)*i[0]>>bpe,l=t[n],r=1;r<d-4;)a+=sa[r]+o*i[r]+l*e[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r]+l*e[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r]+l*e[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r]+l*e[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r]+l*e[r],sa[r-1]=a&mask,a>>=bpe,r++;for(;r<d;)a+=sa[r]+o*i[r]+l*e[r],sa[r-1]=a&mask,a>>=bpe,r++;for(;r<h-4;)a+=sa[r]+o*i[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r],sa[r-1]=a&mask,a>>=bpe,r++,a+=sa[r]+o*i[r],sa[r-1]=a&mask,a>>=bpe,r++;for(;r<h;)a+=sa[r]+o*i[r],sa[r-1]=a&mask,a>>=bpe,r++;for(;r<c;)a+=sa[r],sa[r-1]=a&mask,a>>=bpe,r++;sa[r-1]=a&mask}greater(i,sa)||sub_(sa,i),copy_(t,sa)}bpe>>=1,mask=(1<<bpe)-1,radix=mask+1,one=int2bigInt(1,1,1),t=new Array(0),ss=t,s0=t,s1=t,s2=t,s3=t,s4=t,s5=t,s6=t,s7=t,T=t,sa=t,mr_x1=t,mr_r=t,mr_a=t,eg_v=t,eg_u=t,eg_A=t,eg_B=t,eg_C=t,eg_D=t,md_q1=t,md_q2=t,md_q3=t,md_r=t,md_r1=t,md_r2=t,md_tt=t,primes=t,pows=t,s_i=t,s_i2=t,s_R=t,s_rm=t,s_q=t,s_n1=t,s_a=t,s_r2=t,s_n=t,s_b=t,s_d=t,s_x1=t,s_x2=t,s_aa=t,rpprb=t;var blowfish=function(t){var e,i,s,n,r,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],o=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],l=[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],c=[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],h=[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462];function d(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)}function u(t,e){return(255&t.charCodeAt(e++))<<24|(255&t.charCodeAt(e++))<<16|(255&t.charCodeAt(e++))<<8|255&t.charCodeAt(e++)}function p(t,e){return d(u(t,0)^u(e,0))+d(u(t,4)^u(e,4))}function f(t){return(i[t>>24&255]+s[t>>16&255]^n[t>>8&255])+r[255&t]^0}function m(t){for(var i,s=0,n=u(t,0),r=u(t,4);s<16;)i=n^=e[s++],n=r^=f(n),r=i;return n^=e[s++],d(r^=e[s])+d(n)}function v(t){for(var i,s=17,n=u(t,0),r=u(t,4);s>1;)i=n^=e[s--],n=r^=f(n),r=i;return n^=e[s--],d(r^=e[s])+d(n)}function E(t){var d,p="\0\0\0\0\0\0\0\0";for(e=a.slice(),i=o.slice(),s=l.slice(),n=c.slice(),r=h.slice();t.length<72;)t+=t;for(d=0;d<18;)e[d]^=u(t,d<<2),d++;for(d=0;d<18;)p=m(p),e[d++]=u(p,0),e[d++]=u(p,4);for(d=0;d<256;)p=m(p),i[d++]=u(p,0),i[d++]=u(p,4);for(d=0;d<256;)p=m(p),s[d++]=u(p,0),s[d++]=u(p,4);for(d=0;d<256;)p=m(p),n[d++]=u(p,0),n[d++]=u(p,4);for(d=0;d<256;)p=m(p),r[d++]=u(p,0),r[d++]=u(p,4)}return{encrypt:function(t){var e,i,s,n=[],r=t.data||"",a=t.key||"\0",o=t.mode||"ecb",l=t.pchar||"";if(E(a),r=function(t){for(var e,i=0,s=t.length,n=String.fromCharCode,r=[];i<s;)(e=t.charCodeAt(i++))<128?r.push(n(e)):e<2048?r.push(n(e>>6&31|192,63&e|128)):e<65536?r.push(n(e>>12&15|224,e>>6&63|128,63&e|128)):e<2097152&&r.push(n(e>>18&7|240,e>>12&63|128,e>>6&63|128,63&e|128));return r.join("")}(r),r+=new Array((8-r.length%8)%8+1).join(l),"cbc"==o)for(s=t.iv||"\0\0\0\0\0\0\0\0",n.push(s),e=0;e<r.length;)i=m(p(r.substr(e,8),s)),n.push(i),s=i,e+=8;else for(e=0;e<r.length;)n.push(m(r.substr(e,8))),e+=8;return n.join("")},decrypt:function(t){var e,i,s,n=[],r=t.data||"",a=t.key||"\0",o=t.mode||"ecb",l=t.pchar||"";if(E(a),r+=new Array((8-r.length%8)%8+1).join("\0"),"cbc"==o)for(s=r.substr(0,8)||"\0\0\0\0\0\0\0\0",e=8;e<r.length;)i=r.substr(e,8),n.push(p(v(i),s)),s=i,e+=8;else for(e=0;e<r.length;)n.push(v(r.substr(e,8))),e+=8;return function(t){for(var e,i=0,s=t.length,n=String.fromCharCode,r=[];i<s;)0==(128&(e=t.charCodeAt(i++)))?r.push(n(255&e)):192==(224&e)?i<s&&r.push(n(e<<6&1984|63&t.charCodeAt(i++))):224==(240&e)?i+1<s&&r.push(n(e<<12&61440|t.charCodeAt(i++)<<6&4032|63&t.charCodeAt(i++))):240==(248&e)&&i+2<s&&r.push(n(e<<18&1835008|t.charCodeAt(i++)<<12&258048|t.charCodeAt(i++)<<6&4032|63&t.charCodeAt(i++)));return r.join("")}(r=n.join("").replace(new RegExp(l+"+$"),""))},mkIV:function(){return d(4294967296*Math.random())+d(4294967296*Math.random())}}}(),md5=function(t){var e=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],i=[3614090360,3905402710,606105819,3250441966,4118548399,1200080426,2821735955,4249261313,1770035416,2336552879,4294925233,2304563134,1804603682,4254626195,2792965006,1236535329,4129170786,3225465664,643717713,3921069994,3593408605,38016083,3634488961,3889429448,568446438,3275163606,4107603335,1163531501,2850285829,4243563512,1735328473,2368359562,4294588738,2272392833,1839030562,4259657740,2763975236,1272893353,4139469664,3200236656,681279174,3936430074,3572445317,76029189,3654602809,3873151461,530742520,3299628645,4096336452,1126891415,2878612391,4237533241,1700485571,2399980690,4293915773,2240044497,1873313359,4264355552,2734768916,1309151649,4149444226,3174756917,718787259,3951481745],s=""+new Array(64).join("\0");function n(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)}function r(t,e){return 255&t.charCodeAt(e++)|(255&t.charCodeAt(e++))<<8|(255&t.charCodeAt(e++))<<16|t.charCodeAt(e++)<<24}return{bin:function(t){var a,o,l,c,h,d,u,p,f,m=1732584193,v=4023233417,E=2562383102,g=271733878,_=new Array(16);for(t+=s.slice(0,64-(t.length+8)%64)+n(t.length<<3)+n(0),p=0;p<t.length;p+=64){for(f=0;f<16;f++)_[f]=r(t,p+(f<<2));for(a=m,o=v,l=E,c=g,f=0;f<64;f++)f<16?(h=o&l|~o&c,d=f):f<32?(h=c&o|~c&l,d=5*f+1&15):f<48?(h=o^l^c,d=3*f+5&15):(h=l^(o|~c),d=7*f&15),u=a+h+i[f]+_[d]|0,a=c,c=l,l=o,o=(u=u<<e[f]|u>>>32-e[f])+o|0;m=m+a|0,v=v+o|0,E=E+l|0,g=g+c|0}return n(m)+n(v)+n(E)+n(g)}}}();(function(){var t=void 0,e=this;function i(i,s){var n,r=i.split("."),a=e;!(r[0]in a)&&a.execScript&&a.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||s===t?a=a[n]?a[n]:a[n]={}:a[n]=s}var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function n(t){var e,i,n,r,a,o,l,c,h,d,u=t.length,p=0,f=Number.POSITIVE_INFINITY;for(c=0;c<u;++c)t[c]>p&&(p=t[c]),t[c]<f&&(f=t[c]);for(e=1<<p,i=new(s?Uint32Array:Array)(e),n=1,r=0,a=2;n<=p;){for(c=0;c<u;++c)if(t[c]===n){for(o=0,l=r,h=0;h<n;++h)o=o<<1|1&l,l>>=1;for(d=n<<16|c,h=o;h<e;h+=a)i[h]=d;++r}++n,r<<=1,a<<=1}return[i,p,f]}function r(t,e){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=s?new Uint8Array(t):t,this.m=!1,this.i=o,this.r=!1,!e&&(e={})||(e.index&&(this.a=e.index),e.bufferSize&&(this.h=e.bufferSize),e.bufferType&&(this.i=e.bufferType),e.resize&&(this.r=e.resize)),this.i){case a:this.b=32768,this.c=new(s?Uint8Array:Array)(32768+this.h+258);break;case o:this.b=0,this.c=new(s?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var a=0,o=1,l={t:a,s:o};r.prototype.k=function(){for(;!this.m;){var e=P(this,3);switch(1&e&&(this.m=!0),e>>>=1){case 0:var i=this.input,r=this.a,l=this.c,c=this.b,h=i.length,d=t,p=l.length,f=t;if(this.d=this.f=0,r+1>=h)throw Error("invalid uncompressed block header: LEN");if(d=i[r++]|i[r++]<<8,r+1>=h)throw Error("invalid uncompressed block header: NLEN");if(d===~(i[r++]|i[r++]<<8))throw Error("invalid uncompressed block header: length verify");if(r+d>i.length)throw Error("input buffer is broken");switch(this.i){case a:for(;c+d>l.length;){if(d-=f=p-c,s)l.set(i.subarray(r,r+f),c),c+=f,r+=f;else for(;f--;)l[c++]=i[r++];this.b=c,l=this.e(),c=this.b}break;case o:for(;c+d>l.length;)l=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(s)l.set(i.subarray(r,r+d),c),c+=d,r+=d;else for(;d--;)l[c++]=i[r++];this.a=r,this.b=c,this.c=l;break;case 1:this.j(R,C);break;case 2:var m,v,E,g,_=P(this,5)+257,y=P(this,5)+1,b=P(this,4)+4,S=new(s?Uint8Array:Array)(u.length),T=t,O=t,A=t,I=t,x=t;for(x=0;x<b;++x)S[u[x]]=P(this,3);if(!s)for(x=b,b=S.length;x<b;++x)S[u[x]]=0;for(m=n(S),T=new(s?Uint8Array:Array)(_+y),x=0,g=_+y;x<g;)switch(O=w(this,m)){case 16:for(I=3+P(this,2);I--;)T[x++]=A;break;case 17:for(I=3+P(this,3);I--;)T[x++]=0;A=0;break;case 18:for(I=11+P(this,7);I--;)T[x++]=0;A=0;break;default:A=T[x++]=O}v=n(s?T.subarray(0,_):T.slice(0,_)),E=n(s?T.subarray(_):T.slice(_)),this.j(v,E);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var c,h,d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=s?new Uint16Array(d):d,p=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],f=s?new Uint16Array(p):p,m=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],v=s?new Uint8Array(m):m,E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],g=s?new Uint16Array(E):E,_=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],y=s?new Uint8Array(_):_,b=new(s?Uint8Array:Array)(288);for(c=0,h=b.length;c<h;++c)b[c]=143>=c?8:255>=c?9:279>=c?7:8;var S,T,R=n(b),O=new(s?Uint8Array:Array)(30);for(S=0,T=O.length;S<T;++S)O[S]=5;var C=n(O);function P(t,e){for(var i,s=t.f,n=t.d,r=t.input,a=t.a,o=r.length;n<e;){if(a>=o)throw Error("input buffer is broken");s|=r[a++]<<n,n+=8}return i=s&(1<<e)-1,t.f=s>>>e,t.d=n-e,t.a=a,i}function w(t,e){for(var i,s,n=t.f,r=t.d,a=t.input,o=t.a,l=a.length,c=e[0],h=e[1];r<h&&!(o>=l);)n|=a[o++]<<r,r+=8;if((s=(i=c[n&(1<<h)-1])>>>16)>r)throw Error("invalid code length: "+s);return t.f=n>>s,t.d=r-s,t.a=o,65535&i}function A(t,e){var i,s;switch(this.input=t,this.a=0,!e&&(e={})||(e.index&&(this.a=e.index),e.verify&&(this.A=e.verify)),i=t[this.a++],s=t[this.a++],15&i){case I:this.method=I;break;default:throw Error("unsupported compression method")}if(0!=((i<<8)+s)%31)throw Error("invalid fcheck flag:"+((i<<8)+s)%31);if(32&s)throw Error("fdict flag is not supported");this.q=new r(t,{index:this.a,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})}r.prototype.j=function(t,e){var i=this.c,s=this.b;this.o=t;for(var n,r,a,o,l=i.length-258;256!==(n=w(this,t));)if(256>n)s>=l&&(this.b=s,i=this.e(),s=this.b),i[s++]=n;else for(o=f[r=n-257],0<v[r]&&(o+=P(this,v[r])),n=w(this,e),a=g[n],0<y[n]&&(a+=P(this,y[n])),s>=l&&(this.b=s,i=this.e(),s=this.b);o--;)i[s]=i[s++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=s},r.prototype.w=function(t,e){var i=this.c,s=this.b;this.o=t;for(var n,r,a,o,l=i.length;256!==(n=w(this,t));)if(256>n)s>=l&&(l=(i=this.e()).length),i[s++]=n;else for(o=f[r=n-257],0<v[r]&&(o+=P(this,v[r])),n=w(this,e),a=g[n],0<y[n]&&(a+=P(this,y[n])),s+o>l&&(l=(i=this.e()).length);o--;)i[s]=i[s++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=s},r.prototype.e=function(){var t,e,i=new(s?Uint8Array:Array)(this.b-32768),n=this.b-32768,r=this.c;if(s)i.set(r.subarray(32768,i.length));else for(t=0,e=i.length;t<e;++t)i[t]=r[t+32768];if(this.g.push(i),this.l+=i.length,s)r.set(r.subarray(n,n+32768));else for(t=0;32768>t;++t)r[t]=r[n+t];return this.b=32768,r},r.prototype.z=function(t){var e,i,n,r=this.input.length/this.a+1|0,a=this.input,o=this.c;return t&&("number"==typeof t.p&&(r=t.p),"number"==typeof t.u&&(r+=t.u)),2>r?i=(n=(a.length-this.a)/this.o[2]/2*258|0)<o.length?o.length+n:o.length<<1:i=o.length*r,s?(e=new Uint8Array(i)).set(o):e=o,this.c=e},r.prototype.n=function(){var t,e,i,n,r,a=0,o=this.c,l=this.g,c=new(s?Uint8Array:Array)(this.l+(this.b-32768));if(0===l.length)return s?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(e=0,i=l.length;e<i;++e)for(n=0,r=(t=l[e]).length;n<r;++n)c[a++]=t[n];for(e=32768,i=this.b;e<i;++e)c[a++]=o[e];return this.g=[],this.buffer=c},r.prototype.v=function(){var t,e=this.b;return s?this.r?(t=new Uint8Array(e)).set(this.c.subarray(0,e)):t=this.c.subarray(0,e):(this.c.length>e&&(this.c.length=e),t=this.c),this.buffer=t},A.prototype.k=function(){var t,e,i=this.input;if(t=this.q.k(),this.a=this.q.a,this.A){e=(i[this.a++]<<24|i[this.a++]<<16|i[this.a++]<<8|i[this.a++])>>>0;var s=t;if("string"==typeof s){var n,r,a=s.split("");for(n=0,r=a.length;n<r;n++)a[n]=(255&a[n].charCodeAt(0))>>>0;s=a}for(var o,l=1,c=0,h=s.length,d=0;0<h;){h-=o=1024<h?1024:h;do{c+=l+=s[d++]}while(--o);l%=65521,c%=65521}if(e!==(c<<16|l)>>>0)throw Error("invalid adler-32 checksum")}return t};var I=8;i("Zlib.Inflate",A),i("Zlib.Inflate.prototype.decompress",A.prototype.k);var x,M,D,N,k={ADAPTIVE:l.s,BLOCK:l.t};if(Object.keys)x=Object.keys(k);else for(M in x=[],D=0,k)x[D++]=M;for(D=0,N=x.length;D<N;++D)i("Zlib.Inflate.BufferType."+(M=x[D]),k[M])}).call(this),window.epson||(window.epson={}),window.epson.ePOSDevice=ePOSDevice,window.epson.ePOSDeviceConfiguration=ePOSDeviceConfiguration}(window),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Swiper=e()}(this,(function(){"use strict";var t="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,e="undefined"==typeof window?{document:t,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window,i=function(t){for(var e=0;e<t.length;e+=1)this[e]=t[e];return this.length=t.length,this};function s(s,n){var r=[],a=0;if(s&&!n&&s instanceof i)return s;if(s)if("string"==typeof s){var o,l,c=s.trim();if(c.indexOf("<")>=0&&c.indexOf(">")>=0){var h="div";for(0===c.indexOf("<li")&&(h="ul"),0===c.indexOf("<tr")&&(h="tbody"),0!==c.indexOf("<td")&&0!==c.indexOf("<th")||(h="tr"),0===c.indexOf("<tbody")&&(h="table"),0===c.indexOf("<option")&&(h="select"),(l=t.createElement(h)).innerHTML=c,a=0;a<l.childNodes.length;a+=1)r.push(l.childNodes[a])}else for(o=n||"#"!==s[0]||s.match(/[ .<>:~]/)?(n||t).querySelectorAll(s.trim()):[t.getElementById(s.trim().split("#")[1])],a=0;a<o.length;a+=1)o[a]&&r.push(o[a])}else if(s.nodeType||s===e||s===t)r.push(s);else if(s.length>0&&s[0].nodeType)for(a=0;a<s.length;a+=1)r.push(s[a]);return new i(r)}function n(t){for(var e=[],i=0;i<t.length;i+=1)-1===e.indexOf(t[i])&&e.push(t[i]);return e}s.fn=i.prototype,s.Class=i,s.Dom7=i;var r={addClass:function(t){if(void 0===t)return this;for(var e=t.split(" "),i=0;i<e.length;i+=1)for(var s=0;s<this.length;s+=1)void 0!==this[s]&&void 0!==this[s].classList&&this[s].classList.add(e[i]);return this},removeClass:function(t){for(var e=t.split(" "),i=0;i<e.length;i+=1)for(var s=0;s<this.length;s+=1)void 0!==this[s]&&void 0!==this[s].classList&&this[s].classList.remove(e[i]);return this},hasClass:function(t){return!!this[0]&&this[0].classList.contains(t)},toggleClass:function(t){for(var e=t.split(" "),i=0;i<e.length;i+=1)for(var s=0;s<this.length;s+=1)void 0!==this[s]&&void 0!==this[s].classList&&this[s].classList.toggle(e[i]);return this},attr:function(t,e){var i=arguments;if(1===arguments.length&&"string"==typeof t)return this[0]?this[0].getAttribute(t):void 0;for(var s=0;s<this.length;s+=1)if(2===i.length)this[s].setAttribute(t,e);else for(var n in t)this[s][n]=t[n],this[s].setAttribute(n,t[n]);return this},removeAttr:function(t){for(var e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this},data:function(t,e){var i;if(void 0!==e){for(var s=0;s<this.length;s+=1)(i=this[s]).dom7ElementDataStorage||(i.dom7ElementDataStorage={}),i.dom7ElementDataStorage[t]=e;return this}if(i=this[0]){if(i.dom7ElementDataStorage&&t in i.dom7ElementDataStorage)return i.dom7ElementDataStorage[t];var n=i.getAttribute("data-"+t);return n||void 0}},transform:function(t){for(var e=0;e<this.length;e+=1){var i=this[e].style;i.webkitTransform=t,i.transform=t}return this},transition:function(t){"string"!=typeof t&&(t+="ms");for(var e=0;e<this.length;e+=1){var i=this[e].style;i.webkitTransitionDuration=t,i.transitionDuration=t}return this},on:function(){for(var t,e=[],i=arguments.length;i--;)e[i]=arguments[i];var n=e[0],r=e[1],a=e[2],o=e[3];function l(t){var e=t.target;if(e){var i=t.target.dom7EventData||[];if(i.indexOf(t)<0&&i.unshift(t),s(e).is(r))a.apply(e,i);else for(var n=s(e).parents(),o=0;o<n.length;o+=1)s(n[o]).is(r)&&a.apply(n[o],i)}}function c(t){var e=t&&t.target&&t.target.dom7EventData||[];e.indexOf(t)<0&&e.unshift(t),a.apply(this,e)}"function"==typeof e[1]&&(n=(t=e)[0],a=t[1],o=t[2],r=void 0),o||(o=!1);for(var h,d=n.split(" "),u=0;u<this.length;u+=1){var p=this[u];if(r)for(h=0;h<d.length;h+=1){var f=d[h];p.dom7LiveListeners||(p.dom7LiveListeners={}),p.dom7LiveListeners[f]||(p.dom7LiveListeners[f]=[]),p.dom7LiveListeners[f].push({listener:a,proxyListener:l}),p.addEventListener(f,l,o)}else for(h=0;h<d.length;h+=1){var m=d[h];p.dom7Listeners||(p.dom7Listeners={}),p.dom7Listeners[m]||(p.dom7Listeners[m]=[]),p.dom7Listeners[m].push({listener:a,proxyListener:c}),p.addEventListener(m,c,o)}}return this},off:function(){for(var t,e=[],i=arguments.length;i--;)e[i]=arguments[i];var s=e[0],n=e[1],r=e[2],a=e[3];"function"==typeof e[1]&&(s=(t=e)[0],r=t[1],a=t[2],n=void 0),a||(a=!1);for(var o=s.split(" "),l=0;l<o.length;l+=1)for(var c=o[l],h=0;h<this.length;h+=1){var d=this[h],u=void 0;if(!n&&d.dom7Listeners?u=d.dom7Listeners[c]:n&&d.dom7LiveListeners&&(u=d.dom7LiveListeners[c]),u&&u.length)for(var p=u.length-1;p>=0;p-=1){var f=u[p];r&&f.listener===r||r&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===r?(d.removeEventListener(c,f.proxyListener,a),u.splice(p,1)):r||(d.removeEventListener(c,f.proxyListener,a),u.splice(p,1))}}return this},trigger:function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];for(var n=i[0].split(" "),r=i[1],a=0;a<n.length;a+=1)for(var o=n[a],l=0;l<this.length;l+=1){var c=this[l],h=void 0;try{h=new e.CustomEvent(o,{detail:r,bubbles:!0,cancelable:!0})}catch(d){(h=t.createEvent("Event")).initEvent(o,!0,!0),h.detail=r}c.dom7EventData=i.filter((function(t,e){return e>0})),c.dispatchEvent(h),c.dom7EventData=[],delete c.dom7EventData}return this},transitionEnd:function(t){var e,i=["webkitTransitionEnd","transitionend"],s=this;function n(r){if(r.target===this)for(t.call(this,r),e=0;e<i.length;e+=1)s.off(i[e],n)}if(t)for(e=0;e<i.length;e+=1)s.on(i[e],n);return this},outerWidth:function(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(this.length>0){var i=this[0],s=i.getBoundingClientRect(),n=t.body,r=i.clientTop||n.clientTop||0,a=i.clientLeft||n.clientLeft||0,o=i===e?e.scrollY:i.scrollTop,l=i===e?e.scrollX:i.scrollLeft;return{top:s.top+o-r,left:s.left+l-a}}return null},css:function(t,i){var s;if(1===arguments.length){if("string"!=typeof t){for(s=0;s<this.length;s+=1)for(var n in t)this[s].style[n]=t[n];return this}if(this[0])return e.getComputedStyle(this[0],null).getPropertyValue(t)}if(2===arguments.length&&"string"==typeof t){for(s=0;s<this.length;s+=1)this[s].style[t]=i;return this}return this},each:function(t){if(!t)return this;for(var e=0;e<this.length;e+=1)if(!1===t.call(this[e],e,this[e]))return this;return this},html:function(t){if(void 0===t)return this[0]?this[0].innerHTML:void 0;for(var e=0;e<this.length;e+=1)this[e].innerHTML=t;return this},text:function(t){if(void 0===t)return this[0]?this[0].textContent.trim():null;for(var e=0;e<this.length;e+=1)this[e].textContent=t;return this},is:function(n){var r,a,o=this[0];if(!o||void 0===n)return!1;if("string"==typeof n){if(o.matches)return o.matches(n);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(n);if(o.msMatchesSelector)return o.msMatchesSelector(n);for(r=s(n),a=0;a<r.length;a+=1)if(r[a]===o)return!0;return!1}if(n===t)return o===t;if(n===e)return o===e;if(n.nodeType||n instanceof i){for(r=n.nodeType?[n]:n,a=0;a<r.length;a+=1)if(r[a]===o)return!0;return!1}return!1},index:function(){var t,e=this[0];if(e){for(t=0;null!==(e=e.previousSibling);)1===e.nodeType&&(t+=1);return t}},eq:function(t){if(void 0===t)return this;var e,s=this.length;return new i(t>s-1?[]:t<0?(e=s+t)<0?[]:[this[e]]:[this[t]])},append:function(){for(var e,s=[],n=arguments.length;n--;)s[n]=arguments[n];for(var r=0;r<s.length;r+=1){e=s[r];for(var a=0;a<this.length;a+=1)if("string"==typeof e){var o=t.createElement("div");for(o.innerHTML=e;o.firstChild;)this[a].appendChild(o.firstChild)}else if(e instanceof i)for(var l=0;l<e.length;l+=1)this[a].appendChild(e[l]);else this[a].appendChild(e)}return this},prepend:function(e){var s,n;for(s=0;s<this.length;s+=1)if("string"==typeof e){var r=t.createElement("div");for(r.innerHTML=e,n=r.childNodes.length-1;n>=0;n-=1)this[s].insertBefore(r.childNodes[n],this[s].childNodes[0])}else if(e instanceof i)for(n=0;n<e.length;n+=1)this[s].insertBefore(e[n],this[s].childNodes[0]);else this[s].insertBefore(e,this[s].childNodes[0]);return this},next:function(t){return this.length>0?t?this[0].nextElementSibling&&s(this[0].nextElementSibling).is(t)?new i([this[0].nextElementSibling]):new i([]):this[0].nextElementSibling?new i([this[0].nextElementSibling]):new i([]):new i([])},nextAll:function(t){var e=[],n=this[0];if(!n)return new i([]);for(;n.nextElementSibling;){var r=n.nextElementSibling;t?s(r).is(t)&&e.push(r):e.push(r),n=r}return new i(e)},prev:function(t){if(this.length>0){var e=this[0];return t?e.previousElementSibling&&s(e.previousElementSibling).is(t)?new i([e.previousElementSibling]):new i([]):e.previousElementSibling?new i([e.previousElementSibling]):new i([])}return new i([])},prevAll:function(t){var e=[],n=this[0];if(!n)return new i([]);for(;n.previousElementSibling;){var r=n.previousElementSibling;t?s(r).is(t)&&e.push(r):e.push(r),n=r}return new i(e)},parent:function(t){for(var e=[],i=0;i<this.length;i+=1)null!==this[i].parentNode&&(t?s(this[i].parentNode).is(t)&&e.push(this[i].parentNode):e.push(this[i].parentNode));return s(n(e))},parents:function(t){for(var e=[],i=0;i<this.length;i+=1)for(var r=this[i].parentNode;r;)t?s(r).is(t)&&e.push(r):e.push(r),r=r.parentNode;return s(n(e))},closest:function(t){var e=this;return void 0===t?new i([]):(e.is(t)||(e=e.parents(t).eq(0)),e)},find:function(t){for(var e=[],s=0;s<this.length;s+=1)for(var n=this[s].querySelectorAll(t),r=0;r<n.length;r+=1)e.push(n[r]);return new i(e)},children:function(t){for(var e=[],r=0;r<this.length;r+=1)for(var a=this[r].childNodes,o=0;o<a.length;o+=1)t?1===a[o].nodeType&&s(a[o]).is(t)&&e.push(a[o]):1===a[o].nodeType&&e.push(a[o]);return new i(n(e))},filter:function(t){for(var e=[],s=0;s<this.length;s+=1)t.call(this[s],s,this[s])&&e.push(this[s]);return new i(e)},remove:function(){for(var t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this},add:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i,n,r=this;for(i=0;i<t.length;i+=1){var a=s(t[i]);for(n=0;n<a.length;n+=1)r[r.length]=a[n],r.length+=1}return r},styles:function(){return this[0]?e.getComputedStyle(this[0],null):{}}};Object.keys(r).forEach((function(t){s.fn[t]=s.fn[t]||r[t]}));var a={deleteProps:function(t){var e=t;Object.keys(e).forEach((function(t){try{e[t]=null}catch(i){}try{delete e[t]}catch(i){}}))},nextTick:function(t,e){return void 0===e&&(e=0),setTimeout(t,e)},now:function(){return Date.now()},getTranslate:function(t,i){var s,n,r;void 0===i&&(i="x");var a=e.getComputedStyle(t,null);return e.WebKitCSSMatrix?((n=a.transform||a.webkitTransform).split(",").length>6&&(n=n.split(", ").map((function(t){return t.replace(",",".")})).join(", ")),r=new e.WebKitCSSMatrix("none"===n?"":n)):s=(r=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===i&&(n=e.WebKitCSSMatrix?r.m41:16===s.length?parseFloat(s[12]):parseFloat(s[4])),"y"===i&&(n=e.WebKitCSSMatrix?r.m42:16===s.length?parseFloat(s[13]):parseFloat(s[5])),n||0},parseUrlQuery:function(t){var i,s,n,r,a={},o=t||e.location.href;if("string"==typeof o&&o.length)for(r=(s=(o=o.indexOf("?")>-1?o.replace(/\S*\?/,""):"").split("&").filter((function(t){return""!==t}))).length,i=0;i<r;i+=1)n=s[i].replace(/#\S+/g,"").split("="),a[decodeURIComponent(n[0])]=void 0===n[1]?void 0:decodeURIComponent(n[1])||"";return a},isObject:function(t){return"object"==typeof t&&null!==t&&t.constructor&&t.constructor===Object},extend:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var i=Object(t[0]),s=1;s<t.length;s+=1){var n=t[s];if(null!=n)for(var r=Object.keys(Object(n)),o=0,l=r.length;o<l;o+=1){var c=r[o],h=Object.getOwnPropertyDescriptor(n,c);void 0!==h&&h.enumerable&&(a.isObject(i[c])&&a.isObject(n[c])?a.extend(i[c],n[c]):!a.isObject(i[c])&&a.isObject(n[c])?(i[c]={},a.extend(i[c],n[c])):i[c]=n[c])}}return i}},o={touch:e.Modernizr&&!0===e.Modernizr.touch||!!(e.navigator.maxTouchPoints>0||"ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>0,observer:"MutationObserver"in e||"WebkitMutationObserver"in e,passiveListener:function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,i)}catch(s){}return t}(),gestures:"ongesturestart"in e},l=function(t){void 0===t&&(t={});var e=this;e.params=t,e.eventsListeners={},e.params&&e.params.on&&Object.keys(e.params.on).forEach((function(t){e.on(t,e.params.on[t])}))},c={components:{configurable:!0}};l.prototype.on=function(t,e,i){var s=this;if("function"!=typeof e)return s;var n=i?"unshift":"push";return t.split(" ").forEach((function(t){s.eventsListeners[t]||(s.eventsListeners[t]=[]),s.eventsListeners[t][n](e)})),s},l.prototype.once=function(t,e,i){var s=this;if("function"!=typeof e)return s;function n(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];s.off(t,n),n.f7proxy&&delete n.f7proxy,e.apply(s,i)}return n.f7proxy=e,s.on(t,n,i)},l.prototype.off=function(t,e){var i=this;return i.eventsListeners?(t.split(" ").forEach((function(t){void 0===e?i.eventsListeners[t]=[]:i.eventsListeners[t]&&i.eventsListeners[t].length&&i.eventsListeners[t].forEach((function(s,n){(s===e||s.f7proxy&&s.f7proxy===e)&&i.eventsListeners[t].splice(n,1)}))})),i):i},l.prototype.emit=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i,s,n,r=this;if(!r.eventsListeners)return r;"string"==typeof t[0]||Array.isArray(t[0])?(i=t[0],s=t.slice(1,t.length),n=r):(i=t[0].events,s=t[0].data,n=t[0].context||r);var a=Array.isArray(i)?i:i.split(" ");return a.forEach((function(t){if(r.eventsListeners&&r.eventsListeners[t]){var e=[];r.eventsListeners[t].forEach((function(t){e.push(t)})),e.forEach((function(t){t.apply(n,s)}))}})),r},l.prototype.useModulesParams=function(t){var e=this;e.modules&&Object.keys(e.modules).forEach((function(i){var s=e.modules[i];s.params&&a.extend(t,s.params)}))},l.prototype.useModules=function(t){void 0===t&&(t={});var e=this;e.modules&&Object.keys(e.modules).forEach((function(i){var s=e.modules[i],n=t[i]||{};s.instance&&Object.keys(s.instance).forEach((function(t){var i=s.instance[t];e[t]="function"==typeof i?i.bind(e):i})),s.on&&e.on&&Object.keys(s.on).forEach((function(t){e.on(t,s.on[t])})),s.create&&s.create.bind(e)(n)}))},c.components.set=function(t){this.use&&this.use(t)},l.installModule=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var s=this;s.prototype.modules||(s.prototype.modules={});var n=t.name||Object.keys(s.prototype.modules).length+"_"+a.now();return s.prototype.modules[n]=t,t.proto&&Object.keys(t.proto).forEach((function(e){s.prototype[e]=t.proto[e]})),t.static&&Object.keys(t.static).forEach((function(e){s[e]=t.static[e]})),t.install&&t.install.apply(s,e),s},l.use=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var s=this;return Array.isArray(t)?(t.forEach((function(t){return s.installModule(t)})),s):s.installModule.apply(s,[t].concat(e))},Object.defineProperties(l,c);var h={updateSize:function(){var t,e,i=this.$el;t=void 0!==this.params.width?this.params.width:i[0].clientWidth,e=void 0!==this.params.height?this.params.height:i[0].clientHeight,0===t&&this.isHorizontal()||0===e&&this.isVertical()||(t=t-parseInt(i.css("padding-left"),10)-parseInt(i.css("padding-right"),10),e=e-parseInt(i.css("padding-top"),10)-parseInt(i.css("padding-bottom"),10),a.extend(this,{width:t,height:e,size:this.isHorizontal()?t:e}))},updateSlides:function(){var t=this.params,i=this.$wrapperEl,s=this.size,n=this.rtlTranslate,r=this.wrongRTL,o=this.virtual&&t.virtual.enabled,l=o?this.virtual.slides.length:this.slides.length,c=i.children("."+this.params.slideClass),h=o?this.virtual.slides.length:c.length,d=[],u=[],p=[];function f(e){return!t.cssMode||e!==c.length-1}var m=t.slidesOffsetBefore;"function"==typeof m&&(m=t.slidesOffsetBefore.call(this));var v=t.slidesOffsetAfter;"function"==typeof v&&(v=t.slidesOffsetAfter.call(this));var E=this.snapGrid.length,g=this.snapGrid.length,_=t.spaceBetween,y=-m,b=0,S=0;if(void 0!==s){var T,R;"string"==typeof _&&_.indexOf("%")>=0&&(_=parseFloat(_.replace("%",""))/100*s),this.virtualSize=-_,n?c.css({marginLeft:"",marginTop:""}):c.css({marginRight:"",marginBottom:""}),t.slidesPerColumn>1&&(T=Math.floor(h/t.slidesPerColumn)===h/this.params.slidesPerColumn?h:Math.ceil(h/t.slidesPerColumn)*t.slidesPerColumn,"auto"!==t.slidesPerView&&"row"===t.slidesPerColumnFill&&(T=Math.max(T,t.slidesPerView*t.slidesPerColumn)));for(var O,C=t.slidesPerColumn,P=T/C,w=Math.floor(h/t.slidesPerColumn),A=0;A<h;A+=1){R=0;var I=c.eq(A);if(t.slidesPerColumn>1){var x=void 0,M=void 0,D=void 0;if("row"===t.slidesPerColumnFill&&t.slidesPerGroup>1){var N=Math.floor(A/(t.slidesPerGroup*t.slidesPerColumn)),k=A-t.slidesPerColumn*t.slidesPerGroup*N,L=0===N?t.slidesPerGroup:Math.min(Math.ceil((h-N*C*t.slidesPerGroup)/C),t.slidesPerGroup);x=(M=k-(D=Math.floor(k/L))*L+N*t.slidesPerGroup)+D*T/C,I.css({"-webkit-box-ordinal-group":x,"-moz-box-ordinal-group":x,"-ms-flex-order":x,"-webkit-order":x,order:x})}else"column"===t.slidesPerColumnFill?(D=A-(M=Math.floor(A/C))*C,(M>w||M===w&&D===C-1)&&(D+=1)>=C&&(D=0,M+=1)):M=A-(D=Math.floor(A/P))*P;I.css("margin-"+(this.isHorizontal()?"top":"left"),0!==D&&t.spaceBetween&&t.spaceBetween+"px")}if("none"!==I.css("display")){if("auto"===t.slidesPerView){var B=e.getComputedStyle(I[0],null),V=I[0].style.transform,U=I[0].style.webkitTransform;if(V&&(I[0].style.transform="none"),U&&(I[0].style.webkitTransform="none"),t.roundLengths)R=this.isHorizontal()?I.outerWidth(!0):I.outerHeight(!0);else if(this.isHorizontal()){var F=parseFloat(B.getPropertyValue("width")),j=parseFloat(B.getPropertyValue("padding-left")),H=parseFloat(B.getPropertyValue("padding-right")),$=parseFloat(B.getPropertyValue("margin-left")),z=parseFloat(B.getPropertyValue("margin-right")),q=B.getPropertyValue("box-sizing");R=q&&"border-box"===q?F+$+z:F+j+H+$+z}else{var Y=parseFloat(B.getPropertyValue("height")),W=parseFloat(B.getPropertyValue("padding-top")),X=parseFloat(B.getPropertyValue("padding-bottom")),G=parseFloat(B.getPropertyValue("margin-top")),K=parseFloat(B.getPropertyValue("margin-bottom")),J=B.getPropertyValue("box-sizing");R=J&&"border-box"===J?Y+G+K:Y+W+X+G+K}V&&(I[0].style.transform=V),U&&(I[0].style.webkitTransform=U),t.roundLengths&&(R=Math.floor(R))}else R=(s-(t.slidesPerView-1)*_)/t.slidesPerView,t.roundLengths&&(R=Math.floor(R)),c[A]&&(this.isHorizontal()?c[A].style.width=R+"px":c[A].style.height=R+"px");c[A]&&(c[A].swiperSlideSize=R),p.push(R),t.centeredSlides?(y=y+R/2+b/2+_,0===b&&0!==A&&(y=y-s/2-_),0===A&&(y=y-s/2-_),Math.abs(y)<.001&&(y=0),t.roundLengths&&(y=Math.floor(y)),S%t.slidesPerGroup==0&&d.push(y),u.push(y)):(t.roundLengths&&(y=Math.floor(y)),(S-Math.min(this.params.slidesPerGroupSkip,S))%this.params.slidesPerGroup==0&&d.push(y),u.push(y),y=y+R+_),this.virtualSize+=R+_,b=R,S+=1}}if(this.virtualSize=Math.max(this.virtualSize,s)+v,n&&r&&("slide"===t.effect||"coverflow"===t.effect)&&i.css({width:this.virtualSize+t.spaceBetween+"px"}),t.setWrapperSize&&(this.isHorizontal()?i.css({width:this.virtualSize+t.spaceBetween+"px"}):i.css({height:this.virtualSize+t.spaceBetween+"px"})),t.slidesPerColumn>1&&(this.virtualSize=(R+t.spaceBetween)*T,this.virtualSize=Math.ceil(this.virtualSize/t.slidesPerColumn)-t.spaceBetween,this.isHorizontal()?i.css({width:this.virtualSize+t.spaceBetween+"px"}):i.css({height:this.virtualSize+t.spaceBetween+"px"}),t.centeredSlides)){O=[];for(var Q=0;Q<d.length;Q+=1){var Z=d[Q];t.roundLengths&&(Z=Math.floor(Z)),d[Q]<this.virtualSize+d[0]&&O.push(Z)}d=O}if(!t.centeredSlides){O=[];for(var tt=0;tt<d.length;tt+=1){var et=d[tt];t.roundLengths&&(et=Math.floor(et)),d[tt]<=this.virtualSize-s&&O.push(et)}d=O,Math.floor(this.virtualSize-s)-Math.floor(d[d.length-1])>1&&d.push(this.virtualSize-s)}if(0===d.length&&(d=[0]),0!==t.spaceBetween&&(this.isHorizontal()?n?c.filter(f).css({marginLeft:_+"px"}):c.filter(f).css({marginRight:_+"px"}):c.filter(f).css({marginBottom:_+"px"})),t.centeredSlides&&t.centeredSlidesBounds){var it=0;p.forEach((function(e){it+=e+(t.spaceBetween?t.spaceBetween:0)}));var st=(it-=t.spaceBetween)-s;d=d.map((function(t){return t<0?-m:t>st?st+v:t}))}if(t.centerInsufficientSlides){var nt=0;if(p.forEach((function(e){nt+=e+(t.spaceBetween?t.spaceBetween:0)})),(nt-=t.spaceBetween)<s){var rt=(s-nt)/2;d.forEach((function(t,e){d[e]=t-rt})),u.forEach((function(t,e){u[e]=t+rt}))}}a.extend(this,{slides:c,snapGrid:d,slidesGrid:u,slidesSizesGrid:p}),h!==l&&this.emit("slidesLengthChange"),d.length!==E&&(this.params.watchOverflow&&this.checkOverflow(),this.emit("snapGridLengthChange")),u.length!==g&&this.emit("slidesGridLengthChange"),(t.watchSlidesProgress||t.watchSlidesVisibility)&&this.updateSlidesOffset()}},updateAutoHeight:function(t){var e,i=[],s=0;if("number"==typeof t?this.setTransition(t):!0===t&&this.setTransition(this.params.speed),"auto"!==this.params.slidesPerView&&this.params.slidesPerView>1)if(this.params.centeredSlides)this.visibleSlides.each((function(t,e){i.push(e)}));else for(e=0;e<Math.ceil(this.params.slidesPerView);e+=1){var n=this.activeIndex+e;if(n>this.slides.length)break;i.push(this.slides.eq(n)[0])}else i.push(this.slides.eq(this.activeIndex)[0]);for(e=0;e<i.length;e+=1)if(void 0!==i[e]){var r=i[e].offsetHeight;s=r>s?r:s}s&&this.$wrapperEl.css("height",s+"px")},updateSlidesOffset:function(){for(var t=this.slides,e=0;e<t.length;e+=1)t[e].swiperSlideOffset=this.isHorizontal()?t[e].offsetLeft:t[e].offsetTop},updateSlidesProgress:function(t){void 0===t&&(t=this&&this.translate||0);var e=this.params,i=this.slides,n=this.rtlTranslate;if(0!==i.length){void 0===i[0].swiperSlideOffset&&this.updateSlidesOffset();var r=-t;n&&(r=t),i.removeClass(e.slideVisibleClass),this.visibleSlidesIndexes=[],this.visibleSlides=[];for(var a=0;a<i.length;a+=1){var o=i[a],l=(r+(e.centeredSlides?this.minTranslate():0)-o.swiperSlideOffset)/(o.swiperSlideSize+e.spaceBetween);if(e.watchSlidesVisibility||e.centeredSlides&&e.autoHeight){var c=-(r-o.swiperSlideOffset),h=c+this.slidesSizesGrid[a];(c>=0&&c<this.size-1||h>1&&h<=this.size||c<=0&&h>=this.size)&&(this.visibleSlides.push(o),this.visibleSlidesIndexes.push(a),i.eq(a).addClass(e.slideVisibleClass))}o.progress=n?-l:l}this.visibleSlides=s(this.visibleSlides)}},updateProgress:function(t){if(void 0===t){var e=this.rtlTranslate?-1:1;t=this&&this.translate&&this.translate*e||0}var i=this.params,s=this.maxTranslate()-this.minTranslate(),n=this.progress,r=this.isBeginning,o=this.isEnd,l=r,c=o;0===s?(n=0,r=!0,o=!0):(r=(n=(t-this.minTranslate())/s)<=0,o=n>=1),a.extend(this,{progress:n,isBeginning:r,isEnd:o}),(i.watchSlidesProgress||i.watchSlidesVisibility||i.centeredSlides&&i.autoHeight)&&this.updateSlidesProgress(t),r&&!l&&this.emit("reachBeginning toEdge"),o&&!c&&this.emit("reachEnd toEdge"),(l&&!r||c&&!o)&&this.emit("fromEdge"),this.emit("progress",n)},updateSlidesClasses:function(){var t,e=this.slides,i=this.params,s=this.$wrapperEl,n=this.activeIndex,r=this.realIndex,a=this.virtual&&i.virtual.enabled;e.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(t=a?this.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+n+'"]'):e.eq(n)).addClass(i.slideActiveClass),i.loop&&(t.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+r+'"]').addClass(i.slideDuplicateActiveClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+r+'"]').addClass(i.slideDuplicateActiveClass));var o=t.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===o.length&&(o=e.eq(0)).addClass(i.slideNextClass);var l=t.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===l.length&&(l=e.eq(-1)).addClass(i.slidePrevClass),i.loop&&(o.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),l.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass))},updateActiveIndex:function(t){var e,i=this.rtlTranslate?this.translate:-this.translate,s=this.slidesGrid,n=this.snapGrid,r=this.params,o=this.activeIndex,l=this.realIndex,c=this.snapIndex,h=t;if(void 0===h){for(var d=0;d<s.length;d+=1)void 0!==s[d+1]?i>=s[d]&&i<s[d+1]-(s[d+1]-s[d])/2?h=d:i>=s[d]&&i<s[d+1]&&(h=d+1):i>=s[d]&&(h=d);r.normalizeSlideIndex&&(h<0||void 0===h)&&(h=0)}if(n.indexOf(i)>=0)e=n.indexOf(i);else{var u=Math.min(r.slidesPerGroupSkip,h);e=u+Math.floor((h-u)/r.slidesPerGroup)}if(e>=n.length&&(e=n.length-1),h!==o){var p=parseInt(this.slides.eq(h).attr("data-swiper-slide-index")||h,10);a.extend(this,{snapIndex:e,realIndex:p,previousIndex:o,activeIndex:h}),this.emit("activeIndexChange"),this.emit("snapIndexChange"),l!==p&&this.emit("realIndexChange"),(this.initialized||this.params.runCallbacksOnInit)&&this.emit("slideChange")}else e!==c&&(this.snapIndex=e,this.emit("snapIndexChange"))},updateClickedSlide:function(t){var e=this.params,i=s(t.target).closest("."+e.slideClass)[0],n=!1;if(i)for(var r=0;r<this.slides.length;r+=1)this.slides[r]===i&&(n=!0);if(!i||!n)return this.clickedSlide=void 0,void(this.clickedIndex=void 0);this.clickedSlide=i,this.virtual&&this.params.virtual.enabled?this.clickedIndex=parseInt(s(i).attr("data-swiper-slide-index"),10):this.clickedIndex=s(i).index(),e.slideToClickedSlide&&void 0!==this.clickedIndex&&this.clickedIndex!==this.activeIndex&&this.slideToClickedSlide()}};var d={getTranslate:function(t){void 0===t&&(t=this.isHorizontal()?"x":"y");var e=this.params,i=this.rtlTranslate,s=this.translate,n=this.$wrapperEl;if(e.virtualTranslate)return i?-s:s;if(e.cssMode)return s;var r=a.getTranslate(n[0],t);return i&&(r=-r),r||0},setTranslate:function(t,e){var i=this.rtlTranslate,s=this.params,n=this.$wrapperEl,r=this.wrapperEl,a=this.progress,o=0,l=0;this.isHorizontal()?o=i?-t:t:l=t,s.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),s.cssMode?r[this.isHorizontal()?"scrollLeft":"scrollTop"]=this.isHorizontal()?-o:-l:s.virtualTranslate||n.transform("translate3d("+o+"px, "+l+"px, 0px)"),this.previousTranslate=this.translate,this.translate=this.isHorizontal()?o:l;var c=this.maxTranslate()-this.minTranslate();(0===c?0:(t-this.minTranslate())/c)!==a&&this.updateProgress(t),this.emit("setTranslate",this.translate,e)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(t,e,i,s,n){var r;void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===i&&(i=!0),void 0===s&&(s=!0);var a=this,o=a.params,l=a.wrapperEl;if(a.animating&&o.preventInteractionOnTransition)return!1;var c,h=a.minTranslate(),d=a.maxTranslate();if(c=s&&t>h?h:s&&t<d?d:t,a.updateProgress(c),o.cssMode){var u=a.isHorizontal();return 0===e?l[u?"scrollLeft":"scrollTop"]=-c:l.scrollTo?l.scrollTo(((r={})[u?"left":"top"]=-c,r.behavior="smooth",r)):l[u?"scrollLeft":"scrollTop"]=-c,!0}return 0===e?(a.setTransition(0),a.setTranslate(c),i&&(a.emit("beforeTransitionStart",e,n),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(c),i&&(a.emit("beforeTransitionStart",e,n),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(t){a&&!a.destroyed&&t.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,i&&a.emit("transitionEnd"))}),a.$wrapperEl[0].addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd))),!0}};var u={setTransition:function(t,e){this.params.cssMode||this.$wrapperEl.transition(t),this.emit("setTransition",t,e)},transitionStart:function(t,e){void 0===t&&(t=!0);var i=this.activeIndex,s=this.params,n=this.previousIndex;if(!s.cssMode){s.autoHeight&&this.updateAutoHeight();var r=e;if(r||(r=i>n?"next":i<n?"prev":"reset"),this.emit("transitionStart"),t&&i!==n){if("reset"===r)return void this.emit("slideResetTransitionStart");this.emit("slideChangeTransitionStart"),"next"===r?this.emit("slideNextTransitionStart"):this.emit("slidePrevTransitionStart")}}},transitionEnd:function(t,e){void 0===t&&(t=!0);var i=this.activeIndex,s=this.previousIndex,n=this.params;if(this.animating=!1,!n.cssMode){this.setTransition(0);var r=e;if(r||(r=i>s?"next":i<s?"prev":"reset"),this.emit("transitionEnd"),t&&i!==s){if("reset"===r)return void this.emit("slideResetTransitionEnd");this.emit("slideChangeTransitionEnd"),"next"===r?this.emit("slideNextTransitionEnd"):this.emit("slidePrevTransitionEnd")}}}};var p={slideTo:function(t,e,i,s){var n;void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===i&&(i=!0);var r=this,a=t;a<0&&(a=0);var o=r.params,l=r.snapGrid,c=r.slidesGrid,h=r.previousIndex,d=r.activeIndex,u=r.rtlTranslate,p=r.wrapperEl;if(r.animating&&o.preventInteractionOnTransition)return!1;var f=Math.min(r.params.slidesPerGroupSkip,a),m=f+Math.floor((a-f)/r.params.slidesPerGroup);m>=l.length&&(m=l.length-1),(d||o.initialSlide||0)===(h||0)&&i&&r.emit("beforeSlideChangeStart");var v,E=-l[m];if(r.updateProgress(E),o.normalizeSlideIndex)for(var g=0;g<c.length;g+=1)-Math.floor(100*E)>=Math.floor(100*c[g])&&(a=g);if(r.initialized&&a!==d){if(!r.allowSlideNext&&E<r.translate&&E<r.minTranslate())return!1;if(!r.allowSlidePrev&&E>r.translate&&E>r.maxTranslate()&&(d||0)!==a)return!1}if(v=a>d?"next":a<d?"prev":"reset",u&&-E===r.translate||!u&&E===r.translate)return r.updateActiveIndex(a),o.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),"slide"!==o.effect&&r.setTranslate(E),"reset"!==v&&(r.transitionStart(i,v),r.transitionEnd(i,v)),!1;if(o.cssMode){var _=r.isHorizontal(),y=-E;return u&&(y=p.scrollWidth-p.offsetWidth-y),0===e?p[_?"scrollLeft":"scrollTop"]=y:p.scrollTo?p.scrollTo(((n={})[_?"left":"top"]=y,n.behavior="smooth",n)):p[_?"scrollLeft":"scrollTop"]=y,!0}return 0===e?(r.setTransition(0),r.setTranslate(E),r.updateActiveIndex(a),r.updateSlidesClasses(),r.emit("beforeTransitionStart",e,s),r.transitionStart(i,v),r.transitionEnd(i,v)):(r.setTransition(e),r.setTranslate(E),r.updateActiveIndex(a),r.updateSlidesClasses(),r.emit("beforeTransitionStart",e,s),r.transitionStart(i,v),r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(t){r&&!r.destroyed&&t.target===this&&(r.$wrapperEl[0].removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].removeEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(i,v))}),r.$wrapperEl[0].addEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].addEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(t,e,i,s){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===i&&(i=!0);var n=t;return this.params.loop&&(n+=this.loopedSlides),this.slideTo(n,e,i,s)},slideNext:function(t,e,i){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var s=this.params,n=this.animating,r=this.activeIndex<s.slidesPerGroupSkip?1:s.slidesPerGroup;if(s.loop){if(n)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}return this.slideTo(this.activeIndex+r,t,e,i)},slidePrev:function(t,e,i){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);var s=this.params,n=this.animating,r=this.snapGrid,a=this.slidesGrid,o=this.rtlTranslate;if(s.loop){if(n)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}function l(t){return t<0?-Math.floor(Math.abs(t)):Math.floor(t)}var c,h=l(o?this.translate:-this.translate),d=r.map((function(t){return l(t)})),u=(a.map((function(t){return l(t)})),r[d.indexOf(h)],r[d.indexOf(h)-1]);return void 0===u&&s.cssMode&&r.forEach((function(t){!u&&h>=t&&(u=t)})),void 0!==u&&(c=a.indexOf(u))<0&&(c=this.activeIndex-1),this.slideTo(c,t,e,i)},slideReset:function(t,e,i){return void 0===t&&(t=this.params.speed),void 0===e&&(e=!0),this.slideTo(this.activeIndex,t,e,i)},slideToClosest:function(t,e,i,s){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0),void 0===s&&(s=.5);var n=this.activeIndex,r=Math.min(this.params.slidesPerGroupSkip,n),a=r+Math.floor((n-r)/this.params.slidesPerGroup),o=this.rtlTranslate?this.translate:-this.translate;if(o>=this.snapGrid[a]){var l=this.snapGrid[a];o-l>(this.snapGrid[a+1]-l)*s&&(n+=this.params.slidesPerGroup)}else{var c=this.snapGrid[a-1];o-c<=(this.snapGrid[a]-c)*s&&(n-=this.params.slidesPerGroup)}return n=Math.max(n,0),n=Math.min(n,this.slidesGrid.length-1),this.slideTo(n,t,e,i)},slideToClickedSlide:function(){var t,e=this,i=e.params,n=e.$wrapperEl,r="auto"===i.slidesPerView?e.slidesPerViewDynamic():i.slidesPerView,o=e.clickedIndex;if(i.loop){if(e.animating)return;t=parseInt(s(e.clickedSlide).attr("data-swiper-slide-index"),10),i.centeredSlides?o<e.loopedSlides-r/2||o>e.slides.length-e.loopedSlides+r/2?(e.loopFix(),o=n.children("."+i.slideClass+'[data-swiper-slide-index="'+t+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),a.nextTick((function(){e.slideTo(o)}))):e.slideTo(o):o>e.slides.length-r?(e.loopFix(),o=n.children("."+i.slideClass+'[data-swiper-slide-index="'+t+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),a.nextTick((function(){e.slideTo(o)}))):e.slideTo(o)}else e.slideTo(o)}};var f={loopCreate:function(){var e=this,i=e.params,n=e.$wrapperEl;n.children("."+i.slideClass+"."+i.slideDuplicateClass).remove();var r=n.children("."+i.slideClass);if(i.loopFillGroupWithBlank){var a=i.slidesPerGroup-r.length%i.slidesPerGroup;if(a!==i.slidesPerGroup){for(var o=0;o<a;o+=1){var l=s(t.createElement("div")).addClass(i.slideClass+" "+i.slideBlankClass);n.append(l)}r=n.children("."+i.slideClass)}}"auto"!==i.slidesPerView||i.loopedSlides||(i.loopedSlides=r.length),e.loopedSlides=Math.ceil(parseFloat(i.loopedSlides||i.slidesPerView,10)),e.loopedSlides+=i.loopAdditionalSlides,e.loopedSlides>r.length&&(e.loopedSlides=r.length);var c=[],h=[];r.each((function(t,i){var n=s(i);t<e.loopedSlides&&h.push(i),t<r.length&&t>=r.length-e.loopedSlides&&c.push(i),n.attr("data-swiper-slide-index",t)}));for(var d=0;d<h.length;d+=1)n.append(s(h[d].cloneNode(!0)).addClass(i.slideDuplicateClass));for(var u=c.length-1;u>=0;u-=1)n.prepend(s(c[u].cloneNode(!0)).addClass(i.slideDuplicateClass))},loopFix:function(){this.emit("beforeLoopFix");var t,e=this.activeIndex,i=this.slides,s=this.loopedSlides,n=this.allowSlidePrev,r=this.allowSlideNext,a=this.snapGrid,o=this.rtlTranslate;this.allowSlidePrev=!0,this.allowSlideNext=!0;var l=-a[e]-this.getTranslate();if(e<s)t=i.length-3*s+e,t+=s,this.slideTo(t,0,!1,!0)&&0!==l&&this.setTranslate((o?-this.translate:this.translate)-l);else if(e>=i.length-s){t=-i.length+e+s,t+=s,this.slideTo(t,0,!1,!0)&&0!==l&&this.setTranslate((o?-this.translate:this.translate)-l)}this.allowSlidePrev=n,this.allowSlideNext=r,this.emit("loopFix")},loopDestroy:function(){var t=this.$wrapperEl,e=this.params,i=this.slides;t.children("."+e.slideClass+"."+e.slideDuplicateClass+",."+e.slideClass+"."+e.slideBlankClass).remove(),i.removeAttr("data-swiper-slide-index")}};var m={setGrabCursor:function(t){if(!(o.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked||this.params.cssMode)){var e=this.el;e.style.cursor="move",e.style.cursor=t?"-webkit-grabbing":"-webkit-grab",e.style.cursor=t?"-moz-grabbin":"-moz-grab",e.style.cursor=t?"grabbing":"grab"}},unsetGrabCursor:function(){o.touch||this.params.watchOverflow&&this.isLocked||this.params.cssMode||(this.el.style.cursor="")}};var v,E,g,_,y,b,S,T,R,O,C,P,w,A,I,x={appendSlide:function(t){var e=this.$wrapperEl,i=this.params;if(i.loop&&this.loopDestroy(),"object"==typeof t&&"length"in t)for(var s=0;s<t.length;s+=1)t[s]&&e.append(t[s]);else e.append(t);i.loop&&this.loopCreate(),i.observer&&o.observer||this.update()},prependSlide:function(t){var e=this.params,i=this.$wrapperEl,s=this.activeIndex;e.loop&&this.loopDestroy();var n=s+1;if("object"==typeof t&&"length"in t){for(var r=0;r<t.length;r+=1)t[r]&&i.prepend(t[r]);n=s+t.length}else i.prepend(t);e.loop&&this.loopCreate(),e.observer&&o.observer||this.update(),this.slideTo(n,0,!1)},addSlide:function(t,e){var i=this.$wrapperEl,s=this.params,n=this.activeIndex;s.loop&&(n-=this.loopedSlides,this.loopDestroy(),this.slides=i.children("."+s.slideClass));var r=this.slides.length;if(t<=0)this.prependSlide(e);else if(t>=r)this.appendSlide(e);else{for(var a=n>t?n+1:n,l=[],c=r-1;c>=t;c-=1){var h=this.slides.eq(c);h.remove(),l.unshift(h)}if("object"==typeof e&&"length"in e){for(var d=0;d<e.length;d+=1)e[d]&&i.append(e[d]);a=n>t?n+e.length:n}else i.append(e);for(var u=0;u<l.length;u+=1)i.append(l[u]);s.loop&&this.loopCreate(),s.observer&&o.observer||this.update(),s.loop?this.slideTo(a+this.loopedSlides,0,!1):this.slideTo(a,0,!1)}},removeSlide:function(t){var e=this.params,i=this.$wrapperEl,s=this.activeIndex;e.loop&&(s-=this.loopedSlides,this.loopDestroy(),this.slides=i.children("."+e.slideClass));var n,r=s;if("object"==typeof t&&"length"in t){for(var a=0;a<t.length;a+=1)n=t[a],this.slides[n]&&this.slides.eq(n).remove(),n<r&&(r-=1);r=Math.max(r,0)}else n=t,this.slides[n]&&this.slides.eq(n).remove(),n<r&&(r-=1),r=Math.max(r,0);e.loop&&this.loopCreate(),e.observer&&o.observer||this.update(),e.loop?this.slideTo(r+this.loopedSlides,0,!1):this.slideTo(r,0,!1)},removeAllSlides:function(){for(var t=[],e=0;e<this.slides.length;e+=1)t.push(e);this.removeSlide(t)}},M=(v=e.navigator.platform,E=e.navigator.userAgent,g={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!e.cordova&&!e.phonegap),phonegap:!(!e.cordova&&!e.phonegap),electron:!1},_=e.screen.width,y=e.screen.height,b=E.match(/(Android);?[\s\/]+([\d.]+)?/),S=E.match(/(iPad).*OS\s([\d_]+)/),T=E.match(/(iPod)(.*OS\s([\d_]+))?/),R=!S&&E.match(/(iPhone\sOS|iOS)\s([\d_]+)/),O=E.indexOf("MSIE ")>=0||E.indexOf("Trident/")>=0,C=E.indexOf("Edge/")>=0,P=E.indexOf("Gecko/")>=0&&E.indexOf("Firefox/")>=0,w="Win32"===v,A=E.toLowerCase().indexOf("electron")>=0,I="MacIntel"===v,!S&&I&&o.touch&&(1024===_&&1366===y||834===_&&1194===y||834===_&&1112===y||768===_&&1024===y)&&(S=E.match(/(Version)\/([\d.]+)/),I=!1),g.ie=O,g.edge=C,g.firefox=P,b&&!w&&(g.os="android",g.osVersion=b[2],g.android=!0,g.androidChrome=E.toLowerCase().indexOf("chrome")>=0),(S||R||T)&&(g.os="ios",g.ios=!0),R&&!T&&(g.osVersion=R[2].replace(/_/g,"."),g.iphone=!0),S&&(g.osVersion=S[2].replace(/_/g,"."),g.ipad=!0),T&&(g.osVersion=T[3]?T[3].replace(/_/g,"."):null,g.ipod=!0),g.ios&&g.osVersion&&E.indexOf("Version/")>=0&&"10"===g.osVersion.split(".")[0]&&(g.osVersion=E.toLowerCase().split("version/")[1].split(" ")[0]),g.webView=!(!(R||S||T)||!E.match(/.*AppleWebKit(?!.*Safari)/i)&&!e.navigator.standalone)||e.matchMedia&&e.matchMedia("(display-mode: standalone)").matches,g.webview=g.webView,g.standalone=g.webView,g.desktop=!(g.ios||g.android)||A,g.desktop&&(g.electron=A,g.macos=I,g.windows=w,g.macos&&(g.os="macos"),g.windows&&(g.os="windows")),g.pixelRatio=e.devicePixelRatio||1,g);function D(i){var n=this.touchEventsData,r=this.params,o=this.touches;if(!this.animating||!r.preventInteractionOnTransition){var l=i;l.originalEvent&&(l=l.originalEvent);var c=s(l.target);if(("wrapper"!==r.touchEventsTarget||c.closest(this.wrapperEl).length)&&(n.isTouchEvent="touchstart"===l.type,(n.isTouchEvent||!("which"in l)||3!==l.which)&&!(!n.isTouchEvent&&"button"in l&&l.button>0||n.isTouched&&n.isMoved)))if(r.noSwiping&&c.closest(r.noSwipingSelector?r.noSwipingSelector:"."+r.noSwipingClass)[0])this.allowClick=!0;else if(!r.swipeHandler||c.closest(r.swipeHandler)[0]){o.currentX="touchstart"===l.type?l.targetTouches[0].pageX:l.pageX,o.currentY="touchstart"===l.type?l.targetTouches[0].pageY:l.pageY;var h=o.currentX,d=o.currentY,u=r.edgeSwipeDetection||r.iOSEdgeSwipeDetection,p=r.edgeSwipeThreshold||r.iOSEdgeSwipeThreshold;if(!u||!(h<=p||h>=e.screen.width-p)){if(a.extend(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=h,o.startY=d,n.touchStartTime=a.now(),this.allowClick=!0,this.updateSize(),this.swipeDirection=void 0,r.threshold>0&&(n.allowThresholdMove=!1),"touchstart"!==l.type){var f=!0;c.is(n.formElements)&&(f=!1),t.activeElement&&s(t.activeElement).is(n.formElements)&&t.activeElement!==c[0]&&t.activeElement.blur();var m=f&&this.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||m)&&l.preventDefault()}this.emit("touchStart",l)}}}}function N(e){var i=this.touchEventsData,n=this.params,r=this.touches,o=this.rtlTranslate,l=e;if(l.originalEvent&&(l=l.originalEvent),i.isTouched){if(!i.isTouchEvent||"mousemove"!==l.type){var c="touchmove"===l.type&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),h="touchmove"===l.type?c.pageX:l.pageX,d="touchmove"===l.type?c.pageY:l.pageY;if(l.preventedByNestedSwiper)return r.startX=h,void(r.startY=d);if(!this.allowTouchMove)return this.allowClick=!1,void(i.isTouched&&(a.extend(r,{startX:h,startY:d,currentX:h,currentY:d}),i.touchStartTime=a.now()));if(i.isTouchEvent&&n.touchReleaseOnEdges&&!n.loop)if(this.isVertical()){if(d<r.startY&&this.translate<=this.maxTranslate()||d>r.startY&&this.translate>=this.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(h<r.startX&&this.translate<=this.maxTranslate()||h>r.startX&&this.translate>=this.minTranslate())return;if(i.isTouchEvent&&t.activeElement&&l.target===t.activeElement&&s(l.target).is(i.formElements))return i.isMoved=!0,void(this.allowClick=!1);if(i.allowTouchCallbacks&&this.emit("touchMove",l),!(l.targetTouches&&l.targetTouches.length>1)){r.currentX=h,r.currentY=d;var u=r.currentX-r.startX,p=r.currentY-r.startY;if(!(this.params.threshold&&Math.sqrt(Math.pow(u,2)+Math.pow(p,2))<this.params.threshold)){var f;if(void 0===i.isScrolling)this.isHorizontal()&&r.currentY===r.startY||this.isVertical()&&r.currentX===r.startX?i.isScrolling=!1:u*u+p*p>=25&&(f=180*Math.atan2(Math.abs(p),Math.abs(u))/Math.PI,i.isScrolling=this.isHorizontal()?f>n.touchAngle:90-f>n.touchAngle);if(i.isScrolling&&this.emit("touchMoveOpposite",l),void 0===i.startMoving&&(r.currentX===r.startX&&r.currentY===r.startY||(i.startMoving=!0)),i.isScrolling)i.isTouched=!1;else if(i.startMoving){this.allowClick=!1,n.cssMode||l.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&l.stopPropagation(),i.isMoved||(n.loop&&this.loopFix(),i.startTranslate=this.getTranslate(),this.setTransition(0),this.animating&&this.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!n.grabCursor||!0!==this.allowSlideNext&&!0!==this.allowSlidePrev||this.setGrabCursor(!0),this.emit("sliderFirstMove",l)),this.emit("sliderMove",l),i.isMoved=!0;var m=this.isHorizontal()?u:p;r.diff=m,m*=n.touchRatio,o&&(m=-m),this.swipeDirection=m>0?"prev":"next",i.currentTranslate=m+i.startTranslate;var v=!0,E=n.resistanceRatio;if(n.touchReleaseOnEdges&&(E=0),m>0&&i.currentTranslate>this.minTranslate()?(v=!1,n.resistance&&(i.currentTranslate=this.minTranslate()-1+Math.pow(-this.minTranslate()+i.startTranslate+m,E))):m<0&&i.currentTranslate<this.maxTranslate()&&(v=!1,n.resistance&&(i.currentTranslate=this.maxTranslate()+1-Math.pow(this.maxTranslate()-i.startTranslate-m,E))),v&&(l.preventedByNestedSwiper=!0),!this.allowSlideNext&&"next"===this.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!this.allowSlidePrev&&"prev"===this.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),n.threshold>0){if(!(Math.abs(m)>n.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,i.currentTranslate=i.startTranslate,void(r.diff=this.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY)}n.followFinger&&!n.cssMode&&((n.freeMode||n.watchSlidesProgress||n.watchSlidesVisibility)&&(this.updateActiveIndex(),this.updateSlidesClasses()),n.freeMode&&(0===i.velocities.length&&i.velocities.push({position:r[this.isHorizontal()?"startX":"startY"],time:i.touchStartTime}),i.velocities.push({position:r[this.isHorizontal()?"currentX":"currentY"],time:a.now()})),this.updateProgress(i.currentTranslate),this.setTranslate(i.currentTranslate))}}}}}else i.startMoving&&i.isScrolling&&this.emit("touchMoveOpposite",l)}function k(t){var e=this,i=e.touchEventsData,s=e.params,n=e.touches,r=e.rtlTranslate,o=e.$wrapperEl,l=e.slidesGrid,c=e.snapGrid,h=t;if(h.originalEvent&&(h=h.originalEvent),i.allowTouchCallbacks&&e.emit("touchEnd",h),i.allowTouchCallbacks=!1,!i.isTouched)return i.isMoved&&s.grabCursor&&e.setGrabCursor(!1),i.isMoved=!1,void(i.startMoving=!1);s.grabCursor&&i.isMoved&&i.isTouched&&(!0===e.allowSlideNext||!0===e.allowSlidePrev)&&e.setGrabCursor(!1);var d,u=a.now(),p=u-i.touchStartTime;if(e.allowClick&&(e.updateClickedSlide(h),e.emit("tap click",h),p<300&&u-i.lastClickTime<300&&e.emit("doubleTap doubleClick",h)),i.lastClickTime=a.now(),a.nextTick((function(){e.destroyed||(e.allowClick=!0)})),!i.isTouched||!i.isMoved||!e.swipeDirection||0===n.diff||i.currentTranslate===i.startTranslate)return i.isTouched=!1,i.isMoved=!1,void(i.startMoving=!1);if(i.isTouched=!1,i.isMoved=!1,i.startMoving=!1,d=s.followFinger?r?e.translate:-e.translate:-i.currentTranslate,!s.cssMode)if(s.freeMode){if(d<-e.minTranslate())return void e.slideTo(e.activeIndex);if(d>-e.maxTranslate())return void(e.slides.length<c.length?e.slideTo(c.length-1):e.slideTo(e.slides.length-1));if(s.freeModeMomentum){if(i.velocities.length>1){var f=i.velocities.pop(),m=i.velocities.pop(),v=f.position-m.position,E=f.time-m.time;e.velocity=v/E,e.velocity/=2,Math.abs(e.velocity)<s.freeModeMinimumVelocity&&(e.velocity=0),(E>150||a.now()-f.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=s.freeModeMomentumVelocityRatio,i.velocities.length=0;var g=1e3*s.freeModeMomentumRatio,_=e.velocity*g,y=e.translate+_;r&&(y=-y);var b,S,T=!1,R=20*Math.abs(e.velocity)*s.freeModeMomentumBounceRatio;if(y<e.maxTranslate())s.freeModeMomentumBounce?(y+e.maxTranslate()<-R&&(y=e.maxTranslate()-R),b=e.maxTranslate(),T=!0,i.allowMomentumBounce=!0):y=e.maxTranslate(),s.loop&&s.centeredSlides&&(S=!0);else if(y>e.minTranslate())s.freeModeMomentumBounce?(y-e.minTranslate()>R&&(y=e.minTranslate()+R),b=e.minTranslate(),T=!0,i.allowMomentumBounce=!0):y=e.minTranslate(),s.loop&&s.centeredSlides&&(S=!0);else if(s.freeModeSticky){for(var O,C=0;C<c.length;C+=1)if(c[C]>-y){O=C;break}y=-(y=Math.abs(c[O]-y)<Math.abs(c[O-1]-y)||"next"===e.swipeDirection?c[O]:c[O-1])}if(S&&e.once("transitionEnd",(function(){e.loopFix()})),0!==e.velocity){if(g=r?Math.abs((-y-e.translate)/e.velocity):Math.abs((y-e.translate)/e.velocity),s.freeModeSticky){var P=Math.abs((r?-y:y)-e.translate),w=e.slidesSizesGrid[e.activeIndex];g=P<w?s.speed:P<2*w?1.5*s.speed:2.5*s.speed}}else if(s.freeModeSticky)return void e.slideToClosest();s.freeModeMomentumBounce&&T?(e.updateProgress(b),e.setTransition(g),e.setTranslate(y),e.transitionStart(!0,e.swipeDirection),e.animating=!0,o.transitionEnd((function(){e&&!e.destroyed&&i.allowMomentumBounce&&(e.emit("momentumBounce"),e.setTransition(s.speed),setTimeout((function(){e.setTranslate(b),o.transitionEnd((function(){e&&!e.destroyed&&e.transitionEnd()}))}),0))}))):e.velocity?(e.updateProgress(y),e.setTransition(g),e.setTranslate(y),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,o.transitionEnd((function(){e&&!e.destroyed&&e.transitionEnd()})))):e.updateProgress(y),e.updateActiveIndex(),e.updateSlidesClasses()}else if(s.freeModeSticky)return void e.slideToClosest();(!s.freeModeMomentum||p>=s.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}else{for(var A=0,I=e.slidesSizesGrid[0],x=0;x<l.length;x+=x<s.slidesPerGroupSkip?1:s.slidesPerGroup){var M=x<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;void 0!==l[x+M]?d>=l[x]&&d<l[x+M]&&(A=x,I=l[x+M]-l[x]):d>=l[x]&&(A=x,I=l[l.length-1]-l[l.length-2])}var D=(d-l[A])/I,N=A<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(p>s.longSwipesMs){if(!s.longSwipes)return void e.slideTo(e.activeIndex);"next"===e.swipeDirection&&(D>=s.longSwipesRatio?e.slideTo(A+N):e.slideTo(A)),"prev"===e.swipeDirection&&(D>1-s.longSwipesRatio?e.slideTo(A+N):e.slideTo(A))}else{if(!s.shortSwipes)return void e.slideTo(e.activeIndex);e.navigation&&(h.target===e.navigation.nextEl||h.target===e.navigation.prevEl)?h.target===e.navigation.nextEl?e.slideTo(A+N):e.slideTo(A):("next"===e.swipeDirection&&e.slideTo(A+N),"prev"===e.swipeDirection&&e.slideTo(A))}}}function L(){var t=this.params,e=this.el;if(!e||0!==e.offsetWidth){t.breakpoints&&this.setBreakpoint();var i=this.allowSlideNext,s=this.allowSlidePrev,n=this.snapGrid;this.allowSlideNext=!0,this.allowSlidePrev=!0,this.updateSize(),this.updateSlides(),this.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&this.isEnd&&!this.params.centeredSlides?this.slideTo(this.slides.length-1,0,!1,!0):this.slideTo(this.activeIndex,0,!1,!0),this.autoplay&&this.autoplay.running&&this.autoplay.paused&&this.autoplay.run(),this.allowSlidePrev=s,this.allowSlideNext=i,this.params.watchOverflow&&n!==this.snapGrid&&this.checkOverflow()}}function B(t){this.allowClick||(this.params.preventClicks&&t.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(t.stopPropagation(),t.stopImmediatePropagation()))}function V(){var t=this.wrapperEl,e=this.rtlTranslate;this.previousTranslate=this.translate,this.isHorizontal()?this.translate=e?t.scrollWidth-t.offsetWidth-t.scrollLeft:-t.scrollLeft:this.translate=-t.scrollTop,-0===this.translate&&(this.translate=0),this.updateActiveIndex(),this.updateSlidesClasses();var i=this.maxTranslate()-this.minTranslate();(0===i?0:(this.translate-this.minTranslate())/i)!==this.progress&&this.updateProgress(e?-this.translate:this.translate),this.emit("setTranslate",this.translate,!1)}var U=!1;function F(){}var j={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,preventInteractionOnTransition:!1,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0},H={update:h,translate:d,transition:u,slide:p,loop:f,grabCursor:m,manipulation:x,events:{attachEvents:function(){var e=this.params,i=this.touchEvents,s=this.el,n=this.wrapperEl;this.onTouchStart=D.bind(this),this.onTouchMove=N.bind(this),this.onTouchEnd=k.bind(this),e.cssMode&&(this.onScroll=V.bind(this)),this.onClick=B.bind(this);var r=!!e.nested;if(!o.touch&&o.pointerEvents)s.addEventListener(i.start,this.onTouchStart,!1),t.addEventListener(i.move,this.onTouchMove,r),t.addEventListener(i.end,this.onTouchEnd,!1);else{if(o.touch){var a=!("touchstart"!==i.start||!o.passiveListener||!e.passiveListeners)&&{passive:!0,capture:!1};s.addEventListener(i.start,this.onTouchStart,a),s.addEventListener(i.move,this.onTouchMove,o.passiveListener?{passive:!1,capture:r}:r),s.addEventListener(i.end,this.onTouchEnd,a),i.cancel&&s.addEventListener(i.cancel,this.onTouchEnd,a),U||(t.addEventListener("touchstart",F),U=!0)}(e.simulateTouch&&!M.ios&&!M.android||e.simulateTouch&&!o.touch&&M.ios)&&(s.addEventListener("mousedown",this.onTouchStart,!1),t.addEventListener("mousemove",this.onTouchMove,r),t.addEventListener("mouseup",this.onTouchEnd,!1))}(e.preventClicks||e.preventClicksPropagation)&&s.addEventListener("click",this.onClick,!0),e.cssMode&&n.addEventListener("scroll",this.onScroll),e.updateOnWindowResize?this.on(M.ios||M.android?"resize orientationchange observerUpdate":"resize observerUpdate",L,!0):this.on("observerUpdate",L,!0)},detachEvents:function(){var e=this.params,i=this.touchEvents,s=this.el,n=this.wrapperEl,r=!!e.nested;if(!o.touch&&o.pointerEvents)s.removeEventListener(i.start,this.onTouchStart,!1),t.removeEventListener(i.move,this.onTouchMove,r),t.removeEventListener(i.end,this.onTouchEnd,!1);else{if(o.touch){var a=!("onTouchStart"!==i.start||!o.passiveListener||!e.passiveListeners)&&{passive:!0,capture:!1};s.removeEventListener(i.start,this.onTouchStart,a),s.removeEventListener(i.move,this.onTouchMove,r),s.removeEventListener(i.end,this.onTouchEnd,a),i.cancel&&s.removeEventListener(i.cancel,this.onTouchEnd,a)}(e.simulateTouch&&!M.ios&&!M.android||e.simulateTouch&&!o.touch&&M.ios)&&(s.removeEventListener("mousedown",this.onTouchStart,!1),t.removeEventListener("mousemove",this.onTouchMove,r),t.removeEventListener("mouseup",this.onTouchEnd,!1))}(e.preventClicks||e.preventClicksPropagation)&&s.removeEventListener("click",this.onClick,!0),e.cssMode&&n.removeEventListener("scroll",this.onScroll),this.off(M.ios||M.android?"resize orientationchange observerUpdate":"resize observerUpdate",L)}},breakpoints:{setBreakpoint:function(){var t=this.activeIndex,e=this.initialized,i=this.loopedSlides;void 0===i&&(i=0);var s=this.params,n=this.$el,r=s.breakpoints;if(r&&(!r||0!==Object.keys(r).length)){var o=this.getBreakpoint(r);if(o&&this.currentBreakpoint!==o){var l=o in r?r[o]:void 0;l&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach((function(t){var e=l[t];void 0!==e&&(l[t]="slidesPerView"!==t||"AUTO"!==e&&"auto"!==e?"slidesPerView"===t?parseFloat(e):parseInt(e,10):"auto")}));var c=l||this.originalParams,h=s.slidesPerColumn>1,d=c.slidesPerColumn>1;h&&!d?n.removeClass(s.containerModifierClass+"multirow "+s.containerModifierClass+"multirow-column"):!h&&d&&(n.addClass(s.containerModifierClass+"multirow"),"column"===c.slidesPerColumnFill&&n.addClass(s.containerModifierClass+"multirow-column"));var u=c.direction&&c.direction!==s.direction,p=s.loop&&(c.slidesPerView!==s.slidesPerView||u);u&&e&&this.changeDirection(),a.extend(this.params,c),a.extend(this,{allowTouchMove:this.params.allowTouchMove,allowSlideNext:this.params.allowSlideNext,allowSlidePrev:this.params.allowSlidePrev}),this.currentBreakpoint=o,p&&e&&(this.loopDestroy(),this.loopCreate(),this.updateSlides(),this.slideTo(t-i+this.loopedSlides,0,!1)),this.emit("breakpoint",c)}}},getBreakpoint:function(t){if(t){var i=!1,s=Object.keys(t).map((function(t){if("string"==typeof t&&0===t.indexOf("@")){var i=parseFloat(t.substr(1));return{value:e.innerHeight*i,point:t}}return{value:t,point:t}}));s.sort((function(t,e){return parseInt(t.value,10)-parseInt(e.value,10)}));for(var n=0;n<s.length;n+=1){var r=s[n],a=r.point;r.value<=e.innerWidth&&(i=a)}return i||"max"}}},checkOverflow:{checkOverflow:function(){var t=this.params,e=this.isLocked,i=this.slides.length>0&&t.slidesOffsetBefore+t.spaceBetween*(this.slides.length-1)+this.slides[0].offsetWidth*this.slides.length;t.slidesOffsetBefore&&t.slidesOffsetAfter&&i?this.isLocked=i<=this.size:this.isLocked=1===this.snapGrid.length,this.allowSlideNext=!this.isLocked,this.allowSlidePrev=!this.isLocked,e!==this.isLocked&&this.emit(this.isLocked?"lock":"unlock"),e&&e!==this.isLocked&&(this.isEnd=!1,this.navigation.update())}},classes:{addClasses:function(){var t=this.classNames,e=this.params,i=this.rtl,s=this.$el,n=[];n.push("initialized"),n.push(e.direction),e.freeMode&&n.push("free-mode"),e.autoHeight&&n.push("autoheight"),i&&n.push("rtl"),e.slidesPerColumn>1&&(n.push("multirow"),"column"===e.slidesPerColumnFill&&n.push("multirow-column")),M.android&&n.push("android"),M.ios&&n.push("ios"),e.cssMode&&n.push("css-mode"),n.forEach((function(i){t.push(e.containerModifierClass+i)})),s.addClass(t.join(" "))},removeClasses:function(){var t=this.$el,e=this.classNames;t.removeClass(e.join(" "))}},images:{loadImage:function(t,i,s,n,r,a){var o;function l(){a&&a()}t.complete&&r?l():i?((o=new e.Image).onload=l,o.onerror=l,n&&(o.sizes=n),s&&(o.srcset=s),i&&(o.src=i)):l()},preloadImages:function(){var t=this;function e(){null!=t&&t&&!t.destroyed&&(void 0!==t.imagesLoaded&&(t.imagesLoaded+=1),t.imagesLoaded===t.imagesToLoad.length&&(t.params.updateOnImagesReady&&t.update(),t.emit("imagesReady")))}t.imagesToLoad=t.$el.find("img");for(var i=0;i<t.imagesToLoad.length;i+=1){var s=t.imagesToLoad[i];t.loadImage(s,s.currentSrc||s.getAttribute("src"),s.srcset||s.getAttribute("srcset"),s.sizes||s.getAttribute("sizes"),!0,e)}}}},$={},z=function(t){function e(){for(var i,n,r,l=[],c=arguments.length;c--;)l[c]=arguments[c];1===l.length&&l[0].constructor&&l[0].constructor===Object?r=l[0]:(n=(i=l)[0],r=i[1]),r||(r={}),r=a.extend({},r),n&&!r.el&&(r.el=n),t.call(this,r),Object.keys(H).forEach((function(t){Object.keys(H[t]).forEach((function(i){e.prototype[i]||(e.prototype[i]=H[t][i])}))}));var h=this;void 0===h.modules&&(h.modules={}),Object.keys(h.modules).forEach((function(t){var e=h.modules[t];if(e.params){var i=Object.keys(e.params)[0],s=e.params[i];if("object"!=typeof s||null===s)return;if(!(i in r)||!("enabled"in s))return;!0===r[i]&&(r[i]={enabled:!0}),"object"!=typeof r[i]||"enabled"in r[i]||(r[i].enabled=!0),r[i]||(r[i]={enabled:!1})}}));var d=a.extend({},j);h.useModulesParams(d),h.params=a.extend({},d,$,r),h.originalParams=a.extend({},h.params),h.passedParams=a.extend({},r),h.$=s;var u=s(h.params.el);if(n=u[0]){if(u.length>1){var p=[];return u.each((function(t,i){var s=a.extend({},r,{el:i});p.push(new e(s))})),p}var f,m,v;return n.swiper=h,u.data("swiper",h),n&&n.shadowRoot&&n.shadowRoot.querySelector?(f=s(n.shadowRoot.querySelector("."+h.params.wrapperClass))).children=function(t){return u.children(t)}:f=u.children("."+h.params.wrapperClass),a.extend(h,{$el:u,el:n,$wrapperEl:f,wrapperEl:f[0],classNames:[],slides:s(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===h.params.direction},isVertical:function(){return"vertical"===h.params.direction},rtl:"rtl"===n.dir.toLowerCase()||"rtl"===u.css("direction"),rtlTranslate:"horizontal"===h.params.direction&&("rtl"===n.dir.toLowerCase()||"rtl"===u.css("direction")),wrongRTL:"-webkit-box"===f.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:h.params.allowSlideNext,allowSlidePrev:h.params.allowSlidePrev,touchEvents:(m=["touchstart","touchmove","touchend","touchcancel"],v=["mousedown","mousemove","mouseup"],o.pointerEvents&&(v=["pointerdown","pointermove","pointerup"]),h.touchEventsTouch={start:m[0],move:m[1],end:m[2],cancel:m[3]},h.touchEventsDesktop={start:v[0],move:v[1],end:v[2]},o.touch||!h.params.simulateTouch?h.touchEventsTouch:h.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video, label",lastClickTime:a.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:h.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),h.useModules(),h.params.init&&h.init(),h}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={extendedDefaults:{configurable:!0},defaults:{configurable:!0},Class:{configurable:!0},$:{configurable:!0}};return e.prototype.slidesPerViewDynamic=function(){var t=this.params,e=this.slides,i=this.slidesGrid,s=this.size,n=this.activeIndex,r=1;if(t.centeredSlides){for(var a,o=e[n].swiperSlideSize,l=n+1;l<e.length;l+=1)e[l]&&!a&&(r+=1,(o+=e[l].swiperSlideSize)>s&&(a=!0));for(var c=n-1;c>=0;c-=1)e[c]&&!a&&(r+=1,(o+=e[c].swiperSlideSize)>s&&(a=!0))}else for(var h=n+1;h<e.length;h+=1)i[h]-i[n]<s&&(r+=1);return r},e.prototype.update=function(){var t=this;if(t&&!t.destroyed){var e=t.snapGrid,i=t.params;i.breakpoints&&t.setBreakpoint(),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.params.freeMode?(s(),t.params.autoHeight&&t.updateAutoHeight()):(("auto"===t.params.slidesPerView||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0))||s(),i.watchOverflow&&e!==t.snapGrid&&t.checkOverflow(),t.emit("update")}function s(){var e=t.rtlTranslate?-1*t.translate:t.translate,i=Math.min(Math.max(e,t.maxTranslate()),t.minTranslate());t.setTranslate(i),t.updateActiveIndex(),t.updateSlidesClasses()}},e.prototype.changeDirection=function(t,e){void 0===e&&(e=!0);var i=this.params.direction;return t||(t="horizontal"===i?"vertical":"horizontal"),t===i||"horizontal"!==t&&"vertical"!==t||(this.$el.removeClass(""+this.params.containerModifierClass+i).addClass(""+this.params.containerModifierClass+t),this.params.direction=t,this.slides.each((function(e,i){"vertical"===t?i.style.width="":i.style.height=""})),this.emit("changeDirection"),e&&this.update()),this},e.prototype.init=function(){this.initialized||(this.emit("beforeInit"),this.params.breakpoints&&this.setBreakpoint(),this.addClasses(),this.params.loop&&this.loopCreate(),this.updateSize(),this.updateSlides(),this.params.watchOverflow&&this.checkOverflow(),this.params.grabCursor&&this.setGrabCursor(),this.params.preloadImages&&this.preloadImages(),this.params.loop?this.slideTo(this.params.initialSlide+this.loopedSlides,0,this.params.runCallbacksOnInit):this.slideTo(this.params.initialSlide,0,this.params.runCallbacksOnInit),this.attachEvents(),this.initialized=!0,this.emit("init"))},e.prototype.destroy=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var i=this,s=i.params,n=i.$el,r=i.$wrapperEl,o=i.slides;return void 0===i.params||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),s.loop&&i.loopDestroy(),e&&(i.removeClasses(),n.removeAttr("style"),r.removeAttr("style"),o&&o.length&&o.removeClass([s.slideVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),i.emit("destroy"),Object.keys(i.eventsListeners).forEach((function(t){i.off(t)})),!1!==t&&(i.$el[0].swiper=null,i.$el.data("swiper",null),a.deleteProps(i)),i.destroyed=!0),null},e.extendDefaults=function(t){a.extend($,t)},i.extendedDefaults.get=function(){return $},i.defaults.get=function(){return j},i.Class.get=function(){return t},i.$.get=function(){return s},Object.defineProperties(e,i),e}(l),q={name:"device",proto:{device:M},static:{device:M}},Y={name:"support",proto:{support:o},static:{support:o}},W={isEdge:!!e.navigator.userAgent.match(/Edge/g),isSafari:function(){var t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)},X={name:"browser",proto:{browser:W},static:{browser:W}},G={name:"resize",create:function(){var t=this;a.extend(t,{resize:{resizeHandler:function(){t&&!t.destroyed&&t.initialized&&(t.emit("beforeResize"),t.emit("resize"))},orientationChangeHandler:function(){t&&!t.destroyed&&t.initialized&&t.emit("orientationchange")}}})},on:{init:function(){e.addEventListener("resize",this.resize.resizeHandler),e.addEventListener("orientationchange",this.resize.orientationChangeHandler)},destroy:function(){e.removeEventListener("resize",this.resize.resizeHandler),e.removeEventListener("orientationchange",this.resize.orientationChangeHandler)}}},K={func:e.MutationObserver||e.WebkitMutationObserver,attach:function(t,i){void 0===i&&(i={});var s=this,n=new(0,K.func)((function(t){if(1!==t.length){var i=function(){s.emit("observerUpdate",t[0])};e.requestAnimationFrame?e.requestAnimationFrame(i):e.setTimeout(i,0)}else s.emit("observerUpdate",t[0])}));n.observe(t,{attributes:void 0===i.attributes||i.attributes,childList:void 0===i.childList||i.childList,characterData:void 0===i.characterData||i.characterData}),s.observer.observers.push(n)},init:function(){if(o.observer&&this.params.observer){if(this.params.observeParents)for(var t=this.$el.parents(),e=0;e<t.length;e+=1)this.observer.attach(t[e]);this.observer.attach(this.$el[0],{childList:this.params.observeSlideChildren}),this.observer.attach(this.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(t){t.disconnect()})),this.observer.observers=[]}},J={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){a.extend(this,{observer:{init:K.init.bind(this),attach:K.attach.bind(this),destroy:K.destroy.bind(this),observers:[]}})},on:{init:function(){this.observer.init()},destroy:function(){this.observer.destroy()}}},Q={update:function(t){var e=this,i=e.params,s=i.slidesPerView,n=i.slidesPerGroup,r=i.centeredSlides,o=e.params.virtual,l=o.addSlidesBefore,c=o.addSlidesAfter,h=e.virtual,d=h.from,u=h.to,p=h.slides,f=h.slidesGrid,m=h.renderSlide,v=h.offset;e.updateActiveIndex();var E,g,_,y=e.activeIndex||0;E=e.rtlTranslate?"right":e.isHorizontal()?"left":"top",r?(g=Math.floor(s/2)+n+l,_=Math.floor(s/2)+n+c):(g=s+(n-1)+l,_=n+c);var b=Math.max((y||0)-_,0),S=Math.min((y||0)+g,p.length-1),T=(e.slidesGrid[b]||0)-(e.slidesGrid[0]||0);function R(){e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load()}if(a.extend(e.virtual,{from:b,to:S,offset:T,slidesGrid:e.slidesGrid}),d===b&&u===S&&!t)return e.slidesGrid!==f&&T!==v&&e.slides.css(E,T+"px"),void e.updateProgress();if(e.params.virtual.renderExternal)return e.params.virtual.renderExternal.call(e,{offset:T,from:b,to:S,slides:function(){for(var t=[],e=b;e<=S;e+=1)t.push(p[e]);return t}()}),void R();var O=[],C=[];if(t)e.$wrapperEl.find("."+e.params.slideClass).remove();else for(var P=d;P<=u;P+=1)(P<b||P>S)&&e.$wrapperEl.find("."+e.params.slideClass+'[data-swiper-slide-index="'+P+'"]').remove();for(var w=0;w<p.length;w+=1)w>=b&&w<=S&&(void 0===u||t?C.push(w):(w>u&&C.push(w),w<d&&O.push(w)));C.forEach((function(t){e.$wrapperEl.append(m(p[t],t))})),O.sort((function(t,e){return e-t})).forEach((function(t){e.$wrapperEl.prepend(m(p[t],t))})),e.$wrapperEl.children(".swiper-slide").css(E,T+"px"),R()},renderSlide:function(t,e){var i=this.params.virtual;if(i.cache&&this.virtual.cache[e])return this.virtual.cache[e];var n=i.renderSlide?s(i.renderSlide.call(this,t,e)):s('<div class="'+this.params.slideClass+'" data-swiper-slide-index="'+e+'">'+t+"</div>");return n.attr("data-swiper-slide-index")||n.attr("data-swiper-slide-index",e),i.cache&&(this.virtual.cache[e]=n),n},appendSlide:function(t){if("object"==typeof t&&"length"in t)for(var e=0;e<t.length;e+=1)t[e]&&this.virtual.slides.push(t[e]);else this.virtual.slides.push(t);this.virtual.update(!0)},prependSlide:function(t){var e=this.activeIndex,i=e+1,s=1;if(Array.isArray(t)){for(var n=0;n<t.length;n+=1)t[n]&&this.virtual.slides.unshift(t[n]);i=e+t.length,s=t.length}else this.virtual.slides.unshift(t);if(this.params.virtual.cache){var r=this.virtual.cache,a={};Object.keys(r).forEach((function(t){var e=r[t],i=e.attr("data-swiper-slide-index");i&&e.attr("data-swiper-slide-index",parseInt(i,10)+1),a[parseInt(t,10)+s]=e})),this.virtual.cache=a}this.virtual.update(!0),this.slideTo(i,0)},removeSlide:function(t){if(null!=t){var e=this.activeIndex;if(Array.isArray(t))for(var i=t.length-1;i>=0;i-=1)this.virtual.slides.splice(t[i],1),this.params.virtual.cache&&delete this.virtual.cache[t[i]],t[i]<e&&(e-=1),e=Math.max(e,0);else this.virtual.slides.splice(t,1),this.params.virtual.cache&&delete this.virtual.cache[t],t<e&&(e-=1),e=Math.max(e,0);this.virtual.update(!0),this.slideTo(e,0)}},removeAllSlides:function(){this.virtual.slides=[],this.params.virtual.cache&&(this.virtual.cache={}),this.virtual.update(!0),this.slideTo(0,0)}},Z={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,addSlidesBefore:0,addSlidesAfter:0}},create:function(){a.extend(this,{virtual:{update:Q.update.bind(this),appendSlide:Q.appendSlide.bind(this),prependSlide:Q.prependSlide.bind(this),removeSlide:Q.removeSlide.bind(this),removeAllSlides:Q.removeAllSlides.bind(this),renderSlide:Q.renderSlide.bind(this),slides:this.params.virtual.slides,cache:{}}})},on:{beforeInit:function(){if(this.params.virtual.enabled){this.classNames.push(this.params.containerModifierClass+"virtual");var t={watchSlidesProgress:!0};a.extend(this.params,t),a.extend(this.originalParams,t),this.params.initialSlide||this.virtual.update()}},setTranslate:function(){this.params.virtual.enabled&&this.virtual.update()}}},tt={handle:function(i){var s=this.rtlTranslate,n=i;n.originalEvent&&(n=n.originalEvent);var r=n.keyCode||n.charCode;if(!this.allowSlideNext&&(this.isHorizontal()&&39===r||this.isVertical()&&40===r||34===r))return!1;if(!this.allowSlidePrev&&(this.isHorizontal()&&37===r||this.isVertical()&&38===r||33===r))return!1;if(!(n.shiftKey||n.altKey||n.ctrlKey||n.metaKey||t.activeElement&&t.activeElement.nodeName&&("input"===t.activeElement.nodeName.toLowerCase()||"textarea"===t.activeElement.nodeName.toLowerCase()))){if(this.params.keyboard.onlyInViewport&&(33===r||34===r||37===r||39===r||38===r||40===r)){var a=!1;if(this.$el.parents("."+this.params.slideClass).length>0&&0===this.$el.parents("."+this.params.slideActiveClass).length)return;var o=e.innerWidth,l=e.innerHeight,c=this.$el.offset();s&&(c.left-=this.$el[0].scrollLeft);for(var h=[[c.left,c.top],[c.left+this.width,c.top],[c.left,c.top+this.height],[c.left+this.width,c.top+this.height]],d=0;d<h.length;d+=1){var u=h[d];u[0]>=0&&u[0]<=o&&u[1]>=0&&u[1]<=l&&(a=!0)}if(!a)return}this.isHorizontal()?(33!==r&&34!==r&&37!==r&&39!==r||(n.preventDefault?n.preventDefault():n.returnValue=!1),(34!==r&&39!==r||s)&&(33!==r&&37!==r||!s)||this.slideNext(),(33!==r&&37!==r||s)&&(34!==r&&39!==r||!s)||this.slidePrev()):(33!==r&&34!==r&&38!==r&&40!==r||(n.preventDefault?n.preventDefault():n.returnValue=!1),34!==r&&40!==r||this.slideNext(),33!==r&&38!==r||this.slidePrev()),this.emit("keyPress",r)}},enable:function(){this.keyboard.enabled||(s(t).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){this.keyboard.enabled&&(s(t).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}},et={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0}},create:function(){a.extend(this,{keyboard:{enabled:!1,enable:tt.enable.bind(this),disable:tt.disable.bind(this),handle:tt.handle.bind(this)}})},on:{init:function(){this.params.keyboard.enabled&&this.keyboard.enable()},destroy:function(){this.keyboard.enabled&&this.keyboard.disable()}}};var it={lastScrollTime:a.now(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return e.navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var e="onwheel"in t;if(!e){var i=t.createElement("div");i.setAttribute("onwheel","return;"),e="function"==typeof i.onwheel}return!e&&t.implementation&&t.implementation.hasFeature&&!0!==t.implementation.hasFeature("","")&&(e=t.implementation.hasFeature("Events.wheel","3.0")),e}()?"wheel":"mousewheel"},normalize:function(t){var e=0,i=0,s=0,n=0;return"detail"in t&&(i=t.detail),"wheelDelta"in t&&(i=-t.wheelDelta/120),"wheelDeltaY"in t&&(i=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=i,i=0),s=10*e,n=10*i,"deltaY"in t&&(n=t.deltaY),"deltaX"in t&&(s=t.deltaX),t.shiftKey&&!s&&(s=n,n=0),(s||n)&&t.deltaMode&&(1===t.deltaMode?(s*=40,n*=40):(s*=800,n*=800)),s&&!e&&(e=s<1?-1:1),n&&!i&&(i=n<1?-1:1),{spinX:e,spinY:i,pixelX:s,pixelY:n}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(t){var e=t,i=this,n=i.params.mousewheel;i.params.cssMode&&e.preventDefault();var r=i.$el;if("container"!==i.params.mousewheel.eventsTarged&&(r=s(i.params.mousewheel.eventsTarged)),!i.mouseEntered&&!r[0].contains(e.target)&&!n.releaseOnEdges)return!0;e.originalEvent&&(e=e.originalEvent);var o=0,l=i.rtlTranslate?-1:1,c=it.normalize(e);if(n.forceToAxis)if(i.isHorizontal()){if(!(Math.abs(c.pixelX)>Math.abs(c.pixelY)))return!0;o=c.pixelX*l}else{if(!(Math.abs(c.pixelY)>Math.abs(c.pixelX)))return!0;o=c.pixelY}else o=Math.abs(c.pixelX)>Math.abs(c.pixelY)?-c.pixelX*l:-c.pixelY;if(0===o)return!0;if(n.invert&&(o=-o),i.params.freeMode){var h={time:a.now(),delta:Math.abs(o),direction:Math.sign(o)},d=i.mousewheel.lastEventBeforeSnap,u=d&&h.time<d.time+500&&h.delta<=d.delta&&h.direction===d.direction;if(!u){i.mousewheel.lastEventBeforeSnap=void 0,i.params.loop&&i.loopFix();var p=i.getTranslate()+o*n.sensitivity,f=i.isBeginning,m=i.isEnd;if(p>=i.minTranslate()&&(p=i.minTranslate()),p<=i.maxTranslate()&&(p=i.maxTranslate()),i.setTransition(0),i.setTranslate(p),i.updateProgress(),i.updateActiveIndex(),i.updateSlidesClasses(),(!f&&i.isBeginning||!m&&i.isEnd)&&i.updateSlidesClasses(),i.params.freeModeSticky){clearTimeout(i.mousewheel.timeout),i.mousewheel.timeout=void 0;var v=i.mousewheel.recentWheelEvents;v.length>=15&&v.shift();var E=v.length?v[v.length-1]:void 0,g=v[0];if(v.push(h),E&&(h.delta>E.delta||h.direction!==E.direction))v.splice(0);else if(v.length>=15&&h.time-g.time<500&&g.delta-h.delta>=1&&h.delta<=6){var _=o>0?.8:.2;i.mousewheel.lastEventBeforeSnap=h,v.splice(0),i.mousewheel.timeout=a.nextTick((function(){i.slideToClosest(i.params.speed,!0,void 0,_)}),0)}i.mousewheel.timeout||(i.mousewheel.timeout=a.nextTick((function(){i.mousewheel.lastEventBeforeSnap=h,v.splice(0),i.slideToClosest(i.params.speed,!0,void 0,.5)}),500))}if(u||i.emit("scroll",e),i.params.autoplay&&i.params.autoplayDisableOnInteraction&&i.autoplay.stop(),p===i.minTranslate()||p===i.maxTranslate())return!0}}else{var y={time:a.now(),delta:Math.abs(o),direction:Math.sign(o),raw:t},b=i.mousewheel.recentWheelEvents;b.length>=2&&b.shift();var S=b.length?b[b.length-1]:void 0;if(b.push(y),S?(y.direction!==S.direction||y.delta>S.delta)&&i.mousewheel.animateSlider(y):i.mousewheel.animateSlider(y),i.mousewheel.releaseScroll(y))return!0}return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},animateSlider:function(t){return t.delta>=6&&a.now()-this.mousewheel.lastScrollTime<60||(t.direction<0?this.isEnd&&!this.params.loop||this.animating||(this.slideNext(),this.emit("scroll",t.raw)):this.isBeginning&&!this.params.loop||this.animating||(this.slidePrev(),this.emit("scroll",t.raw)),this.mousewheel.lastScrollTime=(new e.Date).getTime(),!1)},releaseScroll:function(t){var e=this.params.mousewheel;if(t.direction<0){if(this.isEnd&&!this.params.loop&&e.releaseOnEdges)return!0}else if(this.isBeginning&&!this.params.loop&&e.releaseOnEdges)return!0;return!1},enable:function(){var t=it.event();if(this.params.cssMode)return this.wrapperEl.removeEventListener(t,this.mousewheel.handle),!0;if(!t)return!1;if(this.mousewheel.enabled)return!1;var e=this.$el;return"container"!==this.params.mousewheel.eventsTarged&&(e=s(this.params.mousewheel.eventsTarged)),e.on("mouseenter",this.mousewheel.handleMouseEnter),e.on("mouseleave",this.mousewheel.handleMouseLeave),e.on(t,this.mousewheel.handle),this.mousewheel.enabled=!0,!0},disable:function(){var t=it.event();if(this.params.cssMode)return this.wrapperEl.addEventListener(t,this.mousewheel.handle),!0;if(!t)return!1;if(!this.mousewheel.enabled)return!1;var e=this.$el;return"container"!==this.params.mousewheel.eventsTarged&&(e=s(this.params.mousewheel.eventsTarged)),e.off(t,this.mousewheel.handle),this.mousewheel.enabled=!1,!0}},st={update:function(){var t=this.params.navigation;if(!this.params.loop){var e=this.navigation,i=e.$nextEl,s=e.$prevEl;s&&s.length>0&&(this.isBeginning?s.addClass(t.disabledClass):s.removeClass(t.disabledClass),s[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](t.lockClass)),i&&i.length>0&&(this.isEnd?i.addClass(t.disabledClass):i.removeClass(t.disabledClass),i[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](t.lockClass))}},onPrevClick:function(t){t.preventDefault(),this.isBeginning&&!this.params.loop||this.slidePrev()},onNextClick:function(t){t.preventDefault(),this.isEnd&&!this.params.loop||this.slideNext()},init:function(){var t,e,i=this.params.navigation;(i.nextEl||i.prevEl)&&(i.nextEl&&(t=s(i.nextEl),this.params.uniqueNavElements&&"string"==typeof i.nextEl&&t.length>1&&1===this.$el.find(i.nextEl).length&&(t=this.$el.find(i.nextEl))),i.prevEl&&(e=s(i.prevEl),this.params.uniqueNavElements&&"string"==typeof i.prevEl&&e.length>1&&1===this.$el.find(i.prevEl).length&&(e=this.$el.find(i.prevEl))),t&&t.length>0&&t.on("click",this.navigation.onNextClick),e&&e.length>0&&e.on("click",this.navigation.onPrevClick),a.extend(this.navigation,{$nextEl:t,nextEl:t&&t[0],$prevEl:e,prevEl:e&&e[0]}))},destroy:function(){var t=this.navigation,e=t.$nextEl,i=t.$prevEl;e&&e.length&&(e.off("click",this.navigation.onNextClick),e.removeClass(this.params.navigation.disabledClass)),i&&i.length&&(i.off("click",this.navigation.onPrevClick),i.removeClass(this.params.navigation.disabledClass))}},nt={update:function(){var t=this.rtl,e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var i,n=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,r=this.pagination.$el,a=this.params.loop?Math.ceil((n-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length;if(this.params.loop?((i=Math.ceil((this.activeIndex-this.loopedSlides)/this.params.slidesPerGroup))>n-1-2*this.loopedSlides&&(i-=n-2*this.loopedSlides),i>a-1&&(i-=a),i<0&&"bullets"!==this.params.paginationType&&(i=a+i)):i=void 0!==this.snapIndex?this.snapIndex:this.activeIndex||0,"bullets"===e.type&&this.pagination.bullets&&this.pagination.bullets.length>0){var o,l,c,h=this.pagination.bullets;if(e.dynamicBullets&&(this.pagination.bulletSize=h.eq(0)[this.isHorizontal()?"outerWidth":"outerHeight"](!0),r.css(this.isHorizontal()?"width":"height",this.pagination.bulletSize*(e.dynamicMainBullets+4)+"px"),e.dynamicMainBullets>1&&void 0!==this.previousIndex&&(this.pagination.dynamicBulletIndex+=i-this.previousIndex,this.pagination.dynamicBulletIndex>e.dynamicMainBullets-1?this.pagination.dynamicBulletIndex=e.dynamicMainBullets-1:this.pagination.dynamicBulletIndex<0&&(this.pagination.dynamicBulletIndex=0)),o=i-this.pagination.dynamicBulletIndex,c=((l=o+(Math.min(h.length,e.dynamicMainBullets)-1))+o)/2),h.removeClass(e.bulletActiveClass+" "+e.bulletActiveClass+"-next "+e.bulletActiveClass+"-next-next "+e.bulletActiveClass+"-prev "+e.bulletActiveClass+"-prev-prev "+e.bulletActiveClass+"-main"),r.length>1)h.each((function(t,n){var r=s(n),a=r.index();a===i&&r.addClass(e.bulletActiveClass),e.dynamicBullets&&(a>=o&&a<=l&&r.addClass(e.bulletActiveClass+"-main"),a===o&&r.prev().addClass(e.bulletActiveClass+"-prev").prev().addClass(e.bulletActiveClass+"-prev-prev"),a===l&&r.next().addClass(e.bulletActiveClass+"-next").next().addClass(e.bulletActiveClass+"-next-next"))}));else{var d=h.eq(i),u=d.index();if(d.addClass(e.bulletActiveClass),e.dynamicBullets){for(var p=h.eq(o),f=h.eq(l),m=o;m<=l;m+=1)h.eq(m).addClass(e.bulletActiveClass+"-main");if(this.params.loop)if(u>=h.length-e.dynamicMainBullets){for(var v=e.dynamicMainBullets;v>=0;v-=1)h.eq(h.length-v).addClass(e.bulletActiveClass+"-main");h.eq(h.length-e.dynamicMainBullets-1).addClass(e.bulletActiveClass+"-prev")}else p.prev().addClass(e.bulletActiveClass+"-prev").prev().addClass(e.bulletActiveClass+"-prev-prev"),f.next().addClass(e.bulletActiveClass+"-next").next().addClass(e.bulletActiveClass+"-next-next");else p.prev().addClass(e.bulletActiveClass+"-prev").prev().addClass(e.bulletActiveClass+"-prev-prev"),f.next().addClass(e.bulletActiveClass+"-next").next().addClass(e.bulletActiveClass+"-next-next")}}if(e.dynamicBullets){var E=Math.min(h.length,e.dynamicMainBullets+4),g=(this.pagination.bulletSize*E-this.pagination.bulletSize)/2-c*this.pagination.bulletSize,_=t?"right":"left";h.css(this.isHorizontal()?_:"top",g+"px")}}if("fraction"===e.type&&(r.find("."+e.currentClass).text(e.formatFractionCurrent(i+1)),r.find("."+e.totalClass).text(e.formatFractionTotal(a))),"progressbar"===e.type){var y;y=e.progressbarOpposite?this.isHorizontal()?"vertical":"horizontal":this.isHorizontal()?"horizontal":"vertical";var b=(i+1)/a,S=1,T=1;"horizontal"===y?S=b:T=b,r.find("."+e.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+S+") scaleY("+T+")").transition(this.params.speed)}"custom"===e.type&&e.renderCustom?(r.html(e.renderCustom(this,i+1,a)),this.emit("paginationRender",this,r[0])):this.emit("paginationUpdate",this,r[0]),r[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass)}},render:function(){var t=this.params.pagination;if(t.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var e=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,i=this.pagination.$el,s="";if("bullets"===t.type){for(var n=this.params.loop?Math.ceil((e-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length,r=0;r<n;r+=1)t.renderBullet?s+=t.renderBullet.call(this,r,t.bulletClass):s+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";i.html(s),this.pagination.bullets=i.find("."+t.bulletClass)}"fraction"===t.type&&(s=t.renderFraction?t.renderFraction.call(this,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',i.html(s)),"progressbar"===t.type&&(s=t.renderProgressbar?t.renderProgressbar.call(this,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',i.html(s)),"custom"!==t.type&&this.emit("paginationRender",this.pagination.$el[0])}},init:function(){var t=this,e=t.params.pagination;if(e.el){var i=s(e.el);0!==i.length&&(t.params.uniqueNavElements&&"string"==typeof e.el&&i.length>1&&1===t.$el.find(e.el).length&&(i=t.$el.find(e.el)),"bullets"===e.type&&e.clickable&&i.addClass(e.clickableClass),i.addClass(e.modifierClass+e.type),"bullets"===e.type&&e.dynamicBullets&&(i.addClass(""+e.modifierClass+e.type+"-dynamic"),t.pagination.dynamicBulletIndex=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&i.addClass(e.progressbarOppositeClass),e.clickable&&i.on("click","."+e.bulletClass,(function(e){e.preventDefault();var i=s(this).index()*t.params.slidesPerGroup;t.params.loop&&(i+=t.loopedSlides),t.slideTo(i)})),a.extend(t.pagination,{$el:i,el:i[0]}))}},destroy:function(){var t=this.params.pagination;if(t.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var e=this.pagination.$el;e.removeClass(t.hiddenClass),e.removeClass(t.modifierClass+t.type),this.pagination.bullets&&this.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&e.off("click","."+t.bulletClass)}}},rt={setTranslate:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var t=this.scrollbar,e=this.rtlTranslate,i=this.progress,s=t.dragSize,n=t.trackSize,r=t.$dragEl,a=t.$el,o=this.params.scrollbar,l=s,c=(n-s)*i;e?(c=-c)>0?(l=s-c,c=0):-c+s>n&&(l=n+c):c<0?(l=s+c,c=0):c+s>n&&(l=n-c),this.isHorizontal()?(r.transform("translate3d("+c+"px, 0, 0)"),r[0].style.width=l+"px"):(r.transform("translate3d(0px, "+c+"px, 0)"),r[0].style.height=l+"px"),o.hide&&(clearTimeout(this.scrollbar.timeout),a[0].style.opacity=1,this.scrollbar.timeout=setTimeout((function(){a[0].style.opacity=0,a.transition(400)}),1e3))}},setTransition:function(t){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(t)},updateSize:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var t=this.scrollbar,e=t.$dragEl,i=t.$el;e[0].style.width="",e[0].style.height="";var s,n=this.isHorizontal()?i[0].offsetWidth:i[0].offsetHeight,r=this.size/this.virtualSize,o=r*(n/this.size);s="auto"===this.params.scrollbar.dragSize?n*r:parseInt(this.params.scrollbar.dragSize,10),this.isHorizontal()?e[0].style.width=s+"px":e[0].style.height=s+"px",i[0].style.display=r>=1?"none":"",this.params.scrollbar.hide&&(i[0].style.opacity=0),a.extend(t,{trackSize:n,divider:r,moveDivider:o,dragSize:s}),t.$el[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](this.params.scrollbar.lockClass)}},getPointerPosition:function(t){return this.isHorizontal()?"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].clientX:t.clientX:"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].clientY:t.clientY},setDragPosition:function(t){var e,i=this.scrollbar,s=this.rtlTranslate,n=i.$el,r=i.dragSize,a=i.trackSize,o=i.dragStartPos;e=(i.getPointerPosition(t)-n.offset()[this.isHorizontal()?"left":"top"]-(null!==o?o:r/2))/(a-r),e=Math.max(Math.min(e,1),0),s&&(e=1-e);var l=this.minTranslate()+(this.maxTranslate()-this.minTranslate())*e;this.updateProgress(l),this.setTranslate(l),this.updateActiveIndex(),this.updateSlidesClasses()},onDragStart:function(t){var e=this.params.scrollbar,i=this.scrollbar,s=this.$wrapperEl,n=i.$el,r=i.$dragEl;this.scrollbar.isTouched=!0,this.scrollbar.dragStartPos=t.target===r[0]||t.target===r?i.getPointerPosition(t)-t.target.getBoundingClientRect()[this.isHorizontal()?"left":"top"]:null,t.preventDefault(),t.stopPropagation(),s.transition(100),r.transition(100),i.setDragPosition(t),clearTimeout(this.scrollbar.dragTimeout),n.transition(0),e.hide&&n.css("opacity",1),this.params.cssMode&&this.$wrapperEl.css("scroll-snap-type","none"),this.emit("scrollbarDragStart",t)},onDragMove:function(t){var e=this.scrollbar,i=this.$wrapperEl,s=e.$el,n=e.$dragEl;this.scrollbar.isTouched&&(t.preventDefault?t.preventDefault():t.returnValue=!1,e.setDragPosition(t),i.transition(0),s.transition(0),n.transition(0),this.emit("scrollbarDragMove",t))},onDragEnd:function(t){var e=this.params.scrollbar,i=this.scrollbar,s=this.$wrapperEl,n=i.$el;this.scrollbar.isTouched&&(this.scrollbar.isTouched=!1,this.params.cssMode&&(this.$wrapperEl.css("scroll-snap-type",""),s.transition("")),e.hide&&(clearTimeout(this.scrollbar.dragTimeout),this.scrollbar.dragTimeout=a.nextTick((function(){n.css("opacity",0),n.transition(400)}),1e3)),this.emit("scrollbarDragEnd",t),e.snapOnRelease&&this.slideToClosest())},enableDraggable:function(){if(this.params.scrollbar.el){var e=this.scrollbar,i=this.touchEventsTouch,s=this.touchEventsDesktop,n=this.params,r=e.$el[0],a=!(!o.passiveListener||!n.passiveListeners)&&{passive:!1,capture:!1},l=!(!o.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};o.touch?(r.addEventListener(i.start,this.scrollbar.onDragStart,a),r.addEventListener(i.move,this.scrollbar.onDragMove,a),r.addEventListener(i.end,this.scrollbar.onDragEnd,l)):(r.addEventListener(s.start,this.scrollbar.onDragStart,a),t.addEventListener(s.move,this.scrollbar.onDragMove,a),t.addEventListener(s.end,this.scrollbar.onDragEnd,l))}},disableDraggable:function(){if(this.params.scrollbar.el){var e=this.scrollbar,i=this.touchEventsTouch,s=this.touchEventsDesktop,n=this.params,r=e.$el[0],a=!(!o.passiveListener||!n.passiveListeners)&&{passive:!1,capture:!1},l=!(!o.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};o.touch?(r.removeEventListener(i.start,this.scrollbar.onDragStart,a),r.removeEventListener(i.move,this.scrollbar.onDragMove,a),r.removeEventListener(i.end,this.scrollbar.onDragEnd,l)):(r.removeEventListener(s.start,this.scrollbar.onDragStart,a),t.removeEventListener(s.move,this.scrollbar.onDragMove,a),t.removeEventListener(s.end,this.scrollbar.onDragEnd,l))}},init:function(){if(this.params.scrollbar.el){var t=this.scrollbar,e=this.$el,i=this.params.scrollbar,n=s(i.el);this.params.uniqueNavElements&&"string"==typeof i.el&&n.length>1&&1===e.find(i.el).length&&(n=e.find(i.el));var r=n.find("."+this.params.scrollbar.dragClass);0===r.length&&(r=s('<div class="'+this.params.scrollbar.dragClass+'"></div>'),n.append(r)),a.extend(t,{$el:n,el:n[0],$dragEl:r,dragEl:r[0]}),i.draggable&&t.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}},at={setTransform:function(t,e){var i=this.rtl,n=s(t),r=i?-1:1,a=n.attr("data-swiper-parallax")||"0",o=n.attr("data-swiper-parallax-x"),l=n.attr("data-swiper-parallax-y"),c=n.attr("data-swiper-parallax-scale"),h=n.attr("data-swiper-parallax-opacity");if(o||l?(o=o||"0",l=l||"0"):this.isHorizontal()?(o=a,l="0"):(l=a,o="0"),o=o.indexOf("%")>=0?parseInt(o,10)*e*r+"%":o*e*r+"px",l=l.indexOf("%")>=0?parseInt(l,10)*e+"%":l*e+"px",null!=h){var d=h-(h-1)*(1-Math.abs(e));n[0].style.opacity=d}if(null==c)n.transform("translate3d("+o+", "+l+", 0px)");else{var u=c-(c-1)*(1-Math.abs(e));n.transform("translate3d("+o+", "+l+", 0px) scale("+u+")")}},setTranslate:function(){var t=this,e=t.$el,i=t.slides,n=t.progress,r=t.snapGrid;e.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(e,i){t.parallax.setTransform(i,n)})),i.each((function(e,i){var a=i.progress;t.params.slidesPerGroup>1&&"auto"!==t.params.slidesPerView&&(a+=Math.ceil(e/2)-n*(r.length-1)),a=Math.min(Math.max(a,-1),1),s(i).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(e,i){t.parallax.setTransform(i,a)}))}))},setTransition:function(t){void 0===t&&(t=this.params.speed);this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(e,i){var n=s(i),r=parseInt(n.attr("data-swiper-parallax-duration"),10)||t;0===t&&(r=0),n.transition(r)}))}},ot={getDistanceBetweenTouches:function(t){if(t.targetTouches.length<2)return 1;var e=t.targetTouches[0].pageX,i=t.targetTouches[0].pageY,s=t.targetTouches[1].pageX,n=t.targetTouches[1].pageY;return Math.sqrt(Math.pow(s-e,2)+Math.pow(n-i,2))},onGestureStart:function(t){var e=this.params.zoom,i=this.zoom,n=i.gesture;if(i.fakeGestureTouched=!1,i.fakeGestureMoved=!1,!o.gestures){if("touchstart"!==t.type||"touchstart"===t.type&&t.targetTouches.length<2)return;i.fakeGestureTouched=!0,n.scaleStart=ot.getDistanceBetweenTouches(t)}n.$slideEl&&n.$slideEl.length||(n.$slideEl=s(t.target).closest("."+this.params.slideClass),0===n.$slideEl.length&&(n.$slideEl=this.slides.eq(this.activeIndex)),n.$imageEl=n.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),n.$imageWrapEl=n.$imageEl.parent("."+e.containerClass),n.maxRatio=n.$imageWrapEl.attr("data-swiper-zoom")||e.maxRatio,0!==n.$imageWrapEl.length)?(n.$imageEl&&n.$imageEl.transition(0),this.zoom.isScaling=!0):n.$imageEl=void 0},onGestureChange:function(t){var e=this.params.zoom,i=this.zoom,s=i.gesture;if(!o.gestures){if("touchmove"!==t.type||"touchmove"===t.type&&t.targetTouches.length<2)return;i.fakeGestureMoved=!0,s.scaleMove=ot.getDistanceBetweenTouches(t)}s.$imageEl&&0!==s.$imageEl.length&&(o.gestures?i.scale=t.scale*i.currentScale:i.scale=s.scaleMove/s.scaleStart*i.currentScale,i.scale>s.maxRatio&&(i.scale=s.maxRatio-1+Math.pow(i.scale-s.maxRatio+1,.5)),i.scale<e.minRatio&&(i.scale=e.minRatio+1-Math.pow(e.minRatio-i.scale+1,.5)),s.$imageEl.transform("translate3d(0,0,0) scale("+i.scale+")"))},onGestureEnd:function(t){var e=this.params.zoom,i=this.zoom,s=i.gesture;if(!o.gestures){if(!i.fakeGestureTouched||!i.fakeGestureMoved)return;if("touchend"!==t.type||"touchend"===t.type&&t.changedTouches.length<2&&!M.android)return;i.fakeGestureTouched=!1,i.fakeGestureMoved=!1}s.$imageEl&&0!==s.$imageEl.length&&(i.scale=Math.max(Math.min(i.scale,s.maxRatio),e.minRatio),s.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale("+i.scale+")"),i.currentScale=i.scale,i.isScaling=!1,1===i.scale&&(s.$slideEl=void 0))},onTouchStart:function(t){var e=this.zoom,i=e.gesture,s=e.image;i.$imageEl&&0!==i.$imageEl.length&&(s.isTouched||(M.android&&t.preventDefault(),s.isTouched=!0,s.touchesStart.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,s.touchesStart.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY))},onTouchMove:function(t){var e=this.zoom,i=e.gesture,s=e.image,n=e.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(this.allowClick=!1,s.isTouched&&i.$slideEl)){s.isMoved||(s.width=i.$imageEl[0].offsetWidth,s.height=i.$imageEl[0].offsetHeight,s.startX=a.getTranslate(i.$imageWrapEl[0],"x")||0,s.startY=a.getTranslate(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),this.rtl&&(s.startX=-s.startX,s.startY=-s.startY));var r=s.width*e.scale,o=s.height*e.scale;if(!(r<i.slideWidth&&o<i.slideHeight)){if(s.minX=Math.min(i.slideWidth/2-r/2,0),s.maxX=-s.minX,s.minY=Math.min(i.slideHeight/2-o/2,0),s.maxY=-s.minY,s.touchesCurrent.x="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,s.touchesCurrent.y="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,!s.isMoved&&!e.isScaling){if(this.isHorizontal()&&(Math.floor(s.minX)===Math.floor(s.startX)&&s.touchesCurrent.x<s.touchesStart.x||Math.floor(s.maxX)===Math.floor(s.startX)&&s.touchesCurrent.x>s.touchesStart.x))return void(s.isTouched=!1);if(!this.isHorizontal()&&(Math.floor(s.minY)===Math.floor(s.startY)&&s.touchesCurrent.y<s.touchesStart.y||Math.floor(s.maxY)===Math.floor(s.startY)&&s.touchesCurrent.y>s.touchesStart.y))return void(s.isTouched=!1)}t.preventDefault(),t.stopPropagation(),s.isMoved=!0,s.currentX=s.touchesCurrent.x-s.touchesStart.x+s.startX,s.currentY=s.touchesCurrent.y-s.touchesStart.y+s.startY,s.currentX<s.minX&&(s.currentX=s.minX+1-Math.pow(s.minX-s.currentX+1,.8)),s.currentX>s.maxX&&(s.currentX=s.maxX-1+Math.pow(s.currentX-s.maxX+1,.8)),s.currentY<s.minY&&(s.currentY=s.minY+1-Math.pow(s.minY-s.currentY+1,.8)),s.currentY>s.maxY&&(s.currentY=s.maxY-1+Math.pow(s.currentY-s.maxY+1,.8)),n.prevPositionX||(n.prevPositionX=s.touchesCurrent.x),n.prevPositionY||(n.prevPositionY=s.touchesCurrent.y),n.prevTime||(n.prevTime=Date.now()),n.x=(s.touchesCurrent.x-n.prevPositionX)/(Date.now()-n.prevTime)/2,n.y=(s.touchesCurrent.y-n.prevPositionY)/(Date.now()-n.prevTime)/2,Math.abs(s.touchesCurrent.x-n.prevPositionX)<2&&(n.x=0),Math.abs(s.touchesCurrent.y-n.prevPositionY)<2&&(n.y=0),n.prevPositionX=s.touchesCurrent.x,n.prevPositionY=s.touchesCurrent.y,n.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+s.currentX+"px, "+s.currentY+"px,0)")}}},onTouchEnd:function(){var t=this.zoom,e=t.gesture,i=t.image,s=t.velocity;if(e.$imageEl&&0!==e.$imageEl.length){if(!i.isTouched||!i.isMoved)return i.isTouched=!1,void(i.isMoved=!1);i.isTouched=!1,i.isMoved=!1;var n=300,r=300,a=s.x*n,o=i.currentX+a,l=s.y*r,c=i.currentY+l;0!==s.x&&(n=Math.abs((o-i.currentX)/s.x)),0!==s.y&&(r=Math.abs((c-i.currentY)/s.y));var h=Math.max(n,r);i.currentX=o,i.currentY=c;var d=i.width*t.scale,u=i.height*t.scale;i.minX=Math.min(e.slideWidth/2-d/2,0),i.maxX=-i.minX,i.minY=Math.min(e.slideHeight/2-u/2,0),i.maxY=-i.minY,i.currentX=Math.max(Math.min(i.currentX,i.maxX),i.minX),i.currentY=Math.max(Math.min(i.currentY,i.maxY),i.minY),e.$imageWrapEl.transition(h).transform("translate3d("+i.currentX+"px, "+i.currentY+"px,0)")}},onTransitionEnd:function(){var t=this.zoom,e=t.gesture;e.$slideEl&&this.previousIndex!==this.activeIndex&&(e.$imageEl&&e.$imageEl.transform("translate3d(0,0,0) scale(1)"),e.$imageWrapEl&&e.$imageWrapEl.transform("translate3d(0,0,0)"),t.scale=1,t.currentScale=1,e.$slideEl=void 0,e.$imageEl=void 0,e.$imageWrapEl=void 0)},toggle:function(t){var e=this.zoom;e.scale&&1!==e.scale?e.out():e.in(t)},in:function(t){var e,i,s,n,r,a,o,l,c,h,d,u,p,f,m,v,E=this.zoom,g=this.params.zoom,_=E.gesture,y=E.image;(_.$slideEl||(this.params.virtual&&this.params.virtual.enabled&&this.virtual?_.$slideEl=this.$wrapperEl.children("."+this.params.slideActiveClass):_.$slideEl=this.slides.eq(this.activeIndex),_.$imageEl=_.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),_.$imageWrapEl=_.$imageEl.parent("."+g.containerClass)),_.$imageEl&&0!==_.$imageEl.length)&&(_.$slideEl.addClass(""+g.zoomedSlideClass),void 0===y.touchesStart.x&&t?(e="touchend"===t.type?t.changedTouches[0].pageX:t.pageX,i="touchend"===t.type?t.changedTouches[0].pageY:t.pageY):(e=y.touchesStart.x,i=y.touchesStart.y),E.scale=_.$imageWrapEl.attr("data-swiper-zoom")||g.maxRatio,E.currentScale=_.$imageWrapEl.attr("data-swiper-zoom")||g.maxRatio,t?(m=_.$slideEl[0].offsetWidth,v=_.$slideEl[0].offsetHeight,s=_.$slideEl.offset().left+m/2-e,n=_.$slideEl.offset().top+v/2-i,o=_.$imageEl[0].offsetWidth,l=_.$imageEl[0].offsetHeight,c=o*E.scale,h=l*E.scale,p=-(d=Math.min(m/2-c/2,0)),f=-(u=Math.min(v/2-h/2,0)),(r=s*E.scale)<d&&(r=d),r>p&&(r=p),(a=n*E.scale)<u&&(a=u),a>f&&(a=f)):(r=0,a=0),_.$imageWrapEl.transition(300).transform("translate3d("+r+"px, "+a+"px,0)"),_.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+E.scale+")"))},out:function(){var t=this.zoom,e=this.params.zoom,i=t.gesture;i.$slideEl||(this.params.virtual&&this.params.virtual.enabled&&this.virtual?i.$slideEl=this.$wrapperEl.children("."+this.params.slideActiveClass):i.$slideEl=this.slides.eq(this.activeIndex),i.$imageEl=i.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),i.$imageWrapEl=i.$imageEl.parent("."+e.containerClass)),i.$imageEl&&0!==i.$imageEl.length&&(t.scale=1,t.currentScale=1,i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),i.$slideEl.removeClass(""+e.zoomedSlideClass),i.$slideEl=void 0)},enable:function(){var t=this.zoom;if(!t.enabled){t.enabled=!0;var e=!("touchstart"!==this.touchEvents.start||!o.passiveListener||!this.params.passiveListeners)&&{passive:!0,capture:!1},i=!o.passiveListener||{passive:!1,capture:!0},s="."+this.params.slideClass;o.gestures?(this.$wrapperEl.on("gesturestart",s,t.onGestureStart,e),this.$wrapperEl.on("gesturechange",s,t.onGestureChange,e),this.$wrapperEl.on("gestureend",s,t.onGestureEnd,e)):"touchstart"===this.touchEvents.start&&(this.$wrapperEl.on(this.touchEvents.start,s,t.onGestureStart,e),this.$wrapperEl.on(this.touchEvents.move,s,t.onGestureChange,i),this.$wrapperEl.on(this.touchEvents.end,s,t.onGestureEnd,e),this.touchEvents.cancel&&this.$wrapperEl.on(this.touchEvents.cancel,s,t.onGestureEnd,e)),this.$wrapperEl.on(this.touchEvents.move,"."+this.params.zoom.containerClass,t.onTouchMove,i)}},disable:function(){var t=this.zoom;if(t.enabled){this.zoom.enabled=!1;var e=!("touchstart"!==this.touchEvents.start||!o.passiveListener||!this.params.passiveListeners)&&{passive:!0,capture:!1},i=!o.passiveListener||{passive:!1,capture:!0},s="."+this.params.slideClass;o.gestures?(this.$wrapperEl.off("gesturestart",s,t.onGestureStart,e),this.$wrapperEl.off("gesturechange",s,t.onGestureChange,e),this.$wrapperEl.off("gestureend",s,t.onGestureEnd,e)):"touchstart"===this.touchEvents.start&&(this.$wrapperEl.off(this.touchEvents.start,s,t.onGestureStart,e),this.$wrapperEl.off(this.touchEvents.move,s,t.onGestureChange,i),this.$wrapperEl.off(this.touchEvents.end,s,t.onGestureEnd,e),this.touchEvents.cancel&&this.$wrapperEl.off(this.touchEvents.cancel,s,t.onGestureEnd,e)),this.$wrapperEl.off(this.touchEvents.move,"."+this.params.zoom.containerClass,t.onTouchMove,i)}}},lt={loadInSlide:function(t,e){void 0===e&&(e=!0);var i=this,n=i.params.lazy;if(void 0!==t&&0!==i.slides.length){var r=i.virtual&&i.params.virtual.enabled?i.$wrapperEl.children("."+i.params.slideClass+'[data-swiper-slide-index="'+t+'"]'):i.slides.eq(t),a=r.find("."+n.elementClass+":not(."+n.loadedClass+"):not(."+n.loadingClass+")");!r.hasClass(n.elementClass)||r.hasClass(n.loadedClass)||r.hasClass(n.loadingClass)||(a=a.add(r[0])),0!==a.length&&a.each((function(t,a){var o=s(a);o.addClass(n.loadingClass);var l=o.attr("data-background"),c=o.attr("data-src"),h=o.attr("data-srcset"),d=o.attr("data-sizes");i.loadImage(o[0],c||l,h,d,!1,(function(){if(null!=i&&i&&(!i||i.params)&&!i.destroyed){if(l?(o.css("background-image",'url("'+l+'")'),o.removeAttr("data-background")):(h&&(o.attr("srcset",h),o.removeAttr("data-srcset")),d&&(o.attr("sizes",d),o.removeAttr("data-sizes")),c&&(o.attr("src",c),o.removeAttr("data-src"))),o.addClass(n.loadedClass).removeClass(n.loadingClass),r.find("."+n.preloaderClass).remove(),i.params.loop&&e){var t=r.attr("data-swiper-slide-index");if(r.hasClass(i.params.slideDuplicateClass)){var s=i.$wrapperEl.children('[data-swiper-slide-index="'+t+'"]:not(.'+i.params.slideDuplicateClass+")");i.lazy.loadInSlide(s.index(),!1)}else{var a=i.$wrapperEl.children("."+i.params.slideDuplicateClass+'[data-swiper-slide-index="'+t+'"]');i.lazy.loadInSlide(a.index(),!1)}}i.emit("lazyImageReady",r[0],o[0]),i.params.autoHeight&&i.updateAutoHeight()}})),i.emit("lazyImageLoad",r[0],o[0])}))}},load:function(){var t=this,e=t.$wrapperEl,i=t.params,n=t.slides,r=t.activeIndex,a=t.virtual&&i.virtual.enabled,o=i.lazy,l=i.slidesPerView;function c(t){if(a){if(e.children("."+i.slideClass+'[data-swiper-slide-index="'+t+'"]').length)return!0}else if(n[t])return!0;return!1}function h(t){return a?s(t).attr("data-swiper-slide-index"):s(t).index()}if("auto"===l&&(l=0),t.lazy.initialImageLoaded||(t.lazy.initialImageLoaded=!0),t.params.watchSlidesVisibility)e.children("."+i.slideVisibleClass).each((function(e,i){var n=a?s(i).attr("data-swiper-slide-index"):s(i).index();t.lazy.loadInSlide(n)}));else if(l>1)for(var d=r;d<r+l;d+=1)c(d)&&t.lazy.loadInSlide(d);else t.lazy.loadInSlide(r);if(o.loadPrevNext)if(l>1||o.loadPrevNextAmount&&o.loadPrevNextAmount>1){for(var u=o.loadPrevNextAmount,p=l,f=Math.min(r+p+Math.max(u,p),n.length),m=Math.max(r-Math.max(p,u),0),v=r+l;v<f;v+=1)c(v)&&t.lazy.loadInSlide(v);for(var E=m;E<r;E+=1)c(E)&&t.lazy.loadInSlide(E)}else{var g=e.children("."+i.slideNextClass);g.length>0&&t.lazy.loadInSlide(h(g));var _=e.children("."+i.slidePrevClass);_.length>0&&t.lazy.loadInSlide(h(_))}}},ct={LinearSpline:function(t,e){var i,s,n,r,a,o=function(t,e){for(s=-1,i=t.length;i-s>1;)t[n=i+s>>1]<=e?s=n:i=n;return i};return this.x=t,this.y=e,this.lastIndex=t.length-1,this.interpolate=function(t){return t?(a=o(this.x,t),r=a-1,(t-this.x[r])*(this.y[a]-this.y[r])/(this.x[a]-this.x[r])+this.y[r]):0},this},getInterpolateFunction:function(t){this.controller.spline||(this.controller.spline=this.params.loop?new ct.LinearSpline(this.slidesGrid,t.slidesGrid):new ct.LinearSpline(this.snapGrid,t.snapGrid))},setTranslate:function(t,e){var i,s,n=this,r=n.controller.control;function a(t){var e=n.rtlTranslate?-n.translate:n.translate;"slide"===n.params.controller.by&&(n.controller.getInterpolateFunction(t),s=-n.controller.spline.interpolate(-e)),s&&"container"!==n.params.controller.by||(i=(t.maxTranslate()-t.minTranslate())/(n.maxTranslate()-n.minTranslate()),s=(e-n.minTranslate())*i+t.minTranslate()),n.params.controller.inverse&&(s=t.maxTranslate()-s),t.updateProgress(s),t.setTranslate(s,n),t.updateActiveIndex(),t.updateSlidesClasses()}if(Array.isArray(r))for(var o=0;o<r.length;o+=1)r[o]!==e&&r[o]instanceof z&&a(r[o]);else r instanceof z&&e!==r&&a(r)},setTransition:function(t,e){var i,s=this,n=s.controller.control;function r(e){e.setTransition(t,s),0!==t&&(e.transitionStart(),e.params.autoHeight&&a.nextTick((function(){e.updateAutoHeight()})),e.$wrapperEl.transitionEnd((function(){n&&(e.params.loop&&"slide"===s.params.controller.by&&e.loopFix(),e.transitionEnd())})))}if(Array.isArray(n))for(i=0;i<n.length;i+=1)n[i]!==e&&n[i]instanceof z&&r(n[i]);else n instanceof z&&e!==n&&r(n)}},ht={makeElFocusable:function(t){return t.attr("tabIndex","0"),t},addElRole:function(t,e){return t.attr("role",e),t},addElLabel:function(t,e){return t.attr("aria-label",e),t},disableEl:function(t){return t.attr("aria-disabled",!0),t},enableEl:function(t){return t.attr("aria-disabled",!1),t},onEnterKey:function(t){var e=this.params.a11y;if(13===t.keyCode){var i=s(t.target);this.navigation&&this.navigation.$nextEl&&i.is(this.navigation.$nextEl)&&(this.isEnd&&!this.params.loop||this.slideNext(),this.isEnd?this.a11y.notify(e.lastSlideMessage):this.a11y.notify(e.nextSlideMessage)),this.navigation&&this.navigation.$prevEl&&i.is(this.navigation.$prevEl)&&(this.isBeginning&&!this.params.loop||this.slidePrev(),this.isBeginning?this.a11y.notify(e.firstSlideMessage):this.a11y.notify(e.prevSlideMessage)),this.pagination&&i.is("."+this.params.pagination.bulletClass)&&i[0].click()}},notify:function(t){var e=this.a11y.liveRegion;0!==e.length&&(e.html(""),e.html(t))},updateNavigation:function(){if(!this.params.loop&&this.navigation){var t=this.navigation,e=t.$nextEl,i=t.$prevEl;i&&i.length>0&&(this.isBeginning?this.a11y.disableEl(i):this.a11y.enableEl(i)),e&&e.length>0&&(this.isEnd?this.a11y.disableEl(e):this.a11y.enableEl(e))}},updatePagination:function(){var t=this,e=t.params.a11y;t.pagination&&t.params.pagination.clickable&&t.pagination.bullets&&t.pagination.bullets.length&&t.pagination.bullets.each((function(i,n){var r=s(n);t.a11y.makeElFocusable(r),t.a11y.addElRole(r,"button"),t.a11y.addElLabel(r,e.paginationBulletMessage.replace(/\{\{index\}\}/,r.index()+1))}))},init:function(){this.$el.append(this.a11y.liveRegion);var t,e,i=this.params.a11y;this.navigation&&this.navigation.$nextEl&&(t=this.navigation.$nextEl),this.navigation&&this.navigation.$prevEl&&(e=this.navigation.$prevEl),t&&(this.a11y.makeElFocusable(t),this.a11y.addElRole(t,"button"),this.a11y.addElLabel(t,i.nextSlideMessage),t.on("keydown",this.a11y.onEnterKey)),e&&(this.a11y.makeElFocusable(e),this.a11y.addElRole(e,"button"),this.a11y.addElLabel(e,i.prevSlideMessage),e.on("keydown",this.a11y.onEnterKey)),this.pagination&&this.params.pagination.clickable&&this.pagination.bullets&&this.pagination.bullets.length&&this.pagination.$el.on("keydown","."+this.params.pagination.bulletClass,this.a11y.onEnterKey)},destroy:function(){var t,e;this.a11y.liveRegion&&this.a11y.liveRegion.length>0&&this.a11y.liveRegion.remove(),this.navigation&&this.navigation.$nextEl&&(t=this.navigation.$nextEl),this.navigation&&this.navigation.$prevEl&&(e=this.navigation.$prevEl),t&&t.off("keydown",this.a11y.onEnterKey),e&&e.off("keydown",this.a11y.onEnterKey),this.pagination&&this.params.pagination.clickable&&this.pagination.bullets&&this.pagination.bullets.length&&this.pagination.$el.off("keydown","."+this.params.pagination.bulletClass,this.a11y.onEnterKey)}},dt={init:function(){if(this.params.history){if(!e.history||!e.history.pushState)return this.params.history.enabled=!1,void(this.params.hashNavigation.enabled=!0);var t=this.history;t.initialized=!0,t.paths=dt.getPathValues(),(t.paths.key||t.paths.value)&&(t.scrollToSlide(0,t.paths.value,this.params.runCallbacksOnInit),this.params.history.replaceState||e.addEventListener("popstate",this.history.setHistoryPopState))}},destroy:function(){this.params.history.replaceState||e.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){this.history.paths=dt.getPathValues(),this.history.scrollToSlide(this.params.speed,this.history.paths.value,!1)},getPathValues:function(){var t=e.location.pathname.slice(1).split("/").filter((function(t){return""!==t})),i=t.length;return{key:t[i-2],value:t[i-1]}},setHistory:function(t,i){if(this.history.initialized&&this.params.history.enabled){var s=this.slides.eq(i),n=dt.slugify(s.attr("data-history"));e.location.pathname.includes(t)||(n=t+"/"+n);var r=e.history.state;r&&r.value===n||(this.params.history.replaceState?e.history.replaceState({value:n},null,n):e.history.pushState({value:n},null,n))}},slugify:function(t){return t.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(t,e,i){if(e)for(var s=0,n=this.slides.length;s<n;s+=1){var r=this.slides.eq(s);if(dt.slugify(r.attr("data-history"))===e&&!r.hasClass(this.params.slideDuplicateClass)){var a=r.index();this.slideTo(a,t,i)}}else this.slideTo(0,t,i)}},ut={onHashCange:function(){var e=t.location.hash.replace("#","");if(e!==this.slides.eq(this.activeIndex).attr("data-hash")){var i=this.$wrapperEl.children("."+this.params.slideClass+'[data-hash="'+e+'"]').index();if(void 0===i)return;this.slideTo(i)}},setHash:function(){if(this.hashNavigation.initialized&&this.params.hashNavigation.enabled)if(this.params.hashNavigation.replaceState&&e.history&&e.history.replaceState)e.history.replaceState(null,null,"#"+this.slides.eq(this.activeIndex).attr("data-hash")||"");else{var i=this.slides.eq(this.activeIndex),s=i.attr("data-hash")||i.attr("data-history");t.location.hash=s||""}},init:function(){if(!(!this.params.hashNavigation.enabled||this.params.history&&this.params.history.enabled)){this.hashNavigation.initialized=!0;var i=t.location.hash.replace("#","");if(i)for(var n=0,r=this.slides.length;n<r;n+=1){var a=this.slides.eq(n);if((a.attr("data-hash")||a.attr("data-history"))===i&&!a.hasClass(this.params.slideDuplicateClass)){var o=a.index();this.slideTo(o,0,this.params.runCallbacksOnInit,!0)}}this.params.hashNavigation.watchState&&s(e).on("hashchange",this.hashNavigation.onHashCange)}},destroy:function(){this.params.hashNavigation.watchState&&s(e).off("hashchange",this.hashNavigation.onHashCange)}},pt={run:function(){var t=this,e=t.slides.eq(t.activeIndex),i=t.params.autoplay.delay;e.attr("data-swiper-autoplay")&&(i=e.attr("data-swiper-autoplay")||t.params.autoplay.delay),clearTimeout(t.autoplay.timeout),t.autoplay.timeout=a.nextTick((function(){t.params.autoplay.reverseDirection?t.params.loop?(t.loopFix(),t.slidePrev(t.params.speed,!0,!0),t.emit("autoplay")):t.isBeginning?t.params.autoplay.stopOnLastSlide?t.autoplay.stop():(t.slideTo(t.slides.length-1,t.params.speed,!0,!0),t.emit("autoplay")):(t.slidePrev(t.params.speed,!0,!0),t.emit("autoplay")):t.params.loop?(t.loopFix(),t.slideNext(t.params.speed,!0,!0),t.emit("autoplay")):t.isEnd?t.params.autoplay.stopOnLastSlide?t.autoplay.stop():(t.slideTo(0,t.params.speed,!0,!0),t.emit("autoplay")):(t.slideNext(t.params.speed,!0,!0),t.emit("autoplay")),t.params.cssMode&&t.autoplay.running&&t.autoplay.run()}),i)},start:function(){return void 0===this.autoplay.timeout&&(!this.autoplay.running&&(this.autoplay.running=!0,this.emit("autoplayStart"),this.autoplay.run(),!0))},stop:function(){return!!this.autoplay.running&&(void 0!==this.autoplay.timeout&&(this.autoplay.timeout&&(clearTimeout(this.autoplay.timeout),this.autoplay.timeout=void 0),this.autoplay.running=!1,this.emit("autoplayStop"),!0))},pause:function(t){this.autoplay.running&&(this.autoplay.paused||(this.autoplay.timeout&&clearTimeout(this.autoplay.timeout),this.autoplay.paused=!0,0!==t&&this.params.autoplay.waitForTransition?(this.$wrapperEl[0].addEventListener("transitionend",this.autoplay.onTransitionEnd),this.$wrapperEl[0].addEventListener("webkitTransitionEnd",this.autoplay.onTransitionEnd)):(this.autoplay.paused=!1,this.autoplay.run())))}},ft={setTranslate:function(){for(var t=this.slides,e=0;e<t.length;e+=1){var i=this.slides.eq(e),s=-i[0].swiperSlideOffset;this.params.virtualTranslate||(s-=this.translate);var n=0;this.isHorizontal()||(n=s,s=0);var r=this.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:r}).transform("translate3d("+s+"px, "+n+"px, 0px)")}},setTransition:function(t){var e=this,i=e.slides,s=e.$wrapperEl;if(i.transition(t),e.params.virtualTranslate&&0!==t){var n=!1;i.transitionEnd((function(){if(!n&&e&&!e.destroyed){n=!0,e.animating=!1;for(var t=["webkitTransitionEnd","transitionend"],i=0;i<t.length;i+=1)s.trigger(t[i])}}))}}},mt={setTranslate:function(){var t,e=this.$el,i=this.$wrapperEl,n=this.slides,r=this.width,a=this.height,o=this.rtlTranslate,l=this.size,c=this.params.cubeEffect,h=this.isHorizontal(),d=this.virtual&&this.params.virtual.enabled,u=0;c.shadow&&(h?(0===(t=i.find(".swiper-cube-shadow")).length&&(t=s('<div class="swiper-cube-shadow"></div>'),i.append(t)),t.css({height:r+"px"})):0===(t=e.find(".swiper-cube-shadow")).length&&(t=s('<div class="swiper-cube-shadow"></div>'),e.append(t)));for(var p=0;p<n.length;p+=1){var f=n.eq(p),m=p;d&&(m=parseInt(f.attr("data-swiper-slide-index"),10));var v=90*m,E=Math.floor(v/360);o&&(v=-v,E=Math.floor(-v/360));var g=Math.max(Math.min(f[0].progress,1),-1),_=0,y=0,b=0;m%4==0?(_=4*-E*l,b=0):(m-1)%4==0?(_=0,b=4*-E*l):(m-2)%4==0?(_=l+4*E*l,b=l):(m-3)%4==0&&(_=-l,b=3*l+4*l*E),o&&(_=-_),h||(y=_,_=0);var S="rotateX("+(h?0:-v)+"deg) rotateY("+(h?v:0)+"deg) translate3d("+_+"px, "+y+"px, "+b+"px)";if(g<=1&&g>-1&&(u=90*m+90*g,o&&(u=90*-m-90*g)),f.transform(S),c.slideShadows){var T=h?f.find(".swiper-slide-shadow-left"):f.find(".swiper-slide-shadow-top"),R=h?f.find(".swiper-slide-shadow-right"):f.find(".swiper-slide-shadow-bottom");0===T.length&&(T=s('<div class="swiper-slide-shadow-'+(h?"left":"top")+'"></div>'),f.append(T)),0===R.length&&(R=s('<div class="swiper-slide-shadow-'+(h?"right":"bottom")+'"></div>'),f.append(R)),T.length&&(T[0].style.opacity=Math.max(-g,0)),R.length&&(R[0].style.opacity=Math.max(g,0))}}if(i.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),c.shadow)if(h)t.transform("translate3d(0px, "+(r/2+c.shadowOffset)+"px, "+-r/2+"px) rotateX(90deg) rotateZ(0deg) scale("+c.shadowScale+")");else{var O=Math.abs(u)-90*Math.floor(Math.abs(u)/90),C=1.5-(Math.sin(2*O*Math.PI/360)/2+Math.cos(2*O*Math.PI/360)/2),P=c.shadowScale,w=c.shadowScale/C,A=c.shadowOffset;t.transform("scale3d("+P+", 1, "+w+") translate3d(0px, "+(a/2+A)+"px, "+-a/2/w+"px) rotateX(-90deg)")}var I=W.isSafari||W.isUiWebView?-l/2:0;i.transform("translate3d(0px,0,"+I+"px) rotateX("+(this.isHorizontal()?0:u)+"deg) rotateY("+(this.isHorizontal()?-u:0)+"deg)")},setTransition:function(t){var e=this.$el;this.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),this.params.cubeEffect.shadow&&!this.isHorizontal()&&e.find(".swiper-cube-shadow").transition(t)}},vt={setTranslate:function(){for(var t=this.slides,e=this.rtlTranslate,i=0;i<t.length;i+=1){var n=t.eq(i),r=n[0].progress;this.params.flipEffect.limitRotation&&(r=Math.max(Math.min(n[0].progress,1),-1));var a=-180*r,o=0,l=-n[0].swiperSlideOffset,c=0;if(this.isHorizontal()?e&&(a=-a):(c=l,l=0,o=-a,a=0),n[0].style.zIndex=-Math.abs(Math.round(r))+t.length,this.params.flipEffect.slideShadows){var h=this.isHorizontal()?n.find(".swiper-slide-shadow-left"):n.find(".swiper-slide-shadow-top"),d=this.isHorizontal()?n.find(".swiper-slide-shadow-right"):n.find(".swiper-slide-shadow-bottom");0===h.length&&(h=s('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"left":"top")+'"></div>'),n.append(h)),0===d.length&&(d=s('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"right":"bottom")+'"></div>'),n.append(d)),h.length&&(h[0].style.opacity=Math.max(-r,0)),d.length&&(d[0].style.opacity=Math.max(r,0))}n.transform("translate3d("+l+"px, "+c+"px, 0px) rotateX("+o+"deg) rotateY("+a+"deg)")}},setTransition:function(t){var e=this,i=e.slides,s=e.activeIndex,n=e.$wrapperEl;if(i.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),e.params.virtualTranslate&&0!==t){var r=!1;i.eq(s).transitionEnd((function(){if(!r&&e&&!e.destroyed){r=!0,e.animating=!1;for(var t=["webkitTransitionEnd","transitionend"],i=0;i<t.length;i+=1)n.trigger(t[i])}}))}}},Et={setTranslate:function(){for(var t=this.width,e=this.height,i=this.slides,n=this.$wrapperEl,r=this.slidesSizesGrid,a=this.params.coverflowEffect,l=this.isHorizontal(),c=this.translate,h=l?t/2-c:e/2-c,d=l?a.rotate:-a.rotate,u=a.depth,p=0,f=i.length;p<f;p+=1){var m=i.eq(p),v=r[p],E=(h-m[0].swiperSlideOffset-v/2)/v*a.modifier,g=l?d*E:0,_=l?0:d*E,y=-u*Math.abs(E),b=a.stretch;"string"==typeof b&&-1!==b.indexOf("%")&&(b=parseFloat(a.stretch)/100*v);var S=l?0:b*E,T=l?b*E:0;Math.abs(T)<.001&&(T=0),Math.abs(S)<.001&&(S=0),Math.abs(y)<.001&&(y=0),Math.abs(g)<.001&&(g=0),Math.abs(_)<.001&&(_=0);var R="translate3d("+T+"px,"+S+"px,"+y+"px)  rotateX("+_+"deg) rotateY("+g+"deg)";if(m.transform(R),m[0].style.zIndex=1-Math.abs(Math.round(E)),a.slideShadows){var O=l?m.find(".swiper-slide-shadow-left"):m.find(".swiper-slide-shadow-top"),C=l?m.find(".swiper-slide-shadow-right"):m.find(".swiper-slide-shadow-bottom");0===O.length&&(O=s('<div class="swiper-slide-shadow-'+(l?"left":"top")+'"></div>'),m.append(O)),0===C.length&&(C=s('<div class="swiper-slide-shadow-'+(l?"right":"bottom")+'"></div>'),m.append(C)),O.length&&(O[0].style.opacity=E>0?E:0),C.length&&(C[0].style.opacity=-E>0?-E:0)}}(o.pointerEvents||o.prefixedPointerEvents)&&(n[0].style.perspectiveOrigin=h+"px 50%")},setTransition:function(t){this.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t)}},gt={init:function(){var t=this.params.thumbs,e=this.constructor;t.swiper instanceof e?(this.thumbs.swiper=t.swiper,a.extend(this.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),a.extend(this.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):a.isObject(t.swiper)&&(this.thumbs.swiper=new e(a.extend({},t.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),this.thumbs.swiperCreated=!0),this.thumbs.swiper.$el.addClass(this.params.thumbs.thumbsContainerClass),this.thumbs.swiper.on("tap",this.thumbs.onThumbClick)},onThumbClick:function(){var t=this.thumbs.swiper;if(t){var e=t.clickedIndex,i=t.clickedSlide;if(!(i&&s(i).hasClass(this.params.thumbs.slideThumbActiveClass)||null==e)){var n;if(n=t.params.loop?parseInt(s(t.clickedSlide).attr("data-swiper-slide-index"),10):e,this.params.loop){var r=this.activeIndex;this.slides.eq(r).hasClass(this.params.slideDuplicateClass)&&(this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft,r=this.activeIndex);var a=this.slides.eq(r).prevAll('[data-swiper-slide-index="'+n+'"]').eq(0).index(),o=this.slides.eq(r).nextAll('[data-swiper-slide-index="'+n+'"]').eq(0).index();n=void 0===a?o:void 0===o?a:o-r<r-a?o:a}this.slideTo(n)}}},update:function(t){var e=this.thumbs.swiper;if(e){var i="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():e.params.slidesPerView,s=this.params.thumbs.autoScrollOffset,n=s&&!e.params.loop;if(this.realIndex!==e.realIndex||n){var r,a,o=e.activeIndex;if(e.params.loop){e.slides.eq(o).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,o=e.activeIndex);var l=e.slides.eq(o).prevAll('[data-swiper-slide-index="'+this.realIndex+'"]').eq(0).index(),c=e.slides.eq(o).nextAll('[data-swiper-slide-index="'+this.realIndex+'"]').eq(0).index();r=void 0===l?c:void 0===c?l:c-o==o-l?o:c-o<o-l?c:l,a=this.activeIndex>this.previousIndex?"next":"prev"}else a=(r=this.realIndex)>this.previousIndex?"next":"prev";n&&(r+="next"===a?s:-1*s),e.visibleSlidesIndexes&&e.visibleSlidesIndexes.indexOf(r)<0&&(e.params.centeredSlides?r=r>o?r-Math.floor(i/2)+1:r+Math.floor(i/2)-1:r>o&&(r=r-i+1),e.slideTo(r,t?0:void 0))}var h=1,d=this.params.thumbs.slideThumbActiveClass;if(this.params.slidesPerView>1&&!this.params.centeredSlides&&(h=this.params.slidesPerView),this.params.thumbs.multipleActiveThumbs||(h=1),h=Math.floor(h),e.slides.removeClass(d),e.params.loop||e.params.virtual&&e.params.virtual.enabled)for(var u=0;u<h;u+=1)e.$wrapperEl.children('[data-swiper-slide-index="'+(this.realIndex+u)+'"]').addClass(d);else for(var p=0;p<h;p+=1)e.slides.eq(this.realIndex+p).addClass(d)}}},_t=[q,Y,X,G,J,Z,et,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create:function(){a.extend(this,{mousewheel:{enabled:!1,enable:it.enable.bind(this),disable:it.disable.bind(this),handle:it.handle.bind(this),handleMouseEnter:it.handleMouseEnter.bind(this),handleMouseLeave:it.handleMouseLeave.bind(this),animateSlider:it.animateSlider.bind(this),releaseScroll:it.releaseScroll.bind(this),lastScrollTime:a.now(),lastEventBeforeSnap:void 0,recentWheelEvents:[]}})},on:{init:function(){!this.params.mousewheel.enabled&&this.params.cssMode&&this.mousewheel.disable(),this.params.mousewheel.enabled&&this.mousewheel.enable()},destroy:function(){this.params.cssMode&&this.mousewheel.enable(),this.mousewheel.enabled&&this.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){a.extend(this,{navigation:{init:st.init.bind(this),update:st.update.bind(this),destroy:st.destroy.bind(this),onNextClick:st.onNextClick.bind(this),onPrevClick:st.onPrevClick.bind(this)}})},on:{init:function(){this.navigation.init(),this.navigation.update()},toEdge:function(){this.navigation.update()},fromEdge:function(){this.navigation.update()},destroy:function(){this.navigation.destroy()},click:function(t){var e,i=this.navigation,n=i.$nextEl,r=i.$prevEl;!this.params.navigation.hideOnClick||s(t.target).is(r)||s(t.target).is(n)||(n?e=n.hasClass(this.params.navigation.hiddenClass):r&&(e=r.hasClass(this.params.navigation.hiddenClass)),!0===e?this.emit("navigationShow",this):this.emit("navigationHide",this),n&&n.toggleClass(this.params.navigation.hiddenClass),r&&r.toggleClass(this.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(t){return t},formatFractionTotal:function(t){return t},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){a.extend(this,{pagination:{init:nt.init.bind(this),render:nt.render.bind(this),update:nt.update.bind(this),destroy:nt.destroy.bind(this),dynamicBulletIndex:0}})},on:{init:function(){this.pagination.init(),this.pagination.render(),this.pagination.update()},activeIndexChange:function(){(this.params.loop||void 0===this.snapIndex)&&this.pagination.update()},snapIndexChange:function(){this.params.loop||this.pagination.update()},slidesLengthChange:function(){this.params.loop&&(this.pagination.render(),this.pagination.update())},snapGridLengthChange:function(){this.params.loop||(this.pagination.render(),this.pagination.update())},destroy:function(){this.pagination.destroy()},click:function(t){this.params.pagination.el&&this.params.pagination.hideOnClick&&this.pagination.$el.length>0&&!s(t.target).hasClass(this.params.pagination.bulletClass)&&(!0===this.pagination.$el.hasClass(this.params.pagination.hiddenClass)?this.emit("paginationShow",this):this.emit("paginationHide",this),this.pagination.$el.toggleClass(this.params.pagination.hiddenClass))}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){a.extend(this,{scrollbar:{init:rt.init.bind(this),destroy:rt.destroy.bind(this),updateSize:rt.updateSize.bind(this),setTranslate:rt.setTranslate.bind(this),setTransition:rt.setTransition.bind(this),enableDraggable:rt.enableDraggable.bind(this),disableDraggable:rt.disableDraggable.bind(this),setDragPosition:rt.setDragPosition.bind(this),getPointerPosition:rt.getPointerPosition.bind(this),onDragStart:rt.onDragStart.bind(this),onDragMove:rt.onDragMove.bind(this),onDragEnd:rt.onDragEnd.bind(this),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init:function(){this.scrollbar.init(),this.scrollbar.updateSize(),this.scrollbar.setTranslate()},update:function(){this.scrollbar.updateSize()},resize:function(){this.scrollbar.updateSize()},observerUpdate:function(){this.scrollbar.updateSize()},setTranslate:function(){this.scrollbar.setTranslate()},setTransition:function(t){this.scrollbar.setTransition(t)},destroy:function(){this.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){a.extend(this,{parallax:{setTransform:at.setTransform.bind(this),setTranslate:at.setTranslate.bind(this),setTransition:at.setTransition.bind(this)}})},on:{beforeInit:function(){this.params.parallax.enabled&&(this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},init:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTranslate:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTransition:function(t){this.params.parallax.enabled&&this.parallax.setTransition(t)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var t=this,e={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}};"onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach((function(i){e[i]=ot[i].bind(t)})),a.extend(t,{zoom:e});var i=1;Object.defineProperty(t.zoom,"scale",{get:function(){return i},set:function(e){if(i!==e){var s=t.zoom.gesture.$imageEl?t.zoom.gesture.$imageEl[0]:void 0,n=t.zoom.gesture.$slideEl?t.zoom.gesture.$slideEl[0]:void 0;t.emit("zoomChange",e,s,n)}i=e}})},on:{init:function(){this.params.zoom.enabled&&this.zoom.enable()},destroy:function(){this.zoom.disable()},touchStart:function(t){this.zoom.enabled&&this.zoom.onTouchStart(t)},touchEnd:function(t){this.zoom.enabled&&this.zoom.onTouchEnd(t)},doubleTap:function(t){this.params.zoom.enabled&&this.zoom.enabled&&this.params.zoom.toggle&&this.zoom.toggle(t)},transitionEnd:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.zoom.onTransitionEnd()},slideChange:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.params.cssMode&&this.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){a.extend(this,{lazy:{initialImageLoaded:!1,load:lt.load.bind(this),loadInSlide:lt.loadInSlide.bind(this)}})},on:{beforeInit:function(){this.params.lazy.enabled&&this.params.preloadImages&&(this.params.preloadImages=!1)},init:function(){this.params.lazy.enabled&&!this.params.loop&&0===this.params.initialSlide&&this.lazy.load()},scroll:function(){this.params.freeMode&&!this.params.freeModeSticky&&this.lazy.load()},resize:function(){this.params.lazy.enabled&&this.lazy.load()},scrollbarDragMove:function(){this.params.lazy.enabled&&this.lazy.load()},transitionStart:function(){this.params.lazy.enabled&&(this.params.lazy.loadOnTransitionStart||!this.params.lazy.loadOnTransitionStart&&!this.lazy.initialImageLoaded)&&this.lazy.load()},transitionEnd:function(){this.params.lazy.enabled&&!this.params.lazy.loadOnTransitionStart&&this.lazy.load()},slideChange:function(){this.params.lazy.enabled&&this.params.cssMode&&this.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){a.extend(this,{controller:{control:this.params.controller.control,getInterpolateFunction:ct.getInterpolateFunction.bind(this),setTranslate:ct.setTranslate.bind(this),setTransition:ct.setTransition.bind(this)}})},on:{update:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},resize:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},observerUpdate:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},setTranslate:function(t,e){this.controller.control&&this.controller.setTranslate(t,e)},setTransition:function(t,e){this.controller.control&&this.controller.setTransition(t,e)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create:function(){var t=this;a.extend(t,{a11y:{liveRegion:s('<span class="'+t.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')}}),Object.keys(ht).forEach((function(e){t.a11y[e]=ht[e].bind(t)}))},on:{init:function(){this.params.a11y.enabled&&(this.a11y.init(),this.a11y.updateNavigation())},toEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},fromEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},paginationUpdate:function(){this.params.a11y.enabled&&this.a11y.updatePagination()},destroy:function(){this.params.a11y.enabled&&this.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){a.extend(this,{history:{init:dt.init.bind(this),setHistory:dt.setHistory.bind(this),setHistoryPopState:dt.setHistoryPopState.bind(this),scrollToSlide:dt.scrollToSlide.bind(this),destroy:dt.destroy.bind(this)}})},on:{init:function(){this.params.history.enabled&&this.history.init()},destroy:function(){this.params.history.enabled&&this.history.destroy()},transitionEnd:function(){this.history.initialized&&this.history.setHistory(this.params.history.key,this.activeIndex)},slideChange:function(){this.history.initialized&&this.params.cssMode&&this.history.setHistory(this.params.history.key,this.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){a.extend(this,{hashNavigation:{initialized:!1,init:ut.init.bind(this),destroy:ut.destroy.bind(this),setHash:ut.setHash.bind(this),onHashCange:ut.onHashCange.bind(this)}})},on:{init:function(){this.params.hashNavigation.enabled&&this.hashNavigation.init()},destroy:function(){this.params.hashNavigation.enabled&&this.hashNavigation.destroy()},transitionEnd:function(){this.hashNavigation.initialized&&this.hashNavigation.setHash()},slideChange:function(){this.hashNavigation.initialized&&this.params.cssMode&&this.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){var t=this;a.extend(t,{autoplay:{running:!1,paused:!1,run:pt.run.bind(t),start:pt.start.bind(t),stop:pt.stop.bind(t),pause:pt.pause.bind(t),onVisibilityChange:function(){"hidden"===document.visibilityState&&t.autoplay.running&&t.autoplay.pause(),"visible"===document.visibilityState&&t.autoplay.paused&&(t.autoplay.run(),t.autoplay.paused=!1)},onTransitionEnd:function(e){t&&!t.destroyed&&t.$wrapperEl&&e.target===this&&(t.$wrapperEl[0].removeEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].removeEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())}}})},on:{init:function(){this.params.autoplay.enabled&&(this.autoplay.start(),document.addEventListener("visibilitychange",this.autoplay.onVisibilityChange))},beforeTransitionStart:function(t,e){this.autoplay.running&&(e||!this.params.autoplay.disableOnInteraction?this.autoplay.pause(t):this.autoplay.stop())},sliderFirstMove:function(){this.autoplay.running&&(this.params.autoplay.disableOnInteraction?this.autoplay.stop():this.autoplay.pause())},touchEnd:function(){this.params.cssMode&&this.autoplay.paused&&!this.params.autoplay.disableOnInteraction&&this.autoplay.run()},destroy:function(){this.autoplay.running&&this.autoplay.stop(),document.removeEventListener("visibilitychange",this.autoplay.onVisibilityChange)}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){a.extend(this,{fadeEffect:{setTranslate:ft.setTranslate.bind(this),setTransition:ft.setTransition.bind(this)}})},on:{beforeInit:function(){if("fade"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"fade");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};a.extend(this.params,t),a.extend(this.originalParams,t)}},setTranslate:function(){"fade"===this.params.effect&&this.fadeEffect.setTranslate()},setTransition:function(t){"fade"===this.params.effect&&this.fadeEffect.setTransition(t)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){a.extend(this,{cubeEffect:{setTranslate:mt.setTranslate.bind(this),setTransition:mt.setTransition.bind(this)}})},on:{beforeInit:function(){if("cube"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"cube"),this.classNames.push(this.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};a.extend(this.params,t),a.extend(this.originalParams,t)}},setTranslate:function(){"cube"===this.params.effect&&this.cubeEffect.setTranslate()},setTransition:function(t){"cube"===this.params.effect&&this.cubeEffect.setTransition(t)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){a.extend(this,{flipEffect:{setTranslate:vt.setTranslate.bind(this),setTransition:vt.setTransition.bind(this)}})},on:{beforeInit:function(){if("flip"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"flip"),this.classNames.push(this.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};a.extend(this.params,t),a.extend(this.originalParams,t)}},setTranslate:function(){"flip"===this.params.effect&&this.flipEffect.setTranslate()},setTransition:function(t){"flip"===this.params.effect&&this.flipEffect.setTransition(t)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}},create:function(){a.extend(this,{coverflowEffect:{setTranslate:Et.setTranslate.bind(this),setTransition:Et.setTransition.bind(this)}})},on:{beforeInit:function(){"coverflow"===this.params.effect&&(this.classNames.push(this.params.containerModifierClass+"coverflow"),this.classNames.push(this.params.containerModifierClass+"3d"),this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},setTranslate:function(){"coverflow"===this.params.effect&&this.coverflowEffect.setTranslate()},setTransition:function(t){"coverflow"===this.params.effect&&this.coverflowEffect.setTransition(t)}}},{name:"thumbs",params:{thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){a.extend(this,{thumbs:{swiper:null,init:gt.init.bind(this),update:gt.update.bind(this),onThumbClick:gt.onThumbClick.bind(this)}})},on:{beforeInit:function(){var t=this.params.thumbs;t&&t.swiper&&(this.thumbs.init(),this.thumbs.update(!0))},slideChange:function(){this.thumbs.swiper&&this.thumbs.update()},update:function(){this.thumbs.swiper&&this.thumbs.update()},resize:function(){this.thumbs.swiper&&this.thumbs.update()},observerUpdate:function(){this.thumbs.swiper&&this.thumbs.update()},setTransition:function(t){var e=this.thumbs.swiper;e&&e.setTransition(t)},beforeDestroy:function(){var t=this.thumbs.swiper;t&&this.thumbs.swiperCreated&&t&&t.destroy()}}}];return void 0===z.use&&(z.use=z.Class.use,z.installModule=z.Class.installModule),z.use(_t),z})),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ejs=t()}}((function(){return function t(e,i,s){function n(a,o){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[a]={exports:{}};e[a][0].call(h.exports,(function(t){var i=e[a][1][t];return n(i||t)}),h,h.exports,t,e,i,s)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<s.length;a++)n(s[a]);return n}({1:[function(t,e,i){"use strict";var s=t("fs"),n=t("path"),r=t("./utils"),a=!1,o=t("../package.json").version,l=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],c=l.concat("cache"),h=/^\uFEFF/;function d(t,e){var n,r,a=e.views,o=/^[A-Za-z]+:\\|^\//.exec(t);if(o&&o.length)n=i.resolveInclude(t.replace(/^\/*/,""),e.root||"/",!0);else if(e.filename&&(r=i.resolveInclude(t,e.filename),s.existsSync(r)&&(n=r)),n||Array.isArray(a)&&a.some((function(e){return r=i.resolveInclude(t,e,!0),s.existsSync(r)}))&&(n=r),!n)throw new Error('Could not find the include file "'+e.escapeFunction(t)+'"');return n}function u(t,e){var s,n=t.filename,r=arguments.length>1;if(t.cache){if(!n)throw new Error("cache option requires a filename");if(s=i.cache.get(n))return s;r||(e=f(n).toString().replace(h,""))}else if(!r){if(!n)throw new Error("Internal EJS error: no file name or template provided");e=f(n).toString().replace(h,"")}return s=i.compile(e,t),t.cache&&i.cache.set(n,s),s}function p(t,e,s){var n;if(!s){if("function"==typeof i.promiseImpl)return new i.promiseImpl((function(i,s){try{i(n=u(t)(e))}catch(r){s(r)}}));throw new Error("Please provide a callback function")}try{n=u(t)(e)}catch(r){return s(r)}s(null,n)}function f(t){return i.fileLoader(t)}function m(t,e,i,s,n){var r=e.split("\n"),a=Math.max(s-3,0),o=Math.min(r.length,s+3),l=n(i),c=r.slice(a,o).map((function(t,e){var i=e+a+1;return(i==s?" >> ":"    ")+i+"| "+t})).join("\n");throw t.path=l,t.message=(l||"ejs")+":"+s+"\n"+c+"\n\n"+t.message,t}function v(t){return t.replace(/;(\s*$)/,"$1")}function E(t,e){e=e||{};var s={};this.templateText=t,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",this.dependencies=[],s.client=e.client||!1,s.escapeFunction=e.escape||e.escapeFunction||r.escapeXML,s.compileDebug=!1!==e.compileDebug,s.debug=!!e.debug,s.filename=e.filename,s.openDelimiter=e.openDelimiter||i.openDelimiter||"<",s.closeDelimiter=e.closeDelimiter||i.closeDelimiter||">",s.delimiter=e.delimiter||i.delimiter||"%",s.strict=e.strict||!1,s.context=e.context,s.cache=e.cache||!1,s.rmWhitespace=e.rmWhitespace,s.root=e.root,s.outputFunctionName=e.outputFunctionName,s.localsName=e.localsName||i.localsName||"locals",s.views=e.views,s.async=e.async,s.strict?s._with=!1:s._with=void 0===e._with||e._with,this.opts=s,this.regex=this.createRegex()}i.cache=r.cache,i.fileLoader=s.readFileSync,i.localsName="locals",i.promiseImpl=new Function("return this;")().Promise,i.resolveInclude=function(t,e,i){var s=n.dirname,r=n.extname,a=(0,n.resolve)(i?e:s(e),t);return r(t)||(a+=".ejs"),a},i.compile=function(t,e){return e&&e.scope&&(a||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),a=!0),e.context||(e.context=e.scope),delete e.scope),new E(t,e).compile()},i.render=function(t,e,i){var s=e||{},n=i||{};return 2==arguments.length&&r.shallowCopyFromList(n,s,l),u(n,t)(s)},i.renderFile=function(){var t,e,i,s=Array.prototype.slice.call(arguments),n=s.shift(),a={filename:n};return"function"==typeof arguments[arguments.length-1]&&(t=s.pop()),s.length?(e=s.shift(),s.length?r.shallowCopy(a,s.pop()):(e.settings&&(e.settings.views&&(a.views=e.settings.views),e.settings["view cache"]&&(a.cache=!0),(i=e.settings["view options"])&&r.shallowCopy(a,i)),r.shallowCopyFromList(a,e,c)),a.filename=n):e={},p(a,e,t)},i.Template=E,i.clearCache=function(){i.cache.reset()},E.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},E.prototype={createRegex:function(){var t="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",e=r.escapeRegExpChars(this.opts.delimiter),i=r.escapeRegExpChars(this.opts.openDelimiter),s=r.escapeRegExpChars(this.opts.closeDelimiter);return t=t.replace(/%/g,e).replace(/</g,i).replace(/>/g,s),new RegExp(t)},compile:function(){var t,e,i,s=this.opts,n="",a="",o=s.escapeFunction;this.source||(this.generateSource(),n+="  var __output = [], __append = __output.push.bind(__output);\n",s.outputFunctionName&&(n+="  var "+s.outputFunctionName+" = __append;\n"),!1!==s._with&&(n+="  with ("+s.localsName+" || {}) {\n",a+="  }\n"),a+='  return __output.join("");\n',this.source=n+this.source+a),t=s.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(s.filename?JSON.stringify(s.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n":this.source,s.client&&(t="escapeFn = escapeFn || "+o.toString()+";\n"+t,s.compileDebug&&(t="rethrow = rethrow || "+m.toString()+";\n"+t)),s.strict&&(t='"use strict";\n'+t),s.debug&&console.log(t);try{if(s.async)try{i=new Function("return (async function(){}).constructor;")()}catch(c){throw c instanceof SyntaxError?new Error("This environment does not support async/await"):c}else i=Function;e=new i(s.localsName+", escapeFn, include, rethrow",t)}catch(c){throw c instanceof SyntaxError&&(s.filename&&(c.message+=" in "+s.filename),c.message+=" while compiling ejs\n\n",c.message+="If the above error is not helpful, you may want to try EJS-Lint:\n",c.message+="https://github.com/RyanZim/EJS-Lint",c.async||(c.message+="\n",c.message+="Or, if you meant to create an async function, pass async: true as an option.")),c}if(s.client)return e.dependencies=this.dependencies,e;var l=function(t){return e.apply(s.context,[t||{},o,function(e,i){var n=r.shallowCopy({},t);return i&&(n=r.shallowCopy(n,i)),function(t,e){var i=r.shallowCopy({},e);return i.filename=d(t,i),u(i)}(e,s)(n)},m])};return l.dependencies=this.dependencies,l},generateSource:function(){this.opts.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var t=this,e=this.parseTemplateText(),s=this.opts.delimiter,n=this.opts.openDelimiter,a=this.opts.closeDelimiter;e&&e.length&&e.forEach((function(o,l){var c,u,p,m,v,g;if(0===o.indexOf(n+s)&&0!==o.indexOf(n+s+s)&&(u=e[l+2])!=s+a&&u!="-"+s+a&&u!="_"+s+a)throw new Error('Could not find matching close tag for "'+o+'".');if((p=o.match(/^\s*include\s+(\S+)/))&&(c=e[l-1])&&(c==n+s||c==n+s+"-"||c==n+s+"_"))return m=r.shallowCopy({},t.opts),v=function(t,e){var i,s,n=r.shallowCopy({},e);s=f(i=d(t,n)).toString().replace(h,""),n.filename=i;var a=new E(s,n);return a.generateSource(),{source:a.source,filename:i,template:s}}(p[1],m),g=t.opts.compileDebug?"    ; (function(){\n      var __line = 1\n      , __lines = "+JSON.stringify(v.template)+"\n      , __filename = "+JSON.stringify(v.filename)+";\n      try {\n"+v.source+"      } catch (e) {\n        rethrow(e, __lines, __filename, __line, escapeFn);\n      }\n    ; }).call(this)\n":"    ; (function(){\n"+v.source+"    ; }).call(this)\n",t.source+=g,void t.dependencies.push(i.resolveInclude(p[1],m.filename));t.scanLine(o)}))},parseTemplateText:function(){for(var t,e=this.templateText,i=this.regex,s=i.exec(e),n=[];s;)0!==(t=s.index)&&(n.push(e.substring(0,t)),e=e.slice(t)),n.push(s[0]),e=e.slice(s[0].length),s=i.exec(e);return e&&n.push(e),n},_addOutput:function(t){if(this.truncate&&(t=t.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!t)return t;t=(t=(t=(t=t.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/"/g,'\\"'),this.source+='    ; __append("'+t+'")\n'},scanLine:function(t){var e,i=this.opts.delimiter,s=this.opts.openDelimiter,n=this.opts.closeDelimiter;switch(e=t.split("\n").length-1,t){case s+i:case s+i+"_":this.mode=E.modes.EVAL;break;case s+i+"=":this.mode=E.modes.ESCAPED;break;case s+i+"-":this.mode=E.modes.RAW;break;case s+i+"#":this.mode=E.modes.COMMENT;break;case s+i+i:this.mode=E.modes.LITERAL,this.source+='    ; __append("'+t.replace(s+i+i,s+i)+'")\n';break;case i+i+n:this.mode=E.modes.LITERAL,this.source+='    ; __append("'+t.replace(i+i+n,i+n)+'")\n';break;case i+n:case"-"+i+n:case"_"+i+n:this.mode==E.modes.LITERAL&&this._addOutput(t),this.mode=null,this.truncate=0===t.indexOf("-")||0===t.indexOf("_");break;default:if(this.mode){switch(this.mode){case E.modes.EVAL:case E.modes.ESCAPED:case E.modes.RAW:t.lastIndexOf("//")>t.lastIndexOf("\n")&&(t+="\n")}switch(this.mode){case E.modes.EVAL:this.source+="    ; "+t+"\n";break;case E.modes.ESCAPED:this.source+="    ; __append(escapeFn("+v(t)+"))\n";break;case E.modes.RAW:this.source+="    ; __append("+v(t)+")\n";break;case E.modes.COMMENT:break;case E.modes.LITERAL:this._addOutput(t)}}else this._addOutput(t)}this.opts.compileDebug&&e&&(this.currentLine+=e,this.source+="    ; __line = "+this.currentLine+"\n")}},i.escapeXML=r.escapeXML,i.__express=i.renderFile,t.extensions&&(t.extensions[".ejs"]=function(t,e){var s=e||t.filename,n={filename:s,client:!0},r=f(s).toString(),a=i.compile(r,n);t._compile("module.exports = "+a.toString()+";",s)}),i.VERSION=o,i.name="ejs","undefined"!=typeof window&&(window.ejs=i)},{"../package.json":6,"./utils":2,fs:3,path:4}],2:[function(t,e,i){"use strict";var s=/[|\\{}()[\]^$+*?.]/g;i.escapeRegExpChars=function(t){return t?String(t).replace(s,"\\$&"):""};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},r=/[&<>'"]/g;function a(t){return n[t]||t}i.escapeXML=function(t){return null==t?"":String(t).replace(r,a)},i.escapeXML.toString=function(){return Function.prototype.toString.call(this)+';\nvar _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n'},i.shallowCopy=function(t,e){for(var i in e=e||{})t[i]=e[i];return t},i.shallowCopyFromList=function(t,e,i){for(var s=0;s<i.length;s++){var n=i[s];void 0!==e[n]&&(t[n]=e[n])}return t},i.cache={_data:{},set:function(t,e){this._data[t]=e},get:function(t){return this._data[t]},remove:function(t){delete this._data[t]},reset:function(){this._data={}}}},{}],3:[function(t,e,i){},{}],4:[function(t,e,i){(function(t){function e(t,e){for(var i=0,s=t.length-1;s>=0;s--){var n=t[s];"."===n?t.splice(s,1):".."===n?(t.splice(s,1),i++):i&&(t.splice(s,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,n=function(t){return s.exec(t).slice(1)};function r(t,e){if(t.filter)return t.filter(e);for(var i=[],s=0;s<t.length;s++)e(t[s],s,t)&&i.push(t[s]);return i}i.resolve=function(){for(var i="",s=!1,n=arguments.length-1;n>=-1&&!s;n--){var a=n>=0?arguments[n]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(i=a+"/"+i,s="/"===a.charAt(0))}return(s?"/":"")+(i=e(r(i.split("/"),(function(t){return!!t})),!s).join("/"))||"."},i.normalize=function(t){var s=i.isAbsolute(t),n="/"===a(t,-1);return(t=e(r(t.split("/"),(function(t){return!!t})),!s).join("/"))||s||(t="."),t&&n&&(t+="/"),(s?"/":"")+t},i.isAbsolute=function(t){return"/"===t.charAt(0)},i.join=function(){var t=Array.prototype.slice.call(arguments,0);return i.normalize(r(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},i.relative=function(t,e){function s(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=i.resolve(t).substr(1),e=i.resolve(e).substr(1);for(var n=s(t.split("/")),r=s(e.split("/")),a=Math.min(n.length,r.length),o=a,l=0;l<a;l++)if(n[l]!==r[l]){o=l;break}var c=[];for(l=o;l<n.length;l++)c.push("..");return(c=c.concat(r.slice(o))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(t){var e=n(t),i=e[0],s=e[1];return i||s?(s&&(s=s.substr(0,s.length-1)),i+s):"."},i.basename=function(t,e){var i=n(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},i.extname=function(t){return n(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,t("_process"))},{_process:5}],5:[function(t,e,i){var s,n,r=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function l(t){if(s===setTimeout)return setTimeout(t,0);if((s===a||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:a}catch(t){s=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var c,h=[],d=!1,u=-1;function p(){d&&c&&(d=!1,c.length?h=c.concat(h):u=-1,h.length&&f())}function f(){if(!d){var t=l(p);d=!0;for(var e=h.length;e;){for(c=h,h=[];++u<e;)c&&c[u].run();u=-1,e=h.length}c=null,d=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new m(t,e)),1!==h.length||d||l(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],6:[function(t,e,i){e.exports={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"2.6.1",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",contributors:["Timothy Gu <timothygu99@gmail.com> (https://timothygu.github.io)"],license:"Apache-2.0",main:"./lib/ejs.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{},devDependencies:{browserify:"^13.1.1",eslint:"^4.14.0","git-directory-deploy":"^1.5.1",istanbul:"~0.4.3",jake:"^8.0.16",jsdoc:"^3.4.0","lru-cache":"^4.0.1",mocha:"^5.0.5","uglify-js":"^3.3.16"},engines:{node:">=0.10.0"},scripts:{test:"jake test",lint:'eslint "**/*.js" Jakefile',coverage:"istanbul cover node_modules/mocha/bin/_mocha",doc:"jake doc",devdoc:"jake doc[dev]"}}},{}]},{},[1])(1)}));