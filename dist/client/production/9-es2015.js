(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{dzKq:function(e,n,t){"use strict";t.r(n),t.d(n,"AdmissionModule",(function(){return pe}));var c=t("2kYt"),d=t("DSWM"),i=t("sEIs"),s=t("unpb"),o=t("RRjC"),a=t("sN6X"),r=t("wgY5"),l=t("PIN6"),m=t("cHUu"),g=t("mOXJ"),u=t("EM62"),p=t("s2Ay"),f=t("OSFB"),h=t("NSn/"),v=function(e,n,t,c){return new(t||(t=Promise))((function(d,i){function s(e){try{a(c.next(e))}catch(n){i(n)}}function o(e){try{a(c.throw(e))}catch(n){i(n)}}function a(e){var n;e.done?d(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,o)}a((c=c.apply(e,n||[])).next())}))};function y(e,n){1&e&&(u.Rc(0,"div",17),u.Dd(1),u.cd(2,"translate"),u.Qc()),2&e&&(u.yc(1),u.Ed(u.dd(2,1,"admission.check.success")))}function b(e,n){1&e&&(u.Rc(0,"div",17),u.Dd(1),u.cd(2,"translate"),u.Qc()),2&e&&(u.yc(1),u.Ed(u.dd(2,1,"admission.check.reEntry")))}function k(e,n){if(1&e&&(u.Rc(0,"p"),u.Rc(1,"strong",16),u.Dd(2),u.cd(3,"translate"),u.Qc(),u.Dd(4),u.cd(5,"async"),u.Qc()),2&e){const e=u.bd(4);u.yc(2),u.Ed(u.dd(3,2,"common.seat")),u.yc(2),u.Fd(" ",u.dd(5,4,e.admission).qrcodeToken.availableReservation.reservedTicket.ticketedSeat.seatNumber," ")}}const E=function(e){return{"background-color":e}};function x(e,n){if(1&e&&(u.Rc(0,"div",13),u.Mc(1,"div",14),u.cd(2,"async"),u.Bd(3,y,3,3,"div",15),u.cd(4,"async"),u.Bd(5,b,3,3,"div",15),u.cd(6,"async"),u.Bd(7,k,6,6,"p",9),u.cd(8,"async"),u.Rc(9,"p"),u.Rc(10,"strong",16),u.Dd(11),u.cd(12,"translate"),u.Qc(),u.Dd(13),u.cd(14,"changeLanguage"),u.cd(15,"async"),u.Qc(),u.Rc(16,"p"),u.Rc(17,"strong",16),u.Dd(18),u.cd(19,"translate"),u.Qc(),u.Dd(20),u.cd(21,"async"),u.Qc(),u.Qc()),2&e){const e=u.bd(3);u.yc(1),u.id("ngStyle",u.ld(26,E,u.dd(2,8,e.admission).qrcodeToken.availableReservation.reservedTicket.ticketType.color)),u.yc(2),u.id("ngIf",0===u.dd(4,10,e.admission).qrcodeToken.checkTokenActions.length),u.yc(2),u.id("ngIf",u.dd(6,12,e.admission).qrcodeToken.checkTokenActions.length>0),u.yc(2),u.id("ngIf",u.dd(8,14,e.admission).qrcodeToken.availableReservation.reservedTicket.ticketedSeat),u.yc(4),u.Ed(u.dd(12,16,"common.ticket")),u.yc(2),u.Fd(" ",u.dd(14,18,u.dd(15,20,e.admission).qrcodeToken.availableReservation.reservedTicket.ticketType.name)," "),u.yc(5),u.Ed(u.dd(19,22,"admission.check.entryCount")),u.yc(2),u.Fd(" ",u.dd(21,24,e.admission).qrcodeToken.checkTokenActions.length," ")}}function R(e,n){if(1&e&&(u.Rc(0,"p"),u.Dd(1),u.cd(2,"translate"),u.Mc(3,"br"),u.Rc(4,"strong"),u.Dd(5),u.cd(6,"async"),u.Qc(),u.Qc()),2&e){const e=u.bd(4);u.yc(1),u.Fd(" ",u.dd(2,2,"admission.check.alert.event"),""),u.yc(4),u.Ed(u.dd(6,4,e.admission).qrcodeToken.statusCode)}}function D(e,n){if(1&e&&(u.Rc(0,"p"),u.Dd(1),u.cd(2,"translate"),u.Mc(3,"br"),u.Rc(4,"strong"),u.Dd(5),u.cd(6,"async"),u.Qc(),u.Qc()),2&e){const e=u.bd(4);u.yc(1),u.Fd(" ",u.dd(2,2,"admission.check.alert.qrcode"),""),u.yc(4),u.Ed(u.dd(6,4,e.admission).qrcodeToken.statusCode)}}function w(e,n){if(1&e&&(u.Rc(0,"div",18),u.Rc(1,"div",17),u.Dd(2),u.cd(3,"translate"),u.Qc(),u.Bd(4,R,7,6,"p",9),u.cd(5,"async"),u.Bd(6,D,7,6,"p",9),u.cd(7,"async"),u.Qc()),2&e){const e=u.bd(3);u.yc(2),u.Ed(u.dd(3,3,"admission.check.danger")),u.yc(2),u.id("ngIf",200===u.dd(5,5,e.admission).qrcodeToken.statusCode),u.yc(2),u.id("ngIf",200!==u.dd(7,7,e.admission).qrcodeToken.statusCode)}}function Q(e,n){if(1&e&&(u.Rc(0,"div"),u.Bd(1,x,22,28,"div",11),u.cd(2,"async"),u.Bd(3,w,8,9,"div",12),u.cd(4,"async"),u.Qc()),2&e){const e=u.bd(2);u.yc(1),u.id("ngIf",u.dd(2,2,e.admission).qrcodeToken.availableReservation),u.yc(2),u.id("ngIf",!u.dd(4,4,e.admission).qrcodeToken.availableReservation)}}function I(e,n){1&e&&(u.Rc(0,"div",19),u.Rc(1,"div",20),u.Dd(2),u.cd(3,"translate"),u.Qc(),u.Rc(4,"p"),u.Dd(5),u.cd(6,"translate"),u.Qc(),u.Qc()),2&e&&(u.yc(2),u.Ed(u.dd(3,2,"admission.check.waiting")),u.yc(3),u.Ed(u.dd(6,4,"admission.check.alert.waiting")))}function C(e,n){if(1&e&&(u.Rc(0,"div",8),u.Bd(1,Q,5,6,"div",9),u.cd(2,"async"),u.Bd(3,I,7,6,"div",10),u.cd(4,"async"),u.Qc()),2&e){const e=u.bd();u.yc(1),u.id("ngIf",u.dd(2,2,e.admission).qrcodeToken),u.yc(2),u.id("ngIf",!u.dd(4,4,e.admission).qrcodeToken)}}function M(e,n){if(1&e&&(u.Rc(0,"p",33),u.Dd(1),u.cd(2,"async"),u.Qc()),2&e){const e=u.bd(2);u.yc(1),u.Fd(" ",u.dd(2,1,e.admission).screeningEvent.workPerformed.headline," ")}}function P(e,n){if(1&e&&(u.Rc(0,"p",33),u.Dd(1),u.cd(2,"changeLanguage"),u.cd(3,"async"),u.Qc()),2&e){const e=u.bd(2);u.yc(1),u.Fd(" ",u.dd(2,1,u.dd(3,3,e.admission).screeningEvent.superEvent.description)," ")}}function O(e,n){if(1&e&&(u.Rc(0,"div",34),u.Dd(1),u.cd(2,"async"),u.Qc()),2&e){const e=u.bd(2);u.yc(1),u.Ed(u.dd(2,1,e.admission).screeningEvent.workPerformed.contentRating)}}function S(e,n){1&e&&(u.Rc(0,"div",34),u.Dd(1),u.cd(2,"translate"),u.Qc()),2&e&&(u.yc(1),u.Ed(u.dd(2,1,"common.dubbing")))}function L(e,n){1&e&&(u.Rc(0,"div",34),u.Dd(1),u.cd(2,"translate"),u.Qc()),2&e&&(u.yc(1),u.Ed(u.dd(2,1,"common.subtitles")))}function T(e,n){if(1&e&&(u.Rc(0,"div",35),u.Rc(1,"span",36),u.Dd(2),u.cd(3,"translate"),u.Qc(),u.Dd(4),u.cd(5,"async"),u.cd(6,"translate"),u.Qc()),2&e){const e=u.bd(2);u.yc(2),u.Ed(u.dd(3,3,"common.duration")),u.yc(2),u.Gd("",e.moment.duration(null==u.dd(5,5,e.admission).screeningEvent.workPerformed?null:u.dd(5,5,e.admission).screeningEvent.workPerformed.duration).asMinutes(),"",u.dd(6,7,"common.date.minute")," ")}}function B(e,n){if(1&e&&(u.Rc(0,"span",16),u.Dd(1),u.cd(2,"changeLanguage"),u.cd(3,"async"),u.Qc()),2&e){const e=u.bd(2);u.yc(1),u.Fd(" ",u.dd(2,1,u.dd(3,3,e.admission).screeningEvent.location.address)," ")}}function F(e,n){if(1&e&&(u.Rc(0,"div",21),u.Rc(1,"div",22),u.Rc(2,"div",23),u.Rc(3,"p",24),u.Dd(4),u.cd(5,"changeLanguage"),u.cd(6,"async"),u.Qc(),u.Bd(7,M,3,3,"p",25),u.cd(8,"async"),u.Bd(9,P,4,5,"p",25),u.cd(10,"async"),u.cd(11,"changeLanguage"),u.cd(12,"async"),u.Qc(),u.Rc(13,"div",26),u.Bd(14,O,3,3,"div",27),u.cd(15,"async"),u.Bd(16,S,3,3,"div",27),u.cd(17,"async"),u.Bd(18,L,3,3,"div",27),u.cd(19,"async"),u.Bd(20,T,7,9,"div",28),u.cd(21,"async"),u.cd(22,"async"),u.Qc(),u.Qc(),u.Rc(23,"div",22),u.Rc(24,"p",29),u.Dd(25),u.cd(26,"changeLanguage"),u.cd(27,"async"),u.Qc(),u.Rc(28,"p",30),u.Bd(29,B,4,5,"span",31),u.cd(30,"changeLanguage"),u.cd(31,"async"),u.Rc(32,"span"),u.Dd(33),u.cd(34,"changeLanguage"),u.cd(35,"async"),u.Qc(),u.Qc(),u.Rc(36,"div"),u.Rc(37,"p",32),u.Rc(38,"strong",16),u.Dd(39),u.cd(40,"translate"),u.Qc(),u.Dd(41),u.cd(42,"formatDate"),u.cd(43,"async"),u.Qc(),u.Rc(44,"p"),u.Rc(45,"strong",16),u.Dd(46),u.cd(47,"translate"),u.Qc(),u.Dd(48),u.cd(49,"formatDate"),u.cd(50,"async"),u.cd(51,"formatDate"),u.cd(52,"async"),u.Qc(),u.Rc(53,"p",32),u.Rc(54,"strong",16),u.Dd(55),u.cd(56,"translate"),u.Qc(),u.Dd(57),u.cd(58,"async"),u.cd(59,"async"),u.Qc(),u.Rc(60,"p"),u.Rc(61,"strong",16),u.Dd(62),u.cd(63,"translate"),u.Qc(),u.Dd(64),u.cd(65,"async"),u.Qc(),u.Qc(),u.Qc(),u.Qc()),2&e){const e=u.bd();u.yc(4),u.Ed(u.dd(5,19,u.dd(6,21,e.admission).screeningEvent.name)),u.yc(3),u.id("ngIf",u.dd(8,23,e.admission).screeningEvent.workPerformed.headline),u.yc(2),u.id("ngIf",u.dd(10,25,e.admission).screeningEvent.superEvent.description&&u.dd(11,27,u.dd(12,29,e.admission).screeningEvent.superEvent.description)),u.yc(5),u.id("ngIf",u.dd(15,31,e.admission).screeningEvent.workPerformed.contentRating),u.yc(2),u.id("ngIf",u.dd(17,33,e.admission).screeningEvent.superEvent.dubLanguage),u.yc(2),u.id("ngIf",u.dd(19,35,e.admission).screeningEvent.superEvent.subtitleLanguage),u.yc(2),u.id("ngIf",(null==u.dd(21,37,e.admission).screeningEvent.workPerformed?null:u.dd(21,37,e.admission).screeningEvent.workPerformed.duration)&&e.moment.duration(null==u.dd(22,39,e.admission).screeningEvent.workPerformed?null:u.dd(22,39,e.admission).screeningEvent.workPerformed.duration).asMinutes()>0),u.yc(5),u.Ed(u.dd(26,41,u.dd(27,43,e.admission).screeningEvent.superEvent.location.name)),u.yc(4),u.id("ngIf",u.dd(30,45,u.dd(31,47,e.admission).screeningEvent.location.address)),u.yc(4),u.Fd(" ",u.dd(34,49,u.dd(35,51,e.admission).screeningEvent.location.name)," "),u.yc(6),u.Ed(u.dd(40,53,"common.doorTime")),u.yc(2),u.Fd(" ",u.ed(42,55,u.dd(43,58,e.admission).screeningEvent.doorTime,"MM/DD (ddd) HH:mm")," "),u.yc(5),u.Ed(u.dd(47,60,"common.startDate")),u.yc(2),u.Gd(" ",u.ed(49,62,u.dd(50,65,e.admission).screeningEvent.startDate,"MM/DD (ddd) HH:mm")," - ",u.ed(51,67,u.dd(52,70,e.admission).screeningEvent.endDate,"HH:mm")," "),u.yc(7),u.Ed(u.dd(56,72,"common.reservation")),u.yc(2),u.Fd(" ",u.dd(58,74,e.admission).screeningEvent.maximumAttendeeCapacity-u.dd(59,76,e.admission).screeningEvent.remainingAttendeeCapacity," "),u.yc(5),u.Ed(u.dd(63,78,"common.admission")),u.yc(2),u.Fd(" ",u.dd(65,80,e.admission).screeningEvent.attendeeCount," ")}}class W{constructor(e,n,t,c,d){this.store=e,this.admissionService=n,this.utilService=t,this.qrcodeService=c,this.translate=d,this.moment=r,this.environment=Object(l.a)()}ngOnInit(){this.inputCode="",this.isLoading=this.store.pipe(Object(a.m)(g.c)),this.admission=this.store.pipe(Object(a.m)(g.a)),this.admissionService.initializeQrcodeToken()}ngOnDestroy(){clearInterval(this.updateLoop)}handleKeyboardEvent(e){"Enter"===e.key&&this.inputCode.length>0?(this.check(this.inputCode),this.inputCode=""):"Escape"!==e.key&&(this.inputCode+=e.key)}check(e){return v(this,void 0,void 0,(function*(){try{yield this.admissionService.checkQrcodeToken(e)}catch(n){console.error(n),this.utilService.openAlert({title:this.translate.instant("common.error"),body:this.translate.instant("admission.check.alert.check")})}}))}openQRCodeReader(){this.qrcodeService.openQRCodeReader({cb:e=>v(this,void 0,void 0,(function*(){yield this.check(e)}))})}update(){clearInterval(this.updateLoop),this.updateLoop=setInterval(()=>v(this,void 0,void 0,(function*(){const{screeningEvent:e}=yield this.admissionService.getData();void 0!==e&&(yield this.admissionService.getScreeningEvent(e))})),6e5)}}W.\u0275fac=function(e){return new(e||W)(u.Lc(a.b),u.Lc(m.a),u.Lc(m.k),u.Lc(m.g),u.Lc(p.d))},W.\u0275cmp=u.Fc({type:W,selectors:[["app-admission-check"]],hostBindings:function(e,n){1&e&&u.Zc("keypress",(function(e){return n.handleKeyboardEvent(e)}),!1,u.td)},decls:14,vars:12,consts:[[1,"contents-width","mx-auto","px-3","pt-4"],[1,"buttons","mx-auto","text-center","mb-4"],["type","button",1,"btn","btn-success","btn-block","py-3",3,"click"],["class","mb-4",4,"ngIf"],[1,"contents-width","mx-auto","px-3","pb-5"],["class","mb-4 bg-white",4,"ngIf"],[1,"buttons","mx-auto","text-center"],["type","button","routerLink","/admission/schedule",1,"btn","btn-link"],[1,"mb-4"],[4,"ngIf"],["class","p-4 bg-dark text-white text-center",4,"ngIf"],["class","position-relative p-4 bg-success text-white text-center",4,"ngIf"],["class","p-4 bg-danger text-white text-center",4,"ngIf"],[1,"position-relative","p-4","bg-success","text-white","text-center"],[1,"color","rounded","border","border-white",3,"ngStyle"],["class","flash-text text-xx-large font-weight-bold mb-2",4,"ngIf"],[1,"mr-2"],[1,"flash-text","text-xx-large","font-weight-bold","mb-2"],[1,"p-4","bg-danger","text-white","text-center"],[1,"p-4","bg-dark","text-white","text-center"],[1,"text-xx-large","font-weight-bold","mb-2"],[1,"mb-4","bg-white"],[1,"p-3"],[1,"mb-2"],[1,"font-weight-bold","text-large"],["class","text-small",4,"ngIf"],[1,"d-flex","align-items-center","mb-2"],["class","text-small text-white bg-dark py-1 px-3 mr-2",4,"ngIf"],["class","text-small ml-auto",4,"ngIf"],[1,"theater-name"],[1,"screen-name"],["class","mr-2",4,"ngIf"],[1,"mr-3"],[1,"text-small"],[1,"text-small","text-white","bg-dark","py-1","px-3","mr-2"],[1,"text-small","ml-auto"],[1,"mr-1"]],template:function(e,n){1&e&&(u.Rc(0,"div",0),u.Rc(1,"div",1),u.Rc(2,"button",2),u.Zc("click",(function(){return n.openQRCodeReader()})),u.Dd(3),u.cd(4,"translate"),u.Qc(),u.Qc(),u.Qc(),u.Bd(5,C,5,6,"div",3),u.cd(6,"async"),u.Rc(7,"div",4),u.Bd(8,F,66,82,"div",5),u.cd(9,"async"),u.Rc(10,"div",6),u.Rc(11,"button",7),u.Dd(12),u.cd(13,"translate"),u.Qc(),u.Qc(),u.Qc()),2&e&&(u.yc(3),u.Ed(u.dd(4,4,"admission.check.camera.start")),u.yc(2),u.id("ngIf",!u.dd(6,6,n.isLoading)),u.yc(3),u.id("ngIf",u.dd(9,8,n.admission).screeningEvent),u.yc(4),u.Ed(u.dd(13,10,"admission.schedule.prev")))},directives:[c.l,i.c,c.m],pipes:[p.c,c.b,f.a,h.a],styles:[".video-area[_ngcontent-%COMP%]{height:25vh;overflow:hidden}.flash-text[_ngcontent-%COMP%]{-webkit-animation-duration:3s;animation-duration:3s;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:flash-text;animation-name:flash-text}.color[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem;width:1.5rem;height:1.5rem}@-webkit-keyframes flash-text{0%,20%,40%,60%,80%,to{color:#fff}10%,30%,50%,70%,90%{color:transparent}}@keyframes flash-text{0%,20%,40%,60%,80%,to{color:#fff}10%,30%,50%,70%,90%{color:transparent}}"]});var _=t("QN9p"),q=t("cF7s"),H=t("nIj0");t("i7xV");function j(e,n){if(1&e&&(u.Rc(0,"p",13),u.Dd(1),u.cd(2,"changeLanguage"),u.Qc()),2&e){const e=u.bd();u.yc(1),u.Fd(" ",u.dd(2,1,e.performance.screeningEvent.location.address),"")}}function Y(e,n){1&e&&(u.Rc(0,"div",14),u.Dd(1),u.cd(2,"translate"),u.Qc()),2&e&&(u.yc(1),u.Fd(" ",u.dd(2,1,"admission.schedule.status.opening"),""))}function A(e,n){1&e&&(u.Rc(0,"div",14),u.Dd(1),u.cd(2,"translate"),u.Qc()),2&e&&(u.yc(1),u.Fd(" ",u.dd(2,1,"admission.schedule.status.nowShowing"),""))}function Z(e,n){if(1&e&&(u.Rc(0,"div"),u.Bd(1,Y,3,3,"div",9),u.Bd(2,A,3,3,"div",9),u.Qc()),2&e){const e=u.bd();u.yc(1),u.id("ngIf",e.performance.isOpenDoor()),u.yc(1),u.id("ngIf",e.performance.isScreening())}}function G(e,n){1&e&&(u.Rc(0,"div",14),u.Dd(1),u.cd(2,"translate"),u.Qc()),2&e&&(u.yc(1),u.Fd(" ",u.dd(2,1,"admission.schedule.status.beforeOpening"),""))}function N(e,n){1&e&&(u.Rc(0,"div",14),u.Dd(1),u.cd(2,"translate"),u.Qc()),2&e&&(u.yc(1),u.Fd(" ",u.dd(2,1,"admission.schedule.status.filmCompletion"),""))}function J(e,n){if(1&e&&(u.Rc(0,"div",15),u.Dd(1),u.cd(2,"translate"),u.Qc()),2&e){const e=u.bd();u.yc(1),u.Hd(" ",u.dd(2,3,"common.seat")," ",e.performance.screeningEvent.remainingAttendeeCapacity," / ",e.performance.screeningEvent.maximumAttendeeCapacity," ")}}function z(e,n){1&e&&(u.Rc(0,"div",15),u.Dd(1),u.cd(2,"translate"),u.Qc()),2&e&&(u.yc(1),u.Fd(" ",u.dd(2,1,"admission.schedule.infiniteStock"),""))}const K=function(e,n){return{"bg-white":e,"bg-dark-gray text-light-gray":n}};class V{constructor(){this.select=new u.w,this.moment=r}ngOnInit(){}}function X(e,n){if(1&e&&(u.Rc(0,"p"),u.Dd(1),u.cd(2,"changeLanguage"),u.Qc()),2&e){const e=u.bd();u.yc(1),u.Fd(" ",u.dd(2,1,e.screeningWorkEvent.info.superEvent.headline),"")}}function $(e,n){if(1&e&&(u.Rc(0,"p"),u.Dd(1),u.cd(2,"changeLanguage"),u.Qc()),2&e){const e=u.bd();u.yc(1),u.Ed(u.dd(2,1,e.screeningWorkEvent.info.superEvent.description))}}function U(e,n){if(1&e&&(u.Rc(0,"div",10),u.Dd(1),u.Qc()),2&e){const e=u.bd();u.yc(1),u.Ed(e.screeningWorkEvent.info.workPerformed.contentRating)}}function ee(e,n){1&e&&(u.Rc(0,"div",10),u.Dd(1),u.cd(2,"translate"),u.Qc()),2&e&&(u.yc(1),u.Ed(u.dd(2,1,"common.dubbing")))}function ne(e,n){1&e&&(u.Rc(0,"div",10),u.Dd(1),u.cd(2,"translate"),u.Qc()),2&e&&(u.yc(1),u.Ed(u.dd(2,1,"common.subtitles")))}function te(e,n){if(1&e&&(u.Rc(0,"div",11),u.Rc(1,"span",12),u.Dd(2),u.cd(3,"translate"),u.Qc(),u.Dd(4),u.cd(5,"translate"),u.Qc()),2&e){const e=u.bd();u.yc(2),u.Ed(u.dd(3,3,"common.duration")),u.yc(2),u.Gd("",e.moment.duration(e.screeningWorkEvent.info.workPerformed.duration).asMinutes(),"",u.dd(5,5,"common.date.minute")," ")}}function ce(e,n){if(1&e){const e=u.Sc();u.Rc(0,"li",13),u.Rc(1,"app-admission-performance",14),u.Zc("select",(function(n){return u.vd(e),u.bd().select.emit(n)})),u.Qc(),u.Qc()}if(2&e){const e=n.$implicit;u.yc(1),u.id("performance",e)}}V.\u0275fac=function(e){return new(e||V)},V.\u0275cmp=u.Fc({type:V,selectors:[["app-admission-performance"]],inputs:{performance:"performance"},outputs:{select:"select"},decls:28,vars:25,consts:[[1,"row","mx-0","border","boder-gray","rounded","p-3","py-md-3","text-md-center","d-md-block","align-items-center","pointer","h-100",3,"ngClass","click"],[1,"col-md-12","col-8","px-0"],[1,"mb-1","text-small","screen-name"],["class","text-overflow-ellipsis mr-2 d-inline-block d-md-block",4,"ngIf"],[1,"text-overflow-ellipsis","d-inline-block","d-md-block"],[1,"text-large"],[1,"border-0","bg-light-gray","my-2"],[1,"col-md-12","col-4","px-0","text-center"],[4,"ngIf"],["class","status mb-2",4,"ngIf"],["class","mb-2 text-small",4,"ngIf"],[1,"text-small","mb-1"],[1,"text-small"],[1,"text-overflow-ellipsis","mr-2","d-inline-block","d-md-block"],[1,"status","mb-2"],[1,"mb-2","text-small"]],template:function(e,n){1&e&&(u.Rc(0,"div",0),u.Zc("click",(function(){return n.select.emit(n.performance.screeningEvent)})),u.Rc(1,"div",1),u.Rc(2,"div",2),u.Bd(3,j,3,3,"p",3),u.cd(4,"changeLanguage"),u.Rc(5,"p",4),u.Dd(6),u.cd(7,"changeLanguage"),u.Qc(),u.Qc(),u.Rc(8,"div"),u.Rc(9,"strong",5),u.Dd(10),u.Qc(),u.Rc(11,"span"),u.Dd(12,"-"),u.Qc(),u.Rc(13,"span"),u.Dd(14),u.Qc(),u.Qc(),u.Qc(),u.Mc(15,"hr",6),u.Rc(16,"div",7),u.Bd(17,Z,3,2,"div",8),u.Bd(18,G,3,3,"div",9),u.Bd(19,N,3,3,"div",9),u.Bd(20,J,3,5,"div",10),u.Bd(21,z,3,3,"div",10),u.Rc(22,"div",11),u.Dd(23),u.cd(24,"translate"),u.Qc(),u.Rc(25,"div",12),u.Dd(26),u.cd(27,"translate"),u.Qc(),u.Qc(),u.Qc()),2&e&&(u.id("ngClass",u.md(22,K,n.performance.isOpenDoor()||n.performance.isScreening(),!(n.performance.isOpenDoor()||n.performance.isScreening()))),u.yc(3),u.id("ngIf",u.dd(4,14,n.performance.screeningEvent.location.address)),u.yc(3),u.Ed(u.dd(7,16,n.performance.screeningEvent.location.name)),u.yc(4),u.Ed(n.moment(n.performance.screeningEvent.startDate).format("HH:mm")),u.yc(4),u.Ed(n.moment(n.performance.screeningEvent.endDate).format("HH:mm")),u.yc(3),u.id("ngIf",n.performance.isOpenDoor()||n.performance.isScreening()),u.yc(1),u.id("ngIf",n.performance.isOpenDoor("before")),u.yc(1),u.id("ngIf",n.performance.isScreening("after")),u.yc(1),u.id("ngIf",!n.performance.isInfinitetock()),u.yc(1),u.id("ngIf",n.performance.isInfinitetock()),u.yc(2),u.Gd("",u.dd(24,18,"common.ticketing")," ",n.performance.screeningEvent.checkInCount,""),u.yc(3),u.Gd("",u.dd(27,20,"common.admission")," ",n.performance.screeningEvent.attendeeCount,""))},directives:[c.j,c.l],pipes:[f.a,p.c],styles:[".status[_ngcontent-%COMP%]{line-height:30px}.status[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}@media (max-width:767.98px){.text-overflow-ellipsis[_ngcontent-%COMP%]{overflow:auto;width:auto;white-space:normal}}"]});class de{constructor(){this.select=new u.w,this.moment=r}ngOnInit(){}}de.\u0275fac=function(e){return new(e||de)},de.\u0275cmp=u.Fc({type:de,selectors:[["app-admission-performances"]],inputs:{screeningWorkEvent:"screeningWorkEvent"},outputs:{select:"select"},decls:17,vars:14,consts:[[1,"bg-white"],[1,"p-3"],[1,"mb-2"],[1,"font-weight-bold","text-large"],[4,"ngIf"],[1,"d-flex","align-items-center"],["class","text-small bg-dark-gray text-white py-1 px-3 mr-2",4,"ngIf"],["class","text-small ml-auto",4,"ngIf"],[1,"py-2","px-3","px-md-2","d-flex","flex-wrap"],["class","px-md-2 my-2",4,"ngFor","ngForOf"],[1,"text-small","bg-dark-gray","text-white","py-1","px-3","mr-2"],[1,"text-small","ml-auto"],[1,"mr-1"],[1,"px-md-2","my-2"],[1,"mb-3",3,"performance","select"]],template:function(e,n){1&e&&(u.Rc(0,"div",0),u.Rc(1,"div",1),u.Rc(2,"div",2),u.Rc(3,"p",3),u.Dd(4),u.cd(5,"changeLanguage"),u.Qc(),u.Bd(6,X,3,3,"p",4),u.cd(7,"changeLanguage"),u.Bd(8,$,3,3,"p",4),u.cd(9,"changeLanguage"),u.Qc(),u.Rc(10,"div",5),u.Bd(11,U,2,1,"div",6),u.Bd(12,ee,3,3,"div",6),u.Bd(13,ne,3,3,"div",6),u.Bd(14,te,6,7,"div",7),u.Qc(),u.Qc(),u.Rc(15,"ul",8),u.Bd(16,ce,2,1,"li",9),u.Qc(),u.Qc()),2&e&&(u.yc(4),u.Ed(u.dd(5,8,n.screeningWorkEvent.info.name)),u.yc(2),u.id("ngIf",n.screeningWorkEvent.info.superEvent.headline&&u.dd(7,10,n.screeningWorkEvent.info.superEvent.headline)),u.yc(2),u.id("ngIf",n.screeningWorkEvent.info.superEvent.description&&u.dd(9,12,n.screeningWorkEvent.info.superEvent.description)),u.yc(3),u.id("ngIf",null==n.screeningWorkEvent.info.workPerformed?null:n.screeningWorkEvent.info.workPerformed.contentRating),u.yc(1),u.id("ngIf",n.screeningWorkEvent.info.superEvent.dubLanguage),u.yc(1),u.id("ngIf",n.screeningWorkEvent.info.superEvent.subtitleLanguage),u.yc(1),u.id("ngIf",(null==n.screeningWorkEvent.info.workPerformed?null:n.screeningWorkEvent.info.workPerformed.duration)&&n.moment.duration(null==n.screeningWorkEvent.info.workPerformed?null:n.screeningWorkEvent.info.workPerformed.duration).asMinutes()>0),u.yc(2),u.id("ngForOf",n.screeningWorkEvent.data))},directives:[c.l,c.k,V],pipes:[f.a,p.c],styles:["[_nghost-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:20%}@media (max-width:991.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:25%}}@media (max-width:767.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%}}"]});var ie=function(e,n,t,c){return new(t||(t=Promise))((function(d,i){function s(e){try{a(c.next(e))}catch(n){i(n)}}function o(e){try{a(c.throw(e))}catch(n){i(n)}}function a(e){var n;e.done?d(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,o)}a((c=c.apply(e,n||[])).next())}))};const se=["datepicker"];function oe(e,n){if(1&e&&(u.Rc(0,"p",16),u.Dd(1),u.cd(2,"formatDate"),u.cd(3,"async"),u.Qc()),2&e){const e=u.bd();u.yc(1),u.Ed(u.ed(2,1,u.dd(3,4,e.admission).scheduleDate,"YYYY/MM/DD (ddd)"))}}function ae(e,n){1&e&&(u.Mc(0,"p",17),u.cd(1,"translate")),2&e&&u.id("innerHTML",u.dd(1,1,"admission.schedule.notfound"),u.wd)}function re(e,n){if(1&e){const e=u.Sc();u.Rc(0,"app-admission-performances",18),u.Zc("select",(function(n){return u.vd(e),u.bd().selectSchedule(n)})),u.Qc()}if(2&e){const e=n.$implicit;u.id("screeningWorkEvent",e)}}const le=function(){return{dateInputFormat:"YYYY/MM/DD",adaptivePosition:!0,showWeekNumbers:!1}};class me{constructor(e,n,t,c,d,i){this.store=e,this.router=n,this.localeService=t,this.admissionService=c,this.masterService=d,this.userService=i,this.moment=r}ngOnInit(){return ie(this,void 0,void 0,(function*(){this.admission=this.store.pipe(Object(a.m)(g.a)),this.user=this.store.pipe(Object(a.m)(g.i)),this.screeningWorkEvents=[]}))}ngOnDestroy(){clearTimeout(this.updateTimer)}update(){void 0!==this.updateTimer&&clearTimeout(this.updateTimer);this.updateTimer=setTimeout(()=>{this.selectDate()},6e5)}selectDate(e){return ie(this,void 0,void 0,(function*(){null!=e&&(this.scheduleDate=e);try{const e=(yield this.userService.getData()).theater;if(void 0===e)return void this.router.navigate(["/error"]);void 0!==this.scheduleDate&&null!==this.scheduleDate||(this.scheduleDate=r().toDate());const n=r(this.scheduleDate).format("YYYY-MM-DD");this.admissionService.selectScheduleDate(n);const t=yield this.masterService.getSchedule({superEvent:{locationBranchCodes:[e.branchCode]},startFrom:r(n).toDate(),startThrough:r(n).add(1,"day").toDate()});this.screeningWorkEvents=Object(q.G)({screeningEvents:t}),this.update()}catch(n){console.error(n),this.router.navigate(["/error"])}}))}selectSchedule(e){return ie(this,void 0,void 0,(function*(){try{yield this.admissionService.getScreeningEvent(e),this.router.navigate(["/admission/check"])}catch(n){console.error(n),this.router.navigate(["/error"])}}))}notSpecified(){this.admissionService.delete(),this.router.navigate(["/admission/check"])}setDatePicker(){this.user.subscribe(e=>{this.localeService.use(e.language)}).unsubscribe()}toggleDatepicker(){this.setDatePicker(),this.datepicker.toggle()}onShowPicker(e){Object(q.u)(e,[this.datepicker])}}me.\u0275fac=function(e){return new(e||me)(u.Lc(a.b),u.Lc(i.b),u.Lc(_.d),u.Lc(m.a),u.Lc(m.d),u.Lc(m.j))},me.\u0275cmp=u.Fc({type:me,selectors:[["app-admission-schedule"]],viewQuery:function(e,n){var t;(1&e&&u.zd(se,!0),2&e)&&(u.rd(t=u.ad())&&(n.datepicker=t.first))},decls:22,vars:17,consts:[[1,"contents-width","mx-auto","px-3","py-5"],[1,"text-large","mb-4","text-center","font-weight-bold"],[1,"mb-4","text-md-center",3,"innerHTML"],[1,"mb-3"],[1,"input-group"],["type","text","placeholder","Datepicker","bsDatepicker","","readonly","",1,"form-control",3,"ngModel","bsConfig","ngModelChange","bsValueChange","click","onShown"],["datepicker","bsDatepicker"],[1,"input-group-append","pointer",3,"click"],[1,"input-group-text"],[1,"fas","fa-caret-down"],["class","text-primary text-large mb-3",4,"ngIf"],["class","mb-3",3,"innerHTML",4,"ngIf"],[1,"mb-4"],["class","mb-3",3,"screeningWorkEvent","select",4,"ngFor","ngForOf"],[1,"buttons","mx-auto","text-center"],["type","button",1,"btn","btn-primary","btn-block","py-3","mb-3",3,"click"],[1,"text-primary","text-large","mb-3"],[1,"mb-3",3,"innerHTML"],[1,"mb-3",3,"screeningWorkEvent","select"]],template:function(e,n){1&e&&(u.Rc(0,"div",0),u.Rc(1,"h2",1),u.Dd(2),u.cd(3,"translate"),u.Qc(),u.Mc(4,"p",2),u.cd(5,"translate"),u.Rc(6,"div",3),u.Rc(7,"div",4),u.Rc(8,"input",5,6),u.Zc("ngModelChange",(function(e){return n.scheduleDate=e}))("bsValueChange",(function(e){return n.selectDate(e)}))("click",(function(){return n.setDatePicker()}))("onShown",(function(e){return n.onShowPicker(e)})),u.Qc(),u.Rc(10,"div",7),u.Zc("click",(function(){return n.toggleDatepicker()})),u.Rc(11,"span",8),u.Mc(12,"i",9),u.Qc(),u.Qc(),u.Qc(),u.Qc(),u.Bd(13,oe,4,6,"p",10),u.cd(14,"async"),u.Bd(15,ae,2,3,"p",11),u.Rc(16,"div",12),u.Bd(17,re,1,1,"app-admission-performances",13),u.Qc(),u.Rc(18,"div",14),u.Rc(19,"button",15),u.Zc("click",(function(){return n.notSpecified()})),u.Dd(20),u.cd(21,"translate"),u.Qc(),u.Qc(),u.Qc()),2&e&&(u.yc(2),u.Ed(u.dd(3,8,"admission.schedule.title")),u.yc(2),u.id("innerHTML",u.dd(5,10,"admission.schedule.read"),u.wd),u.yc(4),u.id("ngModel",n.scheduleDate)("bsConfig",u.kd(16,le)),u.yc(5),u.id("ngIf",u.dd(14,12,n.admission).scheduleDate),u.yc(2),u.id("ngIf",0===n.screeningWorkEvents.length),u.yc(2),u.id("ngForOf",n.screeningWorkEvents),u.yc(3),u.Ed(u.dd(21,14,"admission.schedule.next")))},directives:[_.b,H.a,_.a,H.j,H.m,c.l,c.k,de],pipes:[p.c,c.b,h.a],styles:['.condition[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.schedule-slider[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;bottom:0;height:4px;background-color:#000;opacity:.3}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%], .schedule-slider[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]{width:27px;height:27px;background-image:url(/assets/images/icon/slider_arrow.svg);background-size:27px;margin-top:-13px}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%]{right:-38px}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]{left:-38px;transform:rotate(180deg)}']});const ge=[{path:"",component:o.a,canActivate:[s.a,s.c],children:[{path:"schedule",component:me},{path:"check",component:W}]}];class ue{}ue.\u0275mod=u.Jc({type:ue}),ue.\u0275inj=u.Ic({factory:function(e){return new(e||ue)},imports:[[i.d.forChild(ge)],i.d]});class pe{}pe.\u0275mod=u.Jc({type:pe}),pe.\u0275inj=u.Ic({factory:function(e){return new(e||pe)},imports:[[c.c,ue,d.a]]})}}]);