(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{dzKq:function(e,c,n){"use strict";n.r(c),n.d(c,"AdmissionModule",(function(){return ge}));var t=n("2kYt"),i=n("DSWM"),s=n("sEIs"),o=n("unpb"),a=n("RRjC"),r=n("sN6X"),d=n("wgY5"),u=n("PIN6"),l=n("cHUu"),m=n("mOXJ"),h=n("EM62"),g=n("s2Ay"),p=n("OSFB"),f=n("NSn/"),v=function(e,c,n,t){return new(n||(n=Promise))((function(i,s){function o(e){try{r(t.next(e))}catch(c){s(c)}}function a(e){try{r(t.throw(e))}catch(c){s(c)}}function r(e){var c;e.done?i(e.value):(c=e.value,c instanceof n?c:new n((function(e){e(c)}))).then(o,a)}r((t=t.apply(e,c||[])).next())}))};function b(e,c){1&e&&(h.ic(0,"div",17),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Vc(h.uc(2,1,"admission.check.success")))}function k(e,c){1&e&&(h.ic(0,"div",17),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Vc(h.uc(2,1,"admission.check.reEntry")))}function P(e,c){if(1&e&&(h.ic(0,"p"),h.ic(1,"strong",16),h.Uc(2),h.tc(3,"translate"),h.hc(),h.Uc(4),h.tc(5,"async"),h.hc()),2&e){const e=h.sc(4);h.Pb(2),h.Vc(h.uc(3,2,"common.seat")),h.Pb(2),h.Wc(" ",h.uc(5,4,e.admission).qrcodeToken.availableReservation.reservedTicket.ticketedSeat.seatNumber," ")}}const y=function(e){return{"background-color":e}};function x(e,c){if(1&e&&(h.ic(0,"div",13),h.dc(1,"div",14),h.tc(2,"async"),h.Sc(3,b,3,3,"div",15),h.tc(4,"async"),h.Sc(5,k,3,3,"div",15),h.tc(6,"async"),h.Sc(7,P,6,6,"p",9),h.tc(8,"async"),h.ic(9,"p"),h.ic(10,"strong",16),h.Uc(11),h.tc(12,"translate"),h.hc(),h.Uc(13),h.tc(14,"changeLanguage"),h.tc(15,"async"),h.hc(),h.ic(16,"p"),h.ic(17,"strong",16),h.Uc(18),h.tc(19,"translate"),h.hc(),h.Uc(20),h.tc(21,"async"),h.hc(),h.hc()),2&e){const e=h.sc(3);h.Pb(1),h.zc("ngStyle",h.Cc(26,y,h.uc(2,8,e.admission).qrcodeToken.availableReservation.reservedTicket.ticketType.color)),h.Pb(2),h.zc("ngIf",0===h.uc(4,10,e.admission).qrcodeToken.checkTokenActions.length),h.Pb(2),h.zc("ngIf",h.uc(6,12,e.admission).qrcodeToken.checkTokenActions.length>0),h.Pb(2),h.zc("ngIf",h.uc(8,14,e.admission).qrcodeToken.availableReservation.reservedTicket.ticketedSeat),h.Pb(4),h.Vc(h.uc(12,16,"common.ticket")),h.Pb(2),h.Wc(" ",h.uc(14,18,h.uc(15,20,e.admission).qrcodeToken.availableReservation.reservedTicket.ticketType.name)," "),h.Pb(5),h.Vc(h.uc(19,22,"admission.check.entryCount")),h.Pb(2),h.Wc(" ",h.uc(21,24,e.admission).qrcodeToken.checkTokenActions.length," ")}}function w(e,c){if(1&e&&(h.ic(0,"p"),h.Uc(1),h.tc(2,"translate"),h.dc(3,"br"),h.ic(4,"strong"),h.Uc(5),h.tc(6,"async"),h.hc(),h.hc()),2&e){const e=h.sc(4);h.Pb(1),h.Wc(" ",h.uc(2,2,"admission.check.alert.event"),""),h.Pb(4),h.Vc(h.uc(6,4,e.admission).qrcodeToken.statusCode)}}function E(e,c){if(1&e&&(h.ic(0,"p"),h.Uc(1),h.tc(2,"translate"),h.dc(3,"br"),h.ic(4,"strong"),h.Uc(5),h.tc(6,"async"),h.hc(),h.hc()),2&e){const e=h.sc(4);h.Pb(1),h.Wc(" ",h.uc(2,2,"admission.check.alert.qrcode"),""),h.Pb(4),h.Vc(h.uc(6,4,e.admission).qrcodeToken.statusCode)}}function S(e,c){if(1&e&&(h.ic(0,"div",18),h.ic(1,"div",17),h.Uc(2),h.tc(3,"translate"),h.hc(),h.Sc(4,w,7,6,"p",9),h.tc(5,"async"),h.Sc(6,E,7,6,"p",9),h.tc(7,"async"),h.hc()),2&e){const e=h.sc(3);h.Pb(2),h.Vc(h.uc(3,3,"admission.check.danger")),h.Pb(2),h.zc("ngIf",200===h.uc(5,5,e.admission).qrcodeToken.statusCode),h.Pb(2),h.zc("ngIf",200!==h.uc(7,7,e.admission).qrcodeToken.statusCode)}}function I(e,c){if(1&e&&(h.ic(0,"div"),h.Sc(1,x,22,28,"div",11),h.tc(2,"async"),h.Sc(3,S,8,9,"div",12),h.tc(4,"async"),h.hc()),2&e){const e=h.sc(2);h.Pb(1),h.zc("ngIf",h.uc(2,2,e.admission).qrcodeToken.availableReservation),h.Pb(2),h.zc("ngIf",!h.uc(4,4,e.admission).qrcodeToken.availableReservation)}}function U(e,c){1&e&&(h.ic(0,"div",19),h.ic(1,"div",20),h.Uc(2),h.tc(3,"translate"),h.hc(),h.ic(4,"p"),h.Uc(5),h.tc(6,"translate"),h.hc(),h.hc()),2&e&&(h.Pb(2),h.Vc(h.uc(3,2,"admission.check.waiting")),h.Pb(3),h.Vc(h.uc(6,4,"admission.check.alert.waiting")))}function C(e,c){if(1&e&&(h.ic(0,"div",8),h.Sc(1,I,5,6,"div",9),h.tc(2,"async"),h.Sc(3,U,7,6,"div",10),h.tc(4,"async"),h.hc()),2&e){const e=h.sc();h.Pb(1),h.zc("ngIf",h.uc(2,2,e.admission).qrcodeToken),h.Pb(2),h.zc("ngIf",!h.uc(4,4,e.admission).qrcodeToken)}}function D(e,c){if(1&e&&(h.ic(0,"p",33),h.Uc(1),h.tc(2,"async"),h.hc()),2&e){const e=h.sc(2);h.Pb(1),h.Wc(" ",h.uc(2,1,e.admission).screeningEvent.workPerformed.headline," ")}}function M(e,c){if(1&e&&(h.ic(0,"p",33),h.Uc(1),h.tc(2,"changeLanguage"),h.tc(3,"async"),h.hc()),2&e){const e=h.sc(2);h.Pb(1),h.Wc(" ",h.uc(2,1,h.uc(3,3,e.admission).screeningEvent.superEvent.description)," ")}}function W(e,c){if(1&e&&(h.ic(0,"div",34),h.Uc(1),h.tc(2,"async"),h.hc()),2&e){const e=h.sc(2);h.Pb(1),h.Vc(h.uc(2,1,e.admission).screeningEvent.workPerformed.contentRating)}}function O(e,c){1&e&&(h.ic(0,"div",34),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Vc(h.uc(2,1,"common.dubbing")))}function z(e,c){1&e&&(h.ic(0,"div",34),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Vc(h.uc(2,1,"common.subtitles")))}function T(e,c){if(1&e&&(h.ic(0,"div",35),h.ic(1,"span",36),h.Uc(2),h.tc(3,"translate"),h.hc(),h.Uc(4),h.tc(5,"async"),h.tc(6,"translate"),h.hc()),2&e){const e=h.sc(2);h.Pb(2),h.Vc(h.uc(3,3,"common.duration")),h.Pb(2),h.Xc("",e.moment.duration(null==h.uc(5,5,e.admission).screeningEvent.workPerformed?null:h.uc(5,5,e.admission).screeningEvent.workPerformed.duration).asMinutes(),"",h.uc(6,7,"common.date.minute")," ")}}function V(e,c){if(1&e&&(h.ic(0,"span",16),h.Uc(1),h.tc(2,"changeLanguage"),h.tc(3,"async"),h.hc()),2&e){const e=h.sc(2);h.Pb(1),h.Wc(" ",h.uc(2,1,h.uc(3,3,e.admission).screeningEvent.location.address)," ")}}function L(e,c){if(1&e&&(h.ic(0,"div",21),h.ic(1,"div",22),h.ic(2,"div",23),h.ic(3,"p",24),h.Uc(4),h.tc(5,"changeLanguage"),h.tc(6,"async"),h.hc(),h.Sc(7,D,3,3,"p",25),h.tc(8,"async"),h.Sc(9,M,4,5,"p",25),h.tc(10,"async"),h.tc(11,"changeLanguage"),h.tc(12,"async"),h.hc(),h.ic(13,"div",26),h.Sc(14,W,3,3,"div",27),h.tc(15,"async"),h.Sc(16,O,3,3,"div",27),h.tc(17,"async"),h.Sc(18,z,3,3,"div",27),h.tc(19,"async"),h.Sc(20,T,7,9,"div",28),h.tc(21,"async"),h.tc(22,"async"),h.hc(),h.hc(),h.ic(23,"div",22),h.ic(24,"p",29),h.Uc(25),h.tc(26,"changeLanguage"),h.tc(27,"async"),h.hc(),h.ic(28,"p",30),h.Sc(29,V,4,5,"span",31),h.tc(30,"changeLanguage"),h.tc(31,"async"),h.ic(32,"span"),h.Uc(33),h.tc(34,"changeLanguage"),h.tc(35,"async"),h.hc(),h.hc(),h.ic(36,"div"),h.ic(37,"p",32),h.ic(38,"strong",16),h.Uc(39),h.tc(40,"translate"),h.hc(),h.Uc(41),h.tc(42,"formatDate"),h.tc(43,"async"),h.hc(),h.ic(44,"p"),h.ic(45,"strong",16),h.Uc(46),h.tc(47,"translate"),h.hc(),h.Uc(48),h.tc(49,"formatDate"),h.tc(50,"async"),h.tc(51,"formatDate"),h.tc(52,"async"),h.hc(),h.ic(53,"p",32),h.ic(54,"strong",16),h.Uc(55),h.tc(56,"translate"),h.hc(),h.Uc(57),h.tc(58,"async"),h.tc(59,"async"),h.hc(),h.ic(60,"p"),h.ic(61,"strong",16),h.Uc(62),h.tc(63,"translate"),h.hc(),h.Uc(64),h.tc(65,"async"),h.hc(),h.hc(),h.hc(),h.hc()),2&e){const e=h.sc();h.Pb(4),h.Vc(h.uc(5,19,h.uc(6,21,e.admission).screeningEvent.name)),h.Pb(3),h.zc("ngIf",h.uc(8,23,e.admission).screeningEvent.workPerformed.headline),h.Pb(2),h.zc("ngIf",h.uc(10,25,e.admission).screeningEvent.superEvent.description&&h.uc(11,27,h.uc(12,29,e.admission).screeningEvent.superEvent.description)),h.Pb(5),h.zc("ngIf",h.uc(15,31,e.admission).screeningEvent.workPerformed.contentRating),h.Pb(2),h.zc("ngIf",h.uc(17,33,e.admission).screeningEvent.superEvent.dubLanguage),h.Pb(2),h.zc("ngIf",h.uc(19,35,e.admission).screeningEvent.superEvent.subtitleLanguage),h.Pb(2),h.zc("ngIf",(null==h.uc(21,37,e.admission).screeningEvent.workPerformed?null:h.uc(21,37,e.admission).screeningEvent.workPerformed.duration)&&e.moment.duration(null==h.uc(22,39,e.admission).screeningEvent.workPerformed?null:h.uc(22,39,e.admission).screeningEvent.workPerformed.duration).asMinutes()>0),h.Pb(5),h.Vc(h.uc(26,41,h.uc(27,43,e.admission).screeningEvent.superEvent.location.name)),h.Pb(4),h.zc("ngIf",h.uc(30,45,h.uc(31,47,e.admission).screeningEvent.location.address)),h.Pb(4),h.Wc(" ",h.uc(34,49,h.uc(35,51,e.admission).screeningEvent.location.name)," "),h.Pb(6),h.Vc(h.uc(40,53,"common.doorTime")),h.Pb(2),h.Wc(" ",h.vc(42,55,h.uc(43,58,e.admission).screeningEvent.doorTime,"MM/DD (ddd) HH:mm")," "),h.Pb(5),h.Vc(h.uc(47,60,"common.startDate")),h.Pb(2),h.Xc(" ",h.vc(49,62,h.uc(50,65,e.admission).screeningEvent.startDate,"MM/DD (ddd) HH:mm")," - ",h.vc(51,67,h.uc(52,70,e.admission).screeningEvent.endDate,"HH:mm")," "),h.Pb(7),h.Vc(h.uc(56,72,"common.reservation")),h.Pb(2),h.Wc(" ",h.uc(58,74,e.admission).screeningEvent.maximumAttendeeCapacity-h.uc(59,76,e.admission).screeningEvent.remainingAttendeeCapacity," "),h.Pb(5),h.Vc(h.uc(63,78,"common.admission")),h.Pb(2),h.Wc(" ",h.uc(65,80,e.admission).screeningEvent.attendeeCount," ")}}class q{constructor(e,c,n,t,i){this.store=e,this.admissionService=c,this.utilService=n,this.qrcodeService=t,this.translate=i,this.moment=d,this.environment=Object(u.a)()}ngOnInit(){this.inputCode="",this.isLoading=this.store.pipe(Object(r.m)(m.c)),this.admission=this.store.pipe(Object(r.m)(m.a)),this.admissionService.initializeQrcodeToken()}ngOnDestroy(){clearInterval(this.updateLoop)}handleKeyboardEvent(e){"Enter"===e.key&&this.inputCode.length>0?(this.check(this.inputCode),this.inputCode=""):"Escape"!==e.key&&(this.inputCode+=e.key)}check(e){return v(this,void 0,void 0,(function*(){try{yield this.admissionService.checkQrcodeToken(e)}catch(c){console.error(c),this.utilService.openAlert({title:this.translate.instant("common.error"),body:this.translate.instant("admission.check.alert.check")})}}))}openQRCodeReader(){this.qrcodeService.openQRCodeReader({cb:e=>v(this,void 0,void 0,(function*(){yield this.check(e)}))})}update(){clearInterval(this.updateLoop),this.updateLoop=setInterval(()=>v(this,void 0,void 0,(function*(){const{screeningEvent:e}=yield this.admissionService.getData();void 0!==e&&(yield this.admissionService.getScreeningEvent(e))})),6e5)}}q.\u0275fac=function(e){return new(e||q)(h.cc(r.b),h.cc(l.a),h.cc(l.k),h.cc(l.g),h.cc(g.d))},q.\u0275cmp=h.Wb({type:q,selectors:[["app-admission-check"]],hostBindings:function(e,c){1&e&&h.qc("keypress",(function(e){return c.handleKeyboardEvent(e)}),!1,h.Kc)},decls:14,vars:12,consts:[[1,"contents-width","mx-auto","px-3","pt-4"],[1,"buttons","mx-auto","text-center","mb-4"],["type","button",1,"btn","btn-success","btn-block","py-3",3,"click"],["class","mb-4",4,"ngIf"],[1,"contents-width","mx-auto","px-3","pb-5"],["class","mb-4 bg-white",4,"ngIf"],[1,"buttons","mx-auto","text-center"],["type","button","routerLink","/admission/schedule",1,"btn","btn-link"],[1,"mb-4"],[4,"ngIf"],["class","p-4 bg-dark text-white text-center",4,"ngIf"],["class","position-relative p-4 bg-success text-white text-center",4,"ngIf"],["class","p-4 bg-danger text-white text-center",4,"ngIf"],[1,"position-relative","p-4","bg-success","text-white","text-center"],[1,"color","rounded","border","border-white",3,"ngStyle"],["class","flash-text text-xx-large font-weight-bold mb-2",4,"ngIf"],[1,"mr-2"],[1,"flash-text","text-xx-large","font-weight-bold","mb-2"],[1,"p-4","bg-danger","text-white","text-center"],[1,"p-4","bg-dark","text-white","text-center"],[1,"text-xx-large","font-weight-bold","mb-2"],[1,"mb-4","bg-white"],[1,"p-3"],[1,"mb-2"],[1,"font-weight-bold","text-large"],["class","text-small",4,"ngIf"],[1,"d-flex","align-items-center","mb-2"],["class","text-small text-white bg-dark py-1 px-3 mr-2",4,"ngIf"],["class","text-small ml-auto",4,"ngIf"],[1,"theater-name"],[1,"screen-name"],["class","mr-2",4,"ngIf"],[1,"mr-3"],[1,"text-small"],[1,"text-small","text-white","bg-dark","py-1","px-3","mr-2"],[1,"text-small","ml-auto"],[1,"mr-1"]],template:function(e,c){1&e&&(h.ic(0,"div",0),h.ic(1,"div",1),h.ic(2,"button",2),h.qc("click",(function(){return c.openQRCodeReader()})),h.Uc(3),h.tc(4,"translate"),h.hc(),h.hc(),h.hc(),h.Sc(5,C,5,6,"div",3),h.tc(6,"async"),h.ic(7,"div",4),h.Sc(8,L,66,82,"div",5),h.tc(9,"async"),h.ic(10,"div",6),h.ic(11,"button",7),h.Uc(12),h.tc(13,"translate"),h.hc(),h.hc(),h.hc()),2&e&&(h.Pb(3),h.Vc(h.uc(4,4,"admission.check.camera.start")),h.Pb(2),h.zc("ngIf",!h.uc(6,6,c.isLoading)),h.Pb(3),h.zc("ngIf",h.uc(9,8,c.admission).screeningEvent),h.Pb(4),h.Vc(h.uc(13,10,"admission.schedule.prev")))},directives:[t.l,s.c,t.m],pipes:[g.c,t.b,p.a,f.a],styles:[".video-area[_ngcontent-%COMP%]{height:25vh;overflow:hidden}.flash-text[_ngcontent-%COMP%]{-webkit-animation-duration:3s;animation-duration:3s;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:flash-text;animation-name:flash-text}.color[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem;width:1.5rem;height:1.5rem}@-webkit-keyframes flash-text{0%,20%,40%,60%,80%,to{color:#fff}10%,30%,50%,70%,90%{color:transparent}}@keyframes flash-text{0%,20%,40%,60%,80%,to{color:#fff}10%,30%,50%,70%,90%{color:transparent}}"]});var _=n("QN9p"),R=n("cF7s"),j=n("nIj0");n("i7xV");function H(e,c){if(1&e&&(h.ic(0,"p",13),h.Uc(1),h.tc(2,"changeLanguage"),h.hc()),2&e){const e=h.sc();h.Pb(1),h.Wc(" ",h.uc(2,1,e.performance.screeningEvent.location.address),"")}}function Y(e,c){1&e&&(h.ic(0,"div",14),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Wc(" ",h.uc(2,1,"admission.schedule.status.opening"),""))}function A(e,c){1&e&&(h.ic(0,"div",14),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Wc(" ",h.uc(2,1,"admission.schedule.status.nowShowing"),""))}function F(e,c){if(1&e&&(h.ic(0,"div"),h.Sc(1,Y,3,3,"div",9),h.Sc(2,A,3,3,"div",9),h.hc()),2&e){const e=h.sc();h.Pb(1),h.zc("ngIf",e.performance.isOpenDoor()),h.Pb(1),h.zc("ngIf",e.performance.isScreening())}}function N(e,c){1&e&&(h.ic(0,"div",14),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Wc(" ",h.uc(2,1,"admission.schedule.status.beforeOpening"),""))}function Q(e,c){1&e&&(h.ic(0,"div",14),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Wc(" ",h.uc(2,1,"admission.schedule.status.filmCompletion"),""))}function X(e,c){if(1&e&&(h.ic(0,"div",15),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e){const e=h.sc();h.Pb(1),h.Yc(" ",h.uc(2,3,"common.seat")," ",e.performance.screeningEvent.remainingAttendeeCapacity," / ",e.performance.screeningEvent.maximumAttendeeCapacity," ")}}function B(e,c){1&e&&(h.ic(0,"div",15),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Wc(" ",h.uc(2,1,"admission.schedule.infiniteStock"),""))}const K=function(e,c){return{"bg-white":e,"bg-dark-gray text-light-gray":c}};class J{constructor(){this.select=new h.s,this.moment=d}ngOnInit(){}}function Z(e,c){if(1&e&&(h.ic(0,"p"),h.Uc(1),h.tc(2,"changeLanguage"),h.hc()),2&e){const e=h.sc();h.Pb(1),h.Wc(" ",h.uc(2,1,e.screeningWorkEvent.info.superEvent.headline),"")}}function $(e,c){if(1&e&&(h.ic(0,"p"),h.Uc(1),h.tc(2,"changeLanguage"),h.hc()),2&e){const e=h.sc();h.Pb(1),h.Vc(h.uc(2,1,e.screeningWorkEvent.info.superEvent.description))}}function G(e,c){if(1&e&&(h.ic(0,"div",10),h.Uc(1),h.hc()),2&e){const e=h.sc();h.Pb(1),h.Vc(e.screeningWorkEvent.info.workPerformed.contentRating)}}function ee(e,c){1&e&&(h.ic(0,"div",10),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Vc(h.uc(2,1,"common.dubbing")))}function ce(e,c){1&e&&(h.ic(0,"div",10),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Vc(h.uc(2,1,"common.subtitles")))}function ne(e,c){if(1&e&&(h.ic(0,"div",11),h.ic(1,"span",12),h.Uc(2),h.tc(3,"translate"),h.hc(),h.Uc(4),h.tc(5,"translate"),h.hc()),2&e){const e=h.sc();h.Pb(2),h.Vc(h.uc(3,3,"common.duration")),h.Pb(2),h.Xc("",e.moment.duration(e.screeningWorkEvent.info.workPerformed.duration).asMinutes(),"",h.uc(5,5,"common.date.minute")," ")}}function te(e,c){if(1&e){const e=h.jc();h.ic(0,"li",13),h.ic(1,"app-admission-performance",14),h.qc("select",(function(c){return h.Mc(e),h.sc().select.emit(c)})),h.hc(),h.hc()}if(2&e){const e=c.$implicit;h.Pb(1),h.zc("performance",e)}}J.\u0275fac=function(e){return new(e||J)},J.\u0275cmp=h.Wb({type:J,selectors:[["app-admission-performance"]],inputs:{performance:"performance"},outputs:{select:"select"},decls:28,vars:25,consts:[[1,"row","mx-0","border","boder-gray","rounded","p-3","py-md-3","text-md-center","d-md-block","align-items-center","pointer","h-100",3,"ngClass","click"],[1,"col-md-12","col-8","px-0"],[1,"mb-1","text-small","screen-name"],["class","text-overflow-ellipsis mr-2 d-inline-block d-md-block",4,"ngIf"],[1,"text-overflow-ellipsis","d-inline-block","d-md-block"],[1,"text-large"],[1,"border-0","bg-light-gray","my-2"],[1,"col-md-12","col-4","px-0","text-center"],[4,"ngIf"],["class","status mb-2",4,"ngIf"],["class","mb-2 text-small",4,"ngIf"],[1,"text-small","mb-1"],[1,"text-small"],[1,"text-overflow-ellipsis","mr-2","d-inline-block","d-md-block"],[1,"status","mb-2"],[1,"mb-2","text-small"]],template:function(e,c){1&e&&(h.ic(0,"div",0),h.qc("click",(function(){return c.select.emit(c.performance.screeningEvent)})),h.ic(1,"div",1),h.ic(2,"div",2),h.Sc(3,H,3,3,"p",3),h.tc(4,"changeLanguage"),h.ic(5,"p",4),h.Uc(6),h.tc(7,"changeLanguage"),h.hc(),h.hc(),h.ic(8,"div"),h.ic(9,"strong",5),h.Uc(10),h.hc(),h.ic(11,"span"),h.Uc(12,"-"),h.hc(),h.ic(13,"span"),h.Uc(14),h.hc(),h.hc(),h.hc(),h.dc(15,"hr",6),h.ic(16,"div",7),h.Sc(17,F,3,2,"div",8),h.Sc(18,N,3,3,"div",9),h.Sc(19,Q,3,3,"div",9),h.Sc(20,X,3,5,"div",10),h.Sc(21,B,3,3,"div",10),h.ic(22,"div",11),h.Uc(23),h.tc(24,"translate"),h.hc(),h.ic(25,"div",12),h.Uc(26),h.tc(27,"translate"),h.hc(),h.hc(),h.hc()),2&e&&(h.zc("ngClass",h.Dc(22,K,c.performance.isOpenDoor()||c.performance.isScreening(),!(c.performance.isOpenDoor()||c.performance.isScreening()))),h.Pb(3),h.zc("ngIf",h.uc(4,14,c.performance.screeningEvent.location.address)),h.Pb(3),h.Vc(h.uc(7,16,c.performance.screeningEvent.location.name)),h.Pb(4),h.Vc(c.moment(c.performance.screeningEvent.startDate).format("HH:mm")),h.Pb(4),h.Vc(c.moment(c.performance.screeningEvent.endDate).format("HH:mm")),h.Pb(3),h.zc("ngIf",c.performance.isOpenDoor()||c.performance.isScreening()),h.Pb(1),h.zc("ngIf",c.performance.isOpenDoor("before")),h.Pb(1),h.zc("ngIf",c.performance.isScreening("after")),h.Pb(1),h.zc("ngIf",!c.performance.isInfinitetock()),h.Pb(1),h.zc("ngIf",c.performance.isInfinitetock()),h.Pb(2),h.Xc("",h.uc(24,18,"common.ticketing")," ",c.performance.screeningEvent.checkInCount,""),h.Pb(3),h.Xc("",h.uc(27,20,"common.admission")," ",c.performance.screeningEvent.attendeeCount,""))},directives:[t.j,t.l],pipes:[p.a,g.c],styles:[".status[_ngcontent-%COMP%]{line-height:30px}.status[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}@media (max-width:767.98px){.text-overflow-ellipsis[_ngcontent-%COMP%]{overflow:auto;width:auto;white-space:normal}}"]});class ie{constructor(){this.select=new h.s,this.moment=d}ngOnInit(){}}ie.\u0275fac=function(e){return new(e||ie)},ie.\u0275cmp=h.Wb({type:ie,selectors:[["app-admission-performances"]],inputs:{screeningWorkEvent:"screeningWorkEvent"},outputs:{select:"select"},decls:17,vars:14,consts:[[1,"bg-white"],[1,"p-3"],[1,"mb-2"],[1,"font-weight-bold","text-large"],[4,"ngIf"],[1,"d-flex","align-items-center"],["class","text-small bg-dark-gray text-white py-1 px-3 mr-2",4,"ngIf"],["class","text-small ml-auto",4,"ngIf"],[1,"py-2","px-3","px-md-2","d-flex","flex-wrap"],["class","px-md-2 my-2",4,"ngFor","ngForOf"],[1,"text-small","bg-dark-gray","text-white","py-1","px-3","mr-2"],[1,"text-small","ml-auto"],[1,"mr-1"],[1,"px-md-2","my-2"],[1,"mb-3",3,"performance","select"]],template:function(e,c){1&e&&(h.ic(0,"div",0),h.ic(1,"div",1),h.ic(2,"div",2),h.ic(3,"p",3),h.Uc(4),h.tc(5,"changeLanguage"),h.hc(),h.Sc(6,Z,3,3,"p",4),h.tc(7,"changeLanguage"),h.Sc(8,$,3,3,"p",4),h.tc(9,"changeLanguage"),h.hc(),h.ic(10,"div",5),h.Sc(11,G,2,1,"div",6),h.Sc(12,ee,3,3,"div",6),h.Sc(13,ce,3,3,"div",6),h.Sc(14,ne,6,7,"div",7),h.hc(),h.hc(),h.ic(15,"ul",8),h.Sc(16,te,2,1,"li",9),h.hc(),h.hc()),2&e&&(h.Pb(4),h.Vc(h.uc(5,8,c.screeningWorkEvent.info.name)),h.Pb(2),h.zc("ngIf",c.screeningWorkEvent.info.superEvent.headline&&h.uc(7,10,c.screeningWorkEvent.info.superEvent.headline)),h.Pb(2),h.zc("ngIf",c.screeningWorkEvent.info.superEvent.description&&h.uc(9,12,c.screeningWorkEvent.info.superEvent.description)),h.Pb(3),h.zc("ngIf",null==c.screeningWorkEvent.info.workPerformed?null:c.screeningWorkEvent.info.workPerformed.contentRating),h.Pb(1),h.zc("ngIf",c.screeningWorkEvent.info.superEvent.dubLanguage),h.Pb(1),h.zc("ngIf",c.screeningWorkEvent.info.superEvent.subtitleLanguage),h.Pb(1),h.zc("ngIf",(null==c.screeningWorkEvent.info.workPerformed?null:c.screeningWorkEvent.info.workPerformed.duration)&&c.moment.duration(null==c.screeningWorkEvent.info.workPerformed?null:c.screeningWorkEvent.info.workPerformed.duration).asMinutes()>0),h.Pb(2),h.zc("ngForOf",c.screeningWorkEvent.data))},directives:[t.l,t.k,J],pipes:[p.a,g.c],styles:["[_nghost-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:20%}@media (max-width:991.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:25%}}@media (max-width:767.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%}}"]});var se=function(e,c,n,t){return new(n||(n=Promise))((function(i,s){function o(e){try{r(t.next(e))}catch(c){s(c)}}function a(e){try{r(t.throw(e))}catch(c){s(c)}}function r(e){var c;e.done?i(e.value):(c=e.value,c instanceof n?c:new n((function(e){e(c)}))).then(o,a)}r((t=t.apply(e,c||[])).next())}))};const oe=["datepicker"];function ae(e,c){if(1&e&&(h.ic(0,"p",16),h.Uc(1),h.tc(2,"formatDate"),h.tc(3,"async"),h.hc()),2&e){const e=h.sc();h.Pb(1),h.Vc(h.vc(2,1,h.uc(3,4,e.admission).scheduleDate,"YYYY/MM/DD (ddd)"))}}function re(e,c){1&e&&(h.dc(0,"p",17),h.tc(1,"translate")),2&e&&h.zc("innerHTML",h.uc(1,1,"admission.schedule.notfound"),h.Nc)}function de(e,c){if(1&e){const e=h.jc();h.ic(0,"app-admission-performances",18),h.qc("select",(function(c){return h.Mc(e),h.sc().selectSchedule(c)})),h.hc()}if(2&e){const e=c.$implicit;h.zc("screeningWorkEvent",e)}}const ue=function(){return{dateInputFormat:"YYYY/MM/DD",adaptivePosition:!0,showWeekNumbers:!1}};class le{constructor(e,c,n,t,i,s){this.store=e,this.router=c,this.localeService=n,this.admissionService=t,this.masterService=i,this.userService=s,this.moment=d}ngOnInit(){return se(this,void 0,void 0,(function*(){this.admission=this.store.pipe(Object(r.m)(m.a)),this.user=this.store.pipe(Object(r.m)(m.i)),this.screeningWorkEvents=[]}))}ngOnDestroy(){clearTimeout(this.updateTimer)}update(){void 0!==this.updateTimer&&clearTimeout(this.updateTimer);this.updateTimer=setTimeout(()=>{this.selectDate()},6e5)}selectDate(e){return se(this,void 0,void 0,(function*(){null!=e&&(this.scheduleDate=e);try{const e=(yield this.userService.getData()).theater;if(void 0===e)return void this.router.navigate(["/error"]);void 0!==this.scheduleDate&&null!==this.scheduleDate||(this.scheduleDate=d().toDate());const c=d(this.scheduleDate).format("YYYY-MM-DD");this.admissionService.selectScheduleDate(c);const n=yield this.masterService.getSchedule({superEvent:{locationBranchCodes:[e.branchCode]},startFrom:d(c).toDate(),startThrough:d(c).add(1,"day").toDate()});this.screeningWorkEvents=Object(R.F)({screeningEvents:n}),this.update()}catch(c){console.error(c),this.router.navigate(["/error"])}}))}selectSchedule(e){return se(this,void 0,void 0,(function*(){try{yield this.admissionService.getScreeningEvent(e),this.router.navigate(["/admission/check"])}catch(c){console.error(c),this.router.navigate(["/error"])}}))}notSpecified(){this.admissionService.delete(),this.router.navigate(["/admission/check"])}setDatePicker(){this.user.subscribe(e=>{this.localeService.use(e.language)}).unsubscribe()}toggleDatepicker(){this.setDatePicker(),this.datepicker.toggle()}onShowPicker(e){Object(R.t)(e,[this.datepicker])}}le.\u0275fac=function(e){return new(e||le)(h.cc(r.b),h.cc(s.b),h.cc(_.d),h.cc(l.a),h.cc(l.d),h.cc(l.j))},le.\u0275cmp=h.Wb({type:le,selectors:[["app-admission-schedule"]],viewQuery:function(e,c){var n;(1&e&&h.Qc(oe,!0),2&e)&&(h.Ic(n=h.rc())&&(c.datepicker=n.first))},decls:22,vars:17,consts:[[1,"contents-width","mx-auto","px-3","py-5"],[1,"text-large","mb-4","text-center","font-weight-bold"],[1,"mb-4","text-md-center",3,"innerHTML"],[1,"mb-3"],[1,"input-group"],["type","text","placeholder","Datepicker","bsDatepicker","","readonly","",1,"form-control",3,"ngModel","bsConfig","ngModelChange","bsValueChange","click","onShown"],["datepicker","bsDatepicker"],[1,"input-group-append","pointer",3,"click"],[1,"input-group-text"],[1,"fas","fa-caret-down"],["class","text-primary text-large mb-3",4,"ngIf"],["class","mb-3",3,"innerHTML",4,"ngIf"],[1,"mb-4"],["class","mb-3",3,"screeningWorkEvent","select",4,"ngFor","ngForOf"],[1,"buttons","mx-auto","text-center"],["type","button",1,"btn","btn-primary","btn-block","py-3","mb-3",3,"click"],[1,"text-primary","text-large","mb-3"],[1,"mb-3",3,"innerHTML"],[1,"mb-3",3,"screeningWorkEvent","select"]],template:function(e,c){1&e&&(h.ic(0,"div",0),h.ic(1,"h2",1),h.Uc(2),h.tc(3,"translate"),h.hc(),h.dc(4,"p",2),h.tc(5,"translate"),h.ic(6,"div",3),h.ic(7,"div",4),h.ic(8,"input",5,6),h.qc("ngModelChange",(function(e){return c.scheduleDate=e}))("bsValueChange",(function(e){return c.selectDate(e)}))("click",(function(){return c.setDatePicker()}))("onShown",(function(e){return c.onShowPicker(e)})),h.hc(),h.ic(10,"div",7),h.qc("click",(function(){return c.toggleDatepicker()})),h.ic(11,"span",8),h.dc(12,"i",9),h.hc(),h.hc(),h.hc(),h.hc(),h.Sc(13,ae,4,6,"p",10),h.tc(14,"async"),h.Sc(15,re,2,3,"p",11),h.ic(16,"div",12),h.Sc(17,de,1,1,"app-admission-performances",13),h.hc(),h.ic(18,"div",14),h.ic(19,"button",15),h.qc("click",(function(){return c.notSpecified()})),h.Uc(20),h.tc(21,"translate"),h.hc(),h.hc(),h.hc()),2&e&&(h.Pb(2),h.Vc(h.uc(3,8,"admission.schedule.title")),h.Pb(2),h.zc("innerHTML",h.uc(5,10,"admission.schedule.read"),h.Nc),h.Pb(4),h.zc("ngModel",c.scheduleDate)("bsConfig",h.Bc(16,ue)),h.Pb(5),h.zc("ngIf",h.uc(14,12,c.admission).scheduleDate),h.Pb(2),h.zc("ngIf",0===c.screeningWorkEvents.length),h.Pb(2),h.zc("ngForOf",c.screeningWorkEvents),h.Pb(3),h.Vc(h.uc(21,14,"admission.schedule.next")))},directives:[_.b,j.a,_.a,j.j,j.m,t.l,t.k,ie],pipes:[g.c,t.b,f.a],styles:['.condition[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.schedule-slider[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;bottom:0;height:4px;background-color:#000;opacity:.3}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%], .schedule-slider[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]{width:27px;height:27px;background-image:url(/assets/images/icon/slider_arrow.svg);background-size:27px;margin-top:-13px}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%]{right:-38px}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]{left:-38px;transform:rotate(180deg)}']});const me=[{path:"",component:a.a,canActivate:[o.a,o.c],children:[{path:"schedule",component:le},{path:"check",component:q}]}];class he{}he.\u0275mod=h.ac({type:he}),he.\u0275inj=h.Zb({factory:function(e){return new(e||he)},imports:[[s.d.forChild(me)],s.d]});class ge{}ge.\u0275mod=h.ac({type:ge}),ge.\u0275inj=h.Zb({factory:function(e){return new(e||ge)},imports:[[t.c,he,i.a]]})}}]);