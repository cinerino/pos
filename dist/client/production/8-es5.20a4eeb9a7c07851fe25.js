!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var c=n[t];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function t(e,t,c){return t&&n(e.prototype,t),c&&n(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{dzKq:function(n,c,i){"use strict";i.r(c),i.d(c,"AdmissionModule",(function(){return ke}));var a=i("2kYt"),r=i("DSWM"),s=i("sEIs"),o=i("unpb"),d=i("RRjC"),l=i("sN6X"),u=i("wgY5"),f=i("PIN6"),m=i("cHUu"),g=i("mOXJ"),p=i("EM62"),v=i("s2Ay"),h=i("OSFB"),w=i("NSn/"),b=function(e,n,t,c){return new(t||(t=Promise))((function(i,a){function r(e){try{o(c.next(e))}catch(n){a(n)}}function s(e){try{o(c.throw(e))}catch(n){a(n)}}function o(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,s)}o((c=c.apply(e,n||[])).next())}))};function y(e,n){1&e&&(p.Pc(0,"div",17),p.Ad(1),p.Zc(2,"translate"),p.Oc()),2&e&&(p.wc(1),p.Bd(p.ad(2,1,"admission.check.success")))}function k(e,n){1&e&&(p.Pc(0,"div",17),p.Ad(1),p.Zc(2,"translate"),p.Oc()),2&e&&(p.wc(1),p.Bd(p.ad(2,1,"admission.check.reEntry")))}function P(e,n){if(1&e&&(p.Pc(0,"p"),p.Pc(1,"strong",16),p.Ad(2),p.Zc(3,"translate"),p.Oc(),p.Ad(4),p.Zc(5,"async"),p.Oc()),2&e){var t,c=p.Yc(4);p.wc(2),p.Bd(p.ad(3,2,"common.seat")),p.wc(2),p.Cd(" ",null==(t=p.ad(5,4,c.admission))?null:t.qrcodeToken.availableReservation.reservedTicket.ticketedSeat.seatNumber," ")}}var O=function(e){return{"background-color":e}};function x(e,n){if(1&e&&(p.Pc(0,"div",13),p.Kc(1,"div",14),p.Zc(2,"async"),p.yd(3,y,3,3,"div",15),p.Zc(4,"async"),p.yd(5,k,3,3,"div",15),p.Zc(6,"async"),p.yd(7,P,6,6,"p",9),p.Zc(8,"async"),p.Pc(9,"p"),p.Pc(10,"strong",16),p.Ad(11),p.Zc(12,"translate"),p.Oc(),p.Ad(13),p.Zc(14,"changeLanguage"),p.Zc(15,"async"),p.Oc(),p.Pc(16,"p"),p.Pc(17,"strong",16),p.Ad(18),p.Zc(19,"translate"),p.Oc(),p.Ad(20),p.Zc(21,"async"),p.Oc(),p.Oc()),2&e){var t,c,i,a,r,s,o=p.Yc(3),d=p.id(26,O,null==(t=p.ad(2,8,o.admission))?null:t.qrcodeToken.availableReservation.reservedTicket.ticketType.color),l=0===(null==(c=p.ad(4,10,o.admission))?null:c.qrcodeToken.checkTokenActions.length),u=(null==(i=p.ad(6,12,o.admission))?null:i.qrcodeToken.checkTokenActions.length)>0,f=null==(a=p.ad(8,14,o.admission))?null:a.qrcodeToken.availableReservation.reservedTicket.ticketedSeat;p.wc(1),p.fd("ngStyle",d),p.wc(2),p.fd("ngIf",l),p.wc(2),p.fd("ngIf",u),p.wc(2),p.fd("ngIf",f),p.wc(4),p.Bd(p.ad(12,16,"common.ticket")),p.wc(2),p.Cd(" ",p.ad(14,18,null==(r=p.ad(15,20,o.admission))?null:r.qrcodeToken.availableReservation.reservedTicket.ticketType.name)," "),p.wc(5),p.Bd(p.ad(19,22,"admission.check.entryCount")),p.wc(2),p.Cd(" ",null==(s=p.ad(21,24,o.admission))?null:s.qrcodeToken.checkTokenActions.length," ")}}function E(e,n){if(1&e&&(p.Pc(0,"p"),p.Ad(1),p.Zc(2,"translate"),p.Kc(3,"br"),p.Pc(4,"strong"),p.Ad(5),p.Zc(6,"async"),p.Oc(),p.Oc()),2&e){var t,c=p.Yc(4);p.wc(1),p.Cd(" ",p.ad(2,2,"admission.check.alert.event"),""),p.wc(4),p.Bd(null==(t=p.ad(6,4,c.admission))?null:t.qrcodeToken.statusCode)}}function Z(e,n){if(1&e&&(p.Pc(0,"p"),p.Ad(1),p.Zc(2,"translate"),p.Kc(3,"br"),p.Pc(4,"strong"),p.Ad(5),p.Zc(6,"async"),p.Oc(),p.Oc()),2&e){var t,c=p.Yc(4);p.wc(1),p.Cd(" ",p.ad(2,2,"admission.check.alert.qrcode"),""),p.wc(4),p.Bd(null==(t=p.ad(6,4,c.admission))?null:t.qrcodeToken.statusCode)}}function C(e,n){if(1&e&&(p.Pc(0,"div",18),p.Pc(1,"div",17),p.Ad(2),p.Zc(3,"translate"),p.Oc(),p.yd(4,E,7,6,"p",9),p.Zc(5,"async"),p.yd(6,Z,7,6,"p",9),p.Zc(7,"async"),p.Oc()),2&e){var t,c,i=p.Yc(3),a=200===(null==(t=p.ad(5,5,i.admission))?null:t.qrcodeToken.statusCode),r=200!==(null==(c=p.ad(7,7,i.admission))?null:c.qrcodeToken.statusCode);p.wc(2),p.Bd(p.ad(3,3,"admission.check.danger")),p.wc(2),p.fd("ngIf",a),p.wc(2),p.fd("ngIf",r)}}function A(e,n){if(1&e&&(p.Pc(0,"div"),p.yd(1,x,22,28,"div",11),p.Zc(2,"async"),p.yd(3,C,8,9,"div",12),p.Zc(4,"async"),p.Oc()),2&e){var t,c,i=p.Yc(2),a=null==(t=p.ad(2,2,i.admission))?null:t.qrcodeToken.availableReservation,r=!(null!=(c=p.ad(4,4,i.admission))&&c.qrcodeToken.availableReservation);p.wc(1),p.fd("ngIf",a),p.wc(2),p.fd("ngIf",r)}}function I(e,n){1&e&&(p.Pc(0,"div",19),p.Pc(1,"div",20),p.Ad(2),p.Zc(3,"translate"),p.Oc(),p.Pc(4,"p"),p.Ad(5),p.Zc(6,"translate"),p.Oc(),p.Oc()),2&e&&(p.wc(2),p.Bd(p.ad(3,2,"admission.check.waiting")),p.wc(3),p.Bd(p.ad(6,4,"admission.check.alert.waiting")))}function D(e,n){if(1&e&&(p.Pc(0,"div",8),p.yd(1,A,5,6,"div",9),p.Zc(2,"async"),p.yd(3,I,7,6,"div",10),p.Zc(4,"async"),p.Oc()),2&e){var t,c,i=p.Yc(),a=null==(t=p.ad(2,2,i.admission))?null:t.qrcodeToken,r=!(null!=(c=p.ad(4,4,i.admission))&&c.qrcodeToken);p.wc(1),p.fd("ngIf",a),p.wc(2),p.fd("ngIf",r)}}function S(e,n){if(1&e&&(p.Pc(0,"p",33),p.Ad(1),p.Zc(2,"async"),p.Oc()),2&e){var t,c=p.Yc(2);p.wc(1),p.Cd(" ",null==(t=p.ad(2,1,c.admission))||null==t.screeningEvent.workPerformed?null:t.screeningEvent.workPerformed.headline," ")}}function M(e,n){if(1&e&&(p.Pc(0,"p",33),p.Ad(1),p.Zc(2,"changeLanguage"),p.Zc(3,"async"),p.Oc()),2&e){var t,c=p.Yc(2);p.wc(1),p.Cd(" ",p.ad(2,1,null==(t=p.ad(3,3,c.admission))?null:t.screeningEvent.superEvent.description)," ")}}function T(e,n){if(1&e&&(p.Pc(0,"div",34),p.Ad(1),p.Zc(2,"async"),p.Oc()),2&e){var t,c=p.Yc(2);p.wc(1),p.Bd(null==(t=p.ad(2,1,c.admission))||null==t.screeningEvent.workPerformed?null:t.screeningEvent.workPerformed.contentRating)}}function Y(e,n){1&e&&(p.Pc(0,"div",34),p.Ad(1),p.Zc(2,"translate"),p.Oc()),2&e&&(p.wc(1),p.Bd(p.ad(2,1,"common.dubbing")))}function B(e,n){1&e&&(p.Pc(0,"div",34),p.Ad(1),p.Zc(2,"translate"),p.Oc()),2&e&&(p.wc(1),p.Bd(p.ad(2,1,"common.subtitles")))}function R(e,n){if(1&e&&(p.Pc(0,"div",35),p.Pc(1,"span",36),p.Ad(2),p.Zc(3,"translate"),p.Oc(),p.Ad(4),p.Zc(5,"async"),p.Zc(6,"translate"),p.Oc()),2&e){var t,c=p.Yc(2);p.wc(2),p.Bd(p.ad(3,3,"common.duration")),p.wc(2),p.Dd("",c.moment.duration(null==(t=p.ad(5,5,c.admission))||null==t.screeningEvent.workPerformed?null:t.screeningEvent.workPerformed.duration).asMinutes(),"",p.ad(6,7,"common.date.minute")," ")}}function L(e,n){if(1&e&&(p.Pc(0,"span",16),p.Ad(1),p.Zc(2,"changeLanguage"),p.Zc(3,"async"),p.Oc()),2&e){var t,c=p.Yc(2);p.wc(1),p.Cd(" ",p.ad(2,1,null==(t=p.ad(3,3,c.admission))?null:t.screeningEvent.location.address)," ")}}function _(e,n){if(1&e&&(p.Pc(0,"div",21),p.Pc(1,"div",22),p.Pc(2,"div",23),p.Pc(3,"p",24),p.Ad(4),p.Zc(5,"changeLanguage"),p.Zc(6,"async"),p.Oc(),p.yd(7,S,3,3,"p",25),p.Zc(8,"async"),p.yd(9,M,4,5,"p",25),p.Zc(10,"async"),p.Zc(11,"changeLanguage"),p.Zc(12,"async"),p.Oc(),p.Pc(13,"div",26),p.yd(14,T,3,3,"div",27),p.Zc(15,"async"),p.yd(16,Y,3,3,"div",27),p.Zc(17,"async"),p.yd(18,B,3,3,"div",27),p.Zc(19,"async"),p.yd(20,R,7,9,"div",28),p.Zc(21,"async"),p.Zc(22,"async"),p.Oc(),p.Oc(),p.Pc(23,"div",22),p.Pc(24,"p",29),p.Ad(25),p.Zc(26,"changeLanguage"),p.Zc(27,"async"),p.Oc(),p.Pc(28,"p",30),p.yd(29,L,4,5,"span",31),p.Zc(30,"changeLanguage"),p.Zc(31,"async"),p.Pc(32,"span"),p.Ad(33),p.Zc(34,"changeLanguage"),p.Zc(35,"async"),p.Oc(),p.Oc(),p.Pc(36,"div"),p.Pc(37,"p",32),p.Pc(38,"strong",16),p.Ad(39),p.Zc(40,"translate"),p.Oc(),p.Ad(41),p.Zc(42,"formatDate"),p.Zc(43,"async"),p.Oc(),p.Pc(44,"p"),p.Pc(45,"strong",16),p.Ad(46),p.Zc(47,"translate"),p.Oc(),p.Ad(48),p.Zc(49,"formatDate"),p.Zc(50,"async"),p.Zc(51,"formatDate"),p.Zc(52,"async"),p.Oc(),p.Pc(53,"p",32),p.Pc(54,"strong",16),p.Ad(55),p.Zc(56,"translate"),p.Oc(),p.Ad(57),p.Zc(58,"async"),p.Zc(59,"async"),p.Oc(),p.Pc(60,"p"),p.Pc(61,"strong",16),p.Ad(62),p.Zc(63,"translate"),p.Oc(),p.Ad(64),p.Zc(65,"async"),p.Oc(),p.Oc(),p.Oc(),p.Oc()),2&e){var t,c,i,a,r,s,o,d,l,u,f=p.Yc(),m=null==(c=p.ad(8,23,f.admission))||null==c.screeningEvent.workPerformed?null:c.screeningEvent.workPerformed.headline,g=null,v=(null==(g=p.ad(10,25,f.admission))?null:g.screeningEvent.superEvent.description)&&p.ad(11,27,null==(g=p.ad(12,29,f.admission))?null:g.screeningEvent.superEvent.description),h=null==(i=p.ad(15,31,f.admission))||null==i.screeningEvent.workPerformed?null:i.screeningEvent.workPerformed.contentRating,w=null==(a=p.ad(17,33,f.admission))?null:a.screeningEvent.superEvent.dubLanguage,b=null==(r=p.ad(19,35,f.admission))?null:r.screeningEvent.superEvent.subtitleLanguage,y=null,k=(null==(y=p.ad(21,37,f.admission))||null==y.screeningEvent.workPerformed?null:y.screeningEvent.workPerformed.duration)&&f.moment.duration(null==(y=p.ad(22,39,f.admission))||null==y.screeningEvent.workPerformed?null:y.screeningEvent.workPerformed.duration).asMinutes()>0,P=p.ad(30,45,null==(o=p.ad(31,47,f.admission))?null:o.screeningEvent.location.address),O=null,x=null;p.wc(4),p.Bd(p.ad(5,19,null==(t=p.ad(6,21,f.admission))?null:t.screeningEvent.name)),p.wc(3),p.fd("ngIf",m),p.wc(2),p.fd("ngIf",v),p.wc(5),p.fd("ngIf",h),p.wc(2),p.fd("ngIf",w),p.wc(2),p.fd("ngIf",b),p.wc(2),p.fd("ngIf",k),p.wc(5),p.Bd(p.ad(26,41,null==(s=p.ad(27,43,f.admission))?null:s.screeningEvent.superEvent.location.name)),p.wc(4),p.fd("ngIf",P),p.wc(4),p.Cd(" ",p.ad(34,49,null==(d=p.ad(35,51,f.admission))?null:d.screeningEvent.location.name)," "),p.wc(6),p.Bd(p.ad(40,53,"common.doorTime")),p.wc(2),p.Cd(" ",p.bd(42,55,null==(l=p.ad(43,58,f.admission))?null:l.screeningEvent.doorTime,"MM/DD (ddd) HH:mm")," "),p.wc(5),p.Bd(p.ad(47,60,"common.startDate")),p.wc(2),p.Dd(" ",p.bd(49,62,null==(O=p.ad(50,65,f.admission))?null:O.screeningEvent.startDate,"MM/DD (ddd) HH:mm")," - ",p.bd(51,67,null==(O=p.ad(52,70,f.admission))?null:O.screeningEvent.endDate,"HH:mm")," "),p.wc(7),p.Bd(p.ad(56,72,"common.reservation")),p.wc(2),p.Cd(" ",(null==(x=p.ad(58,74,f.admission))?null:x.screeningEvent.maximumAttendeeCapacity)-(null==(x=p.ad(59,76,f.admission))?null:x.screeningEvent.remainingAttendeeCapacity)," "),p.wc(5),p.Bd(p.ad(63,78,"common.admission")),p.wc(2),p.Cd(" ",null==(u=p.ad(65,80,f.admission))?null:u.screeningEvent.attendeeCount," ")}}var G=function(){function n(t,c,i,a,r){e(this,n),this.store=t,this.actionService=c,this.utilService=i,this.qrcodeService=a,this.translate=r,this.moment=u,this.environment=Object(f.a)()}return t(n,[{key:"ngOnInit",value:function(){this.inputCode="",this.isLoading=this.store.pipe(Object(l.m)(g.c)),this.admission=this.store.pipe(Object(l.m)(g.a)),this.actionService.admission.initializeQrcodeToken()}},{key:"ngOnDestroy",value:function(){clearInterval(this.updateLoop)}},{key:"handleKeyboardEvent",value:function(e){"Enter"===e.key&&this.inputCode.length>0?(this.check(this.inputCode),this.inputCode=""):"Escape"!==e.key&&(this.inputCode+=e.key)}},{key:"check",value:function(e){return b(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.actionService.admission.checkQrcodeToken(e);case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),console.error(n.t0),this.utilService.openAlert({title:this.translate.instant("common.error"),body:this.translate.instant("admission.check.alert.check")});case 8:case"end":return n.stop()}}),n,this,[[0,5]])})))}},{key:"openQRCodeReader",value:function(){var e=this;this.qrcodeService.openQRCodeReader({cb:function(n){return b(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.check(n);case 2:case"end":return e.stop()}}),e,this)})))}})}},{key:"update",value:function(){var e=this;clearInterval(this.updateLoop),this.updateLoop=setInterval((function(){return b(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actionService.admission.getData();case 2:if(n=e.sent,t=n.screeningEvent,e.t0=void 0!==t,!e.t0){e.next=8;break}return e.next=8,this.actionService.admission.getScreeningEvent(t);case 8:case"end":return e.stop()}}),e,this)})))}),6e5)}}]),n}();G.\u0275fac=function(e){return new(e||G)(p.Jc(l.b),p.Jc(m.a),p.Jc(m.f),p.Jc(m.e),p.Jc(v.d))},G.\u0275cmp=p.Dc({type:G,selectors:[["app-admission-check"]],hostBindings:function(e,n){1&e&&p.Wc("keypress",(function(e){return n.handleKeyboardEvent(e)}),!1,p.qd)},decls:14,vars:12,consts:[[1,"contents-width","mx-auto","px-3","pt-4"],[1,"buttons","mx-auto","text-center","mb-4"],["type","button",1,"btn","btn-success","btn-block","py-3",3,"click"],["class","mb-4",4,"ngIf"],[1,"contents-width","mx-auto","px-3","pb-5"],["class","mb-4 bg-white",4,"ngIf"],[1,"buttons","mx-auto","text-center"],["type","button","routerLink","/admission/schedule",1,"btn","btn-outline-primary","btn-block","py-3"],[1,"mb-4"],[4,"ngIf"],["class","p-4 bg-dark text-white text-center",4,"ngIf"],["class","position-relative p-4 bg-success text-white text-center",4,"ngIf"],["class","p-4 bg-danger text-white text-center",4,"ngIf"],[1,"position-relative","p-4","bg-success","text-white","text-center"],[1,"color","rounded","border","border-white",3,"ngStyle"],["class","flash-text text-xx-large font-weight-bold mb-2",4,"ngIf"],[1,"mr-2"],[1,"flash-text","text-xx-large","font-weight-bold","mb-2"],[1,"p-4","bg-danger","text-white","text-center"],[1,"p-4","bg-dark","text-white","text-center"],[1,"text-xx-large","font-weight-bold","mb-2"],[1,"mb-4","bg-white"],[1,"p-3"],[1,"mb-2"],[1,"font-weight-bold","text-large"],["class","text-small",4,"ngIf"],[1,"d-flex","align-items-center","mb-2"],["class","text-small text-white bg-dark py-1 px-3 mr-2",4,"ngIf"],["class","text-small ml-auto",4,"ngIf"],[1,"theater-name"],[1,"screen-name"],["class","mr-2",4,"ngIf"],[1,"mr-3"],[1,"text-small"],[1,"text-small","text-white","bg-dark","py-1","px-3","mr-2"],[1,"text-small","ml-auto"],[1,"mr-1"]],template:function(e,n){if(1&e&&(p.Pc(0,"div",0),p.Pc(1,"div",1),p.Pc(2,"button",2),p.Wc("click",(function(){return n.openQRCodeReader()})),p.Ad(3),p.Zc(4,"translate"),p.Oc(),p.Oc(),p.Oc(),p.yd(5,D,5,6,"div",3),p.Zc(6,"async"),p.Pc(7,"div",4),p.yd(8,_,66,82,"div",5),p.Zc(9,"async"),p.Pc(10,"div",6),p.Pc(11,"button",7),p.Ad(12),p.Zc(13,"translate"),p.Oc(),p.Oc(),p.Oc()),2&e){var t,c=null==(t=p.ad(9,8,n.admission))?null:t.screeningEvent;p.wc(3),p.Bd(p.ad(4,4,"admission.check.camera.start")),p.wc(2),p.fd("ngIf",!p.ad(6,6,n.isLoading)),p.wc(3),p.fd("ngIf",c),p.wc(4),p.Bd(p.ad(13,10,"admission.schedule.prev"))}},directives:[a.l,s.c,a.m],pipes:[v.c,a.b,h.a,w.a],styles:[".video-area[_ngcontent-%COMP%]{height:25vh;overflow:hidden}.flash-text[_ngcontent-%COMP%]{-webkit-animation-duration:3s;animation-duration:3s;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:flash-text;animation-name:flash-text}.color[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem;width:1.5rem;height:1.5rem}@-webkit-keyframes flash-text{0%,20%,40%,60%,80%,to{color:#fff}10%,30%,50%,70%,90%{color:transparent}}@keyframes flash-text{0%,20%,40%,60%,80%,to{color:#fff}10%,30%,50%,70%,90%{color:transparent}}"]});var H=i("QN9p"),q=i("x8Mb"),j=i("nIj0"),J=i("ddJ1");function F(e,n){if(1&e&&(p.Pc(0,"p",15),p.Ad(1),p.Zc(2,"changeLanguage"),p.Oc()),2&e){var t=p.Yc(2);p.wc(1),p.Cd(" ",p.ad(2,1,t.performance.screeningEvent.location.address),"")}}function K(e,n){if(1&e&&(p.Pc(0,"div",12),p.yd(1,F,3,3,"p",13),p.Zc(2,"changeLanguage"),p.Pc(3,"p",14),p.Ad(4),p.Zc(5,"changeLanguage"),p.Oc(),p.Oc()),2&e){var t=p.Yc();p.wc(1),p.fd("ngIf",p.ad(2,2,t.performance.screeningEvent.location.address)),p.wc(3),p.Bd(p.ad(5,4,t.performance.screeningEvent.location.name))}}function U(e,n){if(1&e&&(p.Pc(0,"div",16),p.Pc(1,"p",14),p.Ad(2),p.Zc(3,"changeLanguage"),p.Oc(),p.Oc()),2&e){var t=p.Yc();p.wc(2),p.Cd(" ",p.ad(3,1,t.performance.screeningEvent.name),"")}}function W(e,n){1&e&&(p.Pc(0,"div",17),p.Ad(1),p.Zc(2,"translate"),p.Oc()),2&e&&(p.wc(1),p.Cd(" ",p.ad(2,1,"admission.schedule.status.opening"),""))}function Q(e,n){1&e&&(p.Pc(0,"div",17),p.Ad(1),p.Zc(2,"translate"),p.Oc()),2&e&&(p.wc(1),p.Cd(" ",p.ad(2,1,"admission.schedule.status.nowShowing"),""))}function N(e,n){if(1&e&&(p.Pc(0,"div"),p.yd(1,W,3,3,"div",8),p.yd(2,Q,3,3,"div",8),p.Oc()),2&e){var t=p.Yc();p.wc(1),p.fd("ngIf",t.performance.isOpenDoor()),p.wc(1),p.fd("ngIf",t.performance.isScreening())}}function z(e,n){1&e&&(p.Pc(0,"div",17),p.Ad(1),p.Zc(2,"translate"),p.Oc()),2&e&&(p.wc(1),p.Cd(" ",p.ad(2,1,"admission.schedule.status.beforeOpening"),""))}function X(e,n){1&e&&(p.Pc(0,"div",17),p.Ad(1),p.Zc(2,"translate"),p.Oc()),2&e&&(p.wc(1),p.Cd(" ",p.ad(2,1,"admission.schedule.status.filmCompletion"),""))}function V(e,n){if(1&e&&(p.Pc(0,"div",18),p.Ad(1),p.Zc(2,"translate"),p.Oc()),2&e){var t=p.Yc();p.wc(1),p.Ed(" ",p.ad(2,3,"common.seat")," ",t.performance.screeningEvent.remainingAttendeeCapacity," / ",t.performance.screeningEvent.maximumAttendeeCapacity," ")}}function $(e,n){1&e&&(p.Pc(0,"div",18),p.Ad(1),p.Zc(2,"translate"),p.Oc()),2&e&&(p.wc(1),p.Cd(" ",p.ad(2,1,"admission.schedule.infiniteStock"),""))}var ee=function(e,n){return{"bg-white":e,"bg-dark-gray text-light-gray":n}},ne=function(){function n(){e(this,n),this.select=new p.w,this.moment=u,this.environment=Object(f.a)()}return t(n,[{key:"ngOnInit",value:function(){}}]),n}();function te(e,n){if(1&e&&(p.Pc(0,"p"),p.Ad(1),p.Zc(2,"changeLanguage"),p.Oc()),2&e){var t=p.Yc(2);p.wc(1),p.Cd(" ",p.ad(2,1,t.screeningEventsGroup.info.superEvent.headline),"")}}function ce(e,n){if(1&e&&(p.Pc(0,"p"),p.Ad(1),p.Zc(2,"changeLanguage"),p.Oc()),2&e){var t=p.Yc(2);p.wc(1),p.Bd(p.ad(2,1,t.screeningEventsGroup.info.superEvent.description))}}function ie(e,n){if(1&e&&(p.Pc(0,"div",11),p.Ad(1),p.Oc()),2&e){var t=p.Yc(2);p.wc(1),p.Bd(null==t.screeningEventsGroup.info.workPerformed?null:t.screeningEventsGroup.info.workPerformed.contentRating)}}function ae(e,n){1&e&&(p.Pc(0,"div",11),p.Ad(1),p.Zc(2,"translate"),p.Oc()),2&e&&(p.wc(1),p.Bd(p.ad(2,1,"common.dubbing")))}function re(e,n){1&e&&(p.Pc(0,"div",11),p.Ad(1),p.Zc(2,"translate"),p.Oc()),2&e&&(p.wc(1),p.Bd(p.ad(2,1,"common.subtitles")))}function se(e,n){if(1&e&&(p.Pc(0,"div",12),p.Pc(1,"span",13),p.Ad(2),p.Zc(3,"translate"),p.Oc(),p.Ad(4),p.Zc(5,"translate"),p.Oc()),2&e){var t=p.Yc(2);p.wc(2),p.Bd(p.ad(3,3,"common.duration")),p.wc(2),p.Dd("",t.moment.duration(null==t.screeningEventsGroup.info.workPerformed?null:t.screeningEventsGroup.info.workPerformed.duration).asMinutes(),"",p.ad(5,5,"common.date.minute")," ")}}function oe(e,n){if(1&e&&(p.Pc(0,"div",4),p.Pc(1,"div",5),p.Pc(2,"p",6),p.Ad(3),p.Zc(4,"changeLanguage"),p.Oc(),p.yd(5,te,3,3,"p",7),p.Zc(6,"changeLanguage"),p.yd(7,ce,3,3,"p",7),p.Zc(8,"changeLanguage"),p.Oc(),p.Pc(9,"div",8),p.yd(10,ie,2,1,"div",9),p.yd(11,ae,3,3,"div",9),p.yd(12,re,3,3,"div",9),p.yd(13,se,6,7,"div",10),p.Oc(),p.Oc()),2&e){var t=p.Yc();p.wc(3),p.Bd(p.ad(4,7,t.screeningEventsGroup.info.name)),p.wc(2),p.fd("ngIf",t.screeningEventsGroup.info.superEvent.headline&&p.ad(6,9,t.screeningEventsGroup.info.superEvent.headline)),p.wc(2),p.fd("ngIf",t.screeningEventsGroup.info.superEvent.description&&p.ad(8,11,t.screeningEventsGroup.info.superEvent.description)),p.wc(3),p.fd("ngIf",null==t.screeningEventsGroup.info.workPerformed?null:t.screeningEventsGroup.info.workPerformed.contentRating),p.wc(1),p.fd("ngIf",t.screeningEventsGroup.info.superEvent.dubLanguage),p.wc(1),p.fd("ngIf",t.screeningEventsGroup.info.superEvent.subtitleLanguage),p.wc(1),p.fd("ngIf",(null==t.screeningEventsGroup.info.workPerformed?null:t.screeningEventsGroup.info.workPerformed.duration)&&t.moment.duration(null==t.screeningEventsGroup.info.workPerformed?null:t.screeningEventsGroup.info.workPerformed.duration).asMinutes()>0)}}function de(e,n){if(1&e&&(p.Pc(0,"div",4),p.Pc(1,"p",6),p.Ad(2),p.Zc(3,"changeLanguage"),p.Oc(),p.Oc()),2&e){var t=p.Yc();p.wc(2),p.Bd(p.ad(3,1,t.screeningEventsGroup.info.location.name))}}function le(e,n){if(1&e){var t=p.Qc();p.Pc(0,"li",14),p.Pc(1,"app-admission-performance",15),p.Wc("select",(function(e){return p.sd(t),p.Yc().select.emit(e)})),p.Oc(),p.Oc()}if(2&e){var c=n.$implicit;p.wc(1),p.fd("performance",c)}}ne.\u0275fac=function(e){return new(e||ne)},ne.\u0275cmp=p.Dc({type:ne,selectors:[["app-admission-performance"]],inputs:{performance:"performance"},outputs:{select:"select"},decls:24,vars:21,consts:[[1,"row","mx-0","border","boder-gray","rounded","p-3","py-md-3","text-md-center","d-md-block","align-items-center","pointer","h-100",3,"ngClass","click"],[1,"col-md-12","col-8","px-0"],["class","mb-1 text-small screen-name",4,"ngIf"],["class","mb-1 text-small",4,"ngIf"],[1,"text-large"],[1,"border-0","bg-light-gray","my-2"],[1,"col-md-12","col-4","px-0","text-center"],[4,"ngIf"],["class","status mb-2",4,"ngIf"],["class","mb-2 text-small",4,"ngIf"],[1,"text-small","mb-1"],[1,"text-small"],[1,"mb-1","text-small","screen-name"],["class","text-overflow-ellipsis mr-2 d-inline-block d-md-block",4,"ngIf"],[1,"text-overflow-ellipsis","d-inline-block","d-md-block"],[1,"text-overflow-ellipsis","mr-2","d-inline-block","d-md-block"],[1,"mb-1","text-small"],[1,"status","mb-2"],[1,"mb-2","text-small"]],template:function(e,n){1&e&&(p.Pc(0,"div",0),p.Wc("click",(function(){return n.select.emit(n.performance.screeningEvent)})),p.Pc(1,"div",1),p.yd(2,K,6,6,"div",2),p.yd(3,U,4,3,"div",3),p.Pc(4,"div"),p.Pc(5,"strong",4),p.Ad(6),p.Oc(),p.Pc(7,"span"),p.Ad(8,"-"),p.Oc(),p.Pc(9,"span"),p.Ad(10),p.Oc(),p.Oc(),p.Oc(),p.Kc(11,"hr",5),p.Pc(12,"div",6),p.yd(13,N,3,2,"div",7),p.yd(14,z,3,3,"div",8),p.yd(15,X,3,3,"div",8),p.yd(16,V,3,5,"div",9),p.yd(17,$,3,3,"div",9),p.Pc(18,"div",10),p.Ad(19),p.Zc(20,"translate"),p.Oc(),p.Pc(21,"div",11),p.Ad(22),p.Zc(23,"translate"),p.Oc(),p.Oc(),p.Oc()),2&e&&(p.fd("ngClass",p.jd(18,ee,n.performance.isOpenDoor()||n.performance.isScreening(),!(n.performance.isOpenDoor()||n.performance.isScreening()))),p.wc(2),p.fd("ngIf","screeningEventSeries"===n.environment.PURCHASE_SCHEDULE_SORT),p.wc(1),p.fd("ngIf","screen"===n.environment.PURCHASE_SCHEDULE_SORT),p.wc(3),p.Bd(n.moment(n.performance.screeningEvent.startDate).format("HH:mm")),p.wc(4),p.Bd(n.moment(n.performance.screeningEvent.endDate).format("HH:mm")),p.wc(3),p.fd("ngIf",n.performance.isOpenDoor()||n.performance.isScreening()),p.wc(1),p.fd("ngIf",n.performance.isOpenDoor("before")),p.wc(1),p.fd("ngIf",n.performance.isScreening("after")),p.wc(1),p.fd("ngIf",!n.performance.isInfinitetock()),p.wc(1),p.fd("ngIf",n.performance.isInfinitetock()),p.wc(2),p.Dd("",p.ad(20,14,"common.ticketing")," ",n.performance.screeningEvent.checkInCount,""),p.wc(3),p.Dd("",p.ad(23,16,"common.admission")," ",n.performance.screeningEvent.attendeeCount,""))},directives:[a.j,a.l],pipes:[v.c,h.a],styles:[".status[_ngcontent-%COMP%]{line-height:30px}.status[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}@media (max-width:767.98px){.text-overflow-ellipsis[_ngcontent-%COMP%]{overflow:auto;width:auto;white-space:normal}}"]});var ue=function(){function n(){e(this,n),this.select=new p.w,this.moment=u,this.environment=Object(f.a)()}return t(n,[{key:"ngOnInit",value:function(){}}]),n}();ue.\u0275fac=function(e){return new(e||ue)},ue.\u0275cmp=p.Dc({type:ue,selectors:[["app-admission-performances"]],inputs:{screeningEventsGroup:"screeningEventsGroup"},outputs:{select:"select"},decls:5,vars:3,consts:[[1,"bg-white"],["class","p-3 bg-gray",4,"ngIf"],[1,"py-2","px-3","px-md-2","d-flex","flex-wrap"],["class","px-md-2 my-2",4,"ngFor","ngForOf"],[1,"p-3","bg-gray"],[1,"mb-2"],[1,"font-weight-bold","text-large"],[4,"ngIf"],[1,"d-flex","align-items-center"],["class","text-small bg-dark-gray text-white py-1 px-3 mr-2",4,"ngIf"],["class","text-small ml-auto",4,"ngIf"],[1,"text-small","bg-dark-gray","text-white","py-1","px-3","mr-2"],[1,"text-small","ml-auto"],[1,"mr-1"],[1,"px-md-2","my-2"],[1,"mb-3",3,"performance","select"]],template:function(e,n){1&e&&(p.Pc(0,"div",0),p.yd(1,oe,14,13,"div",1),p.yd(2,de,4,3,"div",1),p.Pc(3,"ul",2),p.yd(4,le,2,1,"li",3),p.Oc(),p.Oc()),2&e&&(p.wc(1),p.fd("ngIf","screeningEventSeries"===n.environment.PURCHASE_SCHEDULE_SORT),p.wc(1),p.fd("ngIf","screen"===n.environment.PURCHASE_SCHEDULE_SORT),p.wc(2),p.fd("ngForOf",n.screeningEventsGroup.data))},directives:[a.l,a.k,ne],pipes:[h.a,v.c],styles:["[_nghost-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:20%}@media (max-width:991.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:25%}}@media (max-width:767.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%}}"]});var fe=function(e,n,t,c){return new(t||(t=Promise))((function(i,a){function r(e){try{o(c.next(e))}catch(n){a(n)}}function s(e){try{o(c.throw(e))}catch(n){a(n)}}function o(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,s)}o((c=c.apply(e,n||[])).next())}))},me=["datepicker"];function ge(e,n){if(1&e&&(p.Pc(0,"p",16),p.Ad(1),p.Zc(2,"formatDate"),p.Zc(3,"async"),p.Oc()),2&e){var t,c=p.Yc();p.wc(1),p.Cd(" ",p.bd(2,1,null==(t=p.ad(3,4,c.admission))?null:t.scheduleDate,"YYYY/MM/DD (ddd)"),"")}}function pe(e,n){1&e&&(p.Kc(0,"p",17),p.Zc(1,"translate")),2&e&&p.fd("innerHTML",p.ad(1,1,"admission.schedule.notfound"),p.td)}function ve(e,n){if(1&e){var t=p.Qc();p.Pc(0,"app-admission-performances",18),p.Wc("select",(function(e){return p.sd(t),p.Yc().selectSchedule(e)})),p.Oc()}if(2&e){var c=n.$implicit;p.fd("screeningEventsGroup",c)}}var he=function(){return{dateInputFormat:"YYYY/MM/DD",adaptivePosition:!0,showWeekNumbers:!1}},we=function(){function n(t,c,i,a,r){e(this,n),this.store=t,this.router=c,this.localeService=i,this.actionService=a,this.masterService=r,this.moment=u}return t(n,[{key:"ngOnInit",value:function(){return fe(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.admission=this.store.pipe(Object(l.m)(g.a)),this.user=this.store.pipe(Object(l.m)(g.i)),this.screeningEventsGroup=[];case 1:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnDestroy",value:function(){clearTimeout(this.updateTimer)}},{key:"update",value:function(){var e=this;void 0!==this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout((function(){e.selectDate()}),6e5)}},{key:"selectDate",value:function(e){return fe(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t,c,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null!=e&&(this.scheduleDate=e),n.prev=1,n.next=4,this.actionService.user.getData();case 4:if(void 0!==(t=n.sent.theater)){n.next=7;break}return n.abrupt("return",void this.router.navigate(["/error"]));case 7:return void 0!==this.scheduleDate&&null!==this.scheduleDate||(this.scheduleDate=u().toDate()),c=u(this.scheduleDate).format("YYYY-MM-DD"),this.actionService.admission.selectScheduleDate(c),n.next=12,this.masterService.getSchedule({superEvent:{locationBranchCodes:[t.branchCode]},startFrom:u(c).toDate(),startThrough:u(c).add(1,"day").toDate()});case 12:i=n.sent,this.screeningEventsGroup=q.a.Purchase.screeningEvents2ScreeningEventSeries({screeningEvents:i}),this.update(),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(1),console.error(n.t0),this.router.navigate(["/error"]);case 19:case"end":return n.stop()}}),n,this,[[1,16]])})))}},{key:"selectSchedule",value:function(e){return fe(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.actionService.admission.getScreeningEvent(e);case 3:this.router.navigate(["/admission/check"]),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.error(n.t0),this.router.navigate(["/error"]);case 9:case"end":return n.stop()}}),n,this,[[0,6]])})))}},{key:"notSpecified",value:function(){this.actionService.admission.delete(),this.router.navigate(["/admission/check"])}},{key:"setDatePicker",value:function(){var e=this;this.user.subscribe((function(n){e.localeService.use(n.language)})).unsubscribe()}},{key:"toggleDatepicker",value:function(){this.setDatePicker(),this.datepicker.toggle()}},{key:"onShowPicker",value:function(e){q.a.Util.iOSDatepickerTapBugFix(e,[this.datepicker])}}]),n}();we.\u0275fac=function(e){return new(e||we)(p.Jc(l.b),p.Jc(s.b),p.Jc(H.d),p.Jc(m.a),p.Jc(m.d))},we.\u0275cmp=p.Dc({type:we,selectors:[["app-admission-schedule"]],viewQuery:function(e,n){var t;1&e&&p.wd(me,!0),2&e&&p.od(t=p.Xc())&&(n.datepicker=t.first)},decls:22,vars:17,consts:[[1,"contents-width","mx-auto","px-3","py-5"],[1,"text-large","mb-4","text-center","font-weight-bold"],[1,"mb-4","text-md-center",3,"innerHTML"],[1,"mb-3"],[1,"input-group"],["type","text","placeholder","Datepicker","bsDatepicker","","readonly","",1,"form-control",3,"ngModel","bsConfig","ngModelChange","bsValueChange","click","onShown"],["datepicker","bsDatepicker"],[1,"input-group-append","pointer",3,"click"],[1,"input-group-text"],[1,"fas","fa-caret-down"],["class","text-primary text-large mb-3",4,"ngIf"],["class","mb-3",3,"innerHTML",4,"ngIf"],[1,"mb-4"],["class","mb-3",3,"screeningEventsGroup","select",4,"ngFor","ngForOf"],[1,"buttons","mx-auto","text-center"],["type","button",1,"btn","btn-primary","btn-block","py-3","mb-3",3,"click"],[1,"text-primary","text-large","mb-3"],[1,"mb-3",3,"innerHTML"],[1,"mb-3",3,"screeningEventsGroup","select"]],template:function(e,n){if(1&e&&(p.Pc(0,"div",0),p.Pc(1,"h2",1),p.Ad(2),p.Zc(3,"translate"),p.Oc(),p.Kc(4,"p",2),p.Zc(5,"translate"),p.Pc(6,"div",3),p.Pc(7,"div",4),p.Pc(8,"input",5,6),p.Wc("ngModelChange",(function(e){return n.scheduleDate=e}))("bsValueChange",(function(e){return n.selectDate(e)}))("click",(function(){return n.setDatePicker()}))("onShown",(function(e){return n.onShowPicker(e)})),p.Oc(),p.Pc(10,"div",7),p.Wc("click",(function(){return n.toggleDatepicker()})),p.Pc(11,"span",8),p.Kc(12,"i",9),p.Oc(),p.Oc(),p.Oc(),p.Oc(),p.yd(13,ge,4,6,"p",10),p.Zc(14,"async"),p.yd(15,pe,2,3,"p",11),p.Pc(16,"div",12),p.yd(17,ve,1,1,"app-admission-performances",13),p.Oc(),p.Pc(18,"div",14),p.Pc(19,"button",15),p.Wc("click",(function(){return n.notSpecified()})),p.Ad(20),p.Zc(21,"translate"),p.Oc(),p.Oc(),p.Oc()),2&e){var t,c=null==(t=p.ad(14,12,n.admission))?null:t.scheduleDate;p.wc(2),p.Bd(p.ad(3,8,"admission.schedule.title")),p.wc(2),p.fd("innerHTML",p.ad(5,10,"admission.schedule.read"),p.td),p.wc(4),p.fd("ngModel",n.scheduleDate)("bsConfig",p.hd(16,he)),p.wc(5),p.fd("ngIf",c),p.wc(2),p.fd("ngIf",0===n.screeningEventsGroup.length),p.wc(2),p.fd("ngForOf",n.screeningEventsGroup),p.wc(3),p.Bd(p.ad(21,14,"admission.schedule.next"))}},directives:[H.b,j.a,H.a,j.k,j.n,J.b,a.l,a.k,ue],pipes:[v.c,a.b,w.a],styles:['.condition[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.schedule-slider[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;bottom:0;height:4px;background-color:#000;opacity:.3}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%], .schedule-slider[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]{width:27px;height:27px;background-image:url(/assets/images/icon/slider_arrow.svg);background-size:27px;margin-top:-13px}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%]{right:-38px}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]{left:-38px;transform:rotate(180deg)}']});var be=[{path:"",component:d.a,canActivate:[o.a,o.c],children:[{path:"schedule",component:we},{path:"check",component:G}]}],ye=function n(){e(this,n)};ye.\u0275mod=p.Hc({type:ye}),ye.\u0275inj=p.Gc({factory:function(e){return new(e||ye)},imports:[[s.d.forChild(be)],s.d]});var ke=function n(){e(this,n)};ke.\u0275mod=p.Hc({type:ke}),ke.\u0275inj=p.Gc({factory:function(e){return new(e||ke)},imports:[[a.c,ye,r.a]]})}}])}();