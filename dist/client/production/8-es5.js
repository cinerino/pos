function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var c=0;c<n.length;c++){var t=n[c];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,n,c){return n&&_defineProperties(e.prototype,n),c&&_defineProperties(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{dzKq:function(e,n,c){"use strict";c.r(n),c.d(n,"AdmissionModule",(function(){return ge}));var t=c("2kYt"),i=c("DSWM"),r=c("sEIs"),s=c("unpb"),a=c("RRjC"),o=c("sN6X"),u=c("wgY5"),d=c("PIN6"),l=c("cHUu"),m=c("mOXJ"),h=c("EM62"),g=c("s2Ay"),f=c("OSFB"),p=c("NSn/"),v=function(e,n,c,t){return new(c||(c=Promise))((function(i,r){function s(e){try{o(t.next(e))}catch(n){r(n)}}function a(e){try{o(t.throw(e))}catch(n){r(n)}}function o(e){var n;e.done?i(e.value):(n=e.value,n instanceof c?n:new c((function(e){e(n)}))).then(s,a)}o((t=t.apply(e,n||[])).next())}))};function b(e,n){1&e&&(h.ic(0,"div",17),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Vc(h.uc(2,1,"admission.check.success")))}function k(e,n){1&e&&(h.ic(0,"div",17),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Vc(h.uc(2,1,"admission.check.reEntry")))}function P(e,n){if(1&e&&(h.ic(0,"p"),h.ic(1,"strong",16),h.Uc(2),h.tc(3,"translate"),h.hc(),h.Uc(4),h.tc(5,"async"),h.hc()),2&e){var c=h.sc(4);h.Pb(2),h.Vc(h.uc(3,2,"common.seat")),h.Pb(2),h.Wc(" ",h.uc(5,4,c.admission).qrcodeToken.availableReservation.reservedTicket.ticketedSeat.seatNumber," ")}}var x=function(e){return{"background-color":e}};function y(e,n){if(1&e&&(h.ic(0,"div",13),h.dc(1,"div",14),h.tc(2,"async"),h.Sc(3,b,3,3,"div",15),h.tc(4,"async"),h.Sc(5,k,3,3,"div",15),h.tc(6,"async"),h.Sc(7,P,6,6,"p",9),h.tc(8,"async"),h.ic(9,"p"),h.ic(10,"strong",16),h.Uc(11),h.tc(12,"translate"),h.hc(),h.Uc(13),h.tc(14,"changeLanguage"),h.tc(15,"async"),h.hc(),h.ic(16,"p"),h.ic(17,"strong",16),h.Uc(18),h.tc(19,"translate"),h.hc(),h.Uc(20),h.tc(21,"async"),h.hc(),h.hc()),2&e){var c=h.sc(3);h.Pb(1),h.zc("ngStyle",h.Cc(26,x,h.uc(2,8,c.admission).qrcodeToken.availableReservation.reservedTicket.ticketType.color)),h.Pb(2),h.zc("ngIf",0===h.uc(4,10,c.admission).qrcodeToken.checkTokenActions.length),h.Pb(2),h.zc("ngIf",h.uc(6,12,c.admission).qrcodeToken.checkTokenActions.length>0),h.Pb(2),h.zc("ngIf",h.uc(8,14,c.admission).qrcodeToken.availableReservation.reservedTicket.ticketedSeat),h.Pb(4),h.Vc(h.uc(12,16,"common.ticket")),h.Pb(2),h.Wc(" ",h.uc(14,18,h.uc(15,20,c.admission).qrcodeToken.availableReservation.reservedTicket.ticketType.name)," "),h.Pb(5),h.Vc(h.uc(19,22,"admission.check.entryCount")),h.Pb(2),h.Wc(" ",h.uc(21,24,c.admission).qrcodeToken.checkTokenActions.length," ")}}function w(e,n){if(1&e&&(h.ic(0,"p"),h.Uc(1),h.tc(2,"translate"),h.dc(3,"br"),h.ic(4,"strong"),h.Uc(5),h.tc(6,"async"),h.hc(),h.hc()),2&e){var c=h.sc(4);h.Pb(1),h.Wc(" ",h.uc(2,2,"admission.check.alert.event"),""),h.Pb(4),h.Vc(h.uc(6,4,c.admission).qrcodeToken.statusCode)}}function E(e,n){if(1&e&&(h.ic(0,"p"),h.Uc(1),h.tc(2,"translate"),h.dc(3,"br"),h.ic(4,"strong"),h.Uc(5),h.tc(6,"async"),h.hc(),h.hc()),2&e){var c=h.sc(4);h.Pb(1),h.Wc(" ",h.uc(2,2,"admission.check.alert.qrcode"),""),h.Pb(4),h.Vc(h.uc(6,4,c.admission).qrcodeToken.statusCode)}}function S(e,n){if(1&e&&(h.ic(0,"div",18),h.ic(1,"div",17),h.Uc(2),h.tc(3,"translate"),h.hc(),h.Sc(4,w,7,6,"p",9),h.tc(5,"async"),h.Sc(6,E,7,6,"p",9),h.tc(7,"async"),h.hc()),2&e){var c=h.sc(3);h.Pb(2),h.Vc(h.uc(3,3,"admission.check.danger")),h.Pb(2),h.zc("ngIf",200===h.uc(5,5,c.admission).qrcodeToken.statusCode),h.Pb(2),h.zc("ngIf",200!==h.uc(7,7,c.admission).qrcodeToken.statusCode)}}function C(e,n){if(1&e&&(h.ic(0,"div"),h.Sc(1,y,22,28,"div",11),h.tc(2,"async"),h.Sc(3,S,8,9,"div",12),h.tc(4,"async"),h.hc()),2&e){var c=h.sc(2);h.Pb(1),h.zc("ngIf",h.uc(2,2,c.admission).qrcodeToken.availableReservation),h.Pb(2),h.zc("ngIf",!h.uc(4,4,c.admission).qrcodeToken.availableReservation)}}function I(e,n){1&e&&(h.ic(0,"div",19),h.ic(1,"div",20),h.Uc(2),h.tc(3,"translate"),h.hc(),h.ic(4,"p"),h.Uc(5),h.tc(6,"translate"),h.hc(),h.hc()),2&e&&(h.Pb(2),h.Vc(h.uc(3,2,"admission.check.waiting")),h.Pb(3),h.Vc(h.uc(6,4,"admission.check.alert.waiting")))}function U(e,n){if(1&e&&(h.ic(0,"div",8),h.Sc(1,C,5,6,"div",9),h.tc(2,"async"),h.Sc(3,I,7,6,"div",10),h.tc(4,"async"),h.hc()),2&e){var c=h.sc();h.Pb(1),h.zc("ngIf",h.uc(2,2,c.admission).qrcodeToken),h.Pb(2),h.zc("ngIf",!h.uc(4,4,c.admission).qrcodeToken)}}function D(e,n){if(1&e&&(h.ic(0,"p",33),h.Uc(1),h.tc(2,"async"),h.hc()),2&e){var c=h.sc(2);h.Pb(1),h.Wc(" ",h.uc(2,1,c.admission).screeningEvent.workPerformed.headline," ")}}function M(e,n){if(1&e&&(h.ic(0,"p",33),h.Uc(1),h.tc(2,"changeLanguage"),h.tc(3,"async"),h.hc()),2&e){var c=h.sc(2);h.Pb(1),h.Wc(" ",h.uc(2,1,h.uc(3,3,c.admission).screeningEvent.superEvent.description)," ")}}function O(e,n){if(1&e&&(h.ic(0,"div",34),h.Uc(1),h.tc(2,"async"),h.hc()),2&e){var c=h.sc(2);h.Pb(1),h.Vc(h.uc(2,1,c.admission).screeningEvent.workPerformed.contentRating)}}function W(e,n){1&e&&(h.ic(0,"div",34),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Vc(h.uc(2,1,"common.dubbing")))}function z(e,n){1&e&&(h.ic(0,"div",34),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Vc(h.uc(2,1,"common.subtitles")))}function T(e,n){if(1&e&&(h.ic(0,"div",35),h.ic(1,"span",36),h.Uc(2),h.tc(3,"translate"),h.hc(),h.Uc(4),h.tc(5,"async"),h.tc(6,"translate"),h.hc()),2&e){var c=h.sc(2);h.Pb(2),h.Vc(h.uc(3,3,"common.duration")),h.Pb(2),h.Xc("",c.moment.duration(null==h.uc(5,5,c.admission).screeningEvent.workPerformed?null:h.uc(5,5,c.admission).screeningEvent.workPerformed.duration).asMinutes(),"",h.uc(6,7,"common.date.minute")," ")}}function _(e,n){if(1&e&&(h.ic(0,"span",16),h.Uc(1),h.tc(2,"changeLanguage"),h.tc(3,"async"),h.hc()),2&e){var c=h.sc(2);h.Pb(1),h.Wc(" ",h.uc(2,1,h.uc(3,3,c.admission).screeningEvent.location.address)," ")}}function V(e,n){if(1&e&&(h.ic(0,"div",21),h.ic(1,"div",22),h.ic(2,"div",23),h.ic(3,"p",24),h.Uc(4),h.tc(5,"changeLanguage"),h.tc(6,"async"),h.hc(),h.Sc(7,D,3,3,"p",25),h.tc(8,"async"),h.Sc(9,M,4,5,"p",25),h.tc(10,"async"),h.tc(11,"changeLanguage"),h.tc(12,"async"),h.hc(),h.ic(13,"div",26),h.Sc(14,O,3,3,"div",27),h.tc(15,"async"),h.Sc(16,W,3,3,"div",27),h.tc(17,"async"),h.Sc(18,z,3,3,"div",27),h.tc(19,"async"),h.Sc(20,T,7,9,"div",28),h.tc(21,"async"),h.tc(22,"async"),h.hc(),h.hc(),h.ic(23,"div",22),h.ic(24,"p",29),h.Uc(25),h.tc(26,"changeLanguage"),h.tc(27,"async"),h.hc(),h.ic(28,"p",30),h.Sc(29,_,4,5,"span",31),h.tc(30,"changeLanguage"),h.tc(31,"async"),h.ic(32,"span"),h.Uc(33),h.tc(34,"changeLanguage"),h.tc(35,"async"),h.hc(),h.hc(),h.ic(36,"div"),h.ic(37,"p",32),h.ic(38,"strong",16),h.Uc(39),h.tc(40,"translate"),h.hc(),h.Uc(41),h.tc(42,"formatDate"),h.tc(43,"async"),h.hc(),h.ic(44,"p"),h.ic(45,"strong",16),h.Uc(46),h.tc(47,"translate"),h.hc(),h.Uc(48),h.tc(49,"formatDate"),h.tc(50,"async"),h.tc(51,"formatDate"),h.tc(52,"async"),h.hc(),h.ic(53,"p",32),h.ic(54,"strong",16),h.Uc(55),h.tc(56,"translate"),h.hc(),h.Uc(57),h.tc(58,"async"),h.tc(59,"async"),h.hc(),h.ic(60,"p"),h.ic(61,"strong",16),h.Uc(62),h.tc(63,"translate"),h.hc(),h.Uc(64),h.tc(65,"async"),h.hc(),h.hc(),h.hc(),h.hc()),2&e){var c=h.sc();h.Pb(4),h.Vc(h.uc(5,19,h.uc(6,21,c.admission).screeningEvent.name)),h.Pb(3),h.zc("ngIf",h.uc(8,23,c.admission).screeningEvent.workPerformed.headline),h.Pb(2),h.zc("ngIf",h.uc(10,25,c.admission).screeningEvent.superEvent.description&&h.uc(11,27,h.uc(12,29,c.admission).screeningEvent.superEvent.description)),h.Pb(5),h.zc("ngIf",h.uc(15,31,c.admission).screeningEvent.workPerformed.contentRating),h.Pb(2),h.zc("ngIf",h.uc(17,33,c.admission).screeningEvent.superEvent.dubLanguage),h.Pb(2),h.zc("ngIf",h.uc(19,35,c.admission).screeningEvent.superEvent.subtitleLanguage),h.Pb(2),h.zc("ngIf",(null==h.uc(21,37,c.admission).screeningEvent.workPerformed?null:h.uc(21,37,c.admission).screeningEvent.workPerformed.duration)&&c.moment.duration(null==h.uc(22,39,c.admission).screeningEvent.workPerformed?null:h.uc(22,39,c.admission).screeningEvent.workPerformed.duration).asMinutes()>0),h.Pb(5),h.Vc(h.uc(26,41,h.uc(27,43,c.admission).screeningEvent.superEvent.location.name)),h.Pb(4),h.zc("ngIf",h.uc(30,45,h.uc(31,47,c.admission).screeningEvent.location.address)),h.Pb(4),h.Wc(" ",h.uc(34,49,h.uc(35,51,c.admission).screeningEvent.location.name)," "),h.Pb(6),h.Vc(h.uc(40,53,"common.doorTime")),h.Pb(2),h.Wc(" ",h.vc(42,55,h.uc(43,58,c.admission).screeningEvent.doorTime,"MM/DD (ddd) HH:mm")," "),h.Pb(5),h.Vc(h.uc(47,60,"common.startDate")),h.Pb(2),h.Xc(" ",h.vc(49,62,h.uc(50,65,c.admission).screeningEvent.startDate,"MM/DD (ddd) HH:mm")," - ",h.vc(51,67,h.uc(52,70,c.admission).screeningEvent.endDate,"HH:mm")," "),h.Pb(7),h.Vc(h.uc(56,72,"common.reservation")),h.Pb(2),h.Wc(" ",h.uc(58,74,c.admission).screeningEvent.maximumAttendeeCapacity-h.uc(59,76,c.admission).screeningEvent.remainingAttendeeCapacity," "),h.Pb(5),h.Vc(h.uc(63,78,"common.admission")),h.Pb(2),h.Wc(" ",h.uc(65,80,c.admission).screeningEvent.attendeeCount," ")}}var L=function(){function e(n,c,t,i,r){_classCallCheck(this,e),this.store=n,this.admissionService=c,this.utilService=t,this.qrcodeService=i,this.translate=r,this.moment=u,this.environment=Object(d.a)()}return _createClass(e,[{key:"ngOnInit",value:function(){this.inputCode="",this.isLoading=this.store.pipe(Object(o.m)(m.c)),this.admission=this.store.pipe(Object(o.m)(m.a)),this.admissionService.initializeQrcodeToken()}},{key:"ngOnDestroy",value:function(){clearInterval(this.updateLoop)}},{key:"handleKeyboardEvent",value:function(e){"Enter"===e.key&&this.inputCode.length>0?(this.check(this.inputCode),this.inputCode=""):"Escape"!==e.key&&(this.inputCode+=e.key)}},{key:"check",value:function(e){return v(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.admissionService.checkQrcodeToken(e);case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),console.error(n.t0),this.utilService.openAlert({title:this.translate.instant("common.error"),body:this.translate.instant("admission.check.alert.check")});case 8:case"end":return n.stop()}}),n,this,[[0,5]])})))}},{key:"openQRCodeReader",value:function(){var e=this;this.qrcodeService.openQRCodeReader({cb:function(n){return v(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.check(n);case 2:case"end":return e.stop()}}),e,this)})))}})}},{key:"update",value:function(){var e=this;clearInterval(this.updateLoop),this.updateLoop=setInterval((function(){return v(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.admissionService.getData();case 2:if(n=e.sent,c=n.screeningEvent,e.t0=void 0!==c,!e.t0){e.next=8;break}return e.next=8,this.admissionService.getScreeningEvent(c);case 8:case"end":return e.stop()}}),e,this)})))}),6e5)}}]),e}();L.\u0275fac=function(e){return new(e||L)(h.cc(o.b),h.cc(l.a),h.cc(l.k),h.cc(l.g),h.cc(g.d))},L.\u0275cmp=h.Wb({type:L,selectors:[["app-admission-check"]],hostBindings:function(e,n){1&e&&h.qc("keypress",(function(e){return n.handleKeyboardEvent(e)}),!1,h.Kc)},decls:14,vars:12,consts:[[1,"contents-width","mx-auto","px-3","pt-4"],[1,"buttons","mx-auto","text-center","mb-4"],["type","button",1,"btn","btn-success","btn-block","py-3",3,"click"],["class","mb-4",4,"ngIf"],[1,"contents-width","mx-auto","px-3","pb-5"],["class","mb-4 bg-white",4,"ngIf"],[1,"buttons","mx-auto","text-center"],["type","button","routerLink","/admission/schedule",1,"btn","btn-link"],[1,"mb-4"],[4,"ngIf"],["class","p-4 bg-dark text-white text-center",4,"ngIf"],["class","position-relative p-4 bg-success text-white text-center",4,"ngIf"],["class","p-4 bg-danger text-white text-center",4,"ngIf"],[1,"position-relative","p-4","bg-success","text-white","text-center"],[1,"color","rounded","border","border-white",3,"ngStyle"],["class","flash-text text-xx-large font-weight-bold mb-2",4,"ngIf"],[1,"mr-2"],[1,"flash-text","text-xx-large","font-weight-bold","mb-2"],[1,"p-4","bg-danger","text-white","text-center"],[1,"p-4","bg-dark","text-white","text-center"],[1,"text-xx-large","font-weight-bold","mb-2"],[1,"mb-4","bg-white"],[1,"p-3"],[1,"mb-2"],[1,"font-weight-bold","text-large"],["class","text-small",4,"ngIf"],[1,"d-flex","align-items-center","mb-2"],["class","text-small text-white bg-dark py-1 px-3 mr-2",4,"ngIf"],["class","text-small ml-auto",4,"ngIf"],[1,"theater-name"],[1,"screen-name"],["class","mr-2",4,"ngIf"],[1,"mr-3"],[1,"text-small"],[1,"text-small","text-white","bg-dark","py-1","px-3","mr-2"],[1,"text-small","ml-auto"],[1,"mr-1"]],template:function(e,n){1&e&&(h.ic(0,"div",0),h.ic(1,"div",1),h.ic(2,"button",2),h.qc("click",(function(){return n.openQRCodeReader()})),h.Uc(3),h.tc(4,"translate"),h.hc(),h.hc(),h.hc(),h.Sc(5,U,5,6,"div",3),h.tc(6,"async"),h.ic(7,"div",4),h.Sc(8,V,66,82,"div",5),h.tc(9,"async"),h.ic(10,"div",6),h.ic(11,"button",7),h.Uc(12),h.tc(13,"translate"),h.hc(),h.hc(),h.hc()),2&e&&(h.Pb(3),h.Vc(h.uc(4,4,"admission.check.camera.start")),h.Pb(2),h.zc("ngIf",!h.uc(6,6,n.isLoading)),h.Pb(3),h.zc("ngIf",h.uc(9,8,n.admission).screeningEvent),h.Pb(4),h.Vc(h.uc(13,10,"admission.schedule.prev")))},directives:[t.l,r.c,t.m],pipes:[g.c,t.b,f.a,p.a],styles:[".video-area[_ngcontent-%COMP%]{height:25vh;overflow:hidden}.flash-text[_ngcontent-%COMP%]{-webkit-animation-duration:3s;animation-duration:3s;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:flash-text;animation-name:flash-text}.color[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem;width:1.5rem;height:1.5rem}@-webkit-keyframes flash-text{0%,20%,40%,60%,80%,to{color:#fff}10%,30%,50%,70%,90%{color:transparent}}@keyframes flash-text{0%,20%,40%,60%,80%,to{color:#fff}10%,30%,50%,70%,90%{color:transparent}}"]});var R=c("QN9p"),q=c("cF7s"),j=c("nIj0");function H(e,n){if(1&e&&(h.ic(0,"p",13),h.Uc(1),h.tc(2,"changeLanguage"),h.hc()),2&e){var c=h.sc();h.Pb(1),h.Wc(" ",h.uc(2,1,c.performance.screeningEvent.location.address),"")}}function Y(e,n){1&e&&(h.ic(0,"div",14),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Wc(" ",h.uc(2,1,"admission.schedule.status.opening"),""))}function A(e,n){1&e&&(h.ic(0,"div",14),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Wc(" ",h.uc(2,1,"admission.schedule.status.nowShowing"),""))}function F(e,n){if(1&e&&(h.ic(0,"div"),h.Sc(1,Y,3,3,"div",9),h.Sc(2,A,3,3,"div",9),h.hc()),2&e){var c=h.sc();h.Pb(1),h.zc("ngIf",c.performance.isOpenDoor()),h.Pb(1),h.zc("ngIf",c.performance.isScreening())}}function N(e,n){1&e&&(h.ic(0,"div",14),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Wc(" ",h.uc(2,1,"admission.schedule.status.beforeOpening"),""))}function Q(e,n){1&e&&(h.ic(0,"div",14),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Wc(" ",h.uc(2,1,"admission.schedule.status.filmCompletion"),""))}function X(e,n){if(1&e&&(h.ic(0,"div",15),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e){var c=h.sc();h.Pb(1),h.Yc(" ",h.uc(2,3,"common.seat")," ",c.performance.screeningEvent.remainingAttendeeCapacity," / ",c.performance.screeningEvent.maximumAttendeeCapacity," ")}}function B(e,n){1&e&&(h.ic(0,"div",15),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Wc(" ",h.uc(2,1,"admission.schedule.infiniteStock"),""))}c("i7xV");var K=function(e,n){return{"bg-white":e,"bg-dark-gray text-light-gray":n}},J=function(){function e(){_classCallCheck(this,e),this.select=new h.s,this.moment=u}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();function Z(e,n){if(1&e&&(h.ic(0,"p"),h.Uc(1),h.tc(2,"changeLanguage"),h.hc()),2&e){var c=h.sc();h.Pb(1),h.Wc(" ",h.uc(2,1,c.screeningWorkEvent.info.superEvent.headline),"")}}function $(e,n){if(1&e&&(h.ic(0,"p"),h.Uc(1),h.tc(2,"changeLanguage"),h.hc()),2&e){var c=h.sc();h.Pb(1),h.Vc(h.uc(2,1,c.screeningWorkEvent.info.superEvent.description))}}function G(e,n){if(1&e&&(h.ic(0,"div",10),h.Uc(1),h.hc()),2&e){var c=h.sc();h.Pb(1),h.Vc(c.screeningWorkEvent.info.workPerformed.contentRating)}}function ee(e,n){1&e&&(h.ic(0,"div",10),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Vc(h.uc(2,1,"common.dubbing")))}function ne(e,n){1&e&&(h.ic(0,"div",10),h.Uc(1),h.tc(2,"translate"),h.hc()),2&e&&(h.Pb(1),h.Vc(h.uc(2,1,"common.subtitles")))}function ce(e,n){if(1&e&&(h.ic(0,"div",11),h.ic(1,"span",12),h.Uc(2),h.tc(3,"translate"),h.hc(),h.Uc(4),h.tc(5,"translate"),h.hc()),2&e){var c=h.sc();h.Pb(2),h.Vc(h.uc(3,3,"common.duration")),h.Pb(2),h.Xc("",c.moment.duration(c.screeningWorkEvent.info.workPerformed.duration).asMinutes(),"",h.uc(5,5,"common.date.minute")," ")}}function te(e,n){if(1&e){var c=h.jc();h.ic(0,"li",13),h.ic(1,"app-admission-performance",14),h.qc("select",(function(e){return h.Mc(c),h.sc().select.emit(e)})),h.hc(),h.hc()}if(2&e){var t=n.$implicit;h.Pb(1),h.zc("performance",t)}}J.\u0275fac=function(e){return new(e||J)},J.\u0275cmp=h.Wb({type:J,selectors:[["app-admission-performance"]],inputs:{performance:"performance"},outputs:{select:"select"},decls:28,vars:25,consts:[[1,"row","mx-0","border","boder-gray","rounded","p-3","py-md-3","text-md-center","d-md-block","align-items-center","pointer","h-100",3,"ngClass","click"],[1,"col-md-12","col-8","px-0"],[1,"mb-1","text-small","screen-name"],["class","text-overflow-ellipsis mr-2 d-inline-block d-md-block",4,"ngIf"],[1,"text-overflow-ellipsis","d-inline-block","d-md-block"],[1,"text-large"],[1,"border-0","bg-light-gray","my-2"],[1,"col-md-12","col-4","px-0","text-center"],[4,"ngIf"],["class","status mb-2",4,"ngIf"],["class","mb-2 text-small",4,"ngIf"],[1,"text-small","mb-1"],[1,"text-small"],[1,"text-overflow-ellipsis","mr-2","d-inline-block","d-md-block"],[1,"status","mb-2"],[1,"mb-2","text-small"]],template:function(e,n){1&e&&(h.ic(0,"div",0),h.qc("click",(function(){return n.select.emit(n.performance.screeningEvent)})),h.ic(1,"div",1),h.ic(2,"div",2),h.Sc(3,H,3,3,"p",3),h.tc(4,"changeLanguage"),h.ic(5,"p",4),h.Uc(6),h.tc(7,"changeLanguage"),h.hc(),h.hc(),h.ic(8,"div"),h.ic(9,"strong",5),h.Uc(10),h.hc(),h.ic(11,"span"),h.Uc(12,"-"),h.hc(),h.ic(13,"span"),h.Uc(14),h.hc(),h.hc(),h.hc(),h.dc(15,"hr",6),h.ic(16,"div",7),h.Sc(17,F,3,2,"div",8),h.Sc(18,N,3,3,"div",9),h.Sc(19,Q,3,3,"div",9),h.Sc(20,X,3,5,"div",10),h.Sc(21,B,3,3,"div",10),h.ic(22,"div",11),h.Uc(23),h.tc(24,"translate"),h.hc(),h.ic(25,"div",12),h.Uc(26),h.tc(27,"translate"),h.hc(),h.hc(),h.hc()),2&e&&(h.zc("ngClass",h.Dc(22,K,n.performance.isOpenDoor()||n.performance.isScreening(),!(n.performance.isOpenDoor()||n.performance.isScreening()))),h.Pb(3),h.zc("ngIf",h.uc(4,14,n.performance.screeningEvent.location.address)),h.Pb(3),h.Vc(h.uc(7,16,n.performance.screeningEvent.location.name)),h.Pb(4),h.Vc(n.moment(n.performance.screeningEvent.startDate).format("HH:mm")),h.Pb(4),h.Vc(n.moment(n.performance.screeningEvent.endDate).format("HH:mm")),h.Pb(3),h.zc("ngIf",n.performance.isOpenDoor()||n.performance.isScreening()),h.Pb(1),h.zc("ngIf",n.performance.isOpenDoor("before")),h.Pb(1),h.zc("ngIf",n.performance.isScreening("after")),h.Pb(1),h.zc("ngIf",!n.performance.isInfinitetock()),h.Pb(1),h.zc("ngIf",n.performance.isInfinitetock()),h.Pb(2),h.Xc("",h.uc(24,18,"common.ticketing")," ",n.performance.screeningEvent.checkInCount,""),h.Pb(3),h.Xc("",h.uc(27,20,"common.admission")," ",n.performance.screeningEvent.attendeeCount,""))},directives:[t.j,t.l],pipes:[f.a,g.c],styles:[".status[_ngcontent-%COMP%]{line-height:30px}.status[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}@media (max-width:767.98px){.text-overflow-ellipsis[_ngcontent-%COMP%]{overflow:auto;width:auto;white-space:normal}}"]});var ie=function(){function e(){_classCallCheck(this,e),this.select=new h.s,this.moment=u}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();ie.\u0275fac=function(e){return new(e||ie)},ie.\u0275cmp=h.Wb({type:ie,selectors:[["app-admission-performances"]],inputs:{screeningWorkEvent:"screeningWorkEvent"},outputs:{select:"select"},decls:17,vars:14,consts:[[1,"bg-white"],[1,"p-3"],[1,"mb-2"],[1,"font-weight-bold","text-large"],[4,"ngIf"],[1,"d-flex","align-items-center"],["class","text-small bg-dark-gray text-white py-1 px-3 mr-2",4,"ngIf"],["class","text-small ml-auto",4,"ngIf"],[1,"py-2","px-3","px-md-2","d-flex","flex-wrap"],["class","px-md-2 my-2",4,"ngFor","ngForOf"],[1,"text-small","bg-dark-gray","text-white","py-1","px-3","mr-2"],[1,"text-small","ml-auto"],[1,"mr-1"],[1,"px-md-2","my-2"],[1,"mb-3",3,"performance","select"]],template:function(e,n){1&e&&(h.ic(0,"div",0),h.ic(1,"div",1),h.ic(2,"div",2),h.ic(3,"p",3),h.Uc(4),h.tc(5,"changeLanguage"),h.hc(),h.Sc(6,Z,3,3,"p",4),h.tc(7,"changeLanguage"),h.Sc(8,$,3,3,"p",4),h.tc(9,"changeLanguage"),h.hc(),h.ic(10,"div",5),h.Sc(11,G,2,1,"div",6),h.Sc(12,ee,3,3,"div",6),h.Sc(13,ne,3,3,"div",6),h.Sc(14,ce,6,7,"div",7),h.hc(),h.hc(),h.ic(15,"ul",8),h.Sc(16,te,2,1,"li",9),h.hc(),h.hc()),2&e&&(h.Pb(4),h.Vc(h.uc(5,8,n.screeningWorkEvent.info.name)),h.Pb(2),h.zc("ngIf",n.screeningWorkEvent.info.superEvent.headline&&h.uc(7,10,n.screeningWorkEvent.info.superEvent.headline)),h.Pb(2),h.zc("ngIf",n.screeningWorkEvent.info.superEvent.description&&h.uc(9,12,n.screeningWorkEvent.info.superEvent.description)),h.Pb(3),h.zc("ngIf",null==n.screeningWorkEvent.info.workPerformed?null:n.screeningWorkEvent.info.workPerformed.contentRating),h.Pb(1),h.zc("ngIf",n.screeningWorkEvent.info.superEvent.dubLanguage),h.Pb(1),h.zc("ngIf",n.screeningWorkEvent.info.superEvent.subtitleLanguage),h.Pb(1),h.zc("ngIf",(null==n.screeningWorkEvent.info.workPerformed?null:n.screeningWorkEvent.info.workPerformed.duration)&&n.moment.duration(null==n.screeningWorkEvent.info.workPerformed?null:n.screeningWorkEvent.info.workPerformed.duration).asMinutes()>0),h.Pb(2),h.zc("ngForOf",n.screeningWorkEvent.data))},directives:[t.l,t.k,J],pipes:[f.a,g.c],styles:["[_nghost-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:20%}@media (max-width:991.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:25%}}@media (max-width:767.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%}}"]});var re=function(e,n,c,t){return new(c||(c=Promise))((function(i,r){function s(e){try{o(t.next(e))}catch(n){r(n)}}function a(e){try{o(t.throw(e))}catch(n){r(n)}}function o(e){var n;e.done?i(e.value):(n=e.value,n instanceof c?n:new c((function(e){e(n)}))).then(s,a)}o((t=t.apply(e,n||[])).next())}))},se=["datepicker"];function ae(e,n){if(1&e&&(h.ic(0,"p",16),h.Uc(1),h.tc(2,"formatDate"),h.tc(3,"async"),h.hc()),2&e){var c=h.sc();h.Pb(1),h.Vc(h.vc(2,1,h.uc(3,4,c.admission).scheduleDate,"YYYY/MM/DD (ddd)"))}}function oe(e,n){1&e&&(h.dc(0,"p",17),h.tc(1,"translate")),2&e&&h.zc("innerHTML",h.uc(1,1,"admission.schedule.notfound"),h.Nc)}function ue(e,n){if(1&e){var c=h.jc();h.ic(0,"app-admission-performances",18),h.qc("select",(function(e){return h.Mc(c),h.sc().selectSchedule(e)})),h.hc()}if(2&e){var t=n.$implicit;h.zc("screeningWorkEvent",t)}}var de=function(){return{dateInputFormat:"YYYY/MM/DD",adaptivePosition:!0,showWeekNumbers:!1}},le=function(){function e(n,c,t,i,r,s){_classCallCheck(this,e),this.store=n,this.router=c,this.localeService=t,this.admissionService=i,this.masterService=r,this.userService=s,this.moment=u}return _createClass(e,[{key:"ngOnInit",value:function(){return re(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.admission=this.store.pipe(Object(o.m)(m.a)),this.user=this.store.pipe(Object(o.m)(m.i)),this.screeningWorkEvents=[];case 1:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnDestroy",value:function(){clearTimeout(this.updateTimer)}},{key:"update",value:function(){var e=this;void 0!==this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout((function(){e.selectDate()}),6e5)}},{key:"selectDate",value:function(e){return re(this,void 0,void 0,regeneratorRuntime.mark((function n(){var c,t,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null!=e&&(this.scheduleDate=e),n.prev=1,n.next=4,this.userService.getData();case 4:if(void 0!==(c=n.sent.theater)){n.next=7;break}return n.abrupt("return",void this.router.navigate(["/error"]));case 7:return void 0!==this.scheduleDate&&null!==this.scheduleDate||(this.scheduleDate=u().toDate()),t=u(this.scheduleDate).format("YYYY-MM-DD"),this.admissionService.selectScheduleDate(t),n.next=12,this.masterService.getSchedule({superEvent:{locationBranchCodes:[c.branchCode]},startFrom:u(t).toDate(),startThrough:u(t).add(1,"day").toDate()});case 12:i=n.sent,this.screeningWorkEvents=Object(q.F)({screeningEvents:i}),this.update(),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(1),console.error(n.t0),this.router.navigate(["/error"]);case 19:case"end":return n.stop()}}),n,this,[[1,16]])})))}},{key:"selectSchedule",value:function(e){return re(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.admissionService.getScreeningEvent(e);case 3:this.router.navigate(["/admission/check"]),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.error(n.t0),this.router.navigate(["/error"]);case 9:case"end":return n.stop()}}),n,this,[[0,6]])})))}},{key:"notSpecified",value:function(){this.admissionService.delete(),this.router.navigate(["/admission/check"])}},{key:"setDatePicker",value:function(){var e=this;this.user.subscribe((function(n){e.localeService.use(n.language)})).unsubscribe()}},{key:"toggleDatepicker",value:function(){this.setDatePicker(),this.datepicker.toggle()}},{key:"onShowPicker",value:function(e){Object(q.t)(e,[this.datepicker])}}]),e}();le.\u0275fac=function(e){return new(e||le)(h.cc(o.b),h.cc(r.b),h.cc(R.d),h.cc(l.a),h.cc(l.d),h.cc(l.j))},le.\u0275cmp=h.Wb({type:le,selectors:[["app-admission-schedule"]],viewQuery:function(e,n){var c;1&e&&h.Qc(se,!0),2&e&&h.Ic(c=h.rc())&&(n.datepicker=c.first)},decls:22,vars:17,consts:[[1,"contents-width","mx-auto","px-3","py-5"],[1,"text-large","mb-4","text-center","font-weight-bold"],[1,"mb-4","text-md-center",3,"innerHTML"],[1,"mb-3"],[1,"input-group"],["type","text","placeholder","Datepicker","bsDatepicker","","readonly","",1,"form-control",3,"ngModel","bsConfig","ngModelChange","bsValueChange","click","onShown"],["datepicker","bsDatepicker"],[1,"input-group-append","pointer",3,"click"],[1,"input-group-text"],[1,"fas","fa-caret-down"],["class","text-primary text-large mb-3",4,"ngIf"],["class","mb-3",3,"innerHTML",4,"ngIf"],[1,"mb-4"],["class","mb-3",3,"screeningWorkEvent","select",4,"ngFor","ngForOf"],[1,"buttons","mx-auto","text-center"],["type","button",1,"btn","btn-primary","btn-block","py-3","mb-3",3,"click"],[1,"text-primary","text-large","mb-3"],[1,"mb-3",3,"innerHTML"],[1,"mb-3",3,"screeningWorkEvent","select"]],template:function(e,n){1&e&&(h.ic(0,"div",0),h.ic(1,"h2",1),h.Uc(2),h.tc(3,"translate"),h.hc(),h.dc(4,"p",2),h.tc(5,"translate"),h.ic(6,"div",3),h.ic(7,"div",4),h.ic(8,"input",5,6),h.qc("ngModelChange",(function(e){return n.scheduleDate=e}))("bsValueChange",(function(e){return n.selectDate(e)}))("click",(function(){return n.setDatePicker()}))("onShown",(function(e){return n.onShowPicker(e)})),h.hc(),h.ic(10,"div",7),h.qc("click",(function(){return n.toggleDatepicker()})),h.ic(11,"span",8),h.dc(12,"i",9),h.hc(),h.hc(),h.hc(),h.hc(),h.Sc(13,ae,4,6,"p",10),h.tc(14,"async"),h.Sc(15,oe,2,3,"p",11),h.ic(16,"div",12),h.Sc(17,ue,1,1,"app-admission-performances",13),h.hc(),h.ic(18,"div",14),h.ic(19,"button",15),h.qc("click",(function(){return n.notSpecified()})),h.Uc(20),h.tc(21,"translate"),h.hc(),h.hc(),h.hc()),2&e&&(h.Pb(2),h.Vc(h.uc(3,8,"admission.schedule.title")),h.Pb(2),h.zc("innerHTML",h.uc(5,10,"admission.schedule.read"),h.Nc),h.Pb(4),h.zc("ngModel",n.scheduleDate)("bsConfig",h.Bc(16,de)),h.Pb(5),h.zc("ngIf",h.uc(14,12,n.admission).scheduleDate),h.Pb(2),h.zc("ngIf",0===n.screeningWorkEvents.length),h.Pb(2),h.zc("ngForOf",n.screeningWorkEvents),h.Pb(3),h.Vc(h.uc(21,14,"admission.schedule.next")))},directives:[R.b,j.a,R.a,j.j,j.m,t.l,t.k,ie],pipes:[g.c,t.b,p.a],styles:['.condition[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.schedule-slider[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;bottom:0;height:4px;background-color:#000;opacity:.3}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%], .schedule-slider[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]{width:27px;height:27px;background-image:url(/assets/images/icon/slider_arrow.svg);background-size:27px;margin-top:-13px}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%]{right:-38px}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]{left:-38px;transform:rotate(180deg)}']});var me=[{path:"",component:a.a,canActivate:[s.a,s.c],children:[{path:"schedule",component:le},{path:"check",component:L}]}],he=function e(){_classCallCheck(this,e)};he.\u0275mod=h.ac({type:he}),he.\u0275inj=h.Zb({factory:function(e){return new(e||he)},imports:[[r.d.forChild(me)],r.d]});var ge=function e(){_classCallCheck(this,e)};ge.\u0275mod=h.ac({type:ge}),ge.\u0275inj=h.Zb({factory:function(e){return new(e||ge)},imports:[[t.c,he,i.a]]})}}]);