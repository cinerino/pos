function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"+X77":function(e,t,n){"use strict";n.r(t),t.default='<div class="contents-width mx-auto px-3 py-5">\n    <div class="mb-4">\n        <h2 class="text-large mb-4 text-center font-weight-bold">{{ \'inquiry.confirm.title\' | translate }}</h2>\n\n        <div class="mb-4 px-3 py-2 bg-white">\n            <div class="row align-items-center">\n                <p class="col-4">\n                    {{ \'common.confirmationNumber\' | translate }}</p>\n                <p class="col-8 text-large text-info font-weight-bold text-md-left text-right">\n                    {{ (order | async).order.confirmationNumber }}\n                </p>\n            </div>\n        </div>\n        <div *ngFor="let eventOrder of eventOrders" class="mb-4 bg-white p-3">\n            <div class="mb-3">\n                <div class="mb-1">\n                    <p class="font-weight-bold text-large">{{ eventOrder.event.name | changeLanguage }}</p>\n                    <p class="text-small"\n                        *ngIf="eventOrder.event.superEvent.headline && (eventOrder.event.superEvent.headline | changeLanguage)">\n                        {{ eventOrder.event.superEvent.headline | changeLanguage }}</p>\n                    <p class="text-small"\n                        *ngIf="eventOrder.event.superEvent.description && (eventOrder.event.superEvent.description | changeLanguage)">{{\n                        eventOrder.event.superEvent.description | changeLanguage }}</p>\n                </div>\n                <p class="mb-1">\n                    {{ eventOrder.event.startDate | formatDate: \'MM/DD(ddd) HH:mm\' }}-{{ eventOrder.event.endDate | formatDate: \'HH:mm\' }}\n                </p>\n                <p class="text-small mb-1">\n                    <span class="theater-name">{{ eventOrder.event.superEvent.location.name | changeLanguage }}</span>\n                    <span class="screen-name">&nbsp;/&nbsp;<span *ngIf="eventOrder.event.location.address | changeLanguage" class="mr-2">{{ eventOrder.event.location.address | changeLanguage }}</span>{{ eventOrder.event.location.name | changeLanguage }}</span>\n                    <span\n                        *ngIf="eventOrder.event.workPerformed?.duration && moment.duration(eventOrder.event.workPerformed?.duration).asMinutes() > 0">\n                        &nbsp;/&nbsp;<span\n                            class="mr-1">{{ \'common.duration\' | translate }}</span>{{ moment.duration(eventOrder.event.workPerformed?.duration).asMinutes() }}{{ \'common.date.minute\' | translate }}\n                    </span>\n                </p>\n            </div>\n            <hr class="mb-3">\n            <app-item-list [acceptedOffers]="eventOrder.data"></app-item-list>\n        </div>\n\n\n        <div class="mb-4 px-3 bg-white">\n            <div class="py-3 border-bottom border-gray">\n                <div class="row align-items-center">\n                    <p class="mb-2 mb-md-0 col-md-4">{{ \'common.customerName\' | translate }}</p>\n                    <p class="col-md-8">{{ (order | async).order.customer.familyName }}\n                        {{ (order | async).order.customer.givenName }}</p>\n                </div>\n            </div>\n            <div class="py-3 border-bottom border-gray">\n                <div class="row align-items-center">\n                    <p class="mb-2 mb-md-0 col-md-4">{{ \'common.email\' | translate }}</p>\n                    <p class="col-md-8">{{ (order | async).order.customer.email }}</p>\n                </div>\n            </div>\n            <div class="py-3">\n                <div class="row align-items-center">\n                    <p class="mb-2 mb-md-0 col-md-4">{{ \'common.telephone\' | translate }}</p>\n                    <p class="col-md-8">{{ (order | async).order.customer.telephone | libphonenumberFormat }}</p>\n                </div>\n            </div>\n            \x3c!-- <div class="py-3" *ngIf="(order | async).order.price > 0">\n                <div class="row align-items-center">\n                    <p class="mb-2 mb-md-0 col-md-4">{{ \'common.paymentMethod\' | translate }}</p>\n                    <p class="col-md-8">\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9</p>\n                </div>\n            </div> --\x3e\n        </div>\n    </div>\n\n    <div class="buttons mx-auto text-center">\n        <button *ngIf="environment.INQUIRY_PRINT"\n            [disabled]="(order | async).order.orderStatus !== orderStatus.OrderDelivered" type="button"\n            class="btn btn-primary btn-block py-3 mb-3" (click)="print()"\n            [disabled]="isLoading | async">{{ \'inquiry.confirm.next\' | translate }}</button>\n        <button *ngIf="environment.INQUIRY_CANCEL"\n            [disabled]="(order | async).order.orderStatus === orderStatus.OrderReturned" type="button"\n            class="btn btn-danger btn-block py-3 mb-3"\n            (click)="cancelConfirm()">{{ \'inquiry.confirm.cancel\' | translate }}</button>\n        <button type="button" class="btn btn-link"\n            routerLink="/inquiry/input">{{ \'inquiry.confirm.prev\' | translate }}</button>\n    </div>\n\n</div>'},"2+OO":function(e,t,n){"use strict";n.r(t),t.default=""},"2ISw":function(e,t,n){"use strict";n.r(t);var r=n("An66"),i=n("kZht"),o=n("DSWM"),a=n("1VvW"),s=n("E3Fy"),c=n("ofez"),l=n("aDqW"),u=n("wgY5"),m=n("PIN6"),p=n("cF7s"),d=n("cHUu"),f=n("mOXJ"),v=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))},h=function(e){return e&&e.__esModule?e:{default:e}},b=function(){function e(t,n,r,i,o,a,c){_classCallCheck(this,e),this.store=t,this.router=n,this.userService=r,this.utilService=i,this.orderService=o,this.reservationService=a,this.translate=c,this.moment=u,this.orderStatus=s.factory.orderStatus,this.environment=Object(m.a)()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(this.eventOrders=[],this.order=this.store.pipe(Object(c.j)(f.e)),this.user=this.store.pipe(Object(c.j)(f.i)),this.reservation=this.store.pipe(Object(c.j)(f.h)),this.isLoading=this.store.pipe(Object(c.j)(f.c)),this.error=this.store.pipe(Object(c.j)(f.b)),this.order.subscribe((function(t){if(void 0!==t.order){var n=t.order;e.eventOrders=Object(p.A)({order:n})}else e.router.navigate(["/error"])})).unsubscribe(),""!==this.environment.INQUIRY_PRINT_WAIT_TIME){var t=Number(this.environment.INQUIRY_PRINT_WAIT_TIME);this.timer=setTimeout((function(){e.router.navigate(["/inquiry/input"])}),t)}}},{key:"cancelConfirm",value:function(){var e=this;this.utilService.openConfirm({title:this.translate.instant("common.confirm"),body:this.translate.instant("inquiry.confirm.confirm.cancel"),cb:function(){return v(e,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.userService.getData();case 3:return t=e.sent,e.next=6,this.orderService.getData();case 6:if(void 0!==(n=e.sent.order)){e.next=9;break}return e.abrupt("return",void this.utilService.openAlert({title:this.translate.instant("common.error"),body:'\n                            <p class="mb-4">'.concat(this.translate.instant("inquiry.confirm.alert.cancel"),'</p>\n                                <div class="p-3 bg-light-gray select-text">\n                                <code>order undefined</code>\n                            </div>')}));case 9:return e.next=11,this.orderService.cancel({orders:[n],language:t.language});case 11:return e.next=13,this.orderService.inquiry({confirmationNumber:n.confirmationNumber,customer:{telephone:n.customer.telephone}});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0),this.utilService.openAlert({title:this.translate.instant("common.error"),body:'\n                        <p class="mb-4">'.concat(this.translate.instant("inquiry.confirm.alert.cancel"),'</p>\n                            <div class="p-3 bg-light-gray select-text">\n                            <code>').concat(JSON.stringify(e.t0),"</code>\n                        </div>")});case 18:case"end":return e.stop()}}),e,this,[[0,15]])})))}})}},{key:"print",value:function(){return v(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,i,o,a,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u().format("YYYYMMDD"),n=u(t).add(this.environment.INQUIRY_PRINT_EXPIRED_VALUE,this.environment.INQUIRY_PRINT_EXPIRED_UNIT).format("YYYYMMDD"),void 0!==this.eventOrders.find((function(e){return u(e.event.startDate).format("YYYYMMDD")<n}))){e.next=32;break}return void 0!==this.timer&&clearTimeout(this.timer),e.prev=3,e.next=6,this.orderService.getData();case 6:return r=e.sent,e.next=9,this.userService.getData();case 9:if(i=e.sent,void 0!==r.order&&void 0!==i.pos&&void 0!==i.printer){e.next=12;break}return e.abrupt("return",void this.router.navigate(["/error"]));case 12:return o=r.order.acceptedOffers.map((function(e){return e.itemOffered.typeOf!==s.factory.chevre.reservationType.EventReservation?"":e.itemOffered.reservationNumber})),e.next=15,this.reservationService.search({typeOf:s.factory.chevre.reservationType.EventReservation,reservationNumbers:o});case 15:return e.next=17,this.reservationService.getData();case 17:if(e.t0=function(e){return e.checkedIn},e.t1=e.sent.reservations.filter(e.t0).length,!(e.t1>0)){e.next=21;break}return e.abrupt("return",void this.utilService.openAlert({title:this.translate.instant("common.error"),body:this.translate.instant("inquiry.confirm.alert.doubleTicketing")}));case 21:return a=[r.order],c=i.pos,l=i.printer,e.next=24,this.orderService.print({orders:a,pos:c,printer:l});case 24:this.router.navigate(["/inquiry/print"]),e.next=30;break;case 27:e.prev=27,e.t2=e.catch(3),console.error(e.t2),this.utilService.openAlert({title:this.translate.instant("common.error"),body:'\n                <p class="mb-4">'.concat(this.translate.instant("inquiry.confirm.alert.print"),'</p>\n                    <div class="p-3 bg-light-gray select-text">\n                    <code>').concat(e.t2,"</code>\n                </div>")});case 30:e.next=33;break;case 32:this.utilService.openAlert({title:this.translate.instant("common.error"),body:this.translate.instant("inquiry.confirm.alert.printExpired")});case 33:case"end":return e.stop()}}),e,this,[[3,27]])})))}}]),e}();b.ctorParameters=function(){return[{type:c.b},{type:a.b},{type:d.j},{type:d.k},{type:d.e},{type:d.h},{type:l.c}]},b=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([Object(i.n)({selector:"app-inquiry-confirm",template:h(n("+X77")).default,styles:[h(n("2+OO")).default]}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[c.b,a.b,d.j,d.k,d.e,d.h,l.c])],b);var y=n("3kIJ"),g=n("WxsR"),x=function(e){return e&&e.__esModule?e:{default:e}},I=function(){function e(t,n,r,i,o,a){_classCallCheck(this,e),this.store=t,this.formBuilder=n,this.utilService=r,this.orderService=i,this.router=o,this.translate=a,this.environment=Object(m.a)()}return _createClass(e,[{key:"ngOnInit",value:function(){this.isLoading=this.store.pipe(Object(c.j)(f.c)),this.createInquiryForm()}},{key:"createInquiryForm",value:function(){this.inquiryForm=this.formBuilder.group({confirmationNumber:["",[y.g.required,y.g.pattern(/^[0-9]+$/)]],telephone:["",[y.g.required,y.g.maxLength(15),y.g.minLength(9),function(e){var t=e.root.get("telephone");if(null!==t){if(""===t.value)return null;var n=new RegExp(/^\+/).test(t.value)?g.c(t.value):g.c(t.value,"JP");if(void 0===n.phone)return{telephone:!0};if(!g.b(n))return{telephone:!0}}return null}]]})}},{key:"onSubmit",value:function(){return e=this,t=void 0,n=void 0,r=regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(this.inquiryForm.controls).forEach((function(e){r.inquiryForm.controls[e].markAsTouched()})),this.inquiryForm.controls.confirmationNumber.setValue(document.getElementById("confirmationNumber").value),this.inquiryForm.controls.telephone.setValue(document.getElementById("telephone").value),this.inquiryForm.invalid){e.next=11;break}return e.prev=1,t=this.inquiryForm.controls.confirmationNumber.value,n=this.inquiryForm.controls.telephone.value,e.next=5,this.orderService.inquiry({confirmationNumber:t,customer:{telephone:n}});case 5:this.router.navigate(["/inquiry/confirm"]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.utilService.openAlert({title:this.translate.instant("common.error"),body:this.translate.instant("inquiry.input.validation")});case 11:case"end":return e.stop()}}),e,this,[[1,8]])})),new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r}},{key:"changeConfirmationNumber",value:function(e){this.inquiryForm.controls.confirmationNumber.setValue(e)}},{key:"changeTelephone",value:function(e){this.inquiryForm.controls.telephone.setValue(e)}}]),e}();I.ctorParameters=function(){return[{type:c.b},{type:y.a},{type:d.k},{type:d.e},{type:a.b},{type:l.c}]},I=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([Object(i.n)({selector:"app-inquiry-input",template:x(n("uWiq")).default,styles:[x(n("vcNb")).default]}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[c.b,y.a,d.k,d.e,a.b,l.c])],I);var O=function(e){return e&&e.__esModule?e:{default:e}},q=function(){function e(t){_classCallCheck(this,e),this.router=t,this.environment=Object(m.a)()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;if(""!==this.environment.INQUIRY_PRINT_SUCCESS_WAIT_TIME){var t=Number(this.environment.INQUIRY_PRINT_SUCCESS_WAIT_TIME);this.timer=setTimeout((function(){e.router.navigate(["/inquiry/input"])}),t)}}},{key:"ngOnDestroy",value:function(){void 0!==this.timer&&clearTimeout(this.timer)}}]),e}();q.ctorParameters=function(){return[{type:a.b}]},q=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([Object(i.n)({selector:"app-inquiry-print",template:O(n("w++k")).default,styles:[O(n("LlIr")).default]}),function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}("design:paramtypes",[a.b])],q);var N=n("unpb"),k=[{path:"",component:n("RRjC").a,canActivate:[N.a,N.c],children:[{path:"input",component:I},{path:"confirm",component:b},{path:"print",component:q}]}],R=function e(){_classCallCheck(this,e)};R=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([Object(i.I)({imports:[a.c.forChild(k)],exports:[a.c]})],R),n.d(t,"InquiryModule",(function(){return w}));var w=function e(){_classCallCheck(this,e)};w=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}([Object(i.I)({declarations:[I,b,q],imports:[r.b,R,o.a]})],w)},LlIr:function(e,t,n){"use strict";n.r(t),t.default=""},uWiq:function(e,t,n){"use strict";n.r(t),t.default='<div class="contents-width mx-auto px-3 py-5">\n    <form [formGroup]="inquiryForm">\n        <div class="mb-4">\n            <h2 class="text-large mb-4 text-center font-weight-bold">{{ \'inquiry.input.title\' | translate }}</h2>\n            <p class="mb-4 text-md-center" [innerHTML]="\'inquiry.input.read\' | translate"></p>\n\n            <div class="inquiry-form mx-auto p-3 bg-white">\n\n                <div class="form-group">\n                    <label class="mb-2" for="">{{ \'common.confirmationNumber\' | translate }}</label>\n                    <app-numeric-keypad *ngIf="environment.INQUIRY_INPUT_KEYPAD" inputType="number"\n                        [inputValue]="inquiryForm.controls.confirmationNumber.value"\n                        (change)="changeConfirmationNumber($event)">\n                        <input type="text" class="form-control" formControlName="confirmationNumber"\n                            id="confirmationNumber" [placeholder]="\'form.placeholder.confirmationNumber\' | translate"\n                            readonly>\n                    </app-numeric-keypad>\n                    <input *ngIf="!environment.INQUIRY_INPUT_KEYPAD" type="text" class="form-control"\n                        formControlName="confirmationNumber" id="confirmationNumber"\n                        [placeholder]="\'form.placeholder.confirmationNumber\' | translate">\n                    <div *ngIf="inquiryForm.controls.confirmationNumber.invalid && inquiryForm.controls.confirmationNumber.touched"\n                        class="mt-2">\n                        <p *ngIf="inquiryForm.controls.confirmationNumber.errors.required" class="text-danger">\n                            {{ \'form.validation.required\' | translate }}</p>\n                        <p *ngIf="inquiryForm.controls.confirmationNumber.errors.pattern" class="text-danger">\n                            {{ \'form.validation.number\' | translate }}</p>\n                    </div>\n                </div>\n                <div class="form-group mb-0">\n                    <label class="mb-2" for="">{{ \'common.telephone\' | translate }}</label>\n                    <app-numeric-keypad *ngIf="environment.INQUIRY_INPUT_KEYPAD" inputType="telephone"\n                        [inputValue]="inquiryForm.controls.telephone.value" (change)="changeTelephone($event)">\n                        <input type="password" class="form-control" formControlName="telephone" id="telephone"\n                            [placeholder]="\'form.placeholder.telephone\' | translate" readonly>\n                    </app-numeric-keypad>\n                    <input *ngIf="!environment.INQUIRY_INPUT_KEYPAD" type="password" class="form-control"\n                        formControlName="telephone" id="telephone"\n                        [placeholder]="\'form.placeholder.telephone\' | translate">\n                    <div *ngIf="inquiryForm.controls.telephone.invalid && inquiryForm.controls.telephone.touched"\n                        class="mt-2">\n                        <p *ngIf="inquiryForm.controls.telephone.errors.required" class="text-danger">\n                            {{ \'form.validation.required\' | translate }}</p>\n                        <p *ngIf="inquiryForm.controls.telephone.errors.minlength" class="text-danger">\n                            {{ \'form.validation.minlength\' | translate: { value: inquiryForm.controls.telephone.errors.minlength.requiredLength } }}\n                        </p>\n                        <p *ngIf="inquiryForm.controls.telephone.errors.maxlength" class="text-danger">\n                            {{ \'form.validation.maxlength\' | translate: { value: inquiryForm.controls.telephone.errors.maxlength.requiredLength } }}\n                        </p>\n                        <p *ngIf="inquiryForm.controls.telephone.errors.telephone" class="text-danger">\n                            {{ \'form.validation.telephone\' | translate }}</p>\n                    </div>\n                </div>\n\n            </div>\n        </div>\n\n        <div class="buttons mx-auto text-center">\n            <button type="submit" [disabled]="isLoading | async" class="btn btn-primary btn-block py-3 mb-3"\n                (click)="onSubmit()">{{ \'inquiry.input.next\' | translate }}</button>\n            <button type="button" class="btn btn-link"\n                routerLink="/purchase/root">{{ \'inquiry.input.prev\' | translate }}</button>\n        </div>\n    </form>\n</div>'},vcNb:function(e,t,n){"use strict";n.r(t),t.default=".inquiry-form {\n  max-width: 500px;\n}"},"w++k":function(e,t,n){"use strict";n.r(t),t.default='<div class="contents-width mx-auto px-3 py-5">\n    <div class="mb-4">\n        <h2 class="text-large mb-4 text-center font-weight-bold">{{ \'inquiry.print.title\' | translate }}</h2>\n        <p class="mb-4 text-md-center" [innerHTML]="\'inquiry.print.read\' | translate"></p>\n    </div>\n\n    <div class="buttons mx-auto text-center">\n        <button type="button" class="btn btn-primary btn-block py-3" routerLink="/inquiry/input">\n            {{ \'inquiry.print.prev\' | translate }}\n        </button>\n    </div>\n</div>'}}]);