(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{dzKq:function(e,n,t){"use strict";t.r(n),t.d(n,"AdmissionModule",(function(){return ge}));var c=t("2kYt"),i=t("DSWM"),s=t("sEIs"),o=t("unpb"),a=t("RRjC"),r=t("sN6X"),d=t("wgY5"),l=t("PIN6"),u=t("cHUu"),m=t("mOXJ"),f=t("EM62"),g=t("s2Ay"),p=t("/Ez/"),v=t("OSFB"),h=t("NSn/"),w=function(e,n,t,c){return new(t||(t=Promise))((function(i,s){function o(e){try{r(c.next(e))}catch(n){s(n)}}function a(e){try{r(c.throw(e))}catch(n){s(n)}}function r(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,a)}r((c=c.apply(e,n||[])).next())}))};function b(e,n){1&e&&(f.Pc(0,"div",17),f.Ad(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Bd(f.ad(2,1,"admission.check.success")))}function O(e,n){1&e&&(f.Pc(0,"div",17),f.Ad(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Bd(f.ad(2,1,"admission.check.reEntry")))}function y(e,n){if(1&e&&(f.Pc(0,"p"),f.Pc(1,"strong",16),f.Ad(2),f.Zc(3,"translate"),f.Oc(),f.Ad(4),f.Zc(5,"async"),f.Oc()),2&e){const e=f.Yc(4);var t;f.wc(2),f.Bd(f.ad(3,2,"common.seat")),f.wc(2),f.Cd(" ",null==(t=f.ad(5,4,e.admission))?null:t.qrcodeToken.availableReservation.reservedTicket.ticketedSeat.seatNumber," ")}}const P=function(e){return{"background-color":e}};function k(e,n){if(1&e&&(f.Pc(0,"div",13),f.Kc(1,"div",14),f.Zc(2,"async"),f.yd(3,b,3,3,"div",15),f.Zc(4,"async"),f.yd(5,O,3,3,"div",15),f.Zc(6,"async"),f.yd(7,y,6,6,"p",9),f.Zc(8,"async"),f.Pc(9,"p"),f.Pc(10,"strong",16),f.Ad(11),f.Zc(12,"translate"),f.Oc(),f.Ad(13),f.Zc(14,"changeLanguage"),f.Zc(15,"async"),f.Oc(),f.Pc(16,"p"),f.Pc(17,"strong",16),f.Ad(18),f.Zc(19,"translate"),f.Oc(),f.Ad(20),f.Zc(21,"async"),f.Oc(),f.Oc()),2&e){const e=f.Yc(3);var t;const n=f.id(26,P,null==(t=f.ad(2,8,e.admission))?null:t.qrcodeToken.availableReservation.reservedTicket.ticketType.color);var c;const r=0===(null==(c=f.ad(4,10,e.admission))?null:c.qrcodeToken.checkTokenActions.length);var i;const d=(null==(i=f.ad(6,12,e.admission))?null:i.qrcodeToken.checkTokenActions.length)>0;var s;const l=null==(s=f.ad(8,14,e.admission))?null:s.qrcodeToken.availableReservation.reservedTicket.ticketedSeat;var o,a;f.wc(1),f.fd("ngStyle",n),f.wc(2),f.fd("ngIf",r),f.wc(2),f.fd("ngIf",d),f.wc(2),f.fd("ngIf",l),f.wc(4),f.Bd(f.ad(12,16,"common.ticket")),f.wc(2),f.Cd(" ",f.ad(14,18,null==(o=f.ad(15,20,e.admission))?null:o.qrcodeToken.availableReservation.reservedTicket.ticketType.name)," "),f.wc(5),f.Bd(f.ad(19,22,"admission.check.entryCount")),f.wc(2),f.Cd(" ",null==(a=f.ad(21,24,e.admission))?null:a.qrcodeToken.checkTokenActions.length," ")}}function x(e,n){if(1&e&&(f.Pc(0,"p"),f.Ad(1),f.Zc(2,"translate"),f.Kc(3,"br"),f.Pc(4,"strong"),f.Ad(5),f.Zc(6,"async"),f.Oc(),f.Oc()),2&e){const e=f.Yc(4);var t;f.wc(1),f.Cd(" ",f.ad(2,2,"admission.check.alert.event"),""),f.wc(4),f.Bd(null==(t=f.ad(6,4,e.admission))?null:t.qrcodeToken.statusCode)}}function E(e,n){if(1&e&&(f.Pc(0,"p"),f.Ad(1),f.Zc(2,"translate"),f.Kc(3,"br"),f.Pc(4,"strong"),f.Ad(5),f.Zc(6,"async"),f.Oc(),f.Oc()),2&e){const e=f.Yc(4);var t;f.wc(1),f.Cd(" ",f.ad(2,2,"admission.check.alert.qrcode"),""),f.wc(4),f.Bd(null==(t=f.ad(6,4,e.admission))?null:t.qrcodeToken.statusCode)}}function C(e,n){if(1&e&&(f.Pc(0,"div",18),f.Pc(1,"div",17),f.Ad(2),f.Zc(3,"translate"),f.Oc(),f.yd(4,x,7,6,"p",9),f.Zc(5,"async"),f.yd(6,E,7,6,"p",9),f.Zc(7,"async"),f.Oc()),2&e){const e=f.Yc(3);var t;const n=200===(null==(t=f.ad(5,5,e.admission))?null:t.qrcodeToken.statusCode);var c;const i=200!==(null==(c=f.ad(7,7,e.admission))?null:c.qrcodeToken.statusCode);f.wc(2),f.Bd(f.ad(3,3,"admission.check.danger")),f.wc(2),f.fd("ngIf",n),f.wc(2),f.fd("ngIf",i)}}function Z(e,n){if(1&e&&(f.Pc(0,"div"),f.yd(1,k,22,28,"div",11),f.Zc(2,"async"),f.yd(3,C,8,9,"div",12),f.Zc(4,"async"),f.Oc()),2&e){const e=f.Yc(2);var t;const n=null==(t=f.ad(2,2,e.admission))?null:t.qrcodeToken.availableReservation;var c;const i=!(null!=(c=f.ad(4,4,e.admission))&&c.qrcodeToken.availableReservation);f.wc(1),f.fd("ngIf",n),f.wc(2),f.fd("ngIf",i)}}function A(e,n){1&e&&(f.Pc(0,"div",19),f.Pc(1,"div",20),f.Ad(2),f.Zc(3,"translate"),f.Oc(),f.Pc(4,"p"),f.Ad(5),f.Zc(6,"translate"),f.Oc(),f.Oc()),2&e&&(f.wc(2),f.Bd(f.ad(3,2,"admission.check.waiting")),f.wc(3),f.Bd(f.ad(6,4,"admission.check.alert.waiting")))}function D(e,n){if(1&e&&(f.Pc(0,"div",8),f.yd(1,Z,5,6,"div",9),f.Zc(2,"async"),f.yd(3,A,7,6,"div",10),f.Zc(4,"async"),f.Oc()),2&e){const e=f.Yc();var t;const n=null==(t=f.ad(2,2,e.admission))?null:t.qrcodeToken;var c;const i=!(null!=(c=f.ad(4,4,e.admission))&&c.qrcodeToken);f.wc(1),f.fd("ngIf",n),f.wc(2),f.fd("ngIf",i)}}function I(e,n){if(1&e&&(f.Pc(0,"div",21),f.Kc(1,"app-item-event",22),f.Zc(2,"async"),f.Pc(3,"div",23),f.Pc(4,"div"),f.Pc(5,"p",24),f.Pc(6,"strong",16),f.Ad(7),f.Zc(8,"translate"),f.Oc(),f.Ad(9),f.Zc(10,"formatDate"),f.Zc(11,"async"),f.Oc(),f.Pc(12,"p"),f.Pc(13,"strong",16),f.Ad(14),f.Zc(15,"translate"),f.Oc(),f.Ad(16),f.Zc(17,"formatDate"),f.Zc(18,"async"),f.Zc(19,"formatDate"),f.Zc(20,"async"),f.Oc(),f.Pc(21,"p",24),f.Pc(22,"strong",16),f.Ad(23),f.Zc(24,"translate"),f.Oc(),f.Ad(25),f.Zc(26,"async"),f.Zc(27,"async"),f.Oc(),f.Pc(28,"p"),f.Pc(29,"strong",16),f.Ad(30),f.Zc(31,"translate"),f.Oc(),f.Ad(32),f.Zc(33,"async"),f.Oc(),f.Oc(),f.Oc(),f.Oc()),2&e){const e=f.Yc();var t;const n=null==(t=f.ad(2,10,e.admission))?null:t.screeningEvent;var c,i,s=null,o=null;f.wc(1),f.fd("screeningEvent",n),f.wc(6),f.Bd(f.ad(8,12,"common.doorTime")),f.wc(2),f.Cd(" ",f.bd(10,14,null==(c=f.ad(11,17,e.admission))?null:c.screeningEvent.doorTime,"MM/DD (ddd) HH:mm")," "),f.wc(5),f.Bd(f.ad(15,19,"common.startDate")),f.wc(2),f.Dd(" ",f.bd(17,21,null==(s=f.ad(18,24,e.admission))?null:s.screeningEvent.startDate,"MM/DD (ddd) HH:mm")," - ",f.bd(19,26,null==(s=f.ad(20,29,e.admission))?null:s.screeningEvent.endDate,"HH:mm")," "),f.wc(7),f.Bd(f.ad(24,31,"common.reservation")),f.wc(2),f.Cd(" ",(null==(o=f.ad(26,33,e.admission))?null:o.screeningEvent.maximumAttendeeCapacity)-(null==(o=f.ad(27,35,e.admission))?null:o.screeningEvent.remainingAttendeeCapacity)," "),f.wc(5),f.Bd(f.ad(31,37,"common.admission")),f.wc(2),f.Cd(" ",null==(i=f.ad(33,39,e.admission))?null:i.screeningEvent.attendeeCount," ")}}class S{constructor(e,n,t,c,i){this.store=e,this.actionService=n,this.utilService=t,this.qrcodeService=c,this.translate=i,this.moment=d,this.environment=Object(l.a)()}ngOnInit(){this.inputCode="",this.isLoading=this.store.pipe(Object(r.m)(m.c)),this.admission=this.store.pipe(Object(r.m)(m.a)),this.actionService.admission.initializeQrcodeToken()}ngOnDestroy(){clearInterval(this.updateLoop)}handleKeyboardEvent(e){"Enter"===e.key&&this.inputCode.length>0?(this.check(this.inputCode),this.inputCode=""):"Escape"!==e.key&&(this.inputCode+=e.key)}check(e){return w(this,void 0,void 0,(function*(){try{yield this.actionService.admission.checkQrcodeToken(e)}catch(n){console.error(n),this.utilService.openAlert({title:this.translate.instant("common.error"),body:this.translate.instant("admission.check.alert.check")})}}))}openQRCodeReader(){this.qrcodeService.openQRCodeReader({cb:e=>w(this,void 0,void 0,(function*(){yield this.check(e)}))})}update(){clearInterval(this.updateLoop),this.updateLoop=setInterval(()=>w(this,void 0,void 0,(function*(){const{screeningEvent:e}=yield this.actionService.admission.getData();void 0!==e&&(yield this.actionService.admission.getScreeningEvent(e))})),6e5)}}S.\u0275fac=function(e){return new(e||S)(f.Jc(r.b),f.Jc(u.a),f.Jc(u.f),f.Jc(u.e),f.Jc(g.d))},S.\u0275cmp=f.Dc({type:S,selectors:[["app-admission-check"]],hostBindings:function(e,n){1&e&&f.Wc("keypress",(function(e){return n.handleKeyboardEvent(e)}),!1,f.qd)},decls:14,vars:12,consts:[[1,"contents-width","mx-auto","px-3","pt-4"],[1,"buttons","mx-auto","text-center","mb-4"],["type","button",1,"btn","btn-success","btn-block","py-3",3,"click"],["class","mb-4",4,"ngIf"],[1,"contents-width","mx-auto","px-3","pb-5"],["class","mb-4 bg-white",4,"ngIf"],[1,"buttons","mx-auto","text-center"],["type","button","routerLink","/admission/schedule",1,"btn","btn-outline-primary","btn-block","py-3"],[1,"mb-4"],[4,"ngIf"],["class","p-4 bg-dark text-white text-center",4,"ngIf"],["class","position-relative p-4 bg-success text-white text-center",4,"ngIf"],["class","p-4 bg-danger text-white text-center",4,"ngIf"],[1,"position-relative","p-4","bg-success","text-white","text-center"],[1,"color","rounded","border","border-white",3,"ngStyle"],["class","flash-text text-xx-large font-weight-bold mb-2",4,"ngIf"],[1,"mr-2"],[1,"flash-text","text-xx-large","font-weight-bold","mb-2"],[1,"p-4","bg-danger","text-white","text-center"],[1,"p-4","bg-dark","text-white","text-center"],[1,"text-xx-large","font-weight-bold","mb-2"],[1,"mb-4","bg-white"],[3,"screeningEvent"],[1,"p-3"],[1,"mr-3"]],template:function(e,n){if(1&e&&(f.Pc(0,"div",0),f.Pc(1,"div",1),f.Pc(2,"button",2),f.Wc("click",(function(){return n.openQRCodeReader()})),f.Ad(3),f.Zc(4,"translate"),f.Oc(),f.Oc(),f.Oc(),f.yd(5,D,5,6,"div",3),f.Zc(6,"async"),f.Pc(7,"div",4),f.yd(8,I,34,41,"div",5),f.Zc(9,"async"),f.Pc(10,"div",6),f.Pc(11,"button",7),f.Ad(12),f.Zc(13,"translate"),f.Oc(),f.Oc(),f.Oc()),2&e){var t;const e=null==(t=f.ad(9,8,n.admission))?null:t.screeningEvent;f.wc(3),f.Bd(f.ad(4,4,"admission.check.camera.start")),f.wc(2),f.fd("ngIf",!f.ad(6,6,n.isLoading)),f.wc(3),f.fd("ngIf",e),f.wc(4),f.Bd(f.ad(13,10,"admission.schedule.prev"))}},directives:[c.l,s.c,c.m,p.a],pipes:[g.c,c.b,v.a,h.a],styles:[".video-area[_ngcontent-%COMP%]{height:25vh;overflow:hidden}.flash-text[_ngcontent-%COMP%]{-webkit-animation-duration:3s;animation-duration:3s;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:flash-text;animation-name:flash-text}.color[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem;width:1.5rem;height:1.5rem}@-webkit-keyframes flash-text{0%,20%,40%,60%,80%,to{color:#fff}10%,30%,50%,70%,90%{color:transparent}}@keyframes flash-text{0%,20%,40%,60%,80%,to{color:#fff}10%,30%,50%,70%,90%{color:transparent}}"]});var M=t("QN9p"),T=t("x8Mb"),Y=t("nIj0"),_=t("ddJ1");function B(e,n){if(1&e&&(f.Pc(0,"p",15),f.Ad(1),f.Zc(2,"changeLanguage"),f.Oc()),2&e){const e=f.Yc(2);f.wc(1),f.Cd(" ",f.ad(2,1,e.performance.screeningEvent.location.address),"")}}function G(e,n){if(1&e&&(f.Pc(0,"div",12),f.yd(1,B,3,3,"p",13),f.Zc(2,"changeLanguage"),f.Pc(3,"p",14),f.Ad(4),f.Zc(5,"changeLanguage"),f.Oc(),f.Oc()),2&e){const e=f.Yc();f.wc(1),f.fd("ngIf",f.ad(2,2,e.performance.screeningEvent.location.address)),f.wc(3),f.Bd(f.ad(5,4,e.performance.screeningEvent.location.name))}}function L(e,n){if(1&e&&(f.Pc(0,"div",16),f.Pc(1,"p",14),f.Ad(2),f.Zc(3,"changeLanguage"),f.Oc(),f.Oc()),2&e){const e=f.Yc();f.wc(2),f.Cd(" ",f.ad(3,1,e.performance.screeningEvent.name),"")}}function H(e,n){1&e&&(f.Pc(0,"div",17),f.Ad(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Cd(" ",f.ad(2,1,"admission.schedule.status.opening"),""))}function R(e,n){1&e&&(f.Pc(0,"div",17),f.Ad(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Cd(" ",f.ad(2,1,"admission.schedule.status.nowShowing"),""))}function q(e,n){if(1&e&&(f.Pc(0,"div"),f.yd(1,H,3,3,"div",8),f.yd(2,R,3,3,"div",8),f.Oc()),2&e){const e=f.Yc();f.wc(1),f.fd("ngIf",e.performance.isOpenDoor()),f.wc(1),f.fd("ngIf",e.performance.isScreening())}}function j(e,n){1&e&&(f.Pc(0,"div",17),f.Ad(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Cd(" ",f.ad(2,1,"admission.schedule.status.beforeOpening"),""))}function F(e,n){1&e&&(f.Pc(0,"div",17),f.Ad(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Cd(" ",f.ad(2,1,"admission.schedule.status.filmCompletion"),""))}function J(e,n){if(1&e&&(f.Pc(0,"div",18),f.Ad(1),f.Zc(2,"translate"),f.Oc()),2&e){const e=f.Yc();f.wc(1),f.Ed(" ",f.ad(2,3,"common.seat")," ",e.performance.screeningEvent.remainingAttendeeCapacity," / ",e.performance.screeningEvent.maximumAttendeeCapacity," ")}}function K(e,n){1&e&&(f.Pc(0,"div",18),f.Ad(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Cd(" ",f.ad(2,1,"admission.schedule.infiniteStock"),""))}const U=function(e,n){return{"bg-white":e,"bg-dark-gray text-light-gray":n}};class W{constructor(){this.select=new f.w,this.moment=d,this.environment=Object(l.a)()}ngOnInit(){}}function Q(e,n){if(1&e&&(f.Pc(0,"p"),f.Ad(1),f.Zc(2,"changeLanguage"),f.Oc()),2&e){const e=f.Yc(2);f.wc(1),f.Cd(" ",f.ad(2,1,e.screeningEventsGroup.info.superEvent.headline),"")}}function N(e,n){if(1&e&&(f.Pc(0,"p"),f.Ad(1),f.Zc(2,"changeLanguage"),f.Oc()),2&e){const e=f.Yc(2);f.wc(1),f.Bd(f.ad(2,1,e.screeningEventsGroup.info.superEvent.description))}}function z(e,n){if(1&e&&(f.Pc(0,"div",12),f.Ad(1),f.Oc()),2&e){const e=f.Yc(2);f.wc(1),f.Bd(null==e.screeningEventsGroup.info.workPerformed?null:e.screeningEventsGroup.info.workPerformed.contentRating)}}function X(e,n){1&e&&(f.Pc(0,"div",12),f.Ad(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Bd(f.ad(2,1,"common.dubbing")))}function $(e,n){1&e&&(f.Pc(0,"div",12),f.Ad(1),f.Zc(2,"translate"),f.Oc()),2&e&&(f.wc(1),f.Bd(f.ad(2,1,"common.subtitles")))}function V(e,n){if(1&e&&(f.Pc(0,"div",12),f.Ad(1),f.Oc()),2&e){const e=n.$implicit;f.wc(1),f.Bd(e.name)}}function ee(e,n){if(1&e&&(f.Pc(0,"div",13),f.Pc(1,"span",14),f.Ad(2),f.Zc(3,"translate"),f.Oc(),f.Ad(4),f.Zc(5,"translate"),f.Oc()),2&e){const e=f.Yc(2);f.wc(2),f.Bd(f.ad(3,3,"common.duration")),f.wc(2),f.Dd("",e.moment.duration(null==e.screeningEventsGroup.info.workPerformed?null:e.screeningEventsGroup.info.workPerformed.duration).asMinutes(),"",f.ad(5,5,"common.date.minute")," ")}}function ne(e,n){if(1&e&&(f.Pc(0,"div",4),f.Pc(1,"div",5),f.Pc(2,"p",6),f.Ad(3),f.Zc(4,"changeLanguage"),f.Oc(),f.yd(5,Q,3,3,"p",7),f.Zc(6,"changeLanguage"),f.yd(7,N,3,3,"p",7),f.Zc(8,"changeLanguage"),f.Oc(),f.Pc(9,"div",8),f.yd(10,z,2,1,"div",9),f.yd(11,X,3,3,"div",9),f.yd(12,$,3,3,"div",9),f.yd(13,V,2,1,"div",10),f.yd(14,ee,6,7,"div",11),f.Oc(),f.Oc()),2&e){const e=f.Yc();f.wc(3),f.Bd(f.ad(4,8,e.screeningEventsGroup.info.name)),f.wc(2),f.fd("ngIf",e.screeningEventsGroup.info.superEvent.headline&&f.ad(6,10,e.screeningEventsGroup.info.superEvent.headline)),f.wc(2),f.fd("ngIf",e.screeningEventsGroup.info.superEvent.description&&f.ad(8,12,e.screeningEventsGroup.info.superEvent.description)),f.wc(3),f.fd("ngIf",null==e.screeningEventsGroup.info.workPerformed?null:e.screeningEventsGroup.info.workPerformed.contentRating),f.wc(1),f.fd("ngIf",e.screeningEventsGroup.info.superEvent.dubLanguage),f.wc(1),f.fd("ngIf",e.screeningEventsGroup.info.superEvent.subtitleLanguage),f.wc(1),f.fd("ngForOf",e.screeningEventsGroup.info.superEvent.videoFormat),f.wc(1),f.fd("ngIf",(null==e.screeningEventsGroup.info.workPerformed?null:e.screeningEventsGroup.info.workPerformed.duration)&&e.moment.duration(null==e.screeningEventsGroup.info.workPerformed?null:e.screeningEventsGroup.info.workPerformed.duration).asMinutes()>0)}}function te(e,n){if(1&e&&(f.Pc(0,"div",4),f.Pc(1,"p",6),f.Ad(2),f.Zc(3,"changeLanguage"),f.Oc(),f.Oc()),2&e){const e=f.Yc();f.wc(2),f.Bd(f.ad(3,1,e.screeningEventsGroup.info.location.name))}}function ce(e,n){if(1&e){const e=f.Qc();f.Pc(0,"li",15),f.Pc(1,"app-admission-performance",16),f.Wc("select",(function(n){f.sd(e);return f.Yc().select.emit(n)})),f.Oc(),f.Oc()}if(2&e){const e=n.$implicit;f.wc(1),f.fd("performance",e)}}W.\u0275fac=function(e){return new(e||W)},W.\u0275cmp=f.Dc({type:W,selectors:[["app-admission-performance"]],inputs:{performance:"performance"},outputs:{select:"select"},decls:24,vars:21,consts:[[1,"row","mx-0","border","boder-gray","rounded","p-3","py-md-3","text-md-center","d-md-block","align-items-center","pointer","h-100",3,"ngClass","click"],[1,"col-md-12","col-8","px-0"],["class","mb-1 text-small screen-name",4,"ngIf"],["class","mb-1 text-small",4,"ngIf"],[1,"text-large"],[1,"border-0","bg-light-gray","my-2"],[1,"col-md-12","col-4","px-0","text-center"],[4,"ngIf"],["class","status mb-2",4,"ngIf"],["class","mb-2 text-small",4,"ngIf"],[1,"text-small","mb-1"],[1,"text-small"],[1,"mb-1","text-small","screen-name"],["class","text-overflow-ellipsis mr-2 d-inline-block d-md-block",4,"ngIf"],[1,"text-overflow-ellipsis","d-inline-block","d-md-block"],[1,"text-overflow-ellipsis","mr-2","d-inline-block","d-md-block"],[1,"mb-1","text-small"],[1,"status","mb-2"],[1,"mb-2","text-small"]],template:function(e,n){1&e&&(f.Pc(0,"div",0),f.Wc("click",(function(){return n.select.emit(n.performance.screeningEvent)})),f.Pc(1,"div",1),f.yd(2,G,6,6,"div",2),f.yd(3,L,4,3,"div",3),f.Pc(4,"div"),f.Pc(5,"strong",4),f.Ad(6),f.Oc(),f.Pc(7,"span"),f.Ad(8,"-"),f.Oc(),f.Pc(9,"span"),f.Ad(10),f.Oc(),f.Oc(),f.Oc(),f.Kc(11,"hr",5),f.Pc(12,"div",6),f.yd(13,q,3,2,"div",7),f.yd(14,j,3,3,"div",8),f.yd(15,F,3,3,"div",8),f.yd(16,J,3,5,"div",9),f.yd(17,K,3,3,"div",9),f.Pc(18,"div",10),f.Ad(19),f.Zc(20,"translate"),f.Oc(),f.Pc(21,"div",11),f.Ad(22),f.Zc(23,"translate"),f.Oc(),f.Oc(),f.Oc()),2&e&&(f.fd("ngClass",f.jd(18,U,n.performance.isOpenDoor()||n.performance.isScreening(),!(n.performance.isOpenDoor()||n.performance.isScreening()))),f.wc(2),f.fd("ngIf","screeningEventSeries"===n.environment.PURCHASE_SCHEDULE_SORT),f.wc(1),f.fd("ngIf","screen"===n.environment.PURCHASE_SCHEDULE_SORT),f.wc(3),f.Bd(n.moment(n.performance.screeningEvent.startDate).format("HH:mm")),f.wc(4),f.Bd(n.moment(n.performance.screeningEvent.endDate).format("HH:mm")),f.wc(3),f.fd("ngIf",n.performance.isOpenDoor()||n.performance.isScreening()),f.wc(1),f.fd("ngIf",n.performance.isOpenDoor("before")),f.wc(1),f.fd("ngIf",n.performance.isScreening("after")),f.wc(1),f.fd("ngIf",!n.performance.isInfinitetock()),f.wc(1),f.fd("ngIf",n.performance.isInfinitetock()),f.wc(2),f.Dd("",f.ad(20,14,"common.ticketing")," ",n.performance.screeningEvent.checkInCount,""),f.wc(3),f.Dd("",f.ad(23,16,"common.admission")," ",n.performance.screeningEvent.attendeeCount,""))},directives:[c.j,c.l],pipes:[g.c,v.a],styles:[".status[_ngcontent-%COMP%]{line-height:30px}.status[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}@media (max-width:767.98px){.text-overflow-ellipsis[_ngcontent-%COMP%]{overflow:auto;width:auto;white-space:normal}}"]});class ie{constructor(){this.select=new f.w,this.moment=d,this.environment=Object(l.a)()}ngOnInit(){}}ie.\u0275fac=function(e){return new(e||ie)},ie.\u0275cmp=f.Dc({type:ie,selectors:[["app-admission-performances"]],inputs:{screeningEventsGroup:"screeningEventsGroup"},outputs:{select:"select"},decls:5,vars:3,consts:[[1,"bg-white"],["class","p-3 bg-gray",4,"ngIf"],[1,"py-2","px-3","px-md-2","d-flex","flex-wrap"],["class","px-md-2 my-2",4,"ngFor","ngForOf"],[1,"p-3","bg-gray"],[1,"mb-2"],[1,"font-weight-bold","text-large"],[4,"ngIf"],[1,"d-flex","align-items-center","flex-wrap"],["class","text-small bg-dark-gray text-white py-1 px-2 mr-2",4,"ngIf"],["class","text-small bg-dark-gray text-white py-1 px-2 mr-2",4,"ngFor","ngForOf"],["class","text-small ml-auto",4,"ngIf"],[1,"text-small","bg-dark-gray","text-white","py-1","px-2","mr-2"],[1,"text-small","ml-auto"],[1,"mr-1"],[1,"px-md-2","my-2"],[1,"mb-3",3,"performance","select"]],template:function(e,n){1&e&&(f.Pc(0,"div",0),f.yd(1,ne,15,14,"div",1),f.yd(2,te,4,3,"div",1),f.Pc(3,"ul",2),f.yd(4,ce,2,1,"li",3),f.Oc(),f.Oc()),2&e&&(f.wc(1),f.fd("ngIf","screeningEventSeries"===n.environment.PURCHASE_SCHEDULE_SORT),f.wc(1),f.fd("ngIf","screen"===n.environment.PURCHASE_SCHEDULE_SORT),f.wc(2),f.fd("ngForOf",n.screeningEventsGroup.data))},directives:[c.l,c.k,W],pipes:[v.a,g.c],styles:["[_nghost-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:20%}@media (max-width:991.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:25%}}@media (max-width:767.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%}}"]});var se=function(e,n,t,c){return new(t||(t=Promise))((function(i,s){function o(e){try{r(c.next(e))}catch(n){s(n)}}function a(e){try{r(c.throw(e))}catch(n){s(n)}}function r(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,a)}r((c=c.apply(e,n||[])).next())}))};const oe=["datepicker"];function ae(e,n){if(1&e&&(f.Pc(0,"p",16),f.Ad(1),f.Zc(2,"formatDate"),f.Zc(3,"async"),f.Oc()),2&e){const e=f.Yc();var t;f.wc(1),f.Cd(" ",f.bd(2,1,null==(t=f.ad(3,4,e.admission))?null:t.scheduleDate,"YYYY/MM/DD (ddd)"),"")}}function re(e,n){1&e&&(f.Kc(0,"p",17),f.Zc(1,"translate")),2&e&&f.fd("innerHTML",f.ad(1,1,"admission.schedule.notfound"),f.td)}function de(e,n){if(1&e){const e=f.Qc();f.Pc(0,"app-admission-performances",18),f.Wc("select",(function(n){f.sd(e);return f.Yc().selectSchedule(n)})),f.Oc()}if(2&e){const e=n.$implicit;f.fd("screeningEventsGroup",e)}}const le=function(){return{dateInputFormat:"YYYY/MM/DD",adaptivePosition:!0,showWeekNumbers:!1}};class ue{constructor(e,n,t,c,i){this.store=e,this.router=n,this.localeService=t,this.actionService=c,this.masterService=i,this.moment=d}ngOnInit(){return se(this,void 0,void 0,(function*(){this.admission=this.store.pipe(Object(r.m)(m.a)),this.user=this.store.pipe(Object(r.m)(m.i)),this.isLoading=this.store.pipe(Object(r.m)(m.c)),this.screeningEventsGroup=[]}))}ngOnDestroy(){clearTimeout(this.updateTimer)}update(){void 0!==this.updateTimer&&clearTimeout(this.updateTimer);this.updateTimer=setTimeout(()=>{this.selectDate()},6e5)}selectDate(e){return se(this,void 0,void 0,(function*(){if(!(yield this.getLoading()))if(null==e)try{const e=(yield this.actionService.user.getData()).theater;if(void 0===e)return void this.router.navigate(["/error"]);void 0!==this.scheduleDate&&null!==this.scheduleDate||(this.scheduleDate=d().toDate());const n=d(this.scheduleDate).format("YYYY-MM-DD");this.actionService.admission.selectScheduleDate(n);const t=yield this.masterService.getSchedule({superEvent:{locationBranchCodes:[e.branchCode]},startFrom:d(n).toDate(),startThrough:d(n).add(1,"day").toDate()});this.screeningEventsGroup=T.a.Purchase.screeningEvents2ScreeningEventSeries({screeningEvents:t}),this.update()}catch(n){console.error(n),this.router.navigate(["/error"])}else this.scheduleDate=e}))}selectSchedule(e){return se(this,void 0,void 0,(function*(){try{yield this.actionService.admission.getScreeningEvent(e),this.router.navigate(["/admission/check"])}catch(n){console.error(n),this.router.navigate(["/error"])}}))}notSpecified(){this.actionService.admission.delete(),this.router.navigate(["/admission/check"])}setDatePicker(){this.user.subscribe(e=>{this.localeService.use(e.language)}).unsubscribe()}toggleDatepicker(){this.setDatePicker(),this.datepicker.toggle()}onShowPicker(e){T.a.Util.iOSDatepickerTapBugFix(e,[this.datepicker])}getLoading(){return se(this,void 0,void 0,(function*(){return new Promise(e=>{this.isLoading.subscribe(n=>{e(n)}).unsubscribe()})}))}}ue.\u0275fac=function(e){return new(e||ue)(f.Jc(r.b),f.Jc(s.b),f.Jc(M.d),f.Jc(u.a),f.Jc(u.d))},ue.\u0275cmp=f.Dc({type:ue,selectors:[["app-admission-schedule"]],viewQuery:function(e,n){var t;(1&e&&f.wd(oe,!0),2&e)&&(f.od(t=f.Xc())&&(n.datepicker=t.first))},decls:22,vars:17,consts:[[1,"contents-width","mx-auto","px-3","py-5"],[1,"text-large","mb-4","text-center","font-weight-bold"],[1,"mb-4","text-md-center",3,"innerHTML"],[1,"mb-3"],[1,"input-group"],["type","text","placeholder","Datepicker","bsDatepicker","","readonly","",1,"form-control",3,"ngModel","bsConfig","ngModelChange","bsValueChange","click","onShown"],["datepicker","bsDatepicker"],[1,"input-group-append","pointer",3,"click"],[1,"input-group-text"],[1,"fas","fa-caret-down"],["class","text-primary text-large mb-3",4,"ngIf"],["class","mb-3",3,"innerHTML",4,"ngIf"],[1,"mb-4"],["class","mb-3",3,"screeningEventsGroup","select",4,"ngFor","ngForOf"],[1,"buttons","mx-auto","text-center"],["type","button",1,"btn","btn-primary","btn-block","py-3","mb-3",3,"click"],[1,"text-primary","text-large","mb-3"],[1,"mb-3",3,"innerHTML"],[1,"mb-3",3,"screeningEventsGroup","select"]],template:function(e,n){if(1&e&&(f.Pc(0,"div",0),f.Pc(1,"h2",1),f.Ad(2),f.Zc(3,"translate"),f.Oc(),f.Kc(4,"p",2),f.Zc(5,"translate"),f.Pc(6,"div",3),f.Pc(7,"div",4),f.Pc(8,"input",5,6),f.Wc("ngModelChange",(function(e){return n.scheduleDate=e}))("bsValueChange",(function(e){return n.selectDate(e)}))("click",(function(){return n.setDatePicker()}))("onShown",(function(e){return n.onShowPicker(e)})),f.Oc(),f.Pc(10,"div",7),f.Wc("click",(function(){return n.toggleDatepicker()})),f.Pc(11,"span",8),f.Kc(12,"i",9),f.Oc(),f.Oc(),f.Oc(),f.Oc(),f.yd(13,ae,4,6,"p",10),f.Zc(14,"async"),f.yd(15,re,2,3,"p",11),f.Pc(16,"div",12),f.yd(17,de,1,1,"app-admission-performances",13),f.Oc(),f.Pc(18,"div",14),f.Pc(19,"button",15),f.Wc("click",(function(){return n.notSpecified()})),f.Ad(20),f.Zc(21,"translate"),f.Oc(),f.Oc(),f.Oc()),2&e){var t;const e=null==(t=f.ad(14,12,n.admission))?null:t.scheduleDate;f.wc(2),f.Bd(f.ad(3,8,"admission.schedule.title")),f.wc(2),f.fd("innerHTML",f.ad(5,10,"admission.schedule.read"),f.td),f.wc(4),f.fd("ngModel",n.scheduleDate)("bsConfig",f.hd(16,le)),f.wc(5),f.fd("ngIf",e),f.wc(2),f.fd("ngIf",0===n.screeningEventsGroup.length),f.wc(2),f.fd("ngForOf",n.screeningEventsGroup),f.wc(3),f.Bd(f.ad(21,14,"admission.schedule.next"))}},directives:[M.b,Y.a,M.a,Y.k,Y.n,_.b,c.l,c.k,ie],pipes:[g.c,c.b,h.a],styles:['.condition[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.schedule-slider[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;right:0;bottom:0;height:4px;background-color:#000;opacity:.3}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%], .schedule-slider[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]{width:27px;height:27px;background-image:url(/assets/images/icon/slider_arrow.svg);background-size:27px;margin-top:-13px}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%]{right:-38px}.schedule-slider[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]{left:-38px;transform:rotate(180deg)}']});const me=[{path:"",component:a.a,canActivate:[o.a,o.c],children:[{path:"schedule",component:ue},{path:"check",component:S}]}];class fe{}fe.\u0275mod=f.Hc({type:fe}),fe.\u0275inj=f.Gc({factory:function(e){return new(e||fe)},imports:[[s.d.forChild(me)],s.d]});class ge{}ge.\u0275mod=f.Hc({type:ge}),ge.\u0275inj=f.Gc({factory:function(e){return new(e||ge)},imports:[[c.c,fe,i.a]]})}}]);