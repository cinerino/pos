<div class="contents-width mx-auto px-3 py-5">
    <h2 class="text-large mb-4 text-center font-weight-bold">{{ 'tasks.ownershipinfoSearch.title' | translate }}</h2>
    <p class="mb-4 text-md-center" [innerHTML]="'tasks.ownershipinfoSearch.read' | translate"></p>
    <div class="conditions p-3 bg-white mb-4">
        <form (submit)="ownershipinfoSearch(true)">
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="fromDate"
                        class="mb-2">{{ 'tasks.ownershipinfoSearch.conditions.fromDate' | translate }}</label>
                    <input type="text" name="fromDate" id="fromDate" placeholder="YYYY/MM/DD" class="form-control"
                        #fromDate="bsDatepicker" bsDatepicker [(ngModel)]="conditions.fromDate"
                        [bsConfig]="{ dateInputFormat: 'YYYY/MM/DD', adaptivePosition: true, showWeekNumbers: false }"
                        readonly (onShown)="onShowPicker($event)" (click)="setDatePicker()">
                </div>
                <div class="form-group col-md-6">
                    <label for="toDate"
                        class="mb-2">{{ 'tasks.ownershipinfoSearch.conditions.toDate' | translate }}</label>
                    <input type="text" name="toDate" id="toDate" placeholder="YYYY/MM/DD" class="form-control"
                        #toDate="bsDatepicker" bsDatepicker [(ngModel)]="conditions.toDate"
                        [bsConfig]="{ dateInputFormat: 'YYYY/MM/DD', adaptivePosition: true, showWeekNumbers: false }"
                        readonly (onShown)="onShowPicker($event)" (click)="setDatePicker()">
                    <!-- <input type="date" class="form-control" name="toDate" id="toDate"
                        [(ngModel)]="conditions.toDate" placeholder="{{ moment().format('YYYY-MM-DD') }}"> -->
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-12">
                    <label for="ownershipinfoStatus" class="mb-2">{{ 'common.theater' | translate }}</label>
                    <div class="container mw-100">
                        <div class="row">
                            <div *ngFor="let seller of (master | async).sellers; let i = index"
                                class="form-check col-md-6 py-1">
                                <input class="form-check-input" type="checkbox" (change)="changeSeller(seller.id)"
                                    [checked]="isSellerChecked(seller.id)" [id]="seller.identifier" name="theaterIds">
                                <label class="form-check-label" [for]="seller.identifier">{{ seller.name.ja }}</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="buttons mx-auto text-center">
                <button type="submit" class="btn btn-primary btn-block py-3 mb-3"
                    [disabled]="isLoading | async">{{ 'tasks.ownershipinfoSearch.search' | translate }}</button>
                <button type="button" class="btn btn-outline-primary btn-block py-3"
                    (click)="searchConditionClear()">{{ 'tasks.ownershipinfoSearch.clear' | translate }}</button>
            </div>
        </form>
    </div>

    <p class="mb-4" *ngIf="table.length === 0">{{ 'tasks.ownershipinfoSearch.notfound' | translate }}</p>

    <div class="mb-4" *ngIf="table.length > 0">
        <div class="scroll-horizontal">
            <table class="table bg-white border text-small mb-0 border border-gray">
                <thead>
                    <tr>
                        <th scope="col">{{ 'common.theater' | translate }}</th>
                        <th class="text-right" scope="col">{{ 'tasks.ownershipinfoSearch.count' | translate }}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of table let index = index" [class.bg-light-gray]="index % 2 === 0">
                        <td class="align-middle">
                            <p>{{ data.seller.name.ja }}</p>
                        </td>
                        <td class="align-middle text-right">
                            <p>{{ data.count }}</p>
                        </td>
                    </tr>
                    <tr [class.bg-light-gray]="table.length % 2 === 0">
                        <td class="align-middle font-weight-bold">
                            <p>{{ 'tasks.ownershipinfoSearch.total' | translate }}</p>
                        </td>
                        <td class="align-middle text-right font-weight-bold">
                            <p>{{ getTotalCount() }}</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>


    </div>
    <div class="buttons mx-auto text-center">
        <button type="button" class="btn btn-link"
            routerLink="/tasks">{{ 'tasks.ownershipinfoSearch.prev' | translate }}</button>
    </div>
</div>